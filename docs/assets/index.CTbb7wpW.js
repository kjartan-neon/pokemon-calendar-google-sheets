var Rl=Object.defineProperty;var Fl=(t,e,l)=>e in t?Rl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var pt=(t,e,l)=>Fl(t,typeof e!="symbol"?e+"":e,l);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function l(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=l(s);fetch(s.href,r)}})();function W(){}function bl(t){return t()}function Ht(){return Object.create(null)}function ae(t){t.forEach(bl)}function wl(t){return typeof t=="function"}function _e(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let nt;function me(t,e){return t===e?!0:(nt||(nt=document.createElement("a")),nt.href=e,t===nt.href)}function Ol(t){return Object.keys(t).length===0}function Bl(t,...e){if(t==null){for(const n of e)n(void 0);return W}const l=t.subscribe(...e);return l.unsubscribe?()=>l.unsubscribe():l}function wt(t,e,l){t.$$.on_destroy.push(Bl(e,l))}function i(t,e){t.appendChild(e)}function M(t,e,l){t.insertBefore(e,l||null)}function T(t){t.parentNode&&t.parentNode.removeChild(t)}function Se(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function g(t){return document.createElement(t)}function A(t){return document.createTextNode(t)}function S(){return A(" ")}function It(){return A("")}function z(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function Cl(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function u(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function Sl(t){return t===""?null:+t}function zl(t){return Array.from(t.childNodes)}function I(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ke(t,e){t.value=e??""}function Ct(t,e,l,n){l==null?t.style.removeProperty(e):t.style.setProperty(e,l,"")}function ot(t,e,l){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e){s.selected=!0;return}}t.selectedIndex=-1}function H(t,e,l){t.classList.toggle(e,!!l)}function jl(t,e,{bubbles:l=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:l,cancelable:n})}let We;function Ue(t){We=t}function yl(){if(!We)throw new Error("Function called outside component initialization");return We}function Al(t){yl().$$.on_mount.push(t)}function at(){const t=yl();return(e,l,{cancelable:n=!1}={})=>{const s=t.$$.callbacks[e];if(s){const r=jl(e,l,{cancelable:n});return s.slice().forEach(o=>{o.call(t,r)}),!r.defaultPrevented}return!0}}function Yt(t,e){const l=t.$$.callbacks[e.type];l&&l.slice().forEach(n=>n.call(this,e))}const Pe=[],St=[];let Qe=[];const Vt=[],Hl=Promise.resolve();let yt=!1;function Yl(){yt||(yt=!0,Hl.then(El))}function At(t){Qe.push(t)}const _t=new Set;let De=0;function El(){if(De!==0)return;const t=We;do{try{for(;De<Pe.length;){const e=Pe[De];De++,Ue(e),Vl(e.$$)}}catch(e){throw Pe.length=0,De=0,e}for(Ue(null),Pe.length=0,De=0;St.length;)St.pop()();for(let e=0;e<Qe.length;e+=1){const l=Qe[e];_t.has(l)||(_t.add(l),l())}Qe.length=0}while(Pe.length);for(;Vt.length;)Vt.pop()();yt=!1,_t.clear(),Ue(t)}function Vl(t){if(t.fragment!==null){t.update(),ae(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(At)}}function Ul(t){const e=[],l=[];Qe.forEach(n=>t.indexOf(n)===-1?e.push(n):l.push(n)),l.forEach(n=>n()),Qe=e}const st=new Set;let Ce;function Il(){Ce={r:0,c:[],p:Ce}}function Tl(){Ce.r||ae(Ce.c),Ce=Ce.p}function ie(t,e){t&&t.i&&(st.delete(t),t.i(e))}function ve(t,e,l,n){if(t&&t.o){if(st.has(t))return;st.add(t),Ce.c.push(()=>{st.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}else n&&n()}function se(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Fe(t){t&&t.c()}function ye(t,e,l){const{fragment:n,after_update:s}=t.$$;n&&n.m(e,l),At(()=>{const r=t.$$.on_mount.map(bl).filter(wl);t.$$.on_destroy?t.$$.on_destroy.push(...r):ae(r),t.$$.on_mount=[]}),s.forEach(At)}function Ae(t,e){const l=t.$$;l.fragment!==null&&(Ul(l.after_update),ae(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function Kl(t,e){t.$$.dirty[0]===-1&&(Pe.push(t),Yl(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ee(t,e,l,n,s,r,o=null,c=[-1]){const f=We;Ue(t);const a=t.$$={fragment:null,ctx:[],props:r,update:W,not_equal:s,bound:Ht(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:Ht(),dirty:c,skip_bound:!1,root:e.target||f.$$.root};o&&o(a.root);let m=!1;if(a.ctx=l?l(t,e.props||{},(d,v,...h)=>{const p=h.length?h[0]:v;return a.ctx&&s(a.ctx[d],a.ctx[d]=p)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](p),m&&Kl(t,d)),v}):[],a.update(),m=!0,ae(a.before_update),a.fragment=n?n(a.ctx):!1,e.target){if(e.hydrate){const d=zl(e.target);a.fragment&&a.fragment.l(d),d.forEach(T)}else a.fragment&&a.fragment.c();e.intro&&ie(t.$$.fragment),ye(t,e.target,e.anchor),El()}Ue(f)}class Ie{constructor(){pt(this,"$$");pt(this,"$$set")}$destroy(){Ae(this,1),this.$destroy=W}$on(e,l){if(!wl(l))return W;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const s=n.indexOf(l);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!Ol(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Wl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Wl);const Ll="https://api.tcgdex.net/v2/en";function Ml(t,e){const l=t.split("-")[1];return`https://assets.tcgdex.net/en/${Jl(e)}/${e}/${l}/high.webp`}function Jl(t){return t.startsWith("swsh")?"swsh":t.startsWith("sv")?"sv":t.startsWith("me")?"base":"swsh"}async function Et(t){try{const e=await fetch(`${Ll}/sets/${t}`);if(!e.ok)throw new Error("Failed to fetch cards from set");return((await e.json()).cards||[]).map(s=>({id:s.id,localId:s.localId,name:s.name,image:Ml(s.id,t)}))}catch(e){throw console.error("Error fetching cards from set:",e),e}}async function Gl(t,e){try{const l=await fetch(`${Ll}/cards/${t}`);if(!l.ok)throw new Error("Failed to fetch card details");return{...await l.json(),image:Ml(t,e)}}catch(l){throw console.error("Error fetching card details:",l),l}}function Xl(t){const e=Math.floor(Math.random()*t.length);return t[e]}const Tt="pokemon-tcg-collection",ql="2.0";function Zl(){return{totalQuestions:0,correctAnswers:0,incorrectAnswers:0,totalHpDefeated:0}}function kt(){return{cards:[],stats:Zl(),version:ql}}function ge(){try{const t=localStorage.getItem(Tt);if(!t)return kt();const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?(console.warn("Invalid collection format, resetting..."),kt()):(e.stats.totalHpDefeated||(e.stats.totalHpDefeated=0),e.currentStreak||(e.currentStreak=0),e.unlockedRareSets||(e.unlockedRareSets={}),e)}catch(t){return console.error("Error loading collection from local storage:",t),kt()}}function Re(t){try{const e={...t,version:ql};localStorage.setItem(Tt,JSON.stringify(e))}catch(e){throw console.error("Error saving collection to local storage:",e),new Error("Failed to save collection")}}function $l(t){try{const e=ge();return e.cards.some(n=>n.id===t.id)?!1:(e.cards.push(t),Re(e),!0)}catch(e){return console.error("Error adding card to collection:",e),!1}}function xl(t,e){try{const l=ge();l.stats.totalQuestions++,t?(l.stats.correctAnswers++,e&&(l.stats.totalHpDefeated+=e)):l.stats.incorrectAnswers++,Re(l)}catch(l){console.error("Error updating stats:",l)}}function en(){try{localStorage.removeItem(Tt)}catch(t){console.error("Error clearing collection:",t)}}function tn(){const t=ge();return JSON.stringify(t,null,2)}function ln(t){try{const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?{success:!1,error:"Invalid collection format"}:!e.stats.totalQuestions===void 0||!e.stats.correctAnswers===void 0||!e.stats.incorrectAnswers===void 0?{success:!1,error:"Invalid stats format"}:(Re(e),{success:!0})}catch(e){return console.error("Error importing collection:",e),{success:!1,error:"Failed to parse JSON file"}}}function nn(){const t=Math.floor(Math.random()*50)+10,e=Math.floor(Math.random()*50)+10,l=["+","-"],n=l[Math.floor(Math.random()*l.length)];let s,r;if(n==="+")s=t+e,r=`What is ${t} + ${e}?`;else{s=t+e;const o=s;s=t,r=`What is ${o} - ${e}?`}return{question:r,answer:s}}function sn(t,e){if(!t)return null;let l,n,s=!1;if(t.hp&&t.hp>0){s=!0;const r=[10,20,30,40,50,60,60,80,120,300][Math.floor(Math.random()*5)];n=Math.ceil(t.hp/r),l=e.damageQuestion(r)}else{const r=nn();l=r.question,n=r.answer}return{card:t,questionText:l,correctAnswer:n,isPokemon:s}}function rn(t,e){return e===t.correctAnswer}const Ne=[];function Dl(t,e=W){let l;const n=new Set;function s(c){if(_e(t,c)&&(t=c,l)){const f=!Ne.length;for(const a of n)a[1](),Ne.push(a,t);if(f){for(let a=0;a<Ne.length;a+=2)Ne[a][0](Ne[a+1]);Ne.length=0}}}function r(c){s(c(t))}function o(c,f=W){const a=[c,f];return n.add(a),n.size===1&&(l=e(s,r)||W),c(t),()=>{n.delete(a),n.size===0&&l&&(l(),l=null)}}return{set:s,update:r,subscribe:o}}const bt=[{id:"swsh3",name:"Sword & Shield - Darkness Ablaze"},{id:"sv05",name:"Scarlet & Violet - Temporal Forces"},{id:"sv06.5",name:"Scarlet & Violet - Shrouded Fable"}],Nl="tcg-math-settings";function on(){return{language:"en",selectedSet:"swsh3"}}function Lt(){try{const t=localStorage.getItem(Nl);if(t){const e=JSON.parse(t);return{language:e.language||"en",selectedSet:e.selectedSet||"swsh3"}}}catch(t){console.error("Error loading settings:",t)}return on()}function Pl(t){try{localStorage.setItem(Nl,JSON.stringify(t))}catch(e){console.error("Error saving settings:",e)}}const Ql=Lt(),rt=Dl(Ql.language),it=Dl(Ql.selectedSet);rt.subscribe(t=>{const e=Lt();Pl({...e,language:t})});it.subscribe(t=>{const e=Lt();Pl({...e,selectedSet:t})});const an={en:{appTitle:"16 K",quizTitle:"TCG Math Challenge",playQuiz:"Play Quiz",myCollection:"My Collection",selectSet:"Select Set",selectLanguage:"Language",setInfo:"Collecting Set",enterAnswer:"Enter your answer",submitAnswer:"Submit Answer",nextQuestion:"Next Question",correct:"Correct!",notQuite:"Not quite!",correctMessage:"Great job! The answer was",incorrectMessage:"You answered",encouragement:"Try again with the next question!",youWonThisCard:"You won this card!",cardsCollected:"Cards Collected",questionsAnswered:"Questions Answered",correctAnswers:"Correct Answers",accuracy:"Accuracy",noCardsYet:"No cards yet!",noCardsDescription:"Answer questions correctly to start building your collection.",exportBackup:"Export Backup",importBackup:"Import Backup",clearThisSet:"Clear This Set",clearCollectionTitle:"Clear Collection?",clearCollectionMessage:"Are you sure you want to clear your entire collection? This action cannot be undone.",cancel:"Cancel",clearCollection:"Clear Collection",collectionExported:"Collection exported successfully!",collectionImported:"Collection imported successfully!",collectionCleared:"Collection cleared successfully!",exportFailed:"Failed to export collection",importFailed:"Failed to import collection",clearFailed:"Failed to clear collection",hit:"hit",hits:"hits",loading:"Loading new question...",yourCollection:"Your Collection",language:"Language",damageQuestion:t=>`Your PokÃ©mon deals ${t} damage each turn. How many turns does it take to defeat this PokÃ©mon?`},no:{appTitle:"16 K",quizTitle:"TCG Matte Utfordring",playQuiz:"Spill Quiz",myCollection:"Min Samling",selectSet:"Velg Sett",selectLanguage:"SprÃ¥k",setInfo:"Samler Sett",enterAnswer:"Skriv inn svaret ditt",submitAnswer:"Send Inn Svar",nextQuestion:"Neste SpÃ¸rsmÃ¥l",correct:"Riktig!",notQuite:"Ikke helt!",correctMessage:"Bra jobbet! Svaret var",incorrectMessage:"Du svarte",encouragement:"PrÃ¸v igjen med neste spÃ¸rsmÃ¥l!",youWonThisCard:"Du vant dette kortet!",cardsCollected:"Kort Samlet",questionsAnswered:"SpÃ¸rsmÃ¥l Besvart",correctAnswers:"Riktige Svar",accuracy:"NÃ¸yaktighet",noCardsYet:"Ingen kort ennÃ¥!",noCardsDescription:"Svar riktig pÃ¥ spÃ¸rsmÃ¥l for Ã¥ begynne Ã¥ bygge samlingen din.",exportBackup:"Eksporter Backup",importBackup:"Importer Backup",clearThisSet:"TÃ¸m Dette Settet",clearCollectionTitle:"TÃ¸m Samling?",clearCollectionMessage:"Er du sikker pÃ¥ at du vil tÃ¸mme hele samlingen din? Denne handlingen kan ikke angres.",cancel:"Avbryt",clearCollection:"TÃ¸m Samling",collectionExported:"Samling eksportert!",collectionImported:"Samling importert!",collectionCleared:"Samling tÃ¸mt!",exportFailed:"Kunne ikke eksportere samling",importFailed:"Kunne ikke importere samling",clearFailed:"Kunne ikke tÃ¸mme samling",hit:"treff",hits:"treff",loading:"Laster nytt spÃ¸rsmÃ¥l...",yourCollection:"Din Samling",language:"SprÃ¥k",damageQuestion:t=>`Din PokÃ©mon gjÃ¸r ${t} skade hver runde. Hvor mange runder tar det Ã¥ beseire denne PokÃ©monen?`}};function cn(t){return an[t]}function Ut(t,e,l){const n=t.slice();return n[3]=e[l],n}function Kt(t,e,l){const n=t.slice();return n[6]=e[l],n}function Wt(t){let e,l,n,s,r=t[0].hp+"",o;return{c(){e=g("div"),l=g("span"),l.textContent="HP",n=S(),s=g("span"),o=A(r),u(l,"class","hp-label svelte-2rdllh"),u(s,"class","hp-value svelte-2rdllh"),u(e,"class","card-hp svelte-2rdllh")},m(c,f){M(c,e,f),i(e,l),i(e,n),i(e,s),i(s,o)},p(c,f){f&1&&r!==(r=c[0].hp+"")&&I(o,r)},d(c){c&&T(e)}}}function Jt(t){let e,l=se(t[0].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=Gt(Kt(t,l,s));return{c(){e=g("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","card-types svelte-2rdllh")},m(s,r){M(s,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,r){if(r&1){l=se(s[0].types);let o;for(o=0;o<l.length;o+=1){const c=Kt(s,l,o);n[o]?n[o].p(c,r):(n[o]=Gt(c),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(s){s&&T(e),Se(n,s)}}}function Gt(t){let e,l=t[6]+"",n;return{c(){e=g("span"),n=A(l),u(e,"class","type-badge svelte-2rdllh")},m(s,r){M(s,e,r),i(e,n)},p(s,r){r&1&&l!==(l=s[6]+"")&&I(n,l)},d(s){s&&T(e)}}}function Xt(t){let e,l,n,s=se(t[0].attacks),r=[];for(let o=0;o<s.length;o+=1)r[o]=$t(Ut(t,s,o));return{c(){e=g("div"),l=g("h4"),l.textContent="Attacks:",n=S();for(let o=0;o<r.length;o+=1)r[o].c();u(l,"class","svelte-2rdllh"),u(e,"class","card-attacks svelte-2rdllh")},m(o,c){M(o,e,c),i(e,l),i(e,n);for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(e,null)},p(o,c){if(c&5){s=se(o[0].attacks);let f;for(f=0;f<s.length;f+=1){const a=Ut(o,s,f);r[f]?r[f].p(a,c):(r[f]=$t(a),r[f].c(),r[f].m(e,null))}for(;f<r.length;f+=1)r[f].d(1);r.length=s.length}},d(o){o&&T(e),Se(r,o)}}}function Zt(t){let e,l=t[3].damage+"",n;return{c(){e=g("span"),n=A(l),u(e,"class","attack-damage svelte-2rdllh")},m(s,r){M(s,e,r),i(e,n)},p(s,r){r&1&&l!==(l=s[3].damage+"")&&I(n,l)},d(s){s&&T(e)}}}function $t(t){let e,l,n=t[3].name+"",s,r,o,c=t[3].damage&&Zt(t);return{c(){e=g("div"),l=g("span"),s=A(n),r=S(),c&&c.c(),o=S(),u(l,"class","attack-name svelte-2rdllh"),u(e,"class","attack svelte-2rdllh"),H(e,"highlighted",t[2]===t[3].name)},m(f,a){M(f,e,a),i(e,l),i(l,s),i(e,r),c&&c.m(e,null),i(e,o)},p(f,a){a&1&&n!==(n=f[3].name+"")&&I(s,n),f[3].damage?c?c.p(f,a):(c=Zt(f),c.c(),c.m(e,o)):c&&(c.d(1),c=null),a&5&&H(e,"highlighted",f[2]===f[3].name)},d(f){f&&T(e),c&&c.d()}}}function un(t){let e,l,n,s,r,o,c,f,a=t[0].name+"",m,d,v,h,p=t[0].hp&&Wt(t),_=t[0].types&&t[0].types.length>0&&Jt(t),k=t[1]&&t[0].attacks&&t[0].attacks.length>0&&Xt(t);return{c(){e=g("div"),l=g("div"),n=g("img"),o=S(),c=g("div"),f=g("h3"),m=A(a),d=S(),p&&p.c(),v=S(),_&&_.c(),h=S(),k&&k.c(),me(n.src,s=t[0].image)||u(n,"src",s),u(n,"alt",r=t[0].name),u(n,"class","svelte-2rdllh"),u(l,"class","card-image svelte-2rdllh"),u(f,"class","card-name svelte-2rdllh"),u(c,"class","card-info svelte-2rdllh"),u(e,"class","pokemon-card svelte-2rdllh")},m(E,y){M(E,e,y),i(e,l),i(l,n),i(e,o),i(e,c),i(c,f),i(f,m),i(c,d),p&&p.m(c,null),i(c,v),_&&_.m(c,null),i(c,h),k&&k.m(c,null)},p(E,[y]){y&1&&!me(n.src,s=E[0].image)&&u(n,"src",s),y&1&&r!==(r=E[0].name)&&u(n,"alt",r),y&1&&a!==(a=E[0].name+"")&&I(m,a),E[0].hp?p?p.p(E,y):(p=Wt(E),p.c(),p.m(c,v)):p&&(p.d(1),p=null),E[0].types&&E[0].types.length>0?_?_.p(E,y):(_=Jt(E),_.c(),_.m(c,h)):_&&(_.d(1),_=null),E[1]&&E[0].attacks&&E[0].attacks.length>0?k?k.p(E,y):(k=Xt(E),k.c(),k.m(c,null)):k&&(k.d(1),k=null)},i:W,o:W,d(E){E&&T(e),p&&p.d(),_&&_.d(),k&&k.d()}}}function fn(t,e,l){let{card:n}=e,{showAttacks:s=!1}=e,{highlightedAttack:r=null}=e;return t.$$set=o=>{"card"in o&&l(0,n=o.card),"showAttacks"in o&&l(1,s=o.showAttacks),"highlightedAttack"in o&&l(2,r=o.highlightedAttack)},[n,s,r]}class dn extends Ie{constructor(e){super(),Ee(this,e,fn,un,_e,{card:0,showAttacks:1,highlightedAttack:2})}}function gn(t){let e,l,n,s,r,o,c=t[0].questionText+"",f,a,m,d,v,h,p,_=t[1].submitAnswer+"",k,E,y,D,q;return n=new dn({props:{card:t[0].card}}),{c(){e=g("div"),l=g("div"),Fe(n.$$.fragment),s=S(),r=g("div"),o=g("h3"),f=A(c),a=S(),m=g("div"),d=g("input"),h=S(),p=g("button"),k=A(_),u(l,"class","card-display svelte-1ohble"),u(o,"class","question-text svelte-1ohble"),u(d,"type","number"),u(d,"placeholder",v=t[1].enterAnswer),u(d,"class","answer-input svelte-1ohble"),u(p,"class","submit-btn btn-primary svelte-1ohble"),p.disabled=E=!t[2],u(m,"class","answer-input-container svelte-1ohble"),u(r,"class","question-container svelte-1ohble"),u(e,"class","quiz-view svelte-1ohble")},m(C,b){M(C,e,b),i(e,l),ye(n,l,null),i(e,s),i(e,r),i(r,o),i(o,f),i(r,a),i(r,m),i(m,d),Ke(d,t[2]),i(m,h),i(m,p),i(p,k),y=!0,D||(q=[z(d,"input",t[6]),z(d,"keypress",t[4]),z(p,"click",t[3])],D=!0)},p(C,[b]){const R={};b&1&&(R.card=C[0].card),n.$set(R),(!y||b&1)&&c!==(c=C[0].questionText+"")&&I(f,c),(!y||b&2&&v!==(v=C[1].enterAnswer))&&u(d,"placeholder",v),b&4&&Sl(d.value)!==C[2]&&Ke(d,C[2]),(!y||b&2)&&_!==(_=C[1].submitAnswer+"")&&I(k,_),(!y||b&4&&E!==(E=!C[2]))&&(p.disabled=E)},i(C){y||(ie(n.$$.fragment,C),y=!0)},o(C){ve(n.$$.fragment,C),y=!1},d(C){C&&T(e),Ae(n),D=!1,ae(q)}}}function mn(t,e,l){let{question:n}=e,{t:s}=e,{currentSet:r}=e;const o=at();let c="";function f(){const d=parseInt(c,10);isNaN(d)||o("answer",d)}function a(d){d.key==="Enter"&&f()}function m(){c=Sl(this.value),l(2,c)}return t.$$set=d=>{"question"in d&&l(0,n=d.question),"t"in d&&l(1,s=d.t),"currentSet"in d&&l(5,r=d.currentSet)},[n,s,c,f,a,r,m]}class vn extends Ie{constructor(e){super(),Ee(this,e,mn,gn,_e,{question:0,t:1,currentSet:5})}}function hn(t){let e,l,n,s=t[4].notQuite+"",r,o,c,f=t[4].incorrectMessage+"",a,m,d,v,h,p=t[4].correctMessage.toLowerCase()+"",_,k,E,y,D,q,C,b,R=t[4].encouragement+"",Y,Q=t[5]&&t[6]>0&&xt(t);return{c(){e=g("div"),e.textContent="âœ—",l=S(),n=g("h2"),r=A(s),o=S(),c=g("p"),a=A(f),m=S(),d=g("strong"),v=A(t[2]),h=A(", "),_=A(p),k=S(),E=g("strong"),y=A(t[1]),D=A("."),q=S(),Q&&Q.c(),C=S(),b=g("p"),Y=A(R),u(e,"class","result-icon error svelte-1v74pgf"),u(n,"class","result-title svelte-1v74pgf"),u(d,"class","svelte-1v74pgf"),u(E,"class","svelte-1v74pgf"),u(c,"class","result-message svelte-1v74pgf"),u(b,"class","encouragement svelte-1v74pgf")},m(N,B){M(N,e,B),M(N,l,B),M(N,n,B),i(n,r),M(N,o,B),M(N,c,B),i(c,a),i(c,m),i(c,d),i(d,v),i(c,h),i(c,_),i(c,k),i(c,E),i(E,y),i(c,D),M(N,q,B),Q&&Q.m(N,B),M(N,C,B),M(N,b,B),i(b,Y)},p(N,B){B&16&&s!==(s=N[4].notQuite+"")&&I(r,s),B&16&&f!==(f=N[4].incorrectMessage+"")&&I(a,f),B&4&&I(v,N[2]),B&16&&p!==(p=N[4].correctMessage.toLowerCase()+"")&&I(_,p),B&2&&I(y,N[1]),N[5]&&N[6]>0?Q?Q.p(N,B):(Q=xt(N),Q.c(),Q.m(C.parentNode,C)):Q&&(Q.d(1),Q=null),B&16&&R!==(R=N[4].encouragement+"")&&I(Y,R)},d(N){N&&(T(e),T(l),T(n),T(o),T(c),T(q),T(C),T(b)),Q&&Q.d(N)}}}function pn(t){let e,l,n,s=t[4].correct+"",r,o,c,f=t[4].correctMessage+"",a,m,d,v,h,p=(t[1]===1?t[4].hit:t[4].hits)+"",_,k,E,y,D,q=t[5]&&!t[3]&&el(t),C=t[3]&&tl(t);return{c(){e=g("div"),e.textContent="âœ“",l=S(),n=g("h2"),r=A(s),o=S(),c=g("p"),a=A(f),m=S(),d=g("strong"),v=A(t[1]),h=S(),_=A(p),k=A("!"),E=S(),q&&q.c(),y=S(),C&&C.c(),D=It(),u(e,"class","result-icon success svelte-1v74pgf"),u(n,"class","result-title svelte-1v74pgf"),u(d,"class","svelte-1v74pgf"),u(c,"class","result-message svelte-1v74pgf")},m(b,R){M(b,e,R),M(b,l,R),M(b,n,R),i(n,r),M(b,o,R),M(b,c,R),i(c,a),i(c,m),i(c,d),i(d,v),i(c,h),i(c,_),i(c,k),M(b,E,R),q&&q.m(b,R),M(b,y,R),C&&C.m(b,R),M(b,D,R)},p(b,R){R&16&&s!==(s=b[4].correct+"")&&I(r,s),R&16&&f!==(f=b[4].correctMessage+"")&&I(a,f),R&2&&I(v,b[1]),R&18&&p!==(p=(b[1]===1?b[4].hit:b[4].hits)+"")&&I(_,p),b[5]&&!b[3]?q?q.p(b,R):(q=el(b),q.c(),q.m(y.parentNode,y)):q&&(q.d(1),q=null),b[3]?C?C.p(b,R):(C=tl(b),C.c(),C.m(D.parentNode,D)):C&&(C.d(1),C=null)},d(b){b&&(T(e),T(l),T(n),T(o),T(c),T(E),T(y),T(D)),q&&q.d(b),C&&C.d(b)}}}function xt(t){let e,l=t[4].language==="SprÃ¥k"?"Streak reset! Try again.":"Rekke tilbakestilt! PrÃ¸v igjen.",n;return{c(){e=g("p"),n=A(l),u(e,"class","streak-lost svelte-1v74pgf")},m(s,r){M(s,e,r),i(e,n)},p(s,r){r&16&&l!==(l=s[4].language==="SprÃ¥k"?"Streak reset! Try again.":"Rekke tilbakestilt! PrÃ¸v igjen.")&&I(n,l)},d(s){s&&T(e)}}}function el(t){let e,l,n,s,r,o,c;function f(d,v){return d[7]===1?kn:_n}let a=f(t),m=a(t);return{c(){e=g("div"),l=g("p"),m.c(),n=S(),s=g("div"),r=g("div"),o=S(),c=g("div"),u(l,"class","streak-text svelte-1v74pgf"),u(r,"class","streak-dot svelte-1v74pgf"),H(r,"filled",t[7]>=1),u(c,"class","streak-dot svelte-1v74pgf"),H(c,"filled",t[7]>=2),u(s,"class","streak-progress svelte-1v74pgf"),u(e,"class","streak-info svelte-1v74pgf")},m(d,v){M(d,e,v),i(e,l),m.m(l,null),i(e,n),i(e,s),i(s,r),i(s,o),i(s,c)},p(d,v){a===(a=f(d))&&m?m.p(d,v):(m.d(1),m=a(d),m&&(m.c(),m.m(l,null))),v&128&&H(r,"filled",d[7]>=1),v&128&&H(c,"filled",d[7]>=2)},d(d){d&&T(e),m.d()}}}function _n(t){let e=t[4].language==="SprÃ¥k"?"Get 2 correct answers to win this rare card!":"FÃ¥ 2 riktige svar for Ã¥ vinne dette sjeldne kortet!",l;return{c(){l=A(e)},m(n,s){M(n,l,s)},p(n,s){s&16&&e!==(e=n[4].language==="SprÃ¥k"?"Get 2 correct answers to win this rare card!":"FÃ¥ 2 riktige svar for Ã¥ vinne dette sjeldne kortet!")&&I(l,e)},d(n){n&&T(l)}}}function kn(t){let e=t[4].language==="SprÃ¥k"?"One more correct to win this card!":"Ã‰n til riktig for Ã¥ vinne dette kortet!",l;return{c(){l=A(e)},m(n,s){M(n,l,s)},p(n,s){s&16&&e!==(e=n[4].language==="SprÃ¥k"?"One more correct to win this card!":"Ã‰n til riktig for Ã¥ vinne dette kortet!")&&I(l,e)},d(n){n&&T(l)}}}function tl(t){let e,l,n=t[4].youWonThisCard+"",s,r,o,c,f,a,m,d,v,h=t[3].name+"",p;return{c(){e=g("div"),l=g("h3"),s=A(n),r=S(),o=g("div"),c=g("div"),f=g("img"),d=S(),v=g("span"),p=A(h),u(l,"class","svelte-1v74pgf"),me(f.src,a=t[3].image)||u(f,"src",a),u(f,"alt",m=t[3].name),u(f,"class","svelte-1v74pgf"),u(v,"class","card-name svelte-1v74pgf"),u(c,"class","mini-card svelte-1v74pgf"),u(o,"class","cards-grid svelte-1v74pgf"),u(e,"class","won-cards svelte-1v74pgf")},m(_,k){M(_,e,k),i(e,l),i(l,s),i(e,r),i(e,o),i(o,c),i(c,f),i(c,d),i(c,v),i(v,p)},p(_,k){k&16&&n!==(n=_[4].youWonThisCard+"")&&I(s,n),k&8&&!me(f.src,a=_[3].image)&&u(f,"src",a),k&8&&m!==(m=_[3].name)&&u(f,"alt",m),k&8&&h!==(h=_[3].name+"")&&I(p,h)},d(_){_&&T(e)}}}function bn(t){let e,l,n,s,r=t[4].nextQuestion+"",o,c,f;function a(v,h){return v[0]?pn:hn}let m=a(t),d=m(t);return{c(){e=g("div"),l=g("div"),d.c(),n=S(),s=g("button"),o=A(r),u(l,"class","result-card svelte-1v74pgf"),H(l,"correct",t[0]),H(l,"incorrect",!t[0]),u(s,"class","next-btn btn-primary svelte-1v74pgf"),u(e,"class","result-view svelte-1v74pgf")},m(v,h){M(v,e,h),i(e,l),d.m(l,null),i(e,n),i(e,s),i(s,o),c||(f=z(s,"click",t[8]),c=!0)},p(v,[h]){m===(m=a(v))&&d?d.p(v,h):(d.d(1),d=m(v),d&&(d.c(),d.m(l,null))),h&1&&H(l,"correct",v[0]),h&1&&H(l,"incorrect",!v[0]),h&16&&r!==(r=v[4].nextQuestion+"")&&I(o,r)},i:W,o:W,d(v){v&&T(e),d.d(),c=!1,f()}}}function wn(t,e,l){let{isCorrect:n}=e,{correctAnswer:s}=e,{userAnswer:r}=e,{wonCard:o}=e,{t:c}=e,{needsStreak:f=!1}=e,{streakProgress:a=0}=e,{currentStreak:m=0}=e;const d=at();function v(){d("next")}return t.$$set=h=>{"isCorrect"in h&&l(0,n=h.isCorrect),"correctAnswer"in h&&l(1,s=h.correctAnswer),"userAnswer"in h&&l(2,r=h.userAnswer),"wonCard"in h&&l(3,o=h.wonCard),"t"in h&&l(4,c=h.t),"needsStreak"in h&&l(5,f=h.needsStreak),"streakProgress"in h&&l(6,a=h.streakProgress),"currentStreak"in h&&l(7,m=h.currentStreak)},[n,s,r,o,c,f,a,m,v]}class Cn extends Ie{constructor(e){super(),Ee(this,e,wn,bn,_e,{isCorrect:0,correctAnswer:1,userAnswer:2,wonCard:3,t:4,needsStreak:5,streakProgress:6,currentStreak:7})}}function Sn(){try{const t=tn(),e=new Blob([t],{type:"application/json"}),l=URL.createObjectURL(e),n=document.createElement("a");n.href=l,n.download=`pokemon-collection-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(l)}catch(t){throw console.error("Error downloading backup:",t),new Error("Failed to download backup")}}function yn(t){return new Promise(e=>{const l=new FileReader;l.onload=n=>{var s;try{const r=(s=n.target)==null?void 0:s.result,o=ln(r);e(o)}catch(r){console.error("Error reading file:",r),e({success:!1,error:"Failed to read file"})}},l.onerror=()=>{e({success:!1,error:"Failed to read file"})},l.readAsText(t)})}function ll(t,e,l){const n=t.slice();return n[33]=e[l],n}function nl(t,e,l){const n=t.slice();return n[36]=e[l],n}function sl(t,e,l){const n=t.slice();return n[33]=e[l],n}function rl(t,e,l){const n=t.slice();return n[36]=e[l],n}function An(t){let e=t[1].language==="SprÃ¥k"?`Defeat ${t[10]>0?t[10].toLocaleString():0} HP to unlock 5 rare cards`:`Beseir ${t[10]>0?t[10].toLocaleString():0} HP for Ã¥ lÃ¥se opp 5 sjeldne kort`,l;return{c(){l=A(e)},m(n,s){M(n,l,s)},p(n,s){s[0]&1026&&e!==(e=n[1].language==="SprÃ¥k"?`Defeat ${n[10]>0?n[10].toLocaleString():0} HP to unlock 5 rare cards`:`Beseir ${n[10]>0?n[10].toLocaleString():0} HP for Ã¥ lÃ¥se opp 5 sjeldne kort`)&&I(l,e)},d(n){n&&T(l)}}}function En(t){let e=t[1].language==="SprÃ¥k"?"Rare cards unlocked!":"Sjeldne kort lÃ¥st opp!",l;return{c(){l=A(e)},m(n,s){M(n,l,s)},p(n,s){s[0]&2&&e!==(e=n[1].language==="SprÃ¥k"?"Rare cards unlocked!":"Sjeldne kort lÃ¥st opp!")&&I(l,e)},d(n){n&&T(l)}}}function ol(t){let e,l;return{c(){e=g("div"),l=g("div"),u(l,"class","hp-progress-fill svelte-1c2fvge"),Ct(l,"width",t[8]+"%"),u(e,"class","hp-progress-bar svelte-1c2fvge")},m(n,s){M(n,e,s),i(e,l)},p(n,s){s[0]&256&&Ct(l,"width",n[8]+"%")},d(n){n&&T(e)}}}function il(t){let e,l,n,s,r,o,c;function f(){return t[24](t[36])}return{c(){e=g("button"),l=g("img"),r=S(),me(l.src,n=t[36].image)||u(l,"src",n),u(l,"alt",s=t[36].name),u(l,"class","svelte-1c2fvge"),H(l,"locked",!t[9]),u(e,"class","rare-thumbnail svelte-1c2fvge"),H(e,"unlocked",t[9])},m(a,m){M(a,e,m),i(e,l),i(e,r),o||(c=z(e,"click",f),o=!0)},p(a,m){t=a,m[0]&16&&!me(l.src,n=t[36].image)&&u(l,"src",n),m[0]&16&&s!==(s=t[36].name)&&u(l,"alt",s),m[0]&512&&H(l,"locked",!t[9]),m[0]&512&&H(e,"unlocked",t[9])},d(a){a&&T(e),o=!1,c()}}}function In(t){let e,l=se(t[0].cards),n=[];for(let s=0;s<l.length;s+=1)n[s]=fl(nl(t,l,s));return{c(){e=g("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","cards-grid svelte-1c2fvge")},m(s,r){M(s,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,r){if(r[0]&524289){l=se(s[0].cards);let o;for(o=0;o<l.length;o+=1){const c=nl(s,l,o);n[o]?n[o].p(c,r):(n[o]=fl(c),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(s){s&&T(e),Se(n,s)}}}function Tn(t){let e,l,n,s,r=t[1].noCardsYet+"",o,c,f,a=t[1].noCardsDescription+"",m;return{c(){e=g("div"),l=g("div"),l.textContent="ðŸ“¦",n=S(),s=g("h3"),o=A(r),c=S(),f=g("p"),m=A(a),u(l,"class","empty-icon svelte-1c2fvge"),u(s,"class","svelte-1c2fvge"),u(f,"class","svelte-1c2fvge"),u(e,"class","empty-state svelte-1c2fvge")},m(d,v){M(d,e,v),i(e,l),i(e,n),i(e,s),i(s,o),i(e,c),i(e,f),i(f,m)},p(d,v){v[0]&2&&r!==(r=d[1].noCardsYet+"")&&I(o,r),v[0]&2&&a!==(a=d[1].noCardsDescription+"")&&I(m,a)},d(d){d&&T(e)}}}function al(t){let e,l,n=t[36].hp+"",s;return{c(){e=g("span"),l=A("HP "),s=A(n),u(e,"class","hp svelte-1c2fvge")},m(r,o){M(r,e,o),i(e,l),i(e,s)},p(r,o){o[0]&1&&n!==(n=r[36].hp+"")&&I(s,n)},d(r){r&&T(e)}}}function cl(t){let e,l=se(t[36].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=ul(sl(t,l,s));return{c(){e=g("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","types svelte-1c2fvge")},m(s,r){M(s,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,r){if(r[0]&1){l=se(s[36].types);let o;for(o=0;o<l.length;o+=1){const c=sl(s,l,o);n[o]?n[o].p(c,r):(n[o]=ul(c),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(s){s&&T(e),Se(n,s)}}}function ul(t){let e,l=t[33]+"",n;return{c(){e=g("span"),n=A(l),u(e,"class","type svelte-1c2fvge")},m(s,r){M(s,e,r),i(e,n)},p(s,r){r[0]&1&&l!==(l=s[33]+"")&&I(n,l)},d(s){s&&T(e)}}}function fl(t){let e,l,n,s,r,o,c,f=t[36].name+"",a,m,d,v,h,p,_=t[36].hp&&al(t),k=t[36].types&&t[36].types.length>0&&cl(t);function E(){return t[25](t[36])}return{c(){e=g("button"),l=g("img"),r=S(),o=g("div"),c=g("h4"),a=A(f),m=S(),_&&_.c(),d=S(),k&&k.c(),v=S(),me(l.src,n=t[36].image)||u(l,"src",n),u(l,"alt",s=t[36].name),u(l,"class","svelte-1c2fvge"),u(c,"class","svelte-1c2fvge"),u(o,"class","card-details svelte-1c2fvge"),u(e,"class","collection-card svelte-1c2fvge")},m(y,D){M(y,e,D),i(e,l),i(e,r),i(e,o),i(o,c),i(c,a),i(o,m),_&&_.m(o,null),i(o,d),k&&k.m(o,null),i(e,v),h||(p=z(e,"click",E),h=!0)},p(y,D){t=y,D[0]&1&&!me(l.src,n=t[36].image)&&u(l,"src",n),D[0]&1&&s!==(s=t[36].name)&&u(l,"alt",s),D[0]&1&&f!==(f=t[36].name+"")&&I(a,f),t[36].hp?_?_.p(t,D):(_=al(t),_.c(),_.m(o,d)):_&&(_.d(1),_=null),t[36].types&&t[36].types.length>0?k?k.p(t,D):(k=cl(t),k.c(),k.m(o,null)):k&&(k.d(1),k=null)},d(y){y&&T(e),_&&_.d(),k&&k.d(),h=!1,p()}}}function dl(t){let e,l=t[6].text+"",n;return{c(){e=g("div"),n=A(l),u(e,"class","message svelte-1c2fvge"),H(e,"success",t[6].type==="success"),H(e,"error",t[6].type==="error")},m(s,r){M(s,e,r),i(e,n)},p(s,r){r[0]&64&&l!==(l=s[6].text+"")&&I(n,l),r[0]&64&&H(e,"success",s[6].type==="success"),r[0]&64&&H(e,"error",s[6].type==="error")},d(s){s&&T(e)}}}function gl(t){let e,l,n,s,r,o,c,f,a,m,d=t[3].name+"",v,h,p,_,k,E,y=t[3].hp&&ml(t),D=t[3].types&&t[3].types.length>0&&vl(t),q=t[3].rarity&&pl(t);return{c(){e=g("div"),l=g("div"),n=g("button"),n.textContent="Ã—",s=S(),r=g("img"),f=S(),a=g("div"),m=g("h3"),v=A(d),h=S(),y&&y.c(),p=S(),D&&D.c(),_=S(),q&&q.c(),u(n,"class","close-modal svelte-1c2fvge"),me(r.src,o=t[3].image)||u(r,"src",o),u(r,"alt",c=t[3].name),u(r,"class","modal-card-image svelte-1c2fvge"),u(m,"class","svelte-1c2fvge"),u(a,"class","modal-card-info svelte-1c2fvge"),u(l,"class","card-modal svelte-1c2fvge"),u(l,"role","dialog"),u(e,"class","dialog-overlay svelte-1c2fvge"),u(e,"role","button"),u(e,"tabindex","-1")},m(C,b){M(C,e,b),i(e,l),i(l,n),i(l,s),i(l,r),i(l,f),i(l,a),i(a,m),i(m,v),i(a,h),y&&y.m(a,null),i(a,p),D&&D.m(a,null),i(a,_),q&&q.m(a,null),k||(E=[z(n,"click",t[20]),z(l,"click",Cl(t[23])),z(e,"click",t[20]),z(e,"keydown",t[27])],k=!0)},p(C,b){b[0]&8&&!me(r.src,o=C[3].image)&&u(r,"src",o),b[0]&8&&c!==(c=C[3].name)&&u(r,"alt",c),b[0]&8&&d!==(d=C[3].name+"")&&I(v,d),C[3].hp?y?y.p(C,b):(y=ml(C),y.c(),y.m(a,p)):y&&(y.d(1),y=null),C[3].types&&C[3].types.length>0?D?D.p(C,b):(D=vl(C),D.c(),D.m(a,_)):D&&(D.d(1),D=null),C[3].rarity?q?q.p(C,b):(q=pl(C),q.c(),q.m(a,null)):q&&(q.d(1),q=null)},d(C){C&&T(e),y&&y.d(),D&&D.d(),q&&q.d(),k=!1,ae(E)}}}function ml(t){let e,l,n=t[3].hp+"",s;return{c(){e=g("div"),l=A("HP: "),s=A(n),u(e,"class","modal-hp svelte-1c2fvge")},m(r,o){M(r,e,o),i(e,l),i(e,s)},p(r,o){o[0]&8&&n!==(n=r[3].hp+"")&&I(s,n)},d(r){r&&T(e)}}}function vl(t){let e,l=se(t[3].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=hl(ll(t,l,s));return{c(){e=g("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","modal-types svelte-1c2fvge")},m(s,r){M(s,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,r){if(r[0]&8){l=se(s[3].types);let o;for(o=0;o<l.length;o+=1){const c=ll(s,l,o);n[o]?n[o].p(c,r):(n[o]=hl(c),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(s){s&&T(e),Se(n,s)}}}function hl(t){let e,l=t[33]+"",n;return{c(){e=g("span"),n=A(l),u(e,"class","modal-type svelte-1c2fvge")},m(s,r){M(s,e,r),i(e,n)},p(s,r){r[0]&8&&l!==(l=s[33]+"")&&I(n,l)},d(s){s&&T(e)}}}function pl(t){let e,l,n=t[3].rarity+"",s;return{c(){e=g("div"),l=A("Rarity: "),s=A(n),u(e,"class","modal-rarity svelte-1c2fvge")},m(r,o){M(r,e,o),i(e,l),i(e,s)},p(r,o){o[0]&8&&n!==(n=r[3].rarity+"")&&I(s,n)},d(r){r&&T(e)}}}function _l(t){let e,l,n,s=t[1].clearCollectionTitle+"",r,o,c,f=t[1].clearCollectionMessage+"",a,m,d,v,h=t[1].cancel+"",p,_,k,E=t[1].clearCollection+"",y,D,q;return{c(){e=g("div"),l=g("div"),n=g("h3"),r=A(s),o=S(),c=g("p"),a=A(f),m=S(),d=g("div"),v=g("button"),p=A(h),_=S(),k=g("button"),y=A(E),u(n,"class","svelte-1c2fvge"),u(c,"class","svelte-1c2fvge"),u(v,"class","btn-secondary"),u(k,"class","btn-error"),u(d,"class","dialog-actions svelte-1c2fvge"),u(l,"class","dialog svelte-1c2fvge"),u(l,"role","dialog"),u(e,"class","dialog-overlay svelte-1c2fvge"),u(e,"role","button"),u(e,"tabindex","-1")},m(C,b){M(C,e,b),i(e,l),i(l,n),i(n,r),i(l,o),i(l,c),i(c,a),i(l,m),i(l,d),i(d,v),i(v,p),i(d,_),i(d,k),i(k,y),D||(q=[z(v,"click",t[16]),z(k,"click",t[17]),z(l,"click",Cl(t[22])),z(l,"keydown",Mn),z(e,"click",t[16]),z(e,"keydown",t[28])],D=!0)},p(C,b){b[0]&2&&s!==(s=C[1].clearCollectionTitle+"")&&I(r,s),b[0]&2&&f!==(f=C[1].clearCollectionMessage+"")&&I(a,f),b[0]&2&&h!==(h=C[1].cancel+"")&&I(p,h),b[0]&2&&E!==(E=C[1].clearCollection+"")&&I(y,E)},d(C){C&&T(e),D=!1,ae(q)}}}function Ln(t){let e,l,n,s,r,o,c,f,a,m=t[1].yourCollection+"",d,v,h,p,_,k,E=t[0].cards.length+"",y,D,q,C=t[1].cardsCollected+"",b,R,Y,Q,N=t[0].stats.totalQuestions+"",B,U,re,oe=t[1].questionsAnswered+"",ce,G,le,P,V=t[0].stats.correctAnswers+"",w,F,j,K=t[1].correctAnswers+"",ne,Oe,pe,Z,Be,Je,ct,Ge,Xe=t[1].accuracy+"",ut,Mt,Te,Le,Me,Ze=(t[1].language||"Language")+"",ft,qt,Dt,he,ke,be,Nt,ue,ze,$e=t[1].exportBackup+"",dt,Pt,je,xe=t[1].importBackup+"",gt,Qt,He,et=t[1].clearThisSet+"",mt,Rt,we,Ft,vt,Ye,Ve,ht,Ot;function Bt(L,O){return L[9]?En:An}let tt=Bt(t),fe=tt(t),$=!t[9]&&ol(t),qe=se(t[4]),X=[];for(let L=0;L<qe.length;L+=1)X[L]=il(rl(t,qe,L));function zt(L,O){return L[0].cards.length===0?Tn:In}let lt=zt(t),de=lt(t),x=t[6]&&dl(t),ee=t[3]&&gl(t),te=t[7]&&_l(t);return{c(){e=g("div"),l=g("div"),n=g("div"),fe.c(),s=S(),$&&$.c(),r=S(),o=g("div");for(let L=0;L<X.length;L+=1)X[L].c();c=S(),f=g("div"),a=g("h2"),d=A(m),v=S(),de.c(),h=S(),p=g("div"),_=g("div"),k=g("div"),y=A(E),D=S(),q=g("div"),b=A(C),R=S(),Y=g("div"),Q=g("div"),B=A(N),U=S(),re=g("div"),ce=A(oe),G=S(),le=g("div"),P=g("div"),w=A(V),F=S(),j=g("div"),ne=A(K),Oe=S(),pe=g("div"),Z=g("div"),Be=A(t[11]),Je=A("%"),ct=S(),Ge=g("div"),ut=A(Xe),Mt=S(),Te=g("div"),Le=g("div"),Me=g("label"),ft=A(Ze),qt=A(":"),Dt=S(),he=g("select"),ke=g("option"),ke.textContent="English",be=g("option"),be.textContent="Norsk",Nt=S(),ue=g("div"),ze=g("button"),dt=A($e),Pt=S(),je=g("button"),gt=A(xe),Qt=S(),He=g("button"),mt=A(et),Rt=S(),we=g("input"),Ft=S(),x&&x.c(),vt=S(),ee&&ee.c(),Ye=S(),te&&te.c(),Ve=It(),u(n,"class","rare-section-text svelte-1c2fvge"),u(o,"class","rare-cards-thumbnails svelte-1c2fvge"),u(l,"class","rare-cards-section svelte-1c2fvge"),u(a,"class","svelte-1c2fvge"),u(f,"class","collection-header svelte-1c2fvge"),u(k,"class","stat-value svelte-1c2fvge"),u(q,"class","stat-label svelte-1c2fvge"),u(_,"class","stat-card svelte-1c2fvge"),u(Q,"class","stat-value svelte-1c2fvge"),u(re,"class","stat-label svelte-1c2fvge"),u(Y,"class","stat-card svelte-1c2fvge"),u(P,"class","stat-value svelte-1c2fvge"),u(j,"class","stat-label svelte-1c2fvge"),u(le,"class","stat-card svelte-1c2fvge"),u(Z,"class","stat-value svelte-1c2fvge"),u(Ge,"class","stat-label svelte-1c2fvge"),u(pe,"class","stat-card svelte-1c2fvge"),u(p,"class","stats-section svelte-1c2fvge"),u(Me,"for","language-select"),u(Me,"class","svelte-1c2fvge"),ke.__value="en",Ke(ke,ke.__value),u(ke,"class","svelte-1c2fvge"),be.__value="no",Ke(be,be.__value),u(be,"class","svelte-1c2fvge"),u(he,"id","language-select"),u(he,"class","language-selector svelte-1c2fvge"),u(Le,"class","language-selector-container svelte-1c2fvge"),u(ze,"class","btn-secondary"),u(je,"class","btn-secondary"),u(He,"class","btn-error"),u(we,"type","file"),u(we,"accept",".json"),Ct(we,"display","none"),u(ue,"class","functions-actions svelte-1c2fvge"),u(Te,"class","functions-section svelte-1c2fvge"),u(e,"class","collection-view svelte-1c2fvge")},m(L,O){M(L,e,O),i(e,l),i(l,n),fe.m(n,null),i(l,s),$&&$.m(l,null),i(l,r),i(l,o);for(let J=0;J<X.length;J+=1)X[J]&&X[J].m(o,null);i(e,c),i(e,f),i(f,a),i(a,d),i(e,v),de.m(e,null),i(e,h),i(e,p),i(p,_),i(_,k),i(k,y),i(_,D),i(_,q),i(q,b),i(p,R),i(p,Y),i(Y,Q),i(Q,B),i(Y,U),i(Y,re),i(re,ce),i(p,G),i(p,le),i(le,P),i(P,w),i(le,F),i(le,j),i(j,ne),i(p,Oe),i(p,pe),i(pe,Z),i(Z,Be),i(Z,Je),i(pe,ct),i(pe,Ge),i(Ge,ut),i(e,Mt),i(e,Te),i(Te,Le),i(Le,Me),i(Me,ft),i(Me,qt),i(Le,Dt),i(Le,he),i(he,ke),i(he,be),ot(he,t[2]),i(Te,Nt),i(Te,ue),i(ue,ze),i(ze,dt),i(ue,Pt),i(ue,je),i(je,gt),i(ue,Qt),i(ue,He),i(He,mt),i(ue,Rt),i(ue,we),t[26](we),i(e,Ft),x&&x.m(e,null),M(L,vt,O),ee&&ee.m(L,O),M(L,Ye,O),te&&te.m(L,O),M(L,Ve,O),ht||(Ot=[z(he,"change",t[18]),z(ze,"click",t[12]),z(je,"click",t[13]),z(He,"click",t[15]),z(we,"change",t[14])],ht=!0)},p(L,O){if(tt===(tt=Bt(L))&&fe?fe.p(L,O):(fe.d(1),fe=tt(L),fe&&(fe.c(),fe.m(n,null))),L[9]?$&&($.d(1),$=null):$?$.p(L,O):($=ol(L),$.c(),$.m(l,r)),O[0]&524816){qe=se(L[4]);let J;for(J=0;J<qe.length;J+=1){const jt=rl(L,qe,J);X[J]?X[J].p(jt,O):(X[J]=il(jt),X[J].c(),X[J].m(o,null))}for(;J<X.length;J+=1)X[J].d(1);X.length=qe.length}O[0]&2&&m!==(m=L[1].yourCollection+"")&&I(d,m),lt===(lt=zt(L))&&de?de.p(L,O):(de.d(1),de=lt(L),de&&(de.c(),de.m(e,h))),O[0]&1&&E!==(E=L[0].cards.length+"")&&I(y,E),O[0]&2&&C!==(C=L[1].cardsCollected+"")&&I(b,C),O[0]&1&&N!==(N=L[0].stats.totalQuestions+"")&&I(B,N),O[0]&2&&oe!==(oe=L[1].questionsAnswered+"")&&I(ce,oe),O[0]&1&&V!==(V=L[0].stats.correctAnswers+"")&&I(w,V),O[0]&2&&K!==(K=L[1].correctAnswers+"")&&I(ne,K),O[0]&2048&&I(Be,L[11]),O[0]&2&&Xe!==(Xe=L[1].accuracy+"")&&I(ut,Xe),O[0]&2&&Ze!==(Ze=(L[1].language||"Language")+"")&&I(ft,Ze),O[0]&4&&ot(he,L[2]),O[0]&2&&$e!==($e=L[1].exportBackup+"")&&I(dt,$e),O[0]&2&&xe!==(xe=L[1].importBackup+"")&&I(gt,xe),O[0]&2&&et!==(et=L[1].clearThisSet+"")&&I(mt,et),L[6]?x?x.p(L,O):(x=dl(L),x.c(),x.m(e,null)):x&&(x.d(1),x=null),L[3]?ee?ee.p(L,O):(ee=gl(L),ee.c(),ee.m(Ye.parentNode,Ye)):ee&&(ee.d(1),ee=null),L[7]?te?te.p(L,O):(te=_l(L),te.c(),te.m(Ve.parentNode,Ve)):te&&(te.d(1),te=null)},i:W,o:W,d(L){L&&(T(e),T(vt),T(Ye),T(Ve)),fe.d(),$&&$.d(),Se(X,L),de.d(),t[26](null),x&&x.d(),ee&&ee.d(L),te&&te.d(L),ht=!1,ae(Ot)}}}const Mn=()=>{};function qn(t,e,l){let n,s,r,o,c;wt(t,it,w=>l(21,c=w));let{collection:f}=e,{t:a}=e,{language:m}=e,d=null,v=[],h=[];Al(async()=>{await p()});async function p(){try{v=await Et(c);const w=[...v].sort((F,j)=>{const K=parseInt(F.localId||"0");return parseInt(j.localId||"0")-K});l(4,h=w.slice(0,5))}catch(w){console.error("Error loading rare cards:",w)}}const _=at();let k,E=null,y=!1;function D(){try{Sn(),b(a.collectionExported,"success")}catch{b(a.exportFailed,"error")}}function q(){k.click()}async function C(w){var K;const F=w.target,j=(K=F.files)==null?void 0:K[0];if(j){try{const ne=await yn(j);ne.success?(b(a.collectionImported,"success"),_("refresh")):b(ne.error||a.importFailed,"error")}catch{b(a.importFailed,"error")}F.value=""}}function b(w,F){l(6,E={text:w,type:F}),setTimeout(()=>{l(6,E=null)},3e3)}function R(){l(7,y=!0)}function Y(){l(7,y=!1)}function Q(){try{en(),l(7,y=!1),b(a.collectionCleared,"success"),_("refresh")}catch{b(a.clearFailed,"error")}}function N(w){const F=w.target;_("languageChange",F.value)}function B(w){l(3,d=w)}function U(){l(3,d=null)}function re(w){Yt.call(this,t,w)}function oe(w){Yt.call(this,t,w)}const ce=w=>B({...w,collectedAt:new Date().toISOString()}),G=w=>B(w);function le(w){St[w?"unshift":"push"](()=>{k=w,l(5,k)})}const P=w=>w.key==="Escape"&&U(),V=w=>w.key==="Escape"&&Y();return t.$$set=w=>{"collection"in w&&l(0,f=w.collection),"t"in w&&l(1,a=w.t),"language"in w&&l(2,m=w.language)},t.$$.update=()=>{t.$$.dirty[0]&1&&l(11,n=f.stats.totalQuestions>0?Math.round(f.stats.correctAnswers/f.stats.totalQuestions*100):0),t.$$.dirty[0]&1&&l(10,s=16e3-(f.stats.totalHpDefeated||0)),t.$$.dirty[0]&2097153&&l(9,r=f.unlockedRareSets&&f.unlockedRareSets[c]||!1),t.$$.dirty[0]&1&&l(8,o=Math.min(f.stats.totalHpDefeated/16e3*100,100))},[f,a,m,d,h,k,E,y,o,r,s,n,D,q,C,R,Y,Q,N,B,U,c,re,oe,ce,G,le,P,V]}class Dn extends Ie{constructor(e){super(),Ee(this,e,qn,Ln,_e,{collection:0,t:1,language:2},null,[-1,-1])}}function Nn(t){let e,l,n,s,r;return{c(){e=g("div"),l=g("div"),n=S(),s=g("p"),r=A(t[0]),u(l,"class","spinner svelte-1lxornd"),u(s,"class","svelte-1lxornd"),u(e,"class","loading-view svelte-1lxornd")},m(o,c){M(o,e,c),i(e,l),i(e,n),i(e,s),i(s,r)},p(o,[c]){c&1&&I(r,o[0])},i:W,o:W,d(o){o&&T(e)}}}function Pn(t,e,l){let{message:n="Loading..."}=e;return t.$$set=s=>{"message"in s&&l(0,n=s.message)},[n]}class Qn extends Ie{constructor(e){super(),Ee(this,e,Pn,Nn,_e,{message:0})}}function Rn(t){let e,l,n,s,r,o,c,f,a,m,d;return{c(){e=g("div"),l=g("div"),l.textContent="âš ï¸",n=S(),s=g("h2"),s.textContent="Oops!",r=S(),o=g("p"),c=A(t[0]),f=S(),a=g("button"),a.textContent="Try Again",u(l,"class","error-icon svelte-na0xmw"),u(s,"class","svelte-na0xmw"),u(o,"class","svelte-na0xmw"),u(a,"class","btn-primary"),u(e,"class","error-view svelte-na0xmw")},m(v,h){M(v,e,h),i(e,l),i(e,n),i(e,s),i(e,r),i(e,o),i(o,c),i(e,f),i(e,a),m||(d=z(a,"click",t[1]),m=!0)},p(v,[h]){h&1&&I(c,v[0])},i:W,o:W,d(v){v&&T(e),m=!1,d()}}}function Fn(t,e,l){let{message:n="Something went wrong"}=e;const s=at();function r(){s("retry")}return t.$$set=o=>{"message"in o&&l(0,n=o.message)},[n,r]}class On extends Ie{constructor(e){super(),Ee(this,e,Fn,Rn,_e,{message:0})}}function Bn(t,e,l){const n=t.slice();return n[31]=e[l],n}function zn(t){let e,l;return e=new Dn({props:{collection:t[4],t:t[14],language:t[0]}}),e.$on("refresh",t[24]),e.$on("languageChange",t[26]),{c(){Fe(e.$$.fragment)},m(n,s){ye(e,n,s),l=!0},p(n,s){const r={};s[0]&16&&(r.collection=n[4]),s[0]&16384&&(r.t=n[14]),s[0]&1&&(r.language=n[0]),e.$set(r)},i(n){l||(ie(e.$$.fragment,n),l=!0)},o(n){ve(e.$$.fragment,n),l=!1},d(n){Ae(e,n)}}}function jn(t){let e,l,n,s;const r=[Un,Vn,Yn,Hn],o=[];function c(f,a){return f[1]==="loading"?0:f[1]==="quiz"&&f[2]?1:f[1]==="result"&&f[2]?2:f[1]==="error"?3:-1}return~(e=c(t))&&(l=o[e]=r[e](t)),{c(){l&&l.c(),n=It()},m(f,a){~e&&o[e].m(f,a),M(f,n,a),s=!0},p(f,a){let m=e;e=c(f),e===m?~e&&o[e].p(f,a):(l&&(Il(),ve(o[m],1,1,()=>{o[m]=null}),Tl()),~e?(l=o[e],l?l.p(f,a):(l=o[e]=r[e](f),l.c()),ie(l,1),l.m(n.parentNode,n)):l=null)},i(f){s||(ie(l),s=!0)},o(f){ve(l),s=!1},d(f){f&&T(n),~e&&o[e].d(f)}}}function Hn(t){let e,l;return e=new On({props:{message:t[8]}}),e.$on("retry",t[21]),{c(){Fe(e.$$.fragment)},m(n,s){ye(e,n,s),l=!0},p(n,s){const r={};s[0]&256&&(r.message=n[8]),e.$set(r)},i(n){l||(ie(e.$$.fragment,n),l=!0)},o(n){ve(e.$$.fragment,n),l=!1},d(n){Ae(e,n)}}}function Yn(t){let e,l;return e=new Cn({props:{isCorrect:t[5],correctAnswer:t[2].correctAnswer,userAnswer:t[6],wonCard:t[7],t:t[14],needsStreak:t[12],streakProgress:t[13],currentStreak:t[4].currentStreak||0}}),e.$on("next",t[20]),{c(){Fe(e.$$.fragment)},m(n,s){ye(e,n,s),l=!0},p(n,s){const r={};s[0]&32&&(r.isCorrect=n[5]),s[0]&4&&(r.correctAnswer=n[2].correctAnswer),s[0]&64&&(r.userAnswer=n[6]),s[0]&128&&(r.wonCard=n[7]),s[0]&16384&&(r.t=n[14]),s[0]&4096&&(r.needsStreak=n[12]),s[0]&8192&&(r.streakProgress=n[13]),s[0]&16&&(r.currentStreak=n[4].currentStreak||0),e.$set(r)},i(n){l||(ie(e.$$.fragment,n),l=!0)},o(n){ve(e.$$.fragment,n),l=!1},d(n){Ae(e,n)}}}function Vn(t){var m;let e,l,n,s,r,o,c,f=se(bt),a=[];for(let d=0;d<f.length;d+=1)a[d]=Kn(Bn(t,f,d));return s=new vn({props:{question:t[2],t:t[14],currentSet:((m=bt.find(t[25]))==null?void 0:m.name)||""}}),s.$on("answer",t[19]),{c(){e=g("div"),l=g("select");for(let d=0;d<a.length;d+=1)a[d].c();n=S(),Fe(s.$$.fragment),u(l,"class","set-selector svelte-162mefo"),u(e,"class","set-selector-container svelte-162mefo")},m(d,v){M(d,e,v),i(e,l);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(l,null);ot(l,t[15]),M(d,n,v),ye(s,d,v),r=!0,o||(c=z(l,"change",t[16]),o=!0)},p(d,v){var p;(!r||v[0]&32768)&&ot(l,d[15]);const h={};v[0]&4&&(h.question=d[2]),v[0]&16384&&(h.t=d[14]),v[0]&2048&&(h.currentSet=((p=bt.find(d[25]))==null?void 0:p.name)||""),s.$set(h)},i(d){r||(ie(s.$$.fragment,d),r=!0)},o(d){ve(s.$$.fragment,d),r=!1},d(d){d&&(T(e),T(n)),Se(a,d),Ae(s,d),o=!1,c()}}}function Un(t){let e,l;return e=new Qn({props:{message:t[14].loading}}),{c(){Fe(e.$$.fragment)},m(n,s){ye(e,n,s),l=!0},p(n,s){const r={};s[0]&16384&&(r.message=n[14].loading),e.$set(r)},i(n){l||(ie(e.$$.fragment,n),l=!0)},o(n){ve(e.$$.fragment,n),l=!1},d(n){Ae(e,n)}}}function Kn(t){let e;return{c(){e=g("option"),e.textContent=`${t[31].name}`,e.__value=t[31].id,Ke(e,e.__value),u(e,"class","svelte-162mefo")},m(l,n){M(l,e,n)},p:W,d(l){l&&T(e)}}}function kl(t){let e,l,n,s=t[0]==="en"?"Choose Your Language":"Velg sprÃ¥k",r,o,c,f=t[0]==="en"?"You can change this anytime in My Collection":"Du kan endre dette nÃ¥r som helst i Min samling",a,m,d,v,h,p,_,k;return{c(){e=g("div"),l=g("div"),n=g("h2"),r=A(s),o=S(),c=g("p"),a=A(f),m=S(),d=g("div"),v=g("button"),v.innerHTML='<span class="flag svelte-162mefo">ðŸ‡¬ðŸ‡§</span> <span>English</span>',h=S(),p=g("button"),p.innerHTML='<span class="flag svelte-162mefo">ðŸ‡³ðŸ‡´</span> <span>Norsk</span>',u(n,"class","svelte-162mefo"),u(c,"class","svelte-162mefo"),u(v,"class","language-btn svelte-162mefo"),u(p,"class","language-btn svelte-162mefo"),u(d,"class","language-buttons svelte-162mefo"),u(l,"class","dialog language-dialog svelte-162mefo"),u(e,"class","dialog-overlay svelte-162mefo"),u(e,"role","button"),u(e,"tabindex","-1")},m(E,y){M(E,e,y),i(e,l),i(l,n),i(n,r),i(l,o),i(l,c),i(c,a),i(l,m),i(l,d),i(d,v),i(d,h),i(d,p),_||(k=[z(v,"click",t[27]),z(p,"click",t[28])],_=!0)},p(E,y){y[0]&1&&s!==(s=E[0]==="en"?"Choose Your Language":"Velg sprÃ¥k")&&I(r,s),y[0]&1&&f!==(f=E[0]==="en"?"You can change this anytime in My Collection":"Du kan endre dette nÃ¥r som helst i Min samling")&&I(a,f)},d(E){E&&T(e),_=!1,ae(k)}}}function Wn(t){var V;let e,l,n,s,r=t[14].appTitle+"",o,c,f,a,m=t[14].playQuiz+"",d,v,h,p=t[14].myCollection+"",_,k,E=(((V=t[4])==null?void 0:V.cards.length)||0)+"",y,D,q=t[3].length+"",C,b,R,Y,Q,N,B,U,re,oe;const ce=[jn,zn],G=[];function le(w,F){return w[9]==="quiz"?0:1}Q=le(t),N=G[Q]=ce[Q](t);let P=t[10]&&kl(t);return{c(){e=g("div"),l=g("header"),n=g("div"),s=g("h1"),o=A(r),c=S(),f=g("nav"),a=g("button"),d=A(m),v=S(),h=g("button"),_=A(p),k=A(" ("),y=A(E),D=A("/"),C=A(q),b=A(")"),R=S(),Y=g("main"),N.c(),B=S(),P&&P.c(),u(s,"class","app-title svelte-162mefo"),u(a,"class","nav-btn svelte-162mefo"),H(a,"active",t[9]==="quiz"),u(h,"class","nav-btn svelte-162mefo"),H(h,"active",t[9]==="collection"),u(f,"class","svelte-162mefo"),u(n,"class","header-content svelte-162mefo"),u(l,"class","app-header svelte-162mefo"),u(Y,"class","svelte-162mefo"),u(e,"class","app svelte-162mefo")},m(w,F){M(w,e,F),i(e,l),i(l,n),i(n,s),i(s,o),i(n,c),i(n,f),i(f,a),i(a,d),i(f,v),i(f,h),i(h,_),i(h,k),i(h,y),i(h,D),i(h,C),i(h,b),i(e,R),i(e,Y),G[Q].m(Y,null),i(e,B),P&&P.m(e,null),U=!0,re||(oe=[z(a,"click",t[23]),z(h,"click",t[22])],re=!0)},p(w,F){var K;(!U||F[0]&16384)&&r!==(r=w[14].appTitle+"")&&I(o,r),(!U||F[0]&16384)&&m!==(m=w[14].playQuiz+"")&&I(d,m),(!U||F[0]&512)&&H(a,"active",w[9]==="quiz"),(!U||F[0]&16384)&&p!==(p=w[14].myCollection+"")&&I(_,p),(!U||F[0]&16)&&E!==(E=(((K=w[4])==null?void 0:K.cards.length)||0)+"")&&I(y,E),(!U||F[0]&8)&&q!==(q=w[3].length+"")&&I(C,q),(!U||F[0]&512)&&H(h,"active",w[9]==="collection");let j=Q;Q=le(w),Q===j?G[Q].p(w,F):(Il(),ve(G[j],1,1,()=>{G[j]=null}),Tl(),N=G[Q],N?N.p(w,F):(N=G[Q]=ce[Q](w),N.c()),ie(N,1),N.m(Y,null)),w[10]?P?P.p(w,F):(P=kl(w),P.c(),P.m(e,null)):P&&(P.d(1),P=null)},i(w){U||(ie(N),U=!0)},o(w){ve(N),U=!1},d(w){w&&T(e),G[Q].d(),P&&P.d(),re=!1,ae(oe)}}}function Jn(t,e,l){let n,s,r;wt(t,rt,P=>l(0,s=P)),wt(t,it,P=>l(15,r=P));let o="loading",c=null,f=[],a,m=!1,d=0,v=null,h="",p="quiz",_=!1,k=r,E=!1,y=0;Al(()=>{l(4,a=ge()),localStorage.getItem("tcg-seen-language-dialog")?b():l(10,_=!0)});function D(P){const V=P.target;it.set(V.value),l(11,k=V.value),l(3,f=[]),b()}function q(P){rt.set(P)}function C(P){rt.set(P),localStorage.setItem("tcg-seen-language-dialog","true"),l(10,_=!1),b()}async function b(){var P;try{l(1,o="loading"),f.length===0&&l(3,f=await Et(k));const V=[...f].sort((Z,Be)=>{const Je=parseInt(Z.localId||"0");return parseInt(Be.localId||"0")-Je}),w=new Set(V.slice(0,5).map(Z=>Z.id)),F=new Set(a.cards.map(Z=>Z.id)),j=f.filter(Z=>!F.has(Z.id)&&!w.has(Z.id));if(j.length===0)throw new Error("Congratulations! You have collected all cards from this set!");const K=Xl(j),ne=await Gl(K.id,k),Oe=sn(ne,n);if(!Oe)throw new Error("Could not generate a valid question. Please try again.");const pe=((P=ne.rarity)==null?void 0:P.toLowerCase())||"common";l(12,E=pe!=="common"),a.streakCard&&a.streakCard.id===ne.id?l(13,y=a.currentStreak||0):l(13,y=0),l(2,c=Oe),l(1,o="quiz")}catch(V){console.error("Error loading question:",V),l(8,h=V instanceof Error?V.message:"Failed to load question"),l(1,o="error")}}async function R(){a.unlockedRareSets||l(4,a.unlockedRareSets={},a),!a.unlockedRareSets[k]&&a.stats.totalHpDefeated>=16e3&&(f.length===0&&l(3,f=await Et(k)),[...f].sort((w,F)=>{const j=parseInt(w.localId||"0");return parseInt(F.localId||"0")-j}).slice(0,5).forEach(w=>{const F={id:w.id,name:w.name,image:w.image,hp:w.hp,types:w.types,rarity:w.rarity,collectedAt:new Date().toISOString()};a.cards.some(K=>K.id===w.id)||a.cards.push(F)}),l(4,a.unlockedRareSets[k]=!0,a),Re(a))}function Y(P){var w,F;if(!c)return;l(6,d=P.detail),l(5,m=rn(c,d));const V=m&&c.card.hp?c.card.hp:0;if(xl(m,V),l(7,v=null),m){let j=!1;if(E?(l(4,a=ge()),((w=a.streakCard)==null?void 0:w.id)===c.card.id?l(4,a.currentStreak=(a.currentStreak||0)+1,a):(l(4,a.streakCard=c.card,a),l(4,a.currentStreak=1,a)),a.currentStreak>=2&&(j=!0,l(4,a.currentStreak=0,a),l(4,a.streakCard=void 0,a)),Re(a)):j=!0,j){const K={id:c.card.id,name:c.card.name,image:c.card.image,hp:c.card.hp,types:c.card.types,rarity:c.card.rarity,collectedAt:new Date().toISOString()};$l(K)&&l(7,v=c.card)}}else l(4,a=ge()),E&&((F=a.streakCard)==null?void 0:F.id)===c.card.id&&(l(4,a.currentStreak=0,a),l(4,a.streakCard=void 0,a),Re(a));l(4,a=ge()),m&&(R(),l(4,a=ge())),l(1,o="result")}function Q(){b()}function N(){b()}function B(){l(9,p="collection"),l(4,a=ge())}function U(){l(9,p="quiz")}function re(){l(4,a=ge())}const oe=P=>P.id===k,ce=P=>q(P.detail),G=()=>C("en"),le=()=>C("no");return t.$$.update=()=>{t.$$.dirty[0]&1&&l(14,n=cn(s))},[s,o,c,f,a,m,d,v,h,p,_,k,E,y,n,r,D,q,C,Y,Q,N,B,U,re,oe,ce,G,le]}class Gn extends Ie{constructor(e){super(),Ee(this,e,Jn,Wn,_e,{},null,[-1,-1])}}new Gn({target:document.getElementById("app")});
