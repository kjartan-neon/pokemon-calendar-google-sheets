var sl=Object.defineProperty;var rl=(t,e,l)=>e in t?sl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var et=(t,e,l)=>rl(t,typeof e!="symbol"?e+"":e,l);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function l(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=l(s);fetch(s.href,o)}})();function W(){}function Ut(t){return t()}function St(){return Object.create(null)}function te(t){t.forEach(Ut)}function Wt(t){return typeof t=="function"}function se(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Pe;function be(t,e){return t===e?!0:(Pe||(Pe=document.createElement("a")),Pe.href=e,t===Pe.href)}function ol(t){return Object.keys(t).length===0}function il(t,...e){if(t==null){for(const n of e)n(void 0);return W}const l=t.subscribe(...e);return l.unsubscribe?()=>l.unsubscribe():l}function yt(t,e,l){t.$$.on_destroy.push(il(e,l))}function r(t,e){t.appendChild(e)}function L(t,e,l){t.insertBefore(e,l||null)}function T(t){t.parentNode&&t.parentNode.removeChild(t)}function qe(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function g(t){return document.createElement(t)}function w(t){return document.createTextNode(t)}function k(){return w(" ")}function at(){return w("")}function V(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function al(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function u(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function Kt(t){return t===""?null:+t}function cl(t){return Array.from(t.childNodes)}function S(t,e){e=""+e,t.data!==e&&(t.data=e)}function ye(t,e){t.value=e??""}function ul(t,e,l,n){t.style.setProperty(e,l,"")}function Ve(t,e,l){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e){s.selected=!0;return}}t.selectedIndex=-1}function X(t,e,l){t.classList.toggle(e,!!l)}function fl(t,e,{bubbles:l=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:l,cancelable:n})}let Ae;function Se(t){Ae=t}function Jt(){if(!Ae)throw new Error("Function called outside component initialization");return Ae}function dl(t){Jt().$$.on_mount.push(t)}function Ue(){const t=Jt();return(e,l,{cancelable:n=!1}={})=>{const s=t.$$.callbacks[e];if(s){const o=fl(e,l,{cancelable:n});return s.slice().forEach(i=>{i.call(t,o)}),!o.defaultPrevented}return!0}}function gl(t,e){const l=t.$$.callbacks[e.type];l&&l.slice().forEach(n=>n.call(this,e))}const ve=[],st=[];let _e=[];const At=[],hl=Promise.resolve();let rt=!1;function ml(){rt||(rt=!0,hl.then(Gt))}function ot(t){_e.push(t)}const tt=new Set;let me=0;function Gt(){if(me!==0)return;const t=Ae;do{try{for(;me<ve.length;){const e=ve[me];me++,Se(e),pl(e.$$)}}catch(e){throw ve.length=0,me=0,e}for(Se(null),ve.length=0,me=0;st.length;)st.pop()();for(let e=0;e<_e.length;e+=1){const l=_e[e];tt.has(l)||(tt.add(l),l())}_e.length=0}while(ve.length);for(;At.length;)At.pop()();rt=!1,tt.clear(),Se(t)}function pl(t){if(t.fragment!==null){t.update(),te(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ot)}}function vl(t){const e=[],l=[];_e.forEach(n=>t.indexOf(n)===-1?e.push(n):l.push(n)),l.forEach(n=>n()),_e=e}const Re=new Set;let re;function Ht(){re={r:0,c:[],p:re}}function Xt(){re.r||te(re.c),re=re.p}function $(t,e){t&&t.i&&(Re.delete(t),t.i(e))}function ee(t,e,l,n){if(t&&t.o){if(Re.has(t))return;Re.add(t),re.c.push(()=>{Re.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}else n&&n()}function le(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function we(t){t&&t.c()}function ie(t,e,l){const{fragment:n,after_update:s}=t.$$;n&&n.m(e,l),ot(()=>{const o=t.$$.on_mount.map(Ut).filter(Wt);t.$$.on_destroy?t.$$.on_destroy.push(...o):te(o),t.$$.on_mount=[]}),s.forEach(ot)}function ae(t,e){const l=t.$$;l.fragment!==null&&(vl(l.after_update),te(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function _l(t,e){t.$$.dirty[0]===-1&&(ve.push(t),ml(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ce(t,e,l,n,s,o,i=null,a=[-1]){const c=Ae;Se(t);const f=t.$$={fragment:null,ctx:[],props:o,update:W,not_equal:s,bound:St(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:St(),dirty:a,skip_bound:!1,root:e.target||c.$$.root};i&&i(f.root);let p=!1;if(f.ctx=l?l(t,e.props||{},(d,m,...v)=>{const h=v.length?v[0]:m;return f.ctx&&s(f.ctx[d],f.ctx[d]=h)&&(!f.skip_bound&&f.bound[d]&&f.bound[d](h),p&&_l(t,d)),m}):[],f.update(),p=!0,te(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){const d=cl(e.target);f.fragment&&f.fragment.l(d),d.forEach(T)}else f.fragment&&f.fragment.c();e.intro&&$(t.$$.fragment),ie(t,e.target,e.anchor),Gt()}Se(c)}class ue{constructor(){et(this,"$$");et(this,"$$set")}$destroy(){ae(this,1),this.$destroy=W}$on(e,l){if(!Wt(l))return W;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const s=n.indexOf(l);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!ol(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const bl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(bl);const Zt="https://api.tcgdex.net/v2/en";function $t(t,e){const l=t.split("-")[1];return`https://assets.tcgdex.net/en/${wl(e)}/${e}/${l}/high.webp`}function wl(t){return t.startsWith("swsh")?"swsh":t.startsWith("sv")?"sv":t.startsWith("me")?"base":"swsh"}async function kl(t){try{const e=await fetch(`${Zt}/sets/${t}`);if(!e.ok)throw new Error("Failed to fetch cards from set");return((await e.json()).cards||[]).map(s=>({id:s.id,localId:s.localId,name:s.name,image:$t(s.id,t)}))}catch(e){throw console.error("Error fetching cards from set:",e),e}}async function Cl(t,e){try{const l=await fetch(`${Zt}/cards/${t}`);if(!l.ok)throw new Error("Failed to fetch card details");return{...await l.json(),image:$t(t,e)}}catch(l){throw console.error("Error fetching card details:",l),l}}function Sl(t){const e=Math.floor(Math.random()*t.length);return t[e]}const ct="pokemon-tcg-collection",xt="1.0";function yl(){return{totalQuestions:0,correctAnswers:0,incorrectAnswers:0}}function lt(){return{cards:[],stats:yl(),version:xt}}function oe(){try{const t=localStorage.getItem(ct);if(!t)return lt();const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?(console.warn("Invalid collection format, resetting..."),lt()):e}catch(t){return console.error("Error loading collection from local storage:",t),lt()}}function ut(t){try{const e={...t,version:xt};localStorage.setItem(ct,JSON.stringify(e))}catch(e){throw console.error("Error saving collection to local storage:",e),new Error("Failed to save collection")}}function Al(t){try{const e=oe();return e.cards.some(n=>n.id===t.id)?!1:(e.cards.push(t),ut(e),!0)}catch(e){return console.error("Error adding card to collection:",e),!1}}function ql(t){try{const e=oe();e.stats.totalQuestions++,t?e.stats.correctAnswers++:e.stats.incorrectAnswers++,ut(e)}catch(e){console.error("Error updating stats:",e)}}function El(){try{localStorage.removeItem(ct)}catch(t){console.error("Error clearing collection:",t)}}function Tl(){const t=oe();return JSON.stringify(t,null,2)}function Ml(t){try{const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?{success:!1,error:"Invalid collection format"}:!e.stats.totalQuestions===void 0||!e.stats.correctAnswers===void 0||!e.stats.incorrectAnswers===void 0?{success:!1,error:"Invalid stats format"}:(ut(e),{success:!0})}catch(e){return console.error("Error importing collection:",e),{success:!1,error:"Failed to parse JSON file"}}}function Ll(){const t=Math.floor(Math.random()*50)+10,e=Math.floor(Math.random()*50)+10,l=["+","-"],n=l[Math.floor(Math.random()*l.length)];let s,o;if(n==="+")s=t+e,o=`What is ${t} + ${e}?`;else{s=t+e;const i=s;s=t,o=`What is ${i} - ${e}?`}return{question:o,answer:s}}function Il(t){if(!t)return null;let e,l,n=!1;if(t.hp&&t.hp>0){n=!0;const s=[10,20,30,40,50][Math.floor(Math.random()*5)];l=Math.ceil(t.hp/s),e=`Your Pok√©mon deals ${s} damage each turn. How many turns does it take to defeat this Pok√©mon?`}else{const s=Ll();e=s.question,l=s.answer}return{card:t,questionText:e,correctAnswer:l,isPokemon:n}}function Nl(t,e){return e===t.correctAnswer}const pe=[];function el(t,e=W){let l;const n=new Set;function s(a){if(se(t,a)&&(t=a,l)){const c=!pe.length;for(const f of n)f[1](),pe.push(f,t);if(c){for(let f=0;f<pe.length;f+=2)pe[f][0](pe[f+1]);pe.length=0}}}function o(a){s(a(t))}function i(a,c=W){const f=[a,c];return n.add(f),n.size===1&&(l=e(s,o)||W),a(t),()=>{n.delete(f),n.size===0&&l&&(l(),l=null)}}return{set:s,update:o,subscribe:i}}const nt=[{id:"swsh3",name:"Sword & Shield - Darkness Ablaze"},{id:"sv05",name:"Scarlet & Violet - Temporal Forces"},{id:"sv06.5",name:"Scarlet & Violet - Shrouded Fable"}],tl="tcg-math-settings";function jl(){return{language:"en",selectedSet:"swsh3"}}function ft(){try{const t=localStorage.getItem(tl);if(t){const e=JSON.parse(t);return{language:e.language||"en",selectedSet:e.selectedSet||"swsh3"}}}catch(t){console.error("Error loading settings:",t)}return jl()}function ll(t){try{localStorage.setItem(tl,JSON.stringify(t))}catch(e){console.error("Error saving settings:",e)}}const nl=ft(),Ye=el(nl.language),it=el(nl.selectedSet);Ye.subscribe(t=>{const e=ft();ll({...e,language:t})});it.subscribe(t=>{const e=ft();ll({...e,selectedSet:t})});const Ql={en:{appTitle:"TCG Math",quizTitle:"TCG Math Challenge",playQuiz:"Play Quiz",myCollection:"My Collection",selectSet:"Select Set",selectLanguage:"Language",setInfo:"Collecting Set",enterAnswer:"Enter your answer",submitAnswer:"Submit Answer",nextQuestion:"Next Question",correct:"Correct!",notQuite:"Not quite!",correctMessage:"Great job! The answer was",incorrectMessage:"You answered",encouragement:"Try again with the next question!",youWonThisCard:"You won this card!",cardsCollected:"Cards Collected",questionsAnswered:"Questions Answered",correctAnswers:"Correct Answers",accuracy:"Accuracy",noCardsYet:"No cards yet!",noCardsDescription:"Answer questions correctly to start building your collection.",exportBackup:"Export Backup",importBackup:"Import Backup",clearThisSet:"Clear This Set",clearCollectionTitle:"Clear Collection?",clearCollectionMessage:"Are you sure you want to clear your entire collection? This action cannot be undone.",cancel:"Cancel",clearCollection:"Clear Collection",collectionExported:"Collection exported successfully!",collectionImported:"Collection imported successfully!",collectionCleared:"Collection cleared successfully!",exportFailed:"Failed to export collection",importFailed:"Failed to import collection",clearFailed:"Failed to clear collection",hit:"hit",hits:"hits",loading:"Loading new question...",yourCollection:"Your Collection",language:"Language"},no:{appTitle:"TCG Matte",quizTitle:"TCG Matte Utfordring",playQuiz:"Spill Quiz",myCollection:"Min Samling",selectSet:"Velg Sett",selectLanguage:"Spr√•k",setInfo:"Samler Sett",enterAnswer:"Skriv inn svaret ditt",submitAnswer:"Send Inn Svar",nextQuestion:"Neste Sp√∏rsm√•l",correct:"Riktig!",notQuite:"Ikke helt!",correctMessage:"Bra jobbet! Svaret var",incorrectMessage:"Du svarte",encouragement:"Pr√∏v igjen med neste sp√∏rsm√•l!",youWonThisCard:"Du vant dette kortet!",cardsCollected:"Kort Samlet",questionsAnswered:"Sp√∏rsm√•l Besvart",correctAnswers:"Riktige Svar",accuracy:"N√∏yaktighet",noCardsYet:"Ingen kort enn√•!",noCardsDescription:"Svar riktig p√• sp√∏rsm√•l for √• begynne √• bygge samlingen din.",exportBackup:"Eksporter Backup",importBackup:"Importer Backup",clearThisSet:"T√∏m Dette Settet",clearCollectionTitle:"T√∏m Samling?",clearCollectionMessage:"Er du sikker p√• at du vil t√∏mme hele samlingen din? Denne handlingen kan ikke angres.",cancel:"Avbryt",clearCollection:"T√∏m Samling",collectionExported:"Samling eksportert!",collectionImported:"Samling importert!",collectionCleared:"Samling t√∏mt!",exportFailed:"Kunne ikke eksportere samling",importFailed:"Kunne ikke importere samling",clearFailed:"Kunne ikke t√∏mme samling",hit:"treff",hits:"treff",loading:"Laster nytt sp√∏rsm√•l...",yourCollection:"Din Samling",language:"Spr√•k"}};function zl(t){return Ql[t]}function qt(t,e,l){const n=t.slice();return n[3]=e[l],n}function Et(t,e,l){const n=t.slice();return n[6]=e[l],n}function Tt(t){let e,l,n,s,o=t[0].hp+"",i;return{c(){e=g("div"),l=g("span"),l.textContent="HP",n=k(),s=g("span"),i=w(o),u(l,"class","hp-label svelte-2rdllh"),u(s,"class","hp-value svelte-2rdllh"),u(e,"class","card-hp svelte-2rdllh")},m(a,c){L(a,e,c),r(e,l),r(e,n),r(e,s),r(s,i)},p(a,c){c&1&&o!==(o=a[0].hp+"")&&S(i,o)},d(a){a&&T(e)}}}function Mt(t){let e,l=le(t[0].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=Lt(Et(t,l,s));return{c(){e=g("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","card-types svelte-2rdllh")},m(s,o){L(s,e,o);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,o){if(o&1){l=le(s[0].types);let i;for(i=0;i<l.length;i+=1){const a=Et(s,l,i);n[i]?n[i].p(a,o):(n[i]=Lt(a),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=l.length}},d(s){s&&T(e),qe(n,s)}}}function Lt(t){let e,l=t[6]+"",n;return{c(){e=g("span"),n=w(l),u(e,"class","type-badge svelte-2rdllh")},m(s,o){L(s,e,o),r(e,n)},p(s,o){o&1&&l!==(l=s[6]+"")&&S(n,l)},d(s){s&&T(e)}}}function It(t){let e,l,n,s=le(t[0].attacks),o=[];for(let i=0;i<s.length;i+=1)o[i]=jt(qt(t,s,i));return{c(){e=g("div"),l=g("h4"),l.textContent="Attacks:",n=k();for(let i=0;i<o.length;i+=1)o[i].c();u(l,"class","svelte-2rdllh"),u(e,"class","card-attacks svelte-2rdllh")},m(i,a){L(i,e,a),r(e,l),r(e,n);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null)},p(i,a){if(a&5){s=le(i[0].attacks);let c;for(c=0;c<s.length;c+=1){const f=qt(i,s,c);o[c]?o[c].p(f,a):(o[c]=jt(f),o[c].c(),o[c].m(e,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=s.length}},d(i){i&&T(e),qe(o,i)}}}function Nt(t){let e,l=t[3].damage+"",n;return{c(){e=g("span"),n=w(l),u(e,"class","attack-damage svelte-2rdllh")},m(s,o){L(s,e,o),r(e,n)},p(s,o){o&1&&l!==(l=s[3].damage+"")&&S(n,l)},d(s){s&&T(e)}}}function jt(t){let e,l,n=t[3].name+"",s,o,i,a=t[3].damage&&Nt(t);return{c(){e=g("div"),l=g("span"),s=w(n),o=k(),a&&a.c(),i=k(),u(l,"class","attack-name svelte-2rdllh"),u(e,"class","attack svelte-2rdllh"),X(e,"highlighted",t[2]===t[3].name)},m(c,f){L(c,e,f),r(e,l),r(l,s),r(e,o),a&&a.m(e,null),r(e,i)},p(c,f){f&1&&n!==(n=c[3].name+"")&&S(s,n),c[3].damage?a?a.p(c,f):(a=Nt(c),a.c(),a.m(e,i)):a&&(a.d(1),a=null),f&5&&X(e,"highlighted",c[2]===c[3].name)},d(c){c&&T(e),a&&a.d()}}}function Fl(t){let e,l,n,s,o,i,a,c,f=t[0].name+"",p,d,m,v,h=t[0].hp&&Tt(t),_=t[0].types&&t[0].types.length>0&&Mt(t),b=t[1]&&t[0].attacks&&t[0].attacks.length>0&&It(t);return{c(){e=g("div"),l=g("div"),n=g("img"),i=k(),a=g("div"),c=g("h3"),p=w(f),d=k(),h&&h.c(),m=k(),_&&_.c(),v=k(),b&&b.c(),be(n.src,s=t[0].image)||u(n,"src",s),u(n,"alt",o=t[0].name),u(n,"class","svelte-2rdllh"),u(l,"class","card-image svelte-2rdllh"),u(c,"class","card-name svelte-2rdllh"),u(a,"class","card-info svelte-2rdllh"),u(e,"class","pokemon-card svelte-2rdllh")},m(C,A){L(C,e,A),r(e,l),r(l,n),r(e,i),r(e,a),r(a,c),r(c,p),r(a,d),h&&h.m(a,null),r(a,m),_&&_.m(a,null),r(a,v),b&&b.m(a,null)},p(C,[A]){A&1&&!be(n.src,s=C[0].image)&&u(n,"src",s),A&1&&o!==(o=C[0].name)&&u(n,"alt",o),A&1&&f!==(f=C[0].name+"")&&S(p,f),C[0].hp?h?h.p(C,A):(h=Tt(C),h.c(),h.m(a,m)):h&&(h.d(1),h=null),C[0].types&&C[0].types.length>0?_?_.p(C,A):(_=Mt(C),_.c(),_.m(a,v)):_&&(_.d(1),_=null),C[1]&&C[0].attacks&&C[0].attacks.length>0?b?b.p(C,A):(b=It(C),b.c(),b.m(a,null)):b&&(b.d(1),b=null)},i:W,o:W,d(C){C&&T(e),h&&h.d(),_&&_.d(),b&&b.d()}}}function Dl(t,e,l){let{card:n}=e,{showAttacks:s=!1}=e,{highlightedAttack:o=null}=e;return t.$$set=i=>{"card"in i&&l(0,n=i.card),"showAttacks"in i&&l(1,s=i.showAttacks),"highlightedAttack"in i&&l(2,o=i.highlightedAttack)},[n,s,o]}class Ol extends ue{constructor(e){super(),ce(this,e,Dl,Fl,se,{card:0,showAttacks:1,highlightedAttack:2})}}function Bl(t){let e,l,n,s=t[1].quizTitle+"",o,i,a,c=t[1].setInfo+"",f,p,d,m,v,h,_,b,C,A=t[0].questionText+"",I,q,E,y,O,N,M,K=t[1].submitAnswer+"",B,J,Y,Z,j;return h=new Ol({props:{card:t[0].card}}),{c(){e=g("div"),l=g("div"),n=g("h2"),o=w(s),i=k(),a=g("p"),f=w(c),p=w(": "),d=w(t[2]),m=k(),v=g("div"),we(h.$$.fragment),_=k(),b=g("div"),C=g("h3"),I=w(A),q=k(),E=g("div"),y=g("input"),N=k(),M=g("button"),B=w(K),u(n,"class","quiz-title svelte-1ohble"),u(a,"class","set-info svelte-1ohble"),u(l,"class","quiz-header svelte-1ohble"),u(v,"class","card-display svelte-1ohble"),u(C,"class","question-text svelte-1ohble"),u(y,"type","number"),u(y,"placeholder",O=t[1].enterAnswer),u(y,"class","answer-input svelte-1ohble"),u(M,"class","submit-btn btn-primary svelte-1ohble"),M.disabled=J=!t[3],u(E,"class","answer-input-container svelte-1ohble"),u(b,"class","question-container svelte-1ohble"),u(e,"class","quiz-view svelte-1ohble")},m(F,Q){L(F,e,Q),r(e,l),r(l,n),r(n,o),r(l,i),r(l,a),r(a,f),r(a,p),r(a,d),r(e,m),r(e,v),ie(h,v,null),r(e,_),r(e,b),r(b,C),r(C,I),r(b,q),r(b,E),r(E,y),ye(y,t[3]),r(E,N),r(E,M),r(M,B),Y=!0,Z||(j=[V(y,"input",t[6]),V(y,"keypress",t[5]),V(M,"click",t[4])],Z=!0)},p(F,[Q]){(!Y||Q&2)&&s!==(s=F[1].quizTitle+"")&&S(o,s),(!Y||Q&2)&&c!==(c=F[1].setInfo+"")&&S(f,c),(!Y||Q&4)&&S(d,F[2]);const U={};Q&1&&(U.card=F[0].card),h.$set(U),(!Y||Q&1)&&A!==(A=F[0].questionText+"")&&S(I,A),(!Y||Q&2&&O!==(O=F[1].enterAnswer))&&u(y,"placeholder",O),Q&8&&Kt(y.value)!==F[3]&&ye(y,F[3]),(!Y||Q&2)&&K!==(K=F[1].submitAnswer+"")&&S(B,K),(!Y||Q&8&&J!==(J=!F[3]))&&(M.disabled=J)},i(F){Y||($(h.$$.fragment,F),Y=!0)},o(F){ee(h.$$.fragment,F),Y=!1},d(F){F&&T(e),ae(h),Z=!1,te(j)}}}function Pl(t,e,l){let{question:n}=e,{t:s}=e,{currentSet:o}=e;const i=Ue();let a="";function c(){const d=parseInt(a,10);isNaN(d)||i("answer",d)}function f(d){d.key==="Enter"&&c()}function p(){a=Kt(this.value),l(3,a)}return t.$$set=d=>{"question"in d&&l(0,n=d.question),"t"in d&&l(1,s=d.t),"currentSet"in d&&l(2,o=d.currentSet)},[n,s,o,a,c,f,p]}class Rl extends ue{constructor(e){super(),ce(this,e,Pl,Bl,se,{question:0,t:1,currentSet:2})}}function Yl(t){let e,l,n,s=t[4].notQuite+"",o,i,a,c=t[4].incorrectMessage+"",f,p,d,m,v,h=t[4].correctMessage.toLowerCase()+"",_,b,C,A,I,q,E,y=t[4].encouragement+"",O;return{c(){e=g("div"),e.textContent="‚úó",l=k(),n=g("h2"),o=w(s),i=k(),a=g("p"),f=w(c),p=k(),d=g("strong"),m=w(t[2]),v=w(", "),_=w(h),b=k(),C=g("strong"),A=w(t[1]),I=w("."),q=k(),E=g("p"),O=w(y),u(e,"class","result-icon error svelte-tq4u2e"),u(n,"class","result-title svelte-tq4u2e"),u(d,"class","svelte-tq4u2e"),u(C,"class","svelte-tq4u2e"),u(a,"class","result-message svelte-tq4u2e"),u(E,"class","encouragement svelte-tq4u2e")},m(N,M){L(N,e,M),L(N,l,M),L(N,n,M),r(n,o),L(N,i,M),L(N,a,M),r(a,f),r(a,p),r(a,d),r(d,m),r(a,v),r(a,_),r(a,b),r(a,C),r(C,A),r(a,I),L(N,q,M),L(N,E,M),r(E,O)},p(N,M){M&16&&s!==(s=N[4].notQuite+"")&&S(o,s),M&16&&c!==(c=N[4].incorrectMessage+"")&&S(f,c),M&4&&S(m,N[2]),M&16&&h!==(h=N[4].correctMessage.toLowerCase()+"")&&S(_,h),M&2&&S(A,N[1]),M&16&&y!==(y=N[4].encouragement+"")&&S(O,y)},d(N){N&&(T(e),T(l),T(n),T(i),T(a),T(q),T(E))}}}function Vl(t){let e,l,n,s=t[4].correct+"",o,i,a,c=t[4].correctMessage+"",f,p,d,m,v,h=(t[1]===1?t[4].hit:t[4].hits)+"",_,b,C,A,I=t[3]&&Qt(t);return{c(){e=g("div"),e.textContent="‚úì",l=k(),n=g("h2"),o=w(s),i=k(),a=g("p"),f=w(c),p=k(),d=g("strong"),m=w(t[1]),v=k(),_=w(h),b=w("!"),C=k(),I&&I.c(),A=at(),u(e,"class","result-icon success svelte-tq4u2e"),u(n,"class","result-title svelte-tq4u2e"),u(d,"class","svelte-tq4u2e"),u(a,"class","result-message svelte-tq4u2e")},m(q,E){L(q,e,E),L(q,l,E),L(q,n,E),r(n,o),L(q,i,E),L(q,a,E),r(a,f),r(a,p),r(a,d),r(d,m),r(a,v),r(a,_),r(a,b),L(q,C,E),I&&I.m(q,E),L(q,A,E)},p(q,E){E&16&&s!==(s=q[4].correct+"")&&S(o,s),E&16&&c!==(c=q[4].correctMessage+"")&&S(f,c),E&2&&S(m,q[1]),E&18&&h!==(h=(q[1]===1?q[4].hit:q[4].hits)+"")&&S(_,h),q[3]?I?I.p(q,E):(I=Qt(q),I.c(),I.m(A.parentNode,A)):I&&(I.d(1),I=null)},d(q){q&&(T(e),T(l),T(n),T(i),T(a),T(C),T(A)),I&&I.d(q)}}}function Qt(t){let e,l,n=t[4].youWonThisCard+"",s,o,i,a,c,f,p,d,m,v=t[3].name+"",h;return{c(){e=g("div"),l=g("h3"),s=w(n),o=k(),i=g("div"),a=g("div"),c=g("img"),d=k(),m=g("span"),h=w(v),u(l,"class","svelte-tq4u2e"),be(c.src,f=t[3].image)||u(c,"src",f),u(c,"alt",p=t[3].name),u(c,"class","svelte-tq4u2e"),u(m,"class","card-name svelte-tq4u2e"),u(a,"class","mini-card svelte-tq4u2e"),u(i,"class","cards-grid svelte-tq4u2e"),u(e,"class","won-cards svelte-tq4u2e")},m(_,b){L(_,e,b),r(e,l),r(l,s),r(e,o),r(e,i),r(i,a),r(a,c),r(a,d),r(a,m),r(m,h)},p(_,b){b&16&&n!==(n=_[4].youWonThisCard+"")&&S(s,n),b&8&&!be(c.src,f=_[3].image)&&u(c,"src",f),b&8&&p!==(p=_[3].name)&&u(c,"alt",p),b&8&&v!==(v=_[3].name+"")&&S(h,v)},d(_){_&&T(e)}}}function Ul(t){let e,l,n,s,o=t[4].nextQuestion+"",i,a,c;function f(m,v){return m[0]?Vl:Yl}let p=f(t),d=p(t);return{c(){e=g("div"),l=g("div"),d.c(),n=k(),s=g("button"),i=w(o),u(l,"class","result-card svelte-tq4u2e"),X(l,"correct",t[0]),X(l,"incorrect",!t[0]),u(s,"class","next-btn btn-primary svelte-tq4u2e"),u(e,"class","result-view svelte-tq4u2e")},m(m,v){L(m,e,v),r(e,l),d.m(l,null),r(e,n),r(e,s),r(s,i),a||(c=V(s,"click",t[5]),a=!0)},p(m,[v]){p===(p=f(m))&&d?d.p(m,v):(d.d(1),d=p(m),d&&(d.c(),d.m(l,null))),v&1&&X(l,"correct",m[0]),v&1&&X(l,"incorrect",!m[0]),v&16&&o!==(o=m[4].nextQuestion+"")&&S(i,o)},i:W,o:W,d(m){m&&T(e),d.d(),a=!1,c()}}}function Wl(t,e,l){let{isCorrect:n}=e,{correctAnswer:s}=e,{userAnswer:o}=e,{wonCard:i}=e,{t:a}=e;const c=Ue();function f(){c("next")}return t.$$set=p=>{"isCorrect"in p&&l(0,n=p.isCorrect),"correctAnswer"in p&&l(1,s=p.correctAnswer),"userAnswer"in p&&l(2,o=p.userAnswer),"wonCard"in p&&l(3,i=p.wonCard),"t"in p&&l(4,a=p.t)},[n,s,o,i,a,f]}class Kl extends ue{constructor(e){super(),ce(this,e,Wl,Ul,se,{isCorrect:0,correctAnswer:1,userAnswer:2,wonCard:3,t:4})}}function Jl(){try{const t=Tl(),e=new Blob([t],{type:"application/json"}),l=URL.createObjectURL(e),n=document.createElement("a");n.href=l,n.download=`pokemon-collection-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(l)}catch(t){throw console.error("Error downloading backup:",t),new Error("Failed to download backup")}}function Gl(t){return new Promise(e=>{const l=new FileReader;l.onload=n=>{var s;try{const o=(s=n.target)==null?void 0:s.result,i=Ml(o);e(i)}catch(o){console.error("Error reading file:",o),e({success:!1,error:"Failed to read file"})}},l.onerror=()=>{e({success:!1,error:"Failed to read file"})},l.readAsText(t)})}function zt(t,e,l){const n=t.slice();return n[19]=e[l],n}function Ft(t,e,l){const n=t.slice();return n[22]=e[l],n}function Dt(t){let e,l=t[4].text+"",n;return{c(){e=g("div"),n=w(l),u(e,"class","message svelte-125een2"),X(e,"success",t[4].type==="success"),X(e,"error",t[4].type==="error")},m(s,o){L(s,e,o),r(e,n)},p(s,o){o&16&&l!==(l=s[4].text+"")&&S(n,l),o&16&&X(e,"success",s[4].type==="success"),o&16&&X(e,"error",s[4].type==="error")},d(s){s&&T(e)}}}function Hl(t){let e,l=le(t[0].cards),n=[];for(let s=0;s<l.length;s+=1)n[s]=Rt(zt(t,l,s));return{c(){e=g("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","cards-grid svelte-125een2")},m(s,o){L(s,e,o);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,o){if(o&1){l=le(s[0].cards);let i;for(i=0;i<l.length;i+=1){const a=zt(s,l,i);n[i]?n[i].p(a,o):(n[i]=Rt(a),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=l.length}},d(s){s&&T(e),qe(n,s)}}}function Xl(t){let e,l,n,s,o=t[1].noCardsYet+"",i,a,c,f=t[1].noCardsDescription+"",p;return{c(){e=g("div"),l=g("div"),l.textContent="üì¶",n=k(),s=g("h3"),i=w(o),a=k(),c=g("p"),p=w(f),u(l,"class","empty-icon svelte-125een2"),u(s,"class","svelte-125een2"),u(c,"class","svelte-125een2"),u(e,"class","empty-state svelte-125een2")},m(d,m){L(d,e,m),r(e,l),r(e,n),r(e,s),r(s,i),r(e,a),r(e,c),r(c,p)},p(d,m){m&2&&o!==(o=d[1].noCardsYet+"")&&S(i,o),m&2&&f!==(f=d[1].noCardsDescription+"")&&S(p,f)},d(d){d&&T(e)}}}function Ot(t){let e,l,n=t[19].hp+"",s;return{c(){e=g("span"),l=w("HP "),s=w(n),u(e,"class","hp svelte-125een2")},m(o,i){L(o,e,i),r(e,l),r(e,s)},p(o,i){i&1&&n!==(n=o[19].hp+"")&&S(s,n)},d(o){o&&T(e)}}}function Bt(t){let e,l=le(t[19].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=Pt(Ft(t,l,s));return{c(){e=g("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","types svelte-125een2")},m(s,o){L(s,e,o);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,o){if(o&1){l=le(s[19].types);let i;for(i=0;i<l.length;i+=1){const a=Ft(s,l,i);n[i]?n[i].p(a,o):(n[i]=Pt(a),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=l.length}},d(s){s&&T(e),qe(n,s)}}}function Pt(t){let e,l=t[22]+"",n;return{c(){e=g("span"),n=w(l),u(e,"class","type svelte-125een2")},m(s,o){L(s,e,o),r(e,n)},p(s,o){o&1&&l!==(l=s[22]+"")&&S(n,l)},d(s){s&&T(e)}}}function Rt(t){let e,l,n,s,o,i,a,c=t[19].name+"",f,p,d,m,v=t[19].hp&&Ot(t),h=t[19].types&&t[19].types.length>0&&Bt(t);return{c(){e=g("div"),l=g("img"),o=k(),i=g("div"),a=g("h4"),f=w(c),p=k(),v&&v.c(),d=k(),h&&h.c(),m=k(),be(l.src,n=t[19].image)||u(l,"src",n),u(l,"alt",s=t[19].name),u(l,"class","svelte-125een2"),u(a,"class","svelte-125een2"),u(i,"class","card-details svelte-125een2"),u(e,"class","collection-card svelte-125een2")},m(_,b){L(_,e,b),r(e,l),r(e,o),r(e,i),r(i,a),r(a,f),r(i,p),v&&v.m(i,null),r(i,d),h&&h.m(i,null),r(e,m)},p(_,b){b&1&&!be(l.src,n=_[19].image)&&u(l,"src",n),b&1&&s!==(s=_[19].name)&&u(l,"alt",s),b&1&&c!==(c=_[19].name+"")&&S(f,c),_[19].hp?v?v.p(_,b):(v=Ot(_),v.c(),v.m(i,d)):v&&(v.d(1),v=null),_[19].types&&_[19].types.length>0?h?h.p(_,b):(h=Bt(_),h.c(),h.m(i,null)):h&&(h.d(1),h=null)},d(_){_&&T(e),v&&v.d(),h&&h.d()}}}function Yt(t){let e,l,n,s=t[1].clearCollectionTitle+"",o,i,a,c=t[1].clearCollectionMessage+"",f,p,d,m,v=t[1].cancel+"",h,_,b,C=t[1].clearCollection+"",A,I,q;return{c(){e=g("div"),l=g("div"),n=g("h3"),o=w(s),i=k(),a=g("p"),f=w(c),p=k(),d=g("div"),m=g("button"),h=w(v),_=k(),b=g("button"),A=w(C),u(n,"class","svelte-125een2"),u(a,"class","svelte-125een2"),u(m,"class","btn-secondary"),u(b,"class","btn-error"),u(d,"class","dialog-actions svelte-125een2"),u(l,"class","dialog svelte-125een2"),u(l,"role","dialog"),u(e,"class","dialog-overlay svelte-125een2"),u(e,"role","button"),u(e,"tabindex","-1")},m(E,y){L(E,e,y),r(e,l),r(l,n),r(n,o),r(l,i),r(l,a),r(a,f),r(l,p),r(l,d),r(d,m),r(m,h),r(d,_),r(d,b),r(b,A),I||(q=[V(m,"click",t[11]),V(b,"click",t[12]),V(l,"click",al(t[14])),V(e,"click",t[11]),V(e,"keydown",t[16])],I=!0)},p(E,y){y&2&&s!==(s=E[1].clearCollectionTitle+"")&&S(o,s),y&2&&c!==(c=E[1].clearCollectionMessage+"")&&S(f,c),y&2&&v!==(v=E[1].cancel+"")&&S(h,v),y&2&&C!==(C=E[1].clearCollection+"")&&S(A,C)},d(E){E&&T(e),I=!1,te(q)}}}function Zl(t){let e,l,n,s=t[1].yourCollection+"",o,i,a,c,f,p=(t[1].language||"Language")+"",d,m,v,h,_,b,C,A,I,q=t[1].exportBackup+"",E,y,O,N=t[1].importBackup+"",M,K,B,J=t[1].clearThisSet+"",Y,Z,j,F,Q,U,D,R,ne=t[0].cards.length+"",fe,dt,Ee,Te=t[1].cardsCollected+"",We,gt,de,Me,Le=t[0].stats.totalQuestions+"",Ke,ht,Ie,Ne=t[1].questionsAnswered+"",Je,mt,ge,je,Qe=t[0].stats.correctAnswers+"",Ge,pt,ze,Fe=t[1].correctAnswers+"",He,vt,he,ke,Xe,_t,bt,De,Oe=t[1].accuracy+"",Ze,wt,$e,Ce,xe,kt,G=t[4]&&Dt(t);function Ct(z,P){return z[0].cards.length===0?Xl:Hl}let Be=Ct(t),x=Be(t),H=t[5]&&Yt(t);return{c(){e=g("div"),l=g("div"),n=g("h2"),o=w(s),i=k(),a=g("div"),c=g("div"),f=g("label"),d=w(p),m=w(":"),v=k(),h=g("select"),_=g("option"),_.textContent="English",b=g("option"),b.textContent="Norsk",C=k(),A=g("div"),I=g("button"),E=w(q),y=k(),O=g("button"),M=w(N),K=k(),B=g("button"),Y=w(J),Z=k(),j=g("input"),F=k(),G&&G.c(),Q=k(),U=g("div"),D=g("div"),R=g("div"),fe=w(ne),dt=k(),Ee=g("div"),We=w(Te),gt=k(),de=g("div"),Me=g("div"),Ke=w(Le),ht=k(),Ie=g("div"),Je=w(Ne),mt=k(),ge=g("div"),je=g("div"),Ge=w(Qe),pt=k(),ze=g("div"),He=w(Fe),vt=k(),he=g("div"),ke=g("div"),Xe=w(t[6]),_t=w("%"),bt=k(),De=g("div"),Ze=w(Oe),wt=k(),x.c(),$e=k(),H&&H.c(),Ce=at(),u(n,"class","svelte-125een2"),u(f,"for","language-select"),u(f,"class","svelte-125een2"),_.__value="en",ye(_,_.__value),u(_,"class","svelte-125een2"),b.__value="no",ye(b,b.__value),u(b,"class","svelte-125een2"),u(h,"id","language-select"),u(h,"class","language-selector svelte-125een2"),u(c,"class","language-selector-container svelte-125een2"),u(I,"class","btn-secondary"),u(O,"class","btn-secondary"),u(B,"class","btn-error"),u(j,"type","file"),u(j,"accept",".json"),ul(j,"display","none"),u(A,"class","header-actions svelte-125een2"),u(a,"class","header-controls svelte-125een2"),u(l,"class","collection-header svelte-125een2"),u(R,"class","stat-value svelte-125een2"),u(Ee,"class","stat-label svelte-125een2"),u(D,"class","stat-card svelte-125een2"),u(Me,"class","stat-value svelte-125een2"),u(Ie,"class","stat-label svelte-125een2"),u(de,"class","stat-card svelte-125een2"),u(je,"class","stat-value svelte-125een2"),u(ze,"class","stat-label svelte-125een2"),u(ge,"class","stat-card svelte-125een2"),u(ke,"class","stat-value svelte-125een2"),u(De,"class","stat-label svelte-125een2"),u(he,"class","stat-card svelte-125een2"),u(U,"class","stats-section svelte-125een2"),u(e,"class","collection-view svelte-125een2")},m(z,P){L(z,e,P),r(e,l),r(l,n),r(n,o),r(l,i),r(l,a),r(a,c),r(c,f),r(f,d),r(f,m),r(c,v),r(c,h),r(h,_),r(h,b),Ve(h,t[2]),r(a,C),r(a,A),r(A,I),r(I,E),r(A,y),r(A,O),r(O,M),r(A,K),r(A,B),r(B,Y),r(A,Z),r(A,j),t[15](j),r(e,F),G&&G.m(e,null),r(e,Q),r(e,U),r(U,D),r(D,R),r(R,fe),r(D,dt),r(D,Ee),r(Ee,We),r(U,gt),r(U,de),r(de,Me),r(Me,Ke),r(de,ht),r(de,Ie),r(Ie,Je),r(U,mt),r(U,ge),r(ge,je),r(je,Ge),r(ge,pt),r(ge,ze),r(ze,He),r(U,vt),r(U,he),r(he,ke),r(ke,Xe),r(ke,_t),r(he,bt),r(he,De),r(De,Ze),r(e,wt),x.m(e,null),L(z,$e,P),H&&H.m(z,P),L(z,Ce,P),xe||(kt=[V(h,"change",t[13]),V(I,"click",t[7]),V(O,"click",t[8]),V(B,"click",t[10]),V(j,"change",t[9])],xe=!0)},p(z,[P]){P&2&&s!==(s=z[1].yourCollection+"")&&S(o,s),P&2&&p!==(p=(z[1].language||"Language")+"")&&S(d,p),P&4&&Ve(h,z[2]),P&2&&q!==(q=z[1].exportBackup+"")&&S(E,q),P&2&&N!==(N=z[1].importBackup+"")&&S(M,N),P&2&&J!==(J=z[1].clearThisSet+"")&&S(Y,J),z[4]?G?G.p(z,P):(G=Dt(z),G.c(),G.m(e,Q)):G&&(G.d(1),G=null),P&1&&ne!==(ne=z[0].cards.length+"")&&S(fe,ne),P&2&&Te!==(Te=z[1].cardsCollected+"")&&S(We,Te),P&1&&Le!==(Le=z[0].stats.totalQuestions+"")&&S(Ke,Le),P&2&&Ne!==(Ne=z[1].questionsAnswered+"")&&S(Je,Ne),P&1&&Qe!==(Qe=z[0].stats.correctAnswers+"")&&S(Ge,Qe),P&2&&Fe!==(Fe=z[1].correctAnswers+"")&&S(He,Fe),P&64&&S(Xe,z[6]),P&2&&Oe!==(Oe=z[1].accuracy+"")&&S(Ze,Oe),Be===(Be=Ct(z))&&x?x.p(z,P):(x.d(1),x=Be(z),x&&(x.c(),x.m(e,null))),z[5]?H?H.p(z,P):(H=Yt(z),H.c(),H.m(Ce.parentNode,Ce)):H&&(H.d(1),H=null)},i:W,o:W,d(z){z&&(T(e),T($e),T(Ce)),t[15](null),G&&G.d(),x.d(),H&&H.d(z),xe=!1,te(kt)}}}function $l(t,e,l){let n,{collection:s}=e,{t:o}=e,{language:i}=e;const a=Ue();let c,f=null,p=!1;function d(){try{Jl(),h(o.collectionExported,"success")}catch{h(o.exportFailed,"error")}}function m(){c.click()}async function v(y){var M;const O=y.target,N=(M=O.files)==null?void 0:M[0];if(N){try{const K=await Gl(N);K.success?(h(o.collectionImported,"success"),a("refresh")):h(K.error||o.importFailed,"error")}catch{h(o.importFailed,"error")}O.value=""}}function h(y,O){l(4,f={text:y,type:O}),setTimeout(()=>{l(4,f=null)},3e3)}function _(){l(5,p=!0)}function b(){l(5,p=!1)}function C(){try{El(),l(5,p=!1),h(o.collectionCleared,"success"),a("refresh")}catch{h(o.clearFailed,"error")}}function A(y){const O=y.target;a("languageChange",O.value)}function I(y){gl.call(this,t,y)}function q(y){st[y?"unshift":"push"](()=>{c=y,l(3,c)})}const E=y=>y.key==="Escape"&&b();return t.$$set=y=>{"collection"in y&&l(0,s=y.collection),"t"in y&&l(1,o=y.t),"language"in y&&l(2,i=y.language)},t.$$.update=()=>{t.$$.dirty&1&&l(6,n=s.stats.totalQuestions>0?Math.round(s.stats.correctAnswers/s.stats.totalQuestions*100):0)},[s,o,i,c,f,p,n,d,m,v,_,b,C,A,I,q,E]}class xl extends ue{constructor(e){super(),ce(this,e,$l,Zl,se,{collection:0,t:1,language:2})}}function en(t){let e,l,n,s,o;return{c(){e=g("div"),l=g("div"),n=k(),s=g("p"),o=w(t[0]),u(l,"class","spinner svelte-1lxornd"),u(s,"class","svelte-1lxornd"),u(e,"class","loading-view svelte-1lxornd")},m(i,a){L(i,e,a),r(e,l),r(e,n),r(e,s),r(s,o)},p(i,[a]){a&1&&S(o,i[0])},i:W,o:W,d(i){i&&T(e)}}}function tn(t,e,l){let{message:n="Loading..."}=e;return t.$$set=s=>{"message"in s&&l(0,n=s.message)},[n]}class ln extends ue{constructor(e){super(),ce(this,e,tn,en,se,{message:0})}}function nn(t){let e,l,n,s,o,i,a,c,f,p,d;return{c(){e=g("div"),l=g("div"),l.textContent="‚ö†Ô∏è",n=k(),s=g("h2"),s.textContent="Oops!",o=k(),i=g("p"),a=w(t[0]),c=k(),f=g("button"),f.textContent="Try Again",u(l,"class","error-icon svelte-na0xmw"),u(s,"class","svelte-na0xmw"),u(i,"class","svelte-na0xmw"),u(f,"class","btn-primary"),u(e,"class","error-view svelte-na0xmw")},m(m,v){L(m,e,v),r(e,l),r(e,n),r(e,s),r(e,o),r(e,i),r(i,a),r(e,c),r(e,f),p||(d=V(f,"click",t[1]),p=!0)},p(m,[v]){v&1&&S(a,m[0])},i:W,o:W,d(m){m&&T(e),p=!1,d()}}}function sn(t,e,l){let{message:n="Something went wrong"}=e;const s=Ue();function o(){s("retry")}return t.$$set=i=>{"message"in i&&l(0,n=i.message)},[n,o]}class rn extends ue{constructor(e){super(),ce(this,e,sn,nn,se,{message:0})}}function on(t,e,l){const n=t.slice();return n[28]=e[l],n}function an(t){let e,l;return e=new xl({props:{collection:t[4],t:t[12],language:t[0]}}),e.$on("refresh",t[22]),e.$on("languageChange",t[24]),{c(){we(e.$$.fragment)},m(n,s){ie(e,n,s),l=!0},p(n,s){const o={};s&16&&(o.collection=n[4]),s&4096&&(o.t=n[12]),s&1&&(o.language=n[0]),e.$set(o)},i(n){l||($(e.$$.fragment,n),l=!0)},o(n){ee(e.$$.fragment,n),l=!1},d(n){ae(e,n)}}}function cn(t){let e,l,n,s;const o=[gn,dn,fn,un],i=[];function a(c,f){return c[1]==="loading"?0:c[1]==="quiz"&&c[2]?1:c[1]==="result"&&c[2]?2:c[1]==="error"?3:-1}return~(e=a(t))&&(l=i[e]=o[e](t)),{c(){l&&l.c(),n=at()},m(c,f){~e&&i[e].m(c,f),L(c,n,f),s=!0},p(c,f){let p=e;e=a(c),e===p?~e&&i[e].p(c,f):(l&&(Ht(),ee(i[p],1,1,()=>{i[p]=null}),Xt()),~e?(l=i[e],l?l.p(c,f):(l=i[e]=o[e](c),l.c()),$(l,1),l.m(n.parentNode,n)):l=null)},i(c){s||($(l),s=!0)},o(c){ee(l),s=!1},d(c){c&&T(n),~e&&i[e].d(c)}}}function un(t){let e,l;return e=new rn({props:{message:t[8]}}),e.$on("retry",t[19]),{c(){we(e.$$.fragment)},m(n,s){ie(e,n,s),l=!0},p(n,s){const o={};s&256&&(o.message=n[8]),e.$set(o)},i(n){l||($(e.$$.fragment,n),l=!0)},o(n){ee(e.$$.fragment,n),l=!1},d(n){ae(e,n)}}}function fn(t){let e,l;return e=new Kl({props:{isCorrect:t[5],correctAnswer:t[2].correctAnswer,userAnswer:t[6],wonCard:t[7],t:t[12]}}),e.$on("next",t[18]),{c(){we(e.$$.fragment)},m(n,s){ie(e,n,s),l=!0},p(n,s){const o={};s&32&&(o.isCorrect=n[5]),s&4&&(o.correctAnswer=n[2].correctAnswer),s&64&&(o.userAnswer=n[6]),s&128&&(o.wonCard=n[7]),s&4096&&(o.t=n[12]),e.$set(o)},i(n){l||($(e.$$.fragment,n),l=!0)},o(n){ee(e.$$.fragment,n),l=!1},d(n){ae(e,n)}}}function dn(t){var p;let e,l,n,s,o,i,a,c=le(nt),f=[];for(let d=0;d<c.length;d+=1)f[d]=hn(on(t,c,d));return s=new Rl({props:{question:t[2],t:t[12],currentSet:((p=nt.find(t[23]))==null?void 0:p.name)||""}}),s.$on("answer",t[17]),{c(){e=g("div"),l=g("select");for(let d=0;d<f.length;d+=1)f[d].c();n=k(),we(s.$$.fragment),u(l,"class","set-selector svelte-m0aajl"),u(e,"class","set-selector-container svelte-m0aajl")},m(d,m){L(d,e,m),r(e,l);for(let v=0;v<f.length;v+=1)f[v]&&f[v].m(l,null);Ve(l,t[13]),L(d,n,m),ie(s,d,m),o=!0,i||(a=V(l,"change",t[14]),i=!0)},p(d,m){var h;(!o||m&8192)&&Ve(l,d[13]);const v={};m&4&&(v.question=d[2]),m&4096&&(v.t=d[12]),m&2048&&(v.currentSet=((h=nt.find(d[23]))==null?void 0:h.name)||""),s.$set(v)},i(d){o||($(s.$$.fragment,d),o=!0)},o(d){ee(s.$$.fragment,d),o=!1},d(d){d&&(T(e),T(n)),qe(f,d),ae(s,d),i=!1,a()}}}function gn(t){let e,l;return e=new ln({props:{message:t[12].loading}}),{c(){we(e.$$.fragment)},m(n,s){ie(e,n,s),l=!0},p(n,s){const o={};s&4096&&(o.message=n[12].loading),e.$set(o)},i(n){l||($(e.$$.fragment,n),l=!0)},o(n){ee(e.$$.fragment,n),l=!1},d(n){ae(e,n)}}}function hn(t){let e;return{c(){e=g("option"),e.textContent=`${t[28].name}`,e.__value=t[28].id,ye(e,e.__value),u(e,"class","svelte-m0aajl")},m(l,n){L(l,e,n)},p:W,d(l){l&&T(e)}}}function Vt(t){let e,l,n,s=t[0]==="en"?"Choose Your Language":"Velg spr√•k",o,i,a,c=t[0]==="en"?"You can change this anytime in My Collection":"Du kan endre dette n√•r som helst i Min samling",f,p,d,m,v,h,_,b;return{c(){e=g("div"),l=g("div"),n=g("h2"),o=w(s),i=k(),a=g("p"),f=w(c),p=k(),d=g("div"),m=g("button"),m.innerHTML='<span class="flag svelte-m0aajl">üá¨üáß</span> <span>English</span>',v=k(),h=g("button"),h.innerHTML='<span class="flag svelte-m0aajl">üá≥üá¥</span> <span>Norsk</span>',u(n,"class","svelte-m0aajl"),u(a,"class","svelte-m0aajl"),u(m,"class","language-btn svelte-m0aajl"),u(h,"class","language-btn svelte-m0aajl"),u(d,"class","language-buttons svelte-m0aajl"),u(l,"class","dialog language-dialog svelte-m0aajl"),u(e,"class","dialog-overlay svelte-m0aajl"),u(e,"role","button"),u(e,"tabindex","-1")},m(C,A){L(C,e,A),r(e,l),r(l,n),r(n,o),r(l,i),r(l,a),r(a,f),r(l,p),r(l,d),r(d,m),r(d,v),r(d,h),_||(b=[V(m,"click",t[25]),V(h,"click",t[26])],_=!0)},p(C,A){A&1&&s!==(s=C[0]==="en"?"Choose Your Language":"Velg spr√•k")&&S(o,s),A&1&&c!==(c=C[0]==="en"?"You can change this anytime in My Collection":"Du kan endre dette n√•r som helst i Min samling")&&S(f,c)},d(C){C&&T(e),_=!1,te(b)}}}function mn(t){var U;let e,l,n,s=t[12].appTitle+"",o,i,a,c,f=t[12].playQuiz+"",p,d,m,v=t[12].myCollection+"",h,_,b=(((U=t[4])==null?void 0:U.cards.length)||0)+"",C,A,I=t[3].length+"",q,E,y,O,N,M,K,B,J,Y;const Z=[cn,an],j=[];function F(D,R){return D[9]==="quiz"?0:1}N=F(t),M=j[N]=Z[N](t);let Q=t[10]&&Vt(t);return{c(){e=g("div"),l=g("header"),n=g("h1"),o=w(s),i=k(),a=g("nav"),c=g("button"),p=w(f),d=k(),m=g("button"),h=w(v),_=w(" ("),C=w(b),A=w("/"),q=w(I),E=w(")"),y=k(),O=g("main"),M.c(),K=k(),Q&&Q.c(),u(n,"class","app-title svelte-m0aajl"),u(c,"class","nav-btn svelte-m0aajl"),X(c,"active",t[9]==="quiz"),u(m,"class","nav-btn svelte-m0aajl"),X(m,"active",t[9]==="collection"),u(a,"class","svelte-m0aajl"),u(l,"class","app-header svelte-m0aajl"),u(O,"class","svelte-m0aajl"),u(e,"class","app svelte-m0aajl")},m(D,R){L(D,e,R),r(e,l),r(l,n),r(n,o),r(l,i),r(l,a),r(a,c),r(c,p),r(a,d),r(a,m),r(m,h),r(m,_),r(m,C),r(m,A),r(m,q),r(m,E),r(e,y),r(e,O),j[N].m(O,null),r(e,K),Q&&Q.m(e,null),B=!0,J||(Y=[V(c,"click",t[21]),V(m,"click",t[20])],J=!0)},p(D,[R]){var fe;(!B||R&4096)&&s!==(s=D[12].appTitle+"")&&S(o,s),(!B||R&4096)&&f!==(f=D[12].playQuiz+"")&&S(p,f),(!B||R&512)&&X(c,"active",D[9]==="quiz"),(!B||R&4096)&&v!==(v=D[12].myCollection+"")&&S(h,v),(!B||R&16)&&b!==(b=(((fe=D[4])==null?void 0:fe.cards.length)||0)+"")&&S(C,b),(!B||R&8)&&I!==(I=D[3].length+"")&&S(q,I),(!B||R&512)&&X(m,"active",D[9]==="collection");let ne=N;N=F(D),N===ne?j[N].p(D,R):(Ht(),ee(j[ne],1,1,()=>{j[ne]=null}),Xt(),M=j[N],M?M.p(D,R):(M=j[N]=Z[N](D),M.c()),$(M,1),M.m(O,null)),D[10]?Q?Q.p(D,R):(Q=Vt(D),Q.c(),Q.m(e,null)):Q&&(Q.d(1),Q=null)},i(D){B||($(M),B=!0)},o(D){ee(M),B=!1},d(D){D&&T(e),j[N].d(),Q&&Q.d(),J=!1,te(Y)}}}function pn(t,e,l){let n,s,o;yt(t,Ye,j=>l(0,s=j)),yt(t,it,j=>l(13,o=j));let i="loading",a=null,c=[],f,p=!1,d=0,m=null,v="",h="quiz",_=!1,b=o;dl(()=>{l(4,f=oe()),localStorage.getItem("tcg-seen-language-dialog")?q():l(10,_=!0)});function C(j){const F=j.target;it.set(F.value),l(11,b=F.value),l(3,c=[]),q()}function A(j){Ye.set(j)}function I(j){Ye.set(j),localStorage.setItem("tcg-seen-language-dialog","true"),l(10,_=!1),q()}async function q(){try{l(1,i="loading"),c.length===0&&l(3,c=await kl(b));const j=new Set(f.cards.map(R=>R.id)),F=c.filter(R=>!j.has(R.id));if(F.length===0)throw new Error("Congratulations! You have collected all cards from this set!");const Q=Sl(F),U=await Cl(Q.id,b),D=Il(U);if(!D)throw new Error("Could not generate a valid question. Please try again.");l(2,a=D),l(1,i="quiz")}catch(j){console.error("Error loading question:",j),l(8,v=j instanceof Error?j.message:"Failed to load question"),l(1,i="error")}}function E(j){if(a){if(l(6,d=j.detail),l(5,p=Nl(a,d)),ql(p),l(7,m=null),p){const F={id:a.card.id,name:a.card.name,image:a.card.image,hp:a.card.hp,types:a.card.types,rarity:a.card.rarity,collectedAt:new Date().toISOString()};Al(F)&&l(7,m=a.card)}l(4,f=oe()),l(1,i="result")}}function y(){q()}function O(){q()}function N(){l(9,h="collection"),l(4,f=oe())}function M(){l(9,h="quiz")}function K(){l(4,f=oe())}const B=j=>j.id===b,J=j=>A(j.detail),Y=()=>I("en"),Z=()=>I("no");return t.$$.update=()=>{t.$$.dirty&1&&l(12,n=zl(s))},[s,i,a,c,f,p,d,m,v,h,_,b,n,o,C,A,I,E,y,O,N,M,K,B,J,Y,Z]}class vn extends ue{constructor(e){super(),ce(this,e,pn,mn,se,{})}}new vn({target:document.getElementById("app")});
