var gt=Object.defineProperty;var vt=(t,e,n)=>e in t?gt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Pe=(t,e,n)=>vt(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function F(){}function rt(t){return t()}function Qe(){return Object.create(null)}function he(t){t.forEach(rt)}function ot(t){return typeof t=="function"}function ge(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Ee;function ke(t,e){return t===e?!0:(Ee||(Ee=document.createElement("a")),Ee.href=e,t===Ee.href)}function pt(t){return Object.keys(t).length===0}function c(t,e){t.appendChild(e)}function S(t,e,n){t.insertBefore(e,n||null)}function E(t){t.parentNode&&t.parentNode.removeChild(t)}function be(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function C(t){return document.createTextNode(t)}function y(){return C(" ")}function _t(){return C("")}function se(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function u(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function yt(t){return Array.from(t.childNodes)}function O(t,e){e=""+e,t.data!==e&&(t.data=e)}function wt(t,e,n,l){t.style.setProperty(e,n,"")}function V(t,e,n){t.classList.toggle(e,!!n)}function kt(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}let $e;function Ae(t){$e=t}function ct(){if(!$e)throw new Error("Function called outside component initialization");return $e}function bt(t){ct().$$.on_mount.push(t)}function qe(){const t=ct();return(e,n,{cancelable:l=!1}={})=>{const s=t.$$.callbacks[e];if(s){const r=kt(e,n,{cancelable:l});return s.slice().forEach(o=>{o.call(t,r)}),!r.defaultPrevented}return!0}}const ye=[],Ie=[];let we=[];const Te=[],Ct=Promise.resolve();let ze=!1;function At(){ze||(ze=!0,Ct.then(at))}function Le(t){we.push(t)}const Ne=new Set;let _e=0;function at(){if(_e!==0)return;const t=$e;do{try{for(;_e<ye.length;){const e=ye[_e];_e++,Ae(e),$t(e.$$)}}catch(e){throw ye.length=0,_e=0,e}for(Ae(null),ye.length=0,_e=0;Ie.length;)Ie.pop()();for(let e=0;e<we.length;e+=1){const n=we[e];Ne.has(n)||(Ne.add(n),n())}we.length=0}while(ye.length);for(;Te.length;)Te.pop()();ze=!1,Ne.clear(),Ae(t)}function $t(t){if(t.fragment!==null){t.update(),he(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Le)}}function Et(t){const e=[],n=[];we.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),we=e}const Se=new Set;let fe;function it(){fe={r:0,c:[],p:fe}}function ut(){fe.r||he(fe.c),fe=fe.p}function U(t,e){t&&t.i&&(Se.delete(t),t.i(e))}function J(t,e,n,l){if(t&&t.o){if(Se.has(t))return;Se.add(t),fe.c.push(()=>{Se.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function H(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function me(t){t&&t.c()}function re(t,e,n){const{fragment:l,after_update:s}=t.$$;l&&l.m(e,n),Le(()=>{const r=t.$$.on_mount.map(rt).filter(ot);t.$$.on_destroy?t.$$.on_destroy.push(...r):he(r),t.$$.on_mount=[]}),s.forEach(Le)}function oe(t,e){const n=t.$$;n.fragment!==null&&(Et(n.after_update),he(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function St(t,e){t.$$.dirty[0]===-1&&(ye.push(t),At(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ve(t,e,n,l,s,r,o=null,i=[-1]){const a=$e;Ae(t);const f=t.$$={fragment:null,ctx:[],props:r,update:F,not_equal:s,bound:Qe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Qe(),dirty:i,skip_bound:!1,root:e.target||a.$$.root};o&&o(f.root);let m=!1;if(f.ctx=n?n(t,e.props||{},(v,b,...h)=>{const g=h.length?h[0]:b;return f.ctx&&s(f.ctx[v],f.ctx[v]=g)&&(!f.skip_bound&&f.bound[v]&&f.bound[v](g),m&&St(t,v)),b}):[],f.update(),m=!0,he(f.before_update),f.fragment=l?l(f.ctx):!1,e.target){if(e.hydrate){const v=yt(e.target);f.fragment&&f.fragment.l(v),v.forEach(E)}else f.fragment&&f.fragment.c();e.intro&&U(t.$$.fragment),re(t,e.target,e.anchor),at()}Ae(a)}class pe{constructor(){Pe(this,"$$");Pe(this,"$$set")}$destroy(){oe(this,1),this.$destroy=F}$on(e,n){if(!ot(n))return F;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!pt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const qt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(qt);const Pt="https://api.pokemontcg.io/v2",ft="3f67115f-6e77-4869-b29c-53b76ea85237";function Nt(){return{"X-Api-Key":ft,"Content-Type":"application/json"}}function Ot(t){var e;return{id:t.id,name:t.name,hp:t.hp?parseInt(t.hp,10):void 0,image:t.images.large,attacks:(e=t.attacks)==null?void 0:e.map(n=>({name:n.name,cost:n.cost,damage:n.damage,effect:n.text})),types:t.types,rarity:t.rarity,set:t.set}}async function It(){try{console.log("Starting getCardsForQuiz..."),console.log("API_KEY exists:",!!ft);const t="supertype:PokÃ©mon hp:[30 TO *] attacks.damage:[10 TO *]",e=50,n=Math.floor(Math.random()*10)+1,l=new URL(`${Pt}/cards`);l.searchParams.append("q",t),l.searchParams.append("pageSize",e.toString()),l.searchParams.append("page",n.toString()),l.searchParams.append("orderBy","-set.releaseDate"),console.log("Fetching from URL:",l.toString());const s=await fetch(l.toString(),{headers:Nt()});if(console.log("Response status:",s.status),!s.ok){const i=await s.text();throw console.error("API Error response:",i),new Error(`API request failed: ${s.status} ${s.statusText}`)}const r=await s.json();console.log("Received data, total cards:",r.data.length);const o=r.data.filter(i=>!i.hp||!i.attacks||i.attacks.length===0||parseInt(i.hp,10)<=0?!1:i.attacks.some(m=>{if(!m.damage)return!1;const v=m.damage.match(/(\d+)/);return v&&parseInt(v[1],10)>0})).map(Ot);if(console.log("Valid cards after filtering:",o.length),o.length<10)throw console.warn("Not enough valid cards, only found:",o.length),new Error("Not enough valid cards found. Please try again.");return console.log("Successfully returning",o.length,"cards"),o}catch(t){throw console.error("Error fetching cards from Pokemon TCG API:",t),t}}function zt(t,e){const n=t.filter(s=>s.attacks&&s.attacks.length>0&&s.hp&&s.hp>0);if(n.length<e)throw new Error("Not enough valid cards available");return[...n].sort(()=>Math.random()-.5).slice(0,e)}const dt="pokemon-tcg-collection",mt="1.0";function Lt(){return{totalQuestions:0,correctAnswers:0,incorrectAnswers:0}}function Oe(){return{cards:[],stats:Lt(),version:mt}}function de(){try{const t=localStorage.getItem(dt);if(!t)return Oe();const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?(console.warn("Invalid collection format, resetting..."),Oe()):e}catch(t){return console.error("Error loading collection from local storage:",t),Oe()}}function Me(t){try{const e={...t,version:mt};localStorage.setItem(dt,JSON.stringify(e))}catch(e){throw console.error("Error saving collection to local storage:",e),new Error("Failed to save collection")}}function Re(t){try{const e=de();return e.cards.some(l=>l.id===t.id)?!1:(e.cards.push(t),Me(e),!0)}catch(e){return console.error("Error adding card to collection:",e),!1}}function Mt(t){try{const e=de();e.stats.totalQuestions++,t?e.stats.correctAnswers++:e.stats.incorrectAnswers++,Me(e)}catch(e){console.error("Error updating stats:",e)}}function Qt(){const t=de();return JSON.stringify(t,null,2)}function Tt(t){try{const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?{success:!1,error:"Invalid collection format"}:!e.stats.totalQuestions===void 0||!e.stats.correctAnswers===void 0||!e.stats.incorrectAnswers===void 0?{success:!1,error:"Invalid stats format"}:(Me(e),{success:!0})}catch(e){return console.error("Error importing collection:",e),{success:!1,error:"Failed to parse JSON file"}}}function ht(t){if(!t)return 0;const e=t.match(/(\d+)/);return e?parseInt(e[1],10):0}function Rt(t){if(!t.attacks||t.attacks.length===0)return null;const e=t.attacks.filter(l=>ht(l.damage)>0);if(e.length===0)return null;const n=Math.floor(Math.random()*e.length);return e[n]}function Ft(t,e){return Math.ceil(e/t)}function Vt(t){const e=new Set([t]);for(;e.size<4;){const n=Math.floor(Math.random()*3)+1;if(Math.random()>.5)e.add(t+n);else{const s=t-n;s>0&&e.add(s)}}return Array.from(e).sort((n,l)=>n-l)}function jt(t){if(t.length<2)return null;const[e,n]=t,l=Rt(e);if(!l||!n.hp||n.hp<=0)return null;const s=ht(l.damage);if(s<=0)return null;const r=Ft(s,n.hp),o=Vt(r);return{attackerCard:e,defenderCard:n,selectedAttack:l,correctAnswer:r,options:o}}function Dt(t,e){return e===t.correctAnswer}function Fe(t,e,n){const l=t.slice();return l[3]=e[n],l}function Ve(t,e,n){const l=t.slice();return l[6]=e[n],l}function je(t){let e,n,l,s,r=t[0].hp+"",o;return{c(){e=d("div"),n=d("span"),n.textContent="HP",l=y(),s=d("span"),o=C(r),u(n,"class","hp-label svelte-1c2yytc"),u(s,"class","hp-value svelte-1c2yytc"),u(e,"class","card-hp svelte-1c2yytc")},m(i,a){S(i,e,a),c(e,n),c(e,l),c(e,s),c(s,o)},p(i,a){a&1&&r!==(r=i[0].hp+"")&&O(o,r)},d(i){i&&E(e)}}}function De(t){let e,n=H(t[0].types),l=[];for(let s=0;s<n.length;s+=1)l[s]=Be(Ve(t,n,s));return{c(){e=d("div");for(let s=0;s<l.length;s+=1)l[s].c();u(e,"class","card-types svelte-1c2yytc")},m(s,r){S(s,e,r);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null)},p(s,r){if(r&1){n=H(s[0].types);let o;for(o=0;o<n.length;o+=1){const i=Ve(s,n,o);l[o]?l[o].p(i,r):(l[o]=Be(i),l[o].c(),l[o].m(e,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(s){s&&E(e),be(l,s)}}}function Be(t){let e,n=t[6]+"",l;return{c(){e=d("span"),l=C(n),u(e,"class","type-badge svelte-1c2yytc")},m(s,r){S(s,e,r),c(e,l)},p(s,r){r&1&&n!==(n=s[6]+"")&&O(l,n)},d(s){s&&E(e)}}}function Ue(t){let e,n,l,s=H(t[0].attacks),r=[];for(let o=0;o<s.length;o+=1)r[o]=Ye(Fe(t,s,o));return{c(){e=d("div"),n=d("h4"),n.textContent="Attacks:",l=y();for(let o=0;o<r.length;o+=1)r[o].c();u(n,"class","svelte-1c2yytc"),u(e,"class","card-attacks svelte-1c2yytc")},m(o,i){S(o,e,i),c(e,n),c(e,l);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null)},p(o,i){if(i&5){s=H(o[0].attacks);let a;for(a=0;a<s.length;a+=1){const f=Fe(o,s,a);r[a]?r[a].p(f,i):(r[a]=Ye(f),r[a].c(),r[a].m(e,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=s.length}},d(o){o&&E(e),be(r,o)}}}function He(t){let e,n=t[3].damage+"",l;return{c(){e=d("span"),l=C(n),u(e,"class","attack-damage svelte-1c2yytc")},m(s,r){S(s,e,r),c(e,l)},p(s,r){r&1&&n!==(n=s[3].damage+"")&&O(l,n)},d(s){s&&E(e)}}}function Ye(t){let e,n,l=t[3].name+"",s,r,o,i=t[3].damage&&He(t);return{c(){e=d("div"),n=d("span"),s=C(l),r=y(),i&&i.c(),o=y(),u(n,"class","attack-name svelte-1c2yytc"),u(e,"class","attack svelte-1c2yytc"),V(e,"highlighted",t[2]===t[3].name)},m(a,f){S(a,e,f),c(e,n),c(n,s),c(e,r),i&&i.m(e,null),c(e,o)},p(a,f){f&1&&l!==(l=a[3].name+"")&&O(s,l),a[3].damage?i?i.p(a,f):(i=He(a),i.c(),i.m(e,o)):i&&(i.d(1),i=null),f&5&&V(e,"highlighted",a[2]===a[3].name)},d(a){a&&E(e),i&&i.d()}}}function Bt(t){let e,n,l,s,r,o,i,a,f=t[0].name+"",m,v,b,h,g=t[0].hp&&je(t),p=t[0].types&&t[0].types.length>0&&De(t),_=t[1]&&t[0].attacks&&t[0].attacks.length>0&&Ue(t);return{c(){e=d("div"),n=d("div"),l=d("img"),o=y(),i=d("div"),a=d("h3"),m=C(f),v=y(),g&&g.c(),b=y(),p&&p.c(),h=y(),_&&_.c(),ke(l.src,s=t[0].image)||u(l,"src",s),u(l,"alt",r=t[0].name),u(l,"class","svelte-1c2yytc"),u(n,"class","card-image svelte-1c2yytc"),u(a,"class","card-name svelte-1c2yytc"),u(i,"class","card-info svelte-1c2yytc"),u(e,"class","pokemon-card svelte-1c2yytc")},m(w,A){S(w,e,A),c(e,n),c(n,l),c(e,o),c(e,i),c(i,a),c(a,m),c(i,v),g&&g.m(i,null),c(i,b),p&&p.m(i,null),c(i,h),_&&_.m(i,null)},p(w,[A]){A&1&&!ke(l.src,s=w[0].image)&&u(l,"src",s),A&1&&r!==(r=w[0].name)&&u(l,"alt",r),A&1&&f!==(f=w[0].name+"")&&O(m,f),w[0].hp?g?g.p(w,A):(g=je(w),g.c(),g.m(i,b)):g&&(g.d(1),g=null),w[0].types&&w[0].types.length>0?p?p.p(w,A):(p=De(w),p.c(),p.m(i,h)):p&&(p.d(1),p=null),w[1]&&w[0].attacks&&w[0].attacks.length>0?_?_.p(w,A):(_=Ue(w),_.c(),_.m(i,null)):_&&(_.d(1),_=null)},i:F,o:F,d(w){w&&E(e),g&&g.d(),p&&p.d(),_&&_.d()}}}function Ut(t,e,n){let{card:l}=e,{showAttacks:s=!1}=e,{highlightedAttack:r=null}=e;return t.$$set=o=>{"card"in o&&n(0,l=o.card),"showAttacks"in o&&n(1,s=o.showAttacks),"highlightedAttack"in o&&n(2,r=o.highlightedAttack)},[l,s,r]}class Ge extends pe{constructor(e){super(),ve(this,e,Ut,Bt,ge,{card:0,showAttacks:1,highlightedAttack:2})}}function Je(t,e,n){const l=t.slice();return l[5]=e[n],l}function Ke(t){let e,n=t[5]+"",l,s,r=t[5]===1?"hit":"hits",o,i,a,f,m;function v(){return t[3](t[5])}return{c(){e=d("button"),l=C(n),s=y(),o=C(r),i=y(),u(e,"class","answer-btn btn-primary svelte-19eymr8"),e.disabled=a=t[1]!==null},m(b,h){S(b,e,h),c(e,l),c(e,s),c(e,o),c(e,i),f||(m=se(e,"click",v),f=!0)},p(b,h){t=b,h&1&&n!==(n=t[5]+"")&&O(l,n),h&1&&r!==(r=t[5]===1?"hit":"hits")&&O(o,r),h&2&&a!==(a=t[1]!==null)&&(e.disabled=a)},d(b){b&&E(e),f=!1,m()}}}function Ht(t){let e,n,l,s,r,o,i,a=t[0].attackerCard.name+"",f,m,v,b=t[0].selectedAttack.name+"",h,g,p=t[0].selectedAttack.damage+"",_,w,A,k=t[0].defenderCard.name+"",$,q,N,M,I,R,Y,j,X,Z,ce,K,ae,ie,W,x,B,ne,Ce,le,D;j=new Ge({props:{card:t[0].attackerCard,showAttacks:!0,highlightedAttack:t[0].selectedAttack.name}}),W=new Ge({props:{card:t[0].defenderCard}});let ee=H(t[0].options),Q=[];for(let P=0;P<ee.length;P+=1)Q[P]=Ke(Je(t,ee,P));return{c(){e=d("div"),n=d("div"),l=d("h2"),l.textContent="Pokemon Math Challenge!",s=y(),r=d("p"),o=C("How many times does "),i=d("strong"),f=C(a),m=C(` need to use
      `),v=d("strong"),h=C(b),g=C(`
      (`),_=C(p),w=C(` damage)
      to knock out `),A=d("strong"),$=C(k),q=C("?"),N=y(),M=d("div"),I=d("div"),R=d("div"),R.textContent="Attacker",Y=y(),me(j.$$.fragment),X=y(),Z=d("div"),Z.innerHTML='<span class="svelte-19eymr8">VS</span>',ce=y(),K=d("div"),ae=d("div"),ae.textContent="Defender",ie=y(),me(W.$$.fragment),x=y(),B=d("div"),ne=d("h3"),ne.textContent="Choose your answer:",Ce=y(),le=d("div");for(let P=0;P<Q.length;P+=1)Q[P].c();u(l,"class","svelte-19eymr8"),u(i,"class","svelte-19eymr8"),u(v,"class","svelte-19eymr8"),u(A,"class","svelte-19eymr8"),u(r,"class","quiz-question svelte-19eymr8"),u(n,"class","quiz-header svelte-19eymr8"),u(R,"class","card-label svelte-19eymr8"),u(I,"class","card-wrapper svelte-19eymr8"),u(Z,"class","vs-divider svelte-19eymr8"),u(ae,"class","card-label svelte-19eymr8"),u(K,"class","card-wrapper svelte-19eymr8"),u(M,"class","cards-container svelte-19eymr8"),u(ne,"class","svelte-19eymr8"),u(le,"class","answer-buttons svelte-19eymr8"),u(B,"class","answers-container svelte-19eymr8"),u(e,"class","quiz-view svelte-19eymr8")},m(P,z){S(P,e,z),c(e,n),c(n,l),c(n,s),c(n,r),c(r,o),c(r,i),c(i,f),c(r,m),c(r,v),c(v,h),c(r,g),c(r,_),c(r,w),c(r,A),c(A,$),c(r,q),c(e,N),c(e,M),c(M,I),c(I,R),c(I,Y),re(j,I,null),c(M,X),c(M,Z),c(M,ce),c(M,K),c(K,ae),c(K,ie),re(W,K,null),c(e,x),c(e,B),c(B,ne),c(B,Ce),c(B,le);for(let G=0;G<Q.length;G+=1)Q[G]&&Q[G].m(le,null);D=!0},p(P,[z]){(!D||z&1)&&a!==(a=P[0].attackerCard.name+"")&&O(f,a),(!D||z&1)&&b!==(b=P[0].selectedAttack.name+"")&&O(h,b),(!D||z&1)&&p!==(p=P[0].selectedAttack.damage+"")&&O(_,p),(!D||z&1)&&k!==(k=P[0].defenderCard.name+"")&&O($,k);const G={};z&1&&(G.card=P[0].attackerCard),z&1&&(G.highlightedAttack=P[0].selectedAttack.name),j.$set(G);const ue={};if(z&1&&(ue.card=P[0].defenderCard),W.$set(ue),z&7){ee=H(P[0].options);let L;for(L=0;L<ee.length;L+=1){const T=Je(P,ee,L);Q[L]?Q[L].p(T,z):(Q[L]=Ke(T),Q[L].c(),Q[L].m(le,null))}for(;L<Q.length;L+=1)Q[L].d(1);Q.length=ee.length}},i(P){D||(U(j.$$.fragment,P),U(W.$$.fragment,P),D=!0)},o(P){J(j.$$.fragment,P),J(W.$$.fragment,P),D=!1},d(P){P&&E(e),oe(j),oe(W),be(Q,P)}}}function Yt(t,e,n){let{question:l}=e;const s=qe();let r=null;function o(a){n(1,r=a),s("answer",a)}const i=a=>o(a);return t.$$set=a=>{"question"in a&&n(0,l=a.question)},[l,r,o,i]}class Gt extends pe{constructor(e){super(),ve(this,e,Yt,Ht,ge,{question:0})}}function We(t,e,n){const l=t.slice();return l[6]=e[n],l}function Jt(t){let e,n,l,s,r,o,i,a,f,m,v,b,h=t[1]===1?"hit":"hits",g,p,_,w;return{c(){e=d("div"),e.textContent="âœ—",n=y(),l=d("h2"),l.textContent="Not quite!",s=y(),r=d("p"),o=C("You answered "),i=d("strong"),a=C(t[2]),f=C(", but the correct answer was "),m=d("strong"),v=C(t[1]),b=y(),g=C(h),p=C("."),_=y(),w=d("p"),w.textContent="Try again with the next question!",u(e,"class","result-icon error svelte-1ryvcfy"),u(l,"class","result-title svelte-1ryvcfy"),u(i,"class","svelte-1ryvcfy"),u(m,"class","svelte-1ryvcfy"),u(r,"class","result-message svelte-1ryvcfy"),u(w,"class","encouragement svelte-1ryvcfy")},m(A,k){S(A,e,k),S(A,n,k),S(A,l,k),S(A,s,k),S(A,r,k),c(r,o),c(r,i),c(i,a),c(r,f),c(r,m),c(m,v),c(r,b),c(r,g),c(r,p),S(A,_,k),S(A,w,k)},p(A,k){k&4&&O(a,A[2]),k&2&&O(v,A[1]),k&2&&h!==(h=A[1]===1?"hit":"hits")&&O(g,h)},d(A){A&&(E(e),E(n),E(l),E(s),E(r),E(_),E(w))}}}function Kt(t){let e,n,l,s,r,o,i,a,f,m=t[1]===1?"hit":"hits",v,b,h,g,p,_,w,A=H(t[3]),k=[];for(let $=0;$<A.length;$+=1)k[$]=Xe(We(t,A,$));return{c(){e=d("div"),e.textContent="âœ“",n=y(),l=d("h2"),l.textContent="Correct!",s=y(),r=d("p"),o=C("Great job! The answer was "),i=d("strong"),a=C(t[1]),f=y(),v=C(m),b=C("!"),h=y(),g=d("div"),p=d("h3"),p.textContent="You won these cards!",_=y(),w=d("div");for(let $=0;$<k.length;$+=1)k[$].c();u(e,"class","result-icon success svelte-1ryvcfy"),u(l,"class","result-title svelte-1ryvcfy"),u(i,"class","svelte-1ryvcfy"),u(r,"class","result-message svelte-1ryvcfy"),u(p,"class","svelte-1ryvcfy"),u(w,"class","cards-grid svelte-1ryvcfy"),u(g,"class","won-cards svelte-1ryvcfy")},m($,q){S($,e,q),S($,n,q),S($,l,q),S($,s,q),S($,r,q),c(r,o),c(r,i),c(i,a),c(r,f),c(r,v),c(r,b),S($,h,q),S($,g,q),c(g,p),c(g,_),c(g,w);for(let N=0;N<k.length;N+=1)k[N]&&k[N].m(w,null)},p($,q){if(q&2&&O(a,$[1]),q&2&&m!==(m=$[1]===1?"hit":"hits")&&O(v,m),q&8){A=H($[3]);let N;for(N=0;N<A.length;N+=1){const M=We($,A,N);k[N]?k[N].p(M,q):(k[N]=Xe(M),k[N].c(),k[N].m(w,null))}for(;N<k.length;N+=1)k[N].d(1);k.length=A.length}},d($){$&&(E(e),E(n),E(l),E(s),E(r),E(h),E(g)),be(k,$)}}}function Xe(t){let e,n,l,s,r,o,i=t[6].name+"",a,f;return{c(){e=d("div"),n=d("img"),r=y(),o=d("span"),a=C(i),f=y(),ke(n.src,l=t[6].image)||u(n,"src",l),u(n,"alt",s=t[6].name),u(n,"class","svelte-1ryvcfy"),u(o,"class","card-name svelte-1ryvcfy"),u(e,"class","mini-card svelte-1ryvcfy")},m(m,v){S(m,e,v),c(e,n),c(e,r),c(e,o),c(o,a),c(e,f)},p(m,v){v&8&&!ke(n.src,l=m[6].image)&&u(n,"src",l),v&8&&s!==(s=m[6].name)&&u(n,"alt",s),v&8&&i!==(i=m[6].name+"")&&O(a,i)},d(m){m&&E(e)}}}function Wt(t){let e,n,l,s,r,o;function i(m,v){return m[0]?Kt:Jt}let a=i(t),f=a(t);return{c(){e=d("div"),n=d("div"),f.c(),l=y(),s=d("button"),s.textContent="Next Question",u(n,"class","result-card svelte-1ryvcfy"),V(n,"correct",t[0]),V(n,"incorrect",!t[0]),u(s,"class","next-btn btn-primary svelte-1ryvcfy"),u(e,"class","result-view svelte-1ryvcfy")},m(m,v){S(m,e,v),c(e,n),f.m(n,null),c(e,l),c(e,s),r||(o=se(s,"click",t[4]),r=!0)},p(m,[v]){a===(a=i(m))&&f?f.p(m,v):(f.d(1),f=a(m),f&&(f.c(),f.m(n,null))),v&1&&V(n,"correct",m[0]),v&1&&V(n,"incorrect",!m[0])},i:F,o:F,d(m){m&&E(e),f.d(),r=!1,o()}}}function Xt(t,e,n){let{isCorrect:l}=e,{correctAnswer:s}=e,{userAnswer:r}=e,{wonCards:o}=e;const i=qe();function a(){i("next")}return t.$$set=f=>{"isCorrect"in f&&n(0,l=f.isCorrect),"correctAnswer"in f&&n(1,s=f.correctAnswer),"userAnswer"in f&&n(2,r=f.userAnswer),"wonCards"in f&&n(3,o=f.wonCards)},[l,s,r,o,a]}class Zt extends pe{constructor(e){super(),ve(this,e,Xt,Wt,ge,{isCorrect:0,correctAnswer:1,userAnswer:2,wonCards:3})}}function xt(){try{const t=Qt(),e=new Blob([t],{type:"application/json"}),n=URL.createObjectURL(e),l=document.createElement("a");l.href=n,l.download=`pokemon-collection-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(n)}catch(t){throw console.error("Error downloading backup:",t),new Error("Failed to download backup")}}function en(t){return new Promise(e=>{const n=new FileReader;n.onload=l=>{var s;try{const r=(s=l.target)==null?void 0:s.result,o=Tt(r);e(o)}catch(r){console.error("Error reading file:",r),e({success:!1,error:"Failed to read file"})}},n.onerror=()=>{e({success:!1,error:"Failed to read file"})},n.readAsText(t)})}function Ze(t,e,n){const l=t.slice();return l[10]=e[n],l}function xe(t,e,n){const l=t.slice();return l[13]=e[n],l}function et(t){let e,n=t[2].text+"",l;return{c(){e=d("div"),l=C(n),u(e,"class","message svelte-10ttrmt"),V(e,"success",t[2].type==="success"),V(e,"error",t[2].type==="error")},m(s,r){S(s,e,r),c(e,l)},p(s,r){r&4&&n!==(n=s[2].text+"")&&O(l,n),r&4&&V(e,"success",s[2].type==="success"),r&4&&V(e,"error",s[2].type==="error")},d(s){s&&E(e)}}}function tn(t){let e,n=H(t[0].cards),l=[];for(let s=0;s<n.length;s+=1)l[s]=st(Ze(t,n,s));return{c(){e=d("div");for(let s=0;s<l.length;s+=1)l[s].c();u(e,"class","cards-grid svelte-10ttrmt")},m(s,r){S(s,e,r);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null)},p(s,r){if(r&1){n=H(s[0].cards);let o;for(o=0;o<n.length;o+=1){const i=Ze(s,n,o);l[o]?l[o].p(i,r):(l[o]=st(i),l[o].c(),l[o].m(e,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(s){s&&E(e),be(l,s)}}}function nn(t){let e;return{c(){e=d("div"),e.innerHTML='<div class="empty-icon svelte-10ttrmt">ðŸ“¦</div> <h3 class="svelte-10ttrmt">No cards yet!</h3> <p class="svelte-10ttrmt">Answer questions correctly to start building your collection.</p>',u(e,"class","empty-state svelte-10ttrmt")},m(n,l){S(n,e,l)},p:F,d(n){n&&E(e)}}}function tt(t){let e,n,l=t[10].hp+"",s;return{c(){e=d("span"),n=C("HP "),s=C(l),u(e,"class","hp svelte-10ttrmt")},m(r,o){S(r,e,o),c(e,n),c(e,s)},p(r,o){o&1&&l!==(l=r[10].hp+"")&&O(s,l)},d(r){r&&E(e)}}}function nt(t){let e,n=H(t[10].types),l=[];for(let s=0;s<n.length;s+=1)l[s]=lt(xe(t,n,s));return{c(){e=d("div");for(let s=0;s<l.length;s+=1)l[s].c();u(e,"class","types svelte-10ttrmt")},m(s,r){S(s,e,r);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null)},p(s,r){if(r&1){n=H(s[10].types);let o;for(o=0;o<n.length;o+=1){const i=xe(s,n,o);l[o]?l[o].p(i,r):(l[o]=lt(i),l[o].c(),l[o].m(e,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(s){s&&E(e),be(l,s)}}}function lt(t){let e,n=t[13]+"",l;return{c(){e=d("span"),l=C(n),u(e,"class","type svelte-10ttrmt")},m(s,r){S(s,e,r),c(e,l)},p(s,r){r&1&&n!==(n=s[13]+"")&&O(l,n)},d(s){s&&E(e)}}}function st(t){let e,n,l,s,r,o,i,a=t[10].name+"",f,m,v,b,h=t[10].hp&&tt(t),g=t[10].types&&t[10].types.length>0&&nt(t);return{c(){e=d("div"),n=d("img"),r=y(),o=d("div"),i=d("h4"),f=C(a),m=y(),h&&h.c(),v=y(),g&&g.c(),b=y(),ke(n.src,l=t[10].image)||u(n,"src",l),u(n,"alt",s=t[10].name),u(n,"class","svelte-10ttrmt"),u(i,"class","svelte-10ttrmt"),u(o,"class","card-details svelte-10ttrmt"),u(e,"class","collection-card svelte-10ttrmt")},m(p,_){S(p,e,_),c(e,n),c(e,r),c(e,o),c(o,i),c(i,f),c(o,m),h&&h.m(o,null),c(o,v),g&&g.m(o,null),c(e,b)},p(p,_){_&1&&!ke(n.src,l=p[10].image)&&u(n,"src",l),_&1&&s!==(s=p[10].name)&&u(n,"alt",s),_&1&&a!==(a=p[10].name+"")&&O(f,a),p[10].hp?h?h.p(p,_):(h=tt(p),h.c(),h.m(o,v)):h&&(h.d(1),h=null),p[10].types&&p[10].types.length>0?g?g.p(p,_):(g=nt(p),g.c(),g.m(o,null)):g&&(g.d(1),g=null)},d(p){p&&E(e),h&&h.d(),g&&g.d()}}}function ln(t){let e,n,l,s,r,o,i,a,f,m,v,b,h,g,p,_=t[0].cards.length+"",w,A,k,$,q,N,M=t[0].stats.totalQuestions+"",I,R,Y,j,X,Z,ce=t[0].stats.correctAnswers+"",K,ae,ie,W,x,B,ne,Ce,le,D,ee,Q,P,z=t[2]&&et(t);function G(T,te){return T[0].cards.length===0?nn:tn}let ue=G(t),L=ue(t);return{c(){e=d("div"),n=d("div"),l=d("h2"),l.textContent="Your Collection",s=y(),r=d("div"),o=d("button"),o.textContent="Export Backup",i=y(),a=d("button"),a.textContent="Import Backup",f=y(),m=d("input"),v=y(),z&&z.c(),b=y(),h=d("div"),g=d("div"),p=d("div"),w=C(_),A=y(),k=d("div"),k.textContent="Cards Collected",$=y(),q=d("div"),N=d("div"),I=C(M),R=y(),Y=d("div"),Y.textContent="Questions Answered",j=y(),X=d("div"),Z=d("div"),K=C(ce),ae=y(),ie=d("div"),ie.textContent="Correct Answers",W=y(),x=d("div"),B=d("div"),ne=C(t[3]),Ce=C("%"),le=y(),D=d("div"),D.textContent="Accuracy",ee=y(),L.c(),u(l,"class","svelte-10ttrmt"),u(o,"class","btn-secondary"),u(a,"class","btn-secondary"),u(m,"type","file"),u(m,"accept",".json"),wt(m,"display","none"),u(r,"class","header-actions svelte-10ttrmt"),u(n,"class","collection-header svelte-10ttrmt"),u(p,"class","stat-value svelte-10ttrmt"),u(k,"class","stat-label svelte-10ttrmt"),u(g,"class","stat-card svelte-10ttrmt"),u(N,"class","stat-value svelte-10ttrmt"),u(Y,"class","stat-label svelte-10ttrmt"),u(q,"class","stat-card svelte-10ttrmt"),u(Z,"class","stat-value svelte-10ttrmt"),u(ie,"class","stat-label svelte-10ttrmt"),u(X,"class","stat-card svelte-10ttrmt"),u(B,"class","stat-value svelte-10ttrmt"),u(D,"class","stat-label svelte-10ttrmt"),u(x,"class","stat-card svelte-10ttrmt"),u(h,"class","stats-section svelte-10ttrmt"),u(e,"class","collection-view svelte-10ttrmt")},m(T,te){S(T,e,te),c(e,n),c(n,l),c(n,s),c(n,r),c(r,o),c(r,i),c(r,a),c(r,f),c(r,m),t[7](m),c(e,v),z&&z.m(e,null),c(e,b),c(e,h),c(h,g),c(g,p),c(p,w),c(g,A),c(g,k),c(h,$),c(h,q),c(q,N),c(N,I),c(q,R),c(q,Y),c(h,j),c(h,X),c(X,Z),c(Z,K),c(X,ae),c(X,ie),c(h,W),c(h,x),c(x,B),c(B,ne),c(B,Ce),c(x,le),c(x,D),c(e,ee),L.m(e,null),Q||(P=[se(o,"click",t[4]),se(a,"click",t[5]),se(m,"change",t[6])],Q=!0)},p(T,[te]){T[2]?z?z.p(T,te):(z=et(T),z.c(),z.m(e,b)):z&&(z.d(1),z=null),te&1&&_!==(_=T[0].cards.length+"")&&O(w,_),te&1&&M!==(M=T[0].stats.totalQuestions+"")&&O(I,M),te&1&&ce!==(ce=T[0].stats.correctAnswers+"")&&O(K,ce),te&8&&O(ne,T[3]),ue===(ue=G(T))&&L?L.p(T,te):(L.d(1),L=ue(T),L&&(L.c(),L.m(e,null)))},i:F,o:F,d(T){T&&E(e),t[7](null),z&&z.d(),L.d(),Q=!1,he(P)}}}function sn(t,e,n){let l,{collection:s}=e;const r=qe();let o,i=null;function a(){try{xt(),v("Collection exported successfully!","success")}catch{v("Failed to export collection","error")}}function f(){o.click()}async function m(h){var _;const g=h.target,p=(_=g.files)==null?void 0:_[0];if(p){try{const w=await en(p);w.success?(v("Collection imported successfully!","success"),r("refresh")):v(w.error||"Failed to import collection","error")}catch{v("Failed to import collection","error")}g.value=""}}function v(h,g){n(2,i={text:h,type:g}),setTimeout(()=>{n(2,i=null)},3e3)}function b(h){Ie[h?"unshift":"push"](()=>{o=h,n(1,o)})}return t.$$set=h=>{"collection"in h&&n(0,s=h.collection)},t.$$.update=()=>{t.$$.dirty&1&&n(3,l=s.stats.totalQuestions>0?Math.round(s.stats.correctAnswers/s.stats.totalQuestions*100):0)},[s,o,i,l,a,f,m,b]}class rn extends pe{constructor(e){super(),ve(this,e,sn,ln,ge,{collection:0})}}function on(t){let e,n,l,s,r;return{c(){e=d("div"),n=d("div"),l=y(),s=d("p"),r=C(t[0]),u(n,"class","spinner svelte-1lxornd"),u(s,"class","svelte-1lxornd"),u(e,"class","loading-view svelte-1lxornd")},m(o,i){S(o,e,i),c(e,n),c(e,l),c(e,s),c(s,r)},p(o,[i]){i&1&&O(r,o[0])},i:F,o:F,d(o){o&&E(e)}}}function cn(t,e,n){let{message:l="Loading..."}=e;return t.$$set=s=>{"message"in s&&n(0,l=s.message)},[l]}class an extends pe{constructor(e){super(),ve(this,e,cn,on,ge,{message:0})}}function un(t){let e,n,l,s,r,o,i,a,f,m,v;return{c(){e=d("div"),n=d("div"),n.textContent="âš ï¸",l=y(),s=d("h2"),s.textContent="Oops!",r=y(),o=d("p"),i=C(t[0]),a=y(),f=d("button"),f.textContent="Try Again",u(n,"class","error-icon svelte-na0xmw"),u(s,"class","svelte-na0xmw"),u(o,"class","svelte-na0xmw"),u(f,"class","btn-primary"),u(e,"class","error-view svelte-na0xmw")},m(b,h){S(b,e,h),c(e,n),c(e,l),c(e,s),c(e,r),c(e,o),c(o,i),c(e,a),c(e,f),m||(v=se(f,"click",t[1]),m=!0)},p(b,[h]){h&1&&O(i,b[0])},i:F,o:F,d(b){b&&E(e),m=!1,v()}}}function fn(t,e,n){let{message:l="Something went wrong"}=e;const s=qe();function r(){s("retry")}return t.$$set=o=>{"message"in o&&n(0,l=o.message)},[l,r]}class dn extends pe{constructor(e){super(),ve(this,e,fn,un,ge,{message:0})}}function mn(t){let e,n;return e=new rn({props:{collection:t[2]}}),e.$on("refresh",t[13]),{c(){me(e.$$.fragment)},m(l,s){re(e,l,s),n=!0},p(l,s){const r={};s&4&&(r.collection=l[2]),e.$set(r)},i(l){n||(U(e.$$.fragment,l),n=!0)},o(l){J(e.$$.fragment,l),n=!1},d(l){oe(e,l)}}}function hn(t){let e,n,l,s;const r=[_n,pn,vn,gn],o=[];function i(a,f){return a[0]==="loading"?0:a[0]==="quiz"&&a[1]?1:a[0]==="result"&&a[1]?2:a[0]==="error"?3:-1}return~(e=i(t))&&(n=o[e]=r[e](t)),{c(){n&&n.c(),l=_t()},m(a,f){~e&&o[e].m(a,f),S(a,l,f),s=!0},p(a,f){let m=e;e=i(a),e===m?~e&&o[e].p(a,f):(n&&(it(),J(o[m],1,1,()=>{o[m]=null}),ut()),~e?(n=o[e],n?n.p(a,f):(n=o[e]=r[e](a),n.c()),U(n,1),n.m(l.parentNode,l)):n=null)},i(a){s||(U(n),s=!0)},o(a){J(n),s=!1},d(a){a&&E(l),~e&&o[e].d(a)}}}function gn(t){let e,n;return e=new dn({props:{message:t[6]}}),e.$on("retry",t[10]),{c(){me(e.$$.fragment)},m(l,s){re(e,l,s),n=!0},p(l,s){const r={};s&64&&(r.message=l[6]),e.$set(r)},i(l){n||(U(e.$$.fragment,l),n=!0)},o(l){J(e.$$.fragment,l),n=!1},d(l){oe(e,l)}}}function vn(t){let e,n;return e=new Zt({props:{isCorrect:t[3],correctAnswer:t[1].correctAnswer,userAnswer:t[4],wonCards:t[5]}}),e.$on("next",t[9]),{c(){me(e.$$.fragment)},m(l,s){re(e,l,s),n=!0},p(l,s){const r={};s&8&&(r.isCorrect=l[3]),s&2&&(r.correctAnswer=l[1].correctAnswer),s&16&&(r.userAnswer=l[4]),s&32&&(r.wonCards=l[5]),e.$set(r)},i(l){n||(U(e.$$.fragment,l),n=!0)},o(l){J(e.$$.fragment,l),n=!1},d(l){oe(e,l)}}}function pn(t){let e,n;return e=new Gt({props:{question:t[1]}}),e.$on("answer",t[8]),{c(){me(e.$$.fragment)},m(l,s){re(e,l,s),n=!0},p(l,s){const r={};s&2&&(r.question=l[1]),e.$set(r)},i(l){n||(U(e.$$.fragment,l),n=!0)},o(l){J(e.$$.fragment,l),n=!1},d(l){oe(e,l)}}}function _n(t){let e,n;return e=new an({props:{message:"Loading new question..."}}),{c(){me(e.$$.fragment)},m(l,s){re(e,l,s),n=!0},p:F,i(l){n||(U(e.$$.fragment,l),n=!0)},o(l){J(e.$$.fragment,l),n=!1},d(l){oe(e,l)}}}function yn(t){var M;let e,n,l,s,r,o,i,a,f,m=(((M=t[2])==null?void 0:M.cards.length)||0)+"",v,b,h,g,p,_,w,A,k;const $=[hn,mn],q=[];function N(I,R){return I[7]==="quiz"?0:1}return p=N(t),_=q[p]=$[p](t),{c(){e=d("div"),n=d("header"),l=d("h1"),l.textContent="Pokemon TCG Math Quiz",s=y(),r=d("nav"),o=d("button"),o.textContent="Play Quiz",i=y(),a=d("button"),f=C("My Collection ("),v=C(m),b=C(")"),h=y(),g=d("main"),_.c(),u(l,"class","svelte-cy1rwm"),u(o,"class","nav-btn svelte-cy1rwm"),V(o,"active",t[7]==="quiz"),u(a,"class","nav-btn svelte-cy1rwm"),V(a,"active",t[7]==="collection"),u(r,"class","svelte-cy1rwm"),u(n,"class","app-header svelte-cy1rwm"),u(g,"class","svelte-cy1rwm"),u(e,"class","app svelte-cy1rwm")},m(I,R){S(I,e,R),c(e,n),c(n,l),c(n,s),c(n,r),c(r,o),c(r,i),c(r,a),c(a,f),c(a,v),c(a,b),c(e,h),c(e,g),q[p].m(g,null),w=!0,A||(k=[se(o,"click",t[12]),se(a,"click",t[11])],A=!0)},p(I,[R]){var j;(!w||R&128)&&V(o,"active",I[7]==="quiz"),(!w||R&4)&&m!==(m=(((j=I[2])==null?void 0:j.cards.length)||0)+"")&&O(v,m),(!w||R&128)&&V(a,"active",I[7]==="collection");let Y=p;p=N(I),p===Y?q[p].p(I,R):(it(),J(q[Y],1,1,()=>{q[Y]=null}),ut(),_=q[p],_?_.p(I,R):(_=q[p]=$[p](I),_.c()),U(_,1),_.m(g,null))},i(I){w||(U(_),w=!0)},o(I){J(_),w=!1},d(I){I&&E(e),q[p].d(),A=!1,he(k)}}}function wn(t,e,n){let l="loading",s=null,r=[],o,i=!1,a=0,f=[],m="",v="quiz";bt(()=>{n(2,o=de()),b()});async function b(){try{console.log("loadNewQuestion called, current allCards.length:",r.length),n(0,l="loading"),r.length<2&&(console.log("Fetching new cards..."),r=await It(),console.log("Fetched cards, total:",r.length)),console.log("Getting random cards...");const k=zt(r,2);console.log("Selected cards:",k.map(q=>q.name)),console.log("Generating quiz question...");const $=jt(k);if(!$)throw new Error("Could not generate a valid question. Please try again.");console.log("Question generated successfully"),n(1,s=$),n(0,l="quiz")}catch(k){console.error("Error loading question:",k),n(6,m=k instanceof Error?k.message:"Failed to load question"),n(0,l="error")}}function h(k){if(s){if(n(4,a=k.detail),n(3,i=Dt(s,a)),Mt(i),n(5,f=[]),i){const $={id:s.attackerCard.id,name:s.attackerCard.name,image:s.attackerCard.image,hp:s.attackerCard.hp,types:s.attackerCard.types,rarity:s.attackerCard.rarity,collectedAt:new Date().toISOString()};Re($)&&f.push(s.attackerCard);const N={id:s.defenderCard.id,name:s.defenderCard.name,image:s.defenderCard.image,hp:s.defenderCard.hp,types:s.defenderCard.types,rarity:s.defenderCard.rarity,collectedAt:new Date().toISOString()};Re(N)&&f.push(s.defenderCard)}n(2,o=de()),n(0,l="result")}}function g(){b()}function p(){b()}function _(){n(7,v="collection"),n(2,o=de())}function w(){n(7,v="quiz")}function A(){n(2,o=de())}return[l,s,o,i,a,f,m,v,h,g,p,_,w,A]}class kn extends pe{constructor(e){super(),ve(this,e,wn,yn,ge,{})}}new kn({target:document.getElementById("app")});
