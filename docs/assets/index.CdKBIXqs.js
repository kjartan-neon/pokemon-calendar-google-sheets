var ht=Object.defineProperty;var vt=(t,e,n)=>e in t?ht(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ke=(t,e,n)=>vt(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function M(){}function tt(t){return t()}function Qe(){return Object.create(null)}function J(t){t.forEach(tt)}function nt(t){return typeof t=="function"}function X(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let ve;function oe(t,e){return t===e?!0:(ve||(ve=document.createElement("a")),ve.href=e,t===ve.href)}function pt(t){return Object.keys(t).length===0}function c(t,e){t.appendChild(e)}function C(t,e,n){t.insertBefore(e,n||null)}function k(t){t.parentNode&&t.parentNode.removeChild(t)}function ge(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function A(t){return document.createTextNode(t)}function w(){return A(" ")}function lt(){return A("")}function D(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function u(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function st(t){return t===""?null:+t}function gt(t){return Array.from(t.childNodes)}function S(t,e){e=""+e,t.data!==e&&(t.data=e)}function ze(t,e){t.value=e??""}function _t(t,e,n,l){t.style.setProperty(e,n,"")}function Q(t,e,n){t.classList.toggle(e,!!n)}function yt(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}let fe;function ue(t){fe=t}function rt(){if(!fe)throw new Error("Function called outside component initialization");return fe}function wt(t){rt().$$.on_mount.push(t)}function _e(){const t=rt();return(e,n,{cancelable:l=!1}={})=>{const s=t.$$.callbacks[e];if(s){const r=yt(e,n,{cancelable:l});return s.slice().forEach(o=>{o.call(t,r)}),!r.defaultPrevented}return!0}}const se=[],Ee=[];let re=[];const Re=[],bt=Promise.resolve();let $e=!1;function kt(){$e||($e=!0,bt.then(ot))}function qe(t){re.push(t)}const Ce=new Set;let le=0;function ot(){if(le!==0)return;const t=fe;do{try{for(;le<se.length;){const e=se[le];le++,ue(e),Ct(e.$$)}}catch(e){throw se.length=0,le=0,e}for(ue(null),se.length=0,le=0;Ee.length;)Ee.pop()();for(let e=0;e<re.length;e+=1){const n=re[e];Ce.has(n)||(Ce.add(n),n())}re.length=0}while(se.length);for(;Re.length;)Re.pop()();$e=!1,Ce.clear(),ue(t)}function Ct(t){if(t.fragment!==null){t.update(),J(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(qe)}}function At(t){const e=[],n=[];re.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),re=e}const pe=new Set;let K;function ct(){K={r:0,c:[],p:K}}function it(){K.r||J(K.c),K=K.p}function R(t,e){t&&t.i&&(pe.delete(t),t.i(e))}function B(t,e,n,l){if(t&&t.o){if(pe.has(t))return;pe.add(t),K.c.push(()=>{pe.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function H(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ce(t){t&&t.c()}function Z(t,e,n){const{fragment:l,after_update:s}=t.$$;l&&l.m(e,n),qe(()=>{const r=t.$$.on_mount.map(tt).filter(nt);t.$$.on_destroy?t.$$.on_destroy.push(...r):J(r),t.$$.on_mount=[]}),s.forEach(qe)}function x(t,e){const n=t.$$;n.fragment!==null&&(At(n.after_update),J(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Et(t,e){t.$$.dirty[0]===-1&&(se.push(t),kt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ee(t,e,n,l,s,r,o=null,a=[-1]){const i=fe;ue(t);const f=t.$$={fragment:null,ctx:[],props:r,update:M,not_equal:s,bound:Qe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(i?i.$$.context:[])),callbacks:Qe(),dirty:a,skip_bound:!1,root:e.target||i.$$.root};o&&o(f.root);let g=!1;if(f.ctx=n?n(t,e.props||{},(_,b,...m)=>{const v=m.length?m[0]:b;return f.ctx&&s(f.ctx[_],f.ctx[_]=v)&&(!f.skip_bound&&f.bound[_]&&f.bound[_](v),g&&Et(t,_)),b}):[],f.update(),g=!0,J(f.before_update),f.fragment=l?l(f.ctx):!1,e.target){if(e.hydrate){const _=gt(e.target);f.fragment&&f.fragment.l(_),_.forEach(k)}else f.fragment&&f.fragment.c();e.intro&&R(t.$$.fragment),Z(t,e.target,e.anchor),ot()}ue(i)}class te{constructor(){ke(this,"$$");ke(this,"$$set")}$destroy(){x(this,1),this.$destroy=M}$on(e,n){if(!nt(n))return M;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!pt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const $t="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add($t);const at="https://api.tcgdex.net/v2/en",ut="swsh3";function ft(t){return`https://assets.tcgdex.net/en/swsh/${ut}/${t.split("-")[1]}/high.webp`}async function qt(){try{const t=await fetch(`${at}/sets/${ut}`);if(!t.ok)throw new Error("Failed to fetch cards from set");return((await t.json()).cards||[]).map(l=>({id:l.id,localId:l.localId,name:l.name,image:ft(l.id)}))}catch(t){throw console.error("Error fetching cards from set:",t),t}}async function St(t){try{const e=await fetch(`${at}/cards/${t}`);if(!e.ok)throw new Error("Failed to fetch card details");return{...await e.json(),image:ft(t)}}catch(e){throw console.error("Error fetching card details:",e),e}}function Nt(t){const e=Math.floor(Math.random()*t.length);return t[e]}const dt="pokemon-tcg-collection",mt="1.0";function Ot(){return{totalQuestions:0,correctAnswers:0,incorrectAnswers:0}}function Ae(){return{cards:[],stats:Ot(),version:mt}}function W(){try{const t=localStorage.getItem(dt);if(!t)return Ae();const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?(console.warn("Invalid collection format, resetting..."),Ae()):e}catch(t){return console.error("Error loading collection from local storage:",t),Ae()}}function Se(t){try{const e={...t,version:mt};localStorage.setItem(dt,JSON.stringify(e))}catch(e){throw console.error("Error saving collection to local storage:",e),new Error("Failed to save collection")}}function Lt(t){try{const e=W();return e.cards.some(l=>l.id===t.id)?!1:(e.cards.push(t),Se(e),!0)}catch(e){return console.error("Error adding card to collection:",e),!1}}function Tt(t){try{const e=W();e.stats.totalQuestions++,t?e.stats.correctAnswers++:e.stats.incorrectAnswers++,Se(e)}catch(e){console.error("Error updating stats:",e)}}function Mt(){const t=W();return JSON.stringify(t,null,2)}function It(t){try{const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?{success:!1,error:"Invalid collection format"}:!e.stats.totalQuestions===void 0||!e.stats.correctAnswers===void 0||!e.stats.incorrectAnswers===void 0?{success:!1,error:"Invalid stats format"}:(Se(e),{success:!0})}catch(e){return console.error("Error importing collection:",e),{success:!1,error:"Failed to parse JSON file"}}}function Pt(){const t=Math.floor(Math.random()*50)+10,e=Math.floor(Math.random()*50)+10,n=["+","-"],l=n[Math.floor(Math.random()*n.length)];let s,r;if(l==="+")s=t+e,r=`What is ${t} + ${e}?`;else{s=t+e;const o=s;s=t,r=`What is ${o} - ${e}?`}return{question:r,answer:s}}function Qt(t){if(!t)return null;let e,n,l=!1;if(t.hp&&t.hp>0){l=!0;const s=[10,20,30,40,50][Math.floor(Math.random()*5)];n=Math.ceil(t.hp/s),e=`Your PokÃ©mon deals ${s} damage each turn. How many turns does it take to defeat this PokÃ©mon?`}else{const s=Pt();e=s.question,n=s.answer}return{card:t,questionText:e,correctAnswer:n,isPokemon:l}}function zt(t,e){return e===t.correctAnswer}function Fe(t,e,n){const l=t.slice();return l[3]=e[n],l}function je(t,e,n){const l=t.slice();return l[6]=e[n],l}function De(t){let e,n,l,s,r=t[0].hp+"",o;return{c(){e=d("div"),n=d("span"),n.textContent="HP",l=w(),s=d("span"),o=A(r),u(n,"class","hp-label svelte-1c2yytc"),u(s,"class","hp-value svelte-1c2yytc"),u(e,"class","card-hp svelte-1c2yytc")},m(a,i){C(a,e,i),c(e,n),c(e,l),c(e,s),c(s,o)},p(a,i){i&1&&r!==(r=a[0].hp+"")&&S(o,r)},d(a){a&&k(e)}}}function Be(t){let e,n=H(t[0].types),l=[];for(let s=0;s<n.length;s+=1)l[s]=Ue(je(t,n,s));return{c(){e=d("div");for(let s=0;s<l.length;s+=1)l[s].c();u(e,"class","card-types svelte-1c2yytc")},m(s,r){C(s,e,r);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null)},p(s,r){if(r&1){n=H(s[0].types);let o;for(o=0;o<n.length;o+=1){const a=je(s,n,o);l[o]?l[o].p(a,r):(l[o]=Ue(a),l[o].c(),l[o].m(e,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(s){s&&k(e),ge(l,s)}}}function Ue(t){let e,n=t[6]+"",l;return{c(){e=d("span"),l=A(n),u(e,"class","type-badge svelte-1c2yytc")},m(s,r){C(s,e,r),c(e,l)},p(s,r){r&1&&n!==(n=s[6]+"")&&S(l,n)},d(s){s&&k(e)}}}function Ve(t){let e,n,l,s=H(t[0].attacks),r=[];for(let o=0;o<s.length;o+=1)r[o]=Je(Fe(t,s,o));return{c(){e=d("div"),n=d("h4"),n.textContent="Attacks:",l=w();for(let o=0;o<r.length;o+=1)r[o].c();u(n,"class","svelte-1c2yytc"),u(e,"class","card-attacks svelte-1c2yytc")},m(o,a){C(o,e,a),c(e,n),c(e,l);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null)},p(o,a){if(a&5){s=H(o[0].attacks);let i;for(i=0;i<s.length;i+=1){const f=Fe(o,s,i);r[i]?r[i].p(f,a):(r[i]=Je(f),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=s.length}},d(o){o&&k(e),ge(r,o)}}}function He(t){let e,n=t[3].damage+"",l;return{c(){e=d("span"),l=A(n),u(e,"class","attack-damage svelte-1c2yytc")},m(s,r){C(s,e,r),c(e,l)},p(s,r){r&1&&n!==(n=s[3].damage+"")&&S(l,n)},d(s){s&&k(e)}}}function Je(t){let e,n,l=t[3].name+"",s,r,o,a=t[3].damage&&He(t);return{c(){e=d("div"),n=d("span"),s=A(l),r=w(),a&&a.c(),o=w(),u(n,"class","attack-name svelte-1c2yytc"),u(e,"class","attack svelte-1c2yytc"),Q(e,"highlighted",t[2]===t[3].name)},m(i,f){C(i,e,f),c(e,n),c(n,s),c(e,r),a&&a.m(e,null),c(e,o)},p(i,f){f&1&&l!==(l=i[3].name+"")&&S(s,l),i[3].damage?a?a.p(i,f):(a=He(i),a.c(),a.m(e,o)):a&&(a.d(1),a=null),f&5&&Q(e,"highlighted",i[2]===i[3].name)},d(i){i&&k(e),a&&a.d()}}}function Rt(t){let e,n,l,s,r,o,a,i,f=t[0].name+"",g,_,b,m,v=t[0].hp&&De(t),h=t[0].types&&t[0].types.length>0&&Be(t),p=t[1]&&t[0].attacks&&t[0].attacks.length>0&&Ve(t);return{c(){e=d("div"),n=d("div"),l=d("img"),o=w(),a=d("div"),i=d("h3"),g=A(f),_=w(),v&&v.c(),b=w(),h&&h.c(),m=w(),p&&p.c(),oe(l.src,s=t[0].image)||u(l,"src",s),u(l,"alt",r=t[0].name),u(l,"class","svelte-1c2yytc"),u(n,"class","card-image svelte-1c2yytc"),u(i,"class","card-name svelte-1c2yytc"),u(a,"class","card-info svelte-1c2yytc"),u(e,"class","pokemon-card svelte-1c2yytc")},m(y,E){C(y,e,E),c(e,n),c(n,l),c(e,o),c(e,a),c(a,i),c(i,g),c(a,_),v&&v.m(a,null),c(a,b),h&&h.m(a,null),c(a,m),p&&p.m(a,null)},p(y,[E]){E&1&&!oe(l.src,s=y[0].image)&&u(l,"src",s),E&1&&r!==(r=y[0].name)&&u(l,"alt",r),E&1&&f!==(f=y[0].name+"")&&S(g,f),y[0].hp?v?v.p(y,E):(v=De(y),v.c(),v.m(a,b)):v&&(v.d(1),v=null),y[0].types&&y[0].types.length>0?h?h.p(y,E):(h=Be(y),h.c(),h.m(a,m)):h&&(h.d(1),h=null),y[1]&&y[0].attacks&&y[0].attacks.length>0?p?p.p(y,E):(p=Ve(y),p.c(),p.m(a,null)):p&&(p.d(1),p=null)},i:M,o:M,d(y){y&&k(e),v&&v.d(),h&&h.d(),p&&p.d()}}}function Ft(t,e,n){let{card:l}=e,{showAttacks:s=!1}=e,{highlightedAttack:r=null}=e;return t.$$set=o=>{"card"in o&&n(0,l=o.card),"showAttacks"in o&&n(1,s=o.showAttacks),"highlightedAttack"in o&&n(2,r=o.highlightedAttack)},[l,s,r]}class jt extends te{constructor(e){super(),ee(this,e,Ft,Rt,X,{card:0,showAttacks:1,highlightedAttack:2})}}function Dt(t){let e,n,l,s,r,o,a,i,f=t[0].questionText+"",g,_,b,m,v,h,p,y,E,$,O;return r=new jt({props:{card:t[0].card}}),{c(){e=d("div"),n=d("div"),n.innerHTML='<h2 class="svelte-y6x4r1">Pok\\u00e9mon TCG Quiz</h2> <p class="set-info svelte-y6x4r1">Collecting Set: Sword &amp; Shield - Darkness Ablaze (swsh3)</p>',l=w(),s=d("div"),ce(r.$$.fragment),o=w(),a=d("div"),i=d("h3"),g=A(f),_=w(),b=d("div"),m=d("input"),v=w(),h=d("button"),p=A("Submit Answer"),u(n,"class","quiz-header svelte-y6x4r1"),u(s,"class","card-display svelte-y6x4r1"),u(i,"class","question-text svelte-y6x4r1"),u(m,"type","number"),u(m,"placeholder","Enter your answer"),u(m,"class","answer-input svelte-y6x4r1"),u(h,"class","submit-btn btn-primary svelte-y6x4r1"),h.disabled=y=!t[1],u(b,"class","answer-input-container svelte-y6x4r1"),u(a,"class","question-container svelte-y6x4r1"),u(e,"class","quiz-view svelte-y6x4r1")},m(q,I){C(q,e,I),c(e,n),c(e,l),c(e,s),Z(r,s,null),c(e,o),c(e,a),c(a,i),c(i,g),c(a,_),c(a,b),c(b,m),ze(m,t[1]),c(b,v),c(b,h),c(h,p),E=!0,$||(O=[D(m,"input",t[4]),D(m,"keypress",t[3]),D(h,"click",t[2])],$=!0)},p(q,[I]){const F={};I&1&&(F.card=q[0].card),r.$set(F),(!E||I&1)&&f!==(f=q[0].questionText+"")&&S(g,f),I&2&&st(m.value)!==q[1]&&ze(m,q[1]),(!E||I&2&&y!==(y=!q[1]))&&(h.disabled=y)},i(q){E||(R(r.$$.fragment,q),E=!0)},o(q){B(r.$$.fragment,q),E=!1},d(q){q&&k(e),x(r),$=!1,J(O)}}}function Bt(t,e,n){let{question:l}=e;const s=_e();let r="";function o(){const f=parseInt(r,10);isNaN(f)||s("answer",f)}function a(f){f.key==="Enter"&&o()}function i(){r=st(this.value),n(1,r)}return t.$$set=f=>{"question"in f&&n(0,l=f.question)},[l,r,o,a,i]}class Ut extends te{constructor(e){super(),ee(this,e,Bt,Dt,X,{question:0})}}function Vt(t){let e,n,l,s,r,o,a,i,f,g,_,b,m,v;return{c(){e=d("div"),e.textContent="âœ—",n=w(),l=d("h2"),l.textContent="Not quite!",s=w(),r=d("p"),o=A("You answered "),a=d("strong"),i=A(t[2]),f=A(", but the correct answer was "),g=d("strong"),_=A(t[1]),b=A("."),m=w(),v=d("p"),v.textContent="Try again with the next question!",u(e,"class","result-icon error svelte-1ryvcfy"),u(l,"class","result-title svelte-1ryvcfy"),u(a,"class","svelte-1ryvcfy"),u(g,"class","svelte-1ryvcfy"),u(r,"class","result-message svelte-1ryvcfy"),u(v,"class","encouragement svelte-1ryvcfy")},m(h,p){C(h,e,p),C(h,n,p),C(h,l,p),C(h,s,p),C(h,r,p),c(r,o),c(r,a),c(a,i),c(r,f),c(r,g),c(g,_),c(r,b),C(h,m,p),C(h,v,p)},p(h,p){p&4&&S(i,h[2]),p&2&&S(_,h[1])},d(h){h&&(k(e),k(n),k(l),k(s),k(r),k(m),k(v))}}}function Ht(t){let e,n,l,s,r,o,a,i,f,g=t[1]===1?"hit":"hits",_,b,m,v,h=t[3]&&Ye(t);return{c(){e=d("div"),e.textContent="âœ“",n=w(),l=d("h2"),l.textContent="Correct!",s=w(),r=d("p"),o=A("Great job! The answer was "),a=d("strong"),i=A(t[1]),f=w(),_=A(g),b=A("!"),m=w(),h&&h.c(),v=lt(),u(e,"class","result-icon success svelte-1ryvcfy"),u(l,"class","result-title svelte-1ryvcfy"),u(a,"class","svelte-1ryvcfy"),u(r,"class","result-message svelte-1ryvcfy")},m(p,y){C(p,e,y),C(p,n,y),C(p,l,y),C(p,s,y),C(p,r,y),c(r,o),c(r,a),c(a,i),c(r,f),c(r,_),c(r,b),C(p,m,y),h&&h.m(p,y),C(p,v,y)},p(p,y){y&2&&S(i,p[1]),y&2&&g!==(g=p[1]===1?"hit":"hits")&&S(_,g),p[3]?h?h.p(p,y):(h=Ye(p),h.c(),h.m(v.parentNode,v)):h&&(h.d(1),h=null)},d(p){p&&(k(e),k(n),k(l),k(s),k(r),k(m),k(v)),h&&h.d(p)}}}function Ye(t){let e,n,l,s,r,o,a,i,f,g,_=t[3].name+"",b;return{c(){e=d("div"),n=d("h3"),n.textContent="You won this card!",l=w(),s=d("div"),r=d("div"),o=d("img"),f=w(),g=d("span"),b=A(_),u(n,"class","svelte-1ryvcfy"),oe(o.src,a=t[3].image)||u(o,"src",a),u(o,"alt",i=t[3].name),u(o,"class","svelte-1ryvcfy"),u(g,"class","card-name svelte-1ryvcfy"),u(r,"class","mini-card svelte-1ryvcfy"),u(s,"class","cards-grid svelte-1ryvcfy"),u(e,"class","won-cards svelte-1ryvcfy")},m(m,v){C(m,e,v),c(e,n),c(e,l),c(e,s),c(s,r),c(r,o),c(r,f),c(r,g),c(g,b)},p(m,v){v&8&&!oe(o.src,a=m[3].image)&&u(o,"src",a),v&8&&i!==(i=m[3].name)&&u(o,"alt",i),v&8&&_!==(_=m[3].name+"")&&S(b,_)},d(m){m&&k(e)}}}function Jt(t){let e,n,l,s,r,o;function a(g,_){return g[0]?Ht:Vt}let i=a(t),f=i(t);return{c(){e=d("div"),n=d("div"),f.c(),l=w(),s=d("button"),s.textContent="Next Question",u(n,"class","result-card svelte-1ryvcfy"),Q(n,"correct",t[0]),Q(n,"incorrect",!t[0]),u(s,"class","next-btn btn-primary svelte-1ryvcfy"),u(e,"class","result-view svelte-1ryvcfy")},m(g,_){C(g,e,_),c(e,n),f.m(n,null),c(e,l),c(e,s),r||(o=D(s,"click",t[4]),r=!0)},p(g,[_]){i===(i=a(g))&&f?f.p(g,_):(f.d(1),f=i(g),f&&(f.c(),f.m(n,null))),_&1&&Q(n,"correct",g[0]),_&1&&Q(n,"incorrect",!g[0])},i:M,o:M,d(g){g&&k(e),f.d(),r=!1,o()}}}function Yt(t,e,n){let{isCorrect:l}=e,{correctAnswer:s}=e,{userAnswer:r}=e,{wonCard:o}=e;const a=_e();function i(){a("next")}return t.$$set=f=>{"isCorrect"in f&&n(0,l=f.isCorrect),"correctAnswer"in f&&n(1,s=f.correctAnswer),"userAnswer"in f&&n(2,r=f.userAnswer),"wonCard"in f&&n(3,o=f.wonCard)},[l,s,r,o,i]}class Gt extends te{constructor(e){super(),ee(this,e,Yt,Jt,X,{isCorrect:0,correctAnswer:1,userAnswer:2,wonCard:3})}}function Kt(){try{const t=Mt(),e=new Blob([t],{type:"application/json"}),n=URL.createObjectURL(e),l=document.createElement("a");l.href=n,l.download=`pokemon-collection-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(n)}catch(t){throw console.error("Error downloading backup:",t),new Error("Failed to download backup")}}function Wt(t){return new Promise(e=>{const n=new FileReader;n.onload=l=>{var s;try{const r=(s=l.target)==null?void 0:s.result,o=It(r);e(o)}catch(r){console.error("Error reading file:",r),e({success:!1,error:"Failed to read file"})}},n.onerror=()=>{e({success:!1,error:"Failed to read file"})},n.readAsText(t)})}function Ge(t,e,n){const l=t.slice();return l[10]=e[n],l}function Ke(t,e,n){const l=t.slice();return l[13]=e[n],l}function We(t){let e,n=t[2].text+"",l;return{c(){e=d("div"),l=A(n),u(e,"class","message svelte-10ttrmt"),Q(e,"success",t[2].type==="success"),Q(e,"error",t[2].type==="error")},m(s,r){C(s,e,r),c(e,l)},p(s,r){r&4&&n!==(n=s[2].text+"")&&S(l,n),r&4&&Q(e,"success",s[2].type==="success"),r&4&&Q(e,"error",s[2].type==="error")},d(s){s&&k(e)}}}function Xt(t){let e,n=H(t[0].cards),l=[];for(let s=0;s<n.length;s+=1)l[s]=et(Ge(t,n,s));return{c(){e=d("div");for(let s=0;s<l.length;s+=1)l[s].c();u(e,"class","cards-grid svelte-10ttrmt")},m(s,r){C(s,e,r);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null)},p(s,r){if(r&1){n=H(s[0].cards);let o;for(o=0;o<n.length;o+=1){const a=Ge(s,n,o);l[o]?l[o].p(a,r):(l[o]=et(a),l[o].c(),l[o].m(e,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(s){s&&k(e),ge(l,s)}}}function Zt(t){let e;return{c(){e=d("div"),e.innerHTML='<div class="empty-icon svelte-10ttrmt">ðŸ“¦</div> <h3 class="svelte-10ttrmt">No cards yet!</h3> <p class="svelte-10ttrmt">Answer questions correctly to start building your collection.</p>',u(e,"class","empty-state svelte-10ttrmt")},m(n,l){C(n,e,l)},p:M,d(n){n&&k(e)}}}function Xe(t){let e,n,l=t[10].hp+"",s;return{c(){e=d("span"),n=A("HP "),s=A(l),u(e,"class","hp svelte-10ttrmt")},m(r,o){C(r,e,o),c(e,n),c(e,s)},p(r,o){o&1&&l!==(l=r[10].hp+"")&&S(s,l)},d(r){r&&k(e)}}}function Ze(t){let e,n=H(t[10].types),l=[];for(let s=0;s<n.length;s+=1)l[s]=xe(Ke(t,n,s));return{c(){e=d("div");for(let s=0;s<l.length;s+=1)l[s].c();u(e,"class","types svelte-10ttrmt")},m(s,r){C(s,e,r);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null)},p(s,r){if(r&1){n=H(s[10].types);let o;for(o=0;o<n.length;o+=1){const a=Ke(s,n,o);l[o]?l[o].p(a,r):(l[o]=xe(a),l[o].c(),l[o].m(e,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(s){s&&k(e),ge(l,s)}}}function xe(t){let e,n=t[13]+"",l;return{c(){e=d("span"),l=A(n),u(e,"class","type svelte-10ttrmt")},m(s,r){C(s,e,r),c(e,l)},p(s,r){r&1&&n!==(n=s[13]+"")&&S(l,n)},d(s){s&&k(e)}}}function et(t){let e,n,l,s,r,o,a,i=t[10].name+"",f,g,_,b,m=t[10].hp&&Xe(t),v=t[10].types&&t[10].types.length>0&&Ze(t);return{c(){e=d("div"),n=d("img"),r=w(),o=d("div"),a=d("h4"),f=A(i),g=w(),m&&m.c(),_=w(),v&&v.c(),b=w(),oe(n.src,l=t[10].image)||u(n,"src",l),u(n,"alt",s=t[10].name),u(n,"class","svelte-10ttrmt"),u(a,"class","svelte-10ttrmt"),u(o,"class","card-details svelte-10ttrmt"),u(e,"class","collection-card svelte-10ttrmt")},m(h,p){C(h,e,p),c(e,n),c(e,r),c(e,o),c(o,a),c(a,f),c(o,g),m&&m.m(o,null),c(o,_),v&&v.m(o,null),c(e,b)},p(h,p){p&1&&!oe(n.src,l=h[10].image)&&u(n,"src",l),p&1&&s!==(s=h[10].name)&&u(n,"alt",s),p&1&&i!==(i=h[10].name+"")&&S(f,i),h[10].hp?m?m.p(h,p):(m=Xe(h),m.c(),m.m(o,_)):m&&(m.d(1),m=null),h[10].types&&h[10].types.length>0?v?v.p(h,p):(v=Ze(h),v.c(),v.m(o,null)):v&&(v.d(1),v=null)},d(h){h&&k(e),m&&m.d(),v&&v.d()}}}function xt(t){let e,n,l,s,r,o,a,i,f,g,_,b,m,v,h,p=t[0].cards.length+"",y,E,$,O,q,I,F=t[0].stats.totalQuestions+"",z,ie,Y,N,L,V,G=t[0].stats.correctAnswers+"",ye,Ne,de,Oe,ne,ae,we,Le,Te,me,Me,be,Ie,P=t[2]&&We(t);function Pe(T,U){return T[0].cards.length===0?Zt:Xt}let he=Pe(t),j=he(t);return{c(){e=d("div"),n=d("div"),l=d("h2"),l.textContent="Your Collection",s=w(),r=d("div"),o=d("button"),o.textContent="Export Backup",a=w(),i=d("button"),i.textContent="Import Backup",f=w(),g=d("input"),_=w(),P&&P.c(),b=w(),m=d("div"),v=d("div"),h=d("div"),y=A(p),E=w(),$=d("div"),$.textContent="Cards Collected",O=w(),q=d("div"),I=d("div"),z=A(F),ie=w(),Y=d("div"),Y.textContent="Questions Answered",N=w(),L=d("div"),V=d("div"),ye=A(G),Ne=w(),de=d("div"),de.textContent="Correct Answers",Oe=w(),ne=d("div"),ae=d("div"),we=A(t[3]),Le=A("%"),Te=w(),me=d("div"),me.textContent="Accuracy",Me=w(),j.c(),u(l,"class","svelte-10ttrmt"),u(o,"class","btn-secondary"),u(i,"class","btn-secondary"),u(g,"type","file"),u(g,"accept",".json"),_t(g,"display","none"),u(r,"class","header-actions svelte-10ttrmt"),u(n,"class","collection-header svelte-10ttrmt"),u(h,"class","stat-value svelte-10ttrmt"),u($,"class","stat-label svelte-10ttrmt"),u(v,"class","stat-card svelte-10ttrmt"),u(I,"class","stat-value svelte-10ttrmt"),u(Y,"class","stat-label svelte-10ttrmt"),u(q,"class","stat-card svelte-10ttrmt"),u(V,"class","stat-value svelte-10ttrmt"),u(de,"class","stat-label svelte-10ttrmt"),u(L,"class","stat-card svelte-10ttrmt"),u(ae,"class","stat-value svelte-10ttrmt"),u(me,"class","stat-label svelte-10ttrmt"),u(ne,"class","stat-card svelte-10ttrmt"),u(m,"class","stats-section svelte-10ttrmt"),u(e,"class","collection-view svelte-10ttrmt")},m(T,U){C(T,e,U),c(e,n),c(n,l),c(n,s),c(n,r),c(r,o),c(r,a),c(r,i),c(r,f),c(r,g),t[7](g),c(e,_),P&&P.m(e,null),c(e,b),c(e,m),c(m,v),c(v,h),c(h,y),c(v,E),c(v,$),c(m,O),c(m,q),c(q,I),c(I,z),c(q,ie),c(q,Y),c(m,N),c(m,L),c(L,V),c(V,ye),c(L,Ne),c(L,de),c(m,Oe),c(m,ne),c(ne,ae),c(ae,we),c(ae,Le),c(ne,Te),c(ne,me),c(e,Me),j.m(e,null),be||(Ie=[D(o,"click",t[4]),D(i,"click",t[5]),D(g,"change",t[6])],be=!0)},p(T,[U]){T[2]?P?P.p(T,U):(P=We(T),P.c(),P.m(e,b)):P&&(P.d(1),P=null),U&1&&p!==(p=T[0].cards.length+"")&&S(y,p),U&1&&F!==(F=T[0].stats.totalQuestions+"")&&S(z,F),U&1&&G!==(G=T[0].stats.correctAnswers+"")&&S(ye,G),U&8&&S(we,T[3]),he===(he=Pe(T))&&j?j.p(T,U):(j.d(1),j=he(T),j&&(j.c(),j.m(e,null)))},i:M,o:M,d(T){T&&k(e),t[7](null),P&&P.d(),j.d(),be=!1,J(Ie)}}}function en(t,e,n){let l,{collection:s}=e;const r=_e();let o,a=null;function i(){try{Kt(),_("Collection exported successfully!","success")}catch{_("Failed to export collection","error")}}function f(){o.click()}async function g(m){var p;const v=m.target,h=(p=v.files)==null?void 0:p[0];if(h){try{const y=await Wt(h);y.success?(_("Collection imported successfully!","success"),r("refresh")):_(y.error||"Failed to import collection","error")}catch{_("Failed to import collection","error")}v.value=""}}function _(m,v){n(2,a={text:m,type:v}),setTimeout(()=>{n(2,a=null)},3e3)}function b(m){Ee[m?"unshift":"push"](()=>{o=m,n(1,o)})}return t.$$set=m=>{"collection"in m&&n(0,s=m.collection)},t.$$.update=()=>{t.$$.dirty&1&&n(3,l=s.stats.totalQuestions>0?Math.round(s.stats.correctAnswers/s.stats.totalQuestions*100):0)},[s,o,a,l,i,f,g,b]}class tn extends te{constructor(e){super(),ee(this,e,en,xt,X,{collection:0})}}function nn(t){let e,n,l,s,r;return{c(){e=d("div"),n=d("div"),l=w(),s=d("p"),r=A(t[0]),u(n,"class","spinner svelte-1lxornd"),u(s,"class","svelte-1lxornd"),u(e,"class","loading-view svelte-1lxornd")},m(o,a){C(o,e,a),c(e,n),c(e,l),c(e,s),c(s,r)},p(o,[a]){a&1&&S(r,o[0])},i:M,o:M,d(o){o&&k(e)}}}function ln(t,e,n){let{message:l="Loading..."}=e;return t.$$set=s=>{"message"in s&&n(0,l=s.message)},[l]}class sn extends te{constructor(e){super(),ee(this,e,ln,nn,X,{message:0})}}function rn(t){let e,n,l,s,r,o,a,i,f,g,_;return{c(){e=d("div"),n=d("div"),n.textContent="âš ï¸",l=w(),s=d("h2"),s.textContent="Oops!",r=w(),o=d("p"),a=A(t[0]),i=w(),f=d("button"),f.textContent="Try Again",u(n,"class","error-icon svelte-na0xmw"),u(s,"class","svelte-na0xmw"),u(o,"class","svelte-na0xmw"),u(f,"class","btn-primary"),u(e,"class","error-view svelte-na0xmw")},m(b,m){C(b,e,m),c(e,n),c(e,l),c(e,s),c(e,r),c(e,o),c(o,a),c(e,i),c(e,f),g||(_=D(f,"click",t[1]),g=!0)},p(b,[m]){m&1&&S(a,b[0])},i:M,o:M,d(b){b&&k(e),g=!1,_()}}}function on(t,e,n){let{message:l="Something went wrong"}=e;const s=_e();function r(){s("retry")}return t.$$set=o=>{"message"in o&&n(0,l=o.message)},[l,r]}class cn extends te{constructor(e){super(),ee(this,e,on,rn,X,{message:0})}}function an(t){let e,n;return e=new tn({props:{collection:t[3]}}),e.$on("refresh",t[14]),{c(){ce(e.$$.fragment)},m(l,s){Z(e,l,s),n=!0},p(l,s){const r={};s&8&&(r.collection=l[3]),e.$set(r)},i(l){n||(R(e.$$.fragment,l),n=!0)},o(l){B(e.$$.fragment,l),n=!1},d(l){x(e,l)}}}function un(t){let e,n,l,s;const r=[hn,mn,dn,fn],o=[];function a(i,f){return i[0]==="loading"?0:i[0]==="quiz"&&i[1]?1:i[0]==="result"&&i[1]?2:i[0]==="error"?3:-1}return~(e=a(t))&&(n=o[e]=r[e](t)),{c(){n&&n.c(),l=lt()},m(i,f){~e&&o[e].m(i,f),C(i,l,f),s=!0},p(i,f){let g=e;e=a(i),e===g?~e&&o[e].p(i,f):(n&&(ct(),B(o[g],1,1,()=>{o[g]=null}),it()),~e?(n=o[e],n?n.p(i,f):(n=o[e]=r[e](i),n.c()),R(n,1),n.m(l.parentNode,l)):n=null)},i(i){s||(R(n),s=!0)},o(i){B(n),s=!1},d(i){i&&k(l),~e&&o[e].d(i)}}}function fn(t){let e,n;return e=new cn({props:{message:t[7]}}),e.$on("retry",t[11]),{c(){ce(e.$$.fragment)},m(l,s){Z(e,l,s),n=!0},p(l,s){const r={};s&128&&(r.message=l[7]),e.$set(r)},i(l){n||(R(e.$$.fragment,l),n=!0)},o(l){B(e.$$.fragment,l),n=!1},d(l){x(e,l)}}}function dn(t){let e,n;return e=new Gt({props:{isCorrect:t[4],correctAnswer:t[1].correctAnswer,userAnswer:t[5],wonCard:t[6]}}),e.$on("next",t[10]),{c(){ce(e.$$.fragment)},m(l,s){Z(e,l,s),n=!0},p(l,s){const r={};s&16&&(r.isCorrect=l[4]),s&2&&(r.correctAnswer=l[1].correctAnswer),s&32&&(r.userAnswer=l[5]),s&64&&(r.wonCard=l[6]),e.$set(r)},i(l){n||(R(e.$$.fragment,l),n=!0)},o(l){B(e.$$.fragment,l),n=!1},d(l){x(e,l)}}}function mn(t){let e,n;return e=new Ut({props:{question:t[1]}}),e.$on("answer",t[9]),{c(){ce(e.$$.fragment)},m(l,s){Z(e,l,s),n=!0},p(l,s){const r={};s&2&&(r.question=l[1]),e.$set(r)},i(l){n||(R(e.$$.fragment,l),n=!0)},o(l){B(e.$$.fragment,l),n=!1},d(l){x(e,l)}}}function hn(t){let e,n;return e=new sn({props:{message:"Loading new question..."}}),{c(){ce(e.$$.fragment)},m(l,s){Z(e,l,s),n=!0},p:M,i(l){n||(R(e.$$.fragment,l),n=!0)},o(l){B(e.$$.fragment,l),n=!1},d(l){x(e,l)}}}function vn(t){var Y;let e,n,l,s,r,o,a,i,f,g=(((Y=t[3])==null?void 0:Y.cards.length)||0)+"",_,b,m=t[2].length+"",v,h,p,y,E,$,O,q,I;const F=[un,an],z=[];function ie(N,L){return N[8]==="quiz"?0:1}return E=ie(t),$=z[E]=F[E](t),{c(){e=d("div"),n=d("header"),l=d("h1"),l.textContent="Pok\\u00e9mon TCG Math Quiz",s=w(),r=d("nav"),o=d("button"),o.textContent="Play Quiz",a=w(),i=d("button"),f=A("My Collection ("),_=A(g),b=A("/"),v=A(m),h=A(")"),p=w(),y=d("main"),$.c(),u(l,"class","svelte-cy1rwm"),u(o,"class","nav-btn svelte-cy1rwm"),Q(o,"active",t[8]==="quiz"),u(i,"class","nav-btn svelte-cy1rwm"),Q(i,"active",t[8]==="collection"),u(r,"class","svelte-cy1rwm"),u(n,"class","app-header svelte-cy1rwm"),u(y,"class","svelte-cy1rwm"),u(e,"class","app svelte-cy1rwm")},m(N,L){C(N,e,L),c(e,n),c(n,l),c(n,s),c(n,r),c(r,o),c(r,a),c(r,i),c(i,f),c(i,_),c(i,b),c(i,v),c(i,h),c(e,p),c(e,y),z[E].m(y,null),O=!0,q||(I=[D(o,"click",t[13]),D(i,"click",t[12])],q=!0)},p(N,[L]){var G;(!O||L&256)&&Q(o,"active",N[8]==="quiz"),(!O||L&8)&&g!==(g=(((G=N[3])==null?void 0:G.cards.length)||0)+"")&&S(_,g),(!O||L&4)&&m!==(m=N[2].length+"")&&S(v,m),(!O||L&256)&&Q(i,"active",N[8]==="collection");let V=E;E=ie(N),E===V?z[E].p(N,L):(ct(),B(z[V],1,1,()=>{z[V]=null}),it(),$=z[E],$?$.p(N,L):($=z[E]=F[E](N),$.c()),R($,1),$.m(y,null))},i(N){O||(R($),O=!0)},o(N){B($),O=!1},d(N){N&&k(e),z[E].d(),q=!1,J(I)}}}function pn(t,e,n){let l="loading",s=null,r=[],o,a=!1,i=0,f=null,g="",_="quiz";wt(()=>{n(3,o=W()),b()});async function b(){try{n(0,l="loading"),r.length===0&&n(2,r=await qt());const $=Nt(r),O=await St($.id),q=Qt(O);if(!q)throw new Error("Could not generate a valid question. Please try again.");n(1,s=q),n(0,l="quiz")}catch($){console.error("Error loading question:",$),n(7,g=$ instanceof Error?$.message:"Failed to load question"),n(0,l="error")}}function m($){if(s){if(n(5,i=$.detail),n(4,a=zt(s,i)),Tt(a),n(6,f=null),a){const O={id:s.card.id,name:s.card.name,image:s.card.image,hp:s.card.hp,types:s.card.types,rarity:s.card.rarity,collectedAt:new Date().toISOString()};Lt(O)&&n(6,f=s.card)}n(3,o=W()),n(0,l="result")}}function v(){b()}function h(){b()}function p(){n(8,_="collection"),n(3,o=W())}function y(){n(8,_="quiz")}function E(){n(3,o=W())}return[l,s,r,o,a,i,f,g,_,m,v,h,p,y,E]}class gn extends te{constructor(e){super(),ee(this,e,pn,vn,X,{})}}new gn({target:document.getElementById("app")});
