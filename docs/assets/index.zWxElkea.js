var Ol=Object.defineProperty;var Bl=(t,e,l)=>e in t?Ol(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var _t=(t,e,l)=>Bl(t,typeof e!="symbol"?e+"":e,l);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function l(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=l(s);fetch(s.href,r)}})();function Z(){}function Sl(t){return t()}function Yt(){return Object.create(null)}function ie(t){t.forEach(Sl)}function yl(t){return typeof t=="function"}function _e(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let st;function me(t,e){return t===e?!0:(st||(st=document.createElement("a")),st.href=e,t===st.href)}function zl(t){return Object.keys(t).length===0}function jl(t,...e){if(t==null){for(const n of e)n(void 0);return Z}const l=t.subscribe(...e);return l.unsubscribe?()=>l.unsubscribe():l}function Ct(t,e,l){t.$$.on_destroy.push(jl(e,l))}function i(t,e){t.appendChild(e)}function M(t,e,l){t.insertBefore(e,l||null)}function I(t){t.parentNode&&t.parentNode.removeChild(t)}function Ae(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function d(t){return document.createElement(t)}function C(t){return document.createTextNode(t)}function _(){return C(" ")}function It(){return C("")}function j(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function Al(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function f(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function it(t){return t===""?null:+t}function Hl(t){return Array.from(t.childNodes)}function E(t,e){e=""+e,t.data!==e&&(t.data=e)}function ye(t,e){t.value=e??""}function St(t,e,l,n){l==null?t.style.removeProperty(e):t.style.setProperty(e,l,"")}function at(t,e,l){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e){s.selected=!0;return}}t.selectedIndex=-1}function X(t,e,l){t.classList.toggle(e,!!l)}function Yl(t,e,{bubbles:l=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:l,cancelable:n})}let Xe;function Ge(t){Xe=t}function ql(){if(!Xe)throw new Error("Function called outside component initialization");return Xe}function El(t){ql().$$.on_mount.push(t)}function ut(){const t=ql();return(e,l,{cancelable:n=!1}={})=>{const s=t.$$.callbacks[e];if(s){const r=Yl(e,l,{cancelable:n});return s.slice().forEach(o=>{o.call(t,r)}),!r.defaultPrevented}return!0}}function Ut(t,e){const l=t.$$.callbacks[e.type];l&&l.slice().forEach(n=>n.call(this,e))}const Be=[],yt=[];let ze=[];const Vt=[],Ul=Promise.resolve();let At=!1;function Vl(){At||(At=!0,Ul.then(Il))}function qt(t){ze.push(t)}const kt=new Set;let Fe=0;function Il(){if(Fe!==0)return;const t=Xe;do{try{for(;Fe<Be.length;){const e=Be[Fe];Fe++,Ge(e),Wl(e.$$)}}catch(e){throw Be.length=0,Fe=0,e}for(Ge(null),Be.length=0,Fe=0;yt.length;)yt.pop()();for(let e=0;e<ze.length;e+=1){const l=ze[e];kt.has(l)||(kt.add(l),l())}ze.length=0}while(Be.length);for(;Vt.length;)Vt.pop()();At=!1,kt.clear(),Ge(t)}function Wl(t){if(t.fragment!==null){t.update(),ie(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(qt)}}function Kl(t){const e=[],l=[];ze.forEach(n=>t.indexOf(n)===-1?e.push(n):l.push(n)),l.forEach(n=>n()),ze=e}const rt=new Set;let Se;function Ml(){Se={r:0,c:[],p:Se}}function Tl(){Se.r||ie(Se.c),Se=Se.p}function ce(t,e){t&&t.i&&(rt.delete(t),t.i(e))}function ve(t,e,l,n){if(t&&t.o){if(rt.has(t))return;rt.add(t),Se.c.push(()=>{rt.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}else n&&n()}function oe(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function He(t){t&&t.c()}function qe(t,e,l){const{fragment:n,after_update:s}=t.$$;n&&n.m(e,l),qt(()=>{const r=t.$$.on_mount.map(Sl).filter(yl);t.$$.on_destroy?t.$$.on_destroy.push(...r):ie(r),t.$$.on_mount=[]}),s.forEach(qt)}function Ee(t,e){const l=t.$$;l.fragment!==null&&(Kl(l.after_update),ie(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function Jl(t,e){t.$$.dirty[0]===-1&&(Be.push(t),Vl(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ie(t,e,l,n,s,r,o=null,c=[-1]){const u=Xe;Ge(t);const a=t.$$={fragment:null,ctx:[],props:r,update:Z,not_equal:s,bound:Yt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Yt(),dirty:c,skip_bound:!1,root:e.target||u.$$.root};o&&o(a.root);let v=!1;if(a.ctx=l?l(t,e.props||{},(g,p,...m)=>{const b=m.length?m[0]:p;return a.ctx&&s(a.ctx[g],a.ctx[g]=b)&&(!a.skip_bound&&a.bound[g]&&a.bound[g](b),v&&Jl(t,g)),p}):[],a.update(),v=!0,ie(a.before_update),a.fragment=n?n(a.ctx):!1,e.target){if(e.hydrate){const g=Hl(e.target);a.fragment&&a.fragment.l(g),g.forEach(I)}else a.fragment&&a.fragment.c();e.intro&&ce(t.$$.fragment),qe(t,e.target,e.anchor),Il()}Ge(u)}class Me{constructor(){_t(this,"$$");_t(this,"$$set")}$destroy(){Ee(this,1),this.$destroy=Z}$on(e,l){if(!yl(l))return Z;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const s=n.indexOf(l);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!zl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Gl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Gl);const Ql="https://api.tcgdex.net/v2/en";function Ll(t,e){const l=t.split("-")[1];return`https://assets.tcgdex.net/en/${Xl(e)}/${e}/${l}/high.webp`}function Xl(t){return t.startsWith("swsh")?"swsh":t.startsWith("sv")?"sv":t.startsWith("me")?"base":"swsh"}async function Et(t){try{const e=await fetch(`${Ql}/sets/${t}`);if(!e.ok)throw new Error("Failed to fetch cards from set");return((await e.json()).cards||[]).map(s=>({id:s.id,localId:s.localId,name:s.name,image:Ll(s.id,t)}))}catch(e){throw console.error("Error fetching cards from set:",e),e}}async function Zl(t,e){try{const l=await fetch(`${Ql}/cards/${t}`);if(!l.ok)throw new Error("Failed to fetch card details");return{...await l.json(),image:Ll(t,e)}}catch(l){throw console.error("Error fetching card details:",l),l}}function $l(t){const e=Math.floor(Math.random()*t.length);return t[e]}const Mt="pokemon-tcg-collection",Nl="2.0";function xl(){return{totalQuestions:0,correctAnswers:0,incorrectAnswers:0,totalHpDefeated:0}}function bt(){return{cards:[],stats:xl(),version:Nl}}function ge(){try{const t=localStorage.getItem(Mt);if(!t)return bt();const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?(console.warn("Invalid collection format, resetting..."),bt()):(e.stats.totalHpDefeated||(e.stats.totalHpDefeated=0),e.currentStreak||(e.currentStreak=0),e.unlockedRareSets||(e.unlockedRareSets={}),e)}catch(t){return console.error("Error loading collection from local storage:",t),bt()}}function je(t){try{const e={...t,version:Nl};localStorage.setItem(Mt,JSON.stringify(e))}catch(e){throw console.error("Error saving collection to local storage:",e),new Error("Failed to save collection")}}function en(t){try{const e=ge();return e.cards.some(n=>n.id===t.id)?!1:(e.cards.push(t),je(e),!0)}catch(e){return console.error("Error adding card to collection:",e),!1}}function tn(t,e){try{const l=ge();l.stats.totalQuestions++,t?(l.stats.correctAnswers++,e&&(l.stats.totalHpDefeated+=e)):l.stats.incorrectAnswers++,je(l)}catch(l){console.error("Error updating stats:",l)}}function ln(){try{localStorage.removeItem(Mt)}catch(t){console.error("Error clearing collection:",t)}}function nn(){const t=ge();return JSON.stringify(t,null,2)}function sn(t){try{const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?{success:!1,error:"Invalid collection format"}:!e.stats.totalQuestions===void 0||!e.stats.correctAnswers===void 0||!e.stats.incorrectAnswers===void 0?{success:!1,error:"Invalid stats format"}:(je(e),{success:!0})}catch(e){return console.error("Error importing collection:",e),{success:!1,error:"Failed to parse JSON file"}}}function rn(){const t=Math.floor(Math.random()*50)+10,e=Math.floor(Math.random()*50)+10,l=["+","-"],n=l[Math.floor(Math.random()*l.length)];let s,r;if(n==="+")s=t+e,r=`What is ${t} + ${e}?`;else{s=t+e;const o=s;s=t,r=`What is ${o} - ${e}?`}return{question:r,answer:s}}function on(){const t=Math.floor(Math.random()*50)+10,e=Math.floor(Math.random()*50)+10,l=t+e;return{question:`What is ${t} + ${e}?`,answer:l}}function an(t,e,l=!1){if(!t)return null;let n,s,r=!1,o,c;if(t.hp&&t.hp>0){r=!0;const u=[10,20,30,40,50,60,60,80,120,300][Math.floor(Math.random()*5)];s=Math.ceil(t.hp/u),n=e.damageQuestion(u)}else{const u=rn();n=u.question,s=u.answer}if(l){const u=on();o=u.question,c=u.answer}return{card:t,questionText:n,correctAnswer:s,isPokemon:r,secondQuestion:o,secondAnswer:c}}function cn(t,e,l){const n=e===t.correctAnswer;if(t.secondQuestion&&t.secondAnswer!==void 0){const s=l===t.secondAnswer;return n&&s}return n}const Oe=[];function Pl(t,e=Z){let l;const n=new Set;function s(c){if(_e(t,c)&&(t=c,l)){const u=!Oe.length;for(const a of n)a[1](),Oe.push(a,t);if(u){for(let a=0;a<Oe.length;a+=2)Oe[a][0](Oe[a+1]);Oe.length=0}}}function r(c){s(c(t))}function o(c,u=Z){const a=[c,u];return n.add(a),n.size===1&&(l=e(s,r)||Z),c(t),()=>{n.delete(a),n.size===0&&l&&(l(),l=null)}}return{set:s,update:r,subscribe:o}}const wt=[{id:"swsh3",name:"Sword & Shield - Darkness Ablaze"},{id:"sv05",name:"Scarlet & Violet - Temporal Forces"},{id:"sv06.5",name:"Scarlet & Violet - Shrouded Fable"}],Dl="tcg-math-settings";function un(){return{language:"en",selectedSet:"swsh3"}}function Tt(){try{const t=localStorage.getItem(Dl);if(t){const e=JSON.parse(t);return{language:e.language||"en",selectedSet:e.selectedSet||"swsh3"}}}catch(t){console.error("Error loading settings:",t)}return un()}function Rl(t){try{localStorage.setItem(Dl,JSON.stringify(t))}catch(e){console.error("Error saving settings:",e)}}const Fl=Tt(),ot=Pl(Fl.language),ct=Pl(Fl.selectedSet);ot.subscribe(t=>{const e=Tt();Rl({...e,language:t})});ct.subscribe(t=>{const e=Tt();Rl({...e,selectedSet:t})});const fn={en:{appTitle:"16k Pokemon Math Challenge",quizTitle:"TCG Math Challenge",playQuiz:"Play Quiz",myCollection:"My Collection",selectSet:"Select Set",selectLanguage:"Language",setInfo:"Collecting Set",enterAnswer:"Enter your answer",submitAnswer:"Submit Answer",nextQuestion:"Next Question",correct:"Correct!",notQuite:"Not quite!",correctMessage:"Great job! The answer was",incorrectMessage:"You answered",encouragement:"Try again with the next question!",youWonThisCard:"You won this card!",cardsCollected:"Cards Collected",questionsAnswered:"Questions Answered",correctAnswers:"Correct Answers",accuracy:"Accuracy",noCardsYet:"No cards yet!",noCardsDescription:"Answer questions correctly to start building your collection.",exportBackup:"Export Backup",importBackup:"Import Backup",clearThisSet:"Clear This Set",clearCollectionTitle:"Clear Collection?",clearCollectionMessage:"Are you sure you want to clear your entire collection? This action cannot be undone.",cancel:"Cancel",clearCollection:"Clear Collection",collectionExported:"Collection exported successfully!",collectionImported:"Collection imported successfully!",collectionCleared:"Collection cleared successfully!",exportFailed:"Failed to export collection",importFailed:"Failed to import collection",clearFailed:"Failed to clear collection",hit:"hit",hits:"hits",loading:"Loading new question...",yourCollection:"Your Collection",language:"Language",damageQuestion:t=>`Your Pokémon deals ${t} damage each turn. How many turns does it take to defeat this Pokémon?`},no:{appTitle:"16k Pokémon Matteutfordring",quizTitle:"TCG Matte Utfordring",playQuiz:"Spill Quiz",myCollection:"Min Samling",selectSet:"Velg Sett",selectLanguage:"Språk",setInfo:"Samler Sett",enterAnswer:"Skriv inn svaret ditt",submitAnswer:"Send Inn Svar",nextQuestion:"Neste Spørsmål",correct:"Riktig!",notQuite:"Ikke helt!",correctMessage:"Bra jobbet! Svaret var",incorrectMessage:"Du svarte",encouragement:"Prøv igjen med neste spørsmål!",youWonThisCard:"Du vant dette kortet!",cardsCollected:"Kort Samlet",questionsAnswered:"Spørsmål Besvart",correctAnswers:"Riktige Svar",accuracy:"Nøyaktighet",noCardsYet:"Ingen kort ennå!",noCardsDescription:"Svar riktig på spørsmål for å begynne å bygge samlingen din.",exportBackup:"Eksporter Backup",importBackup:"Importer Backup",clearThisSet:"Tøm Dette Settet",clearCollectionTitle:"Tøm Samling?",clearCollectionMessage:"Er du sikker på at du vil tømme hele samlingen din? Denne handlingen kan ikke angres.",cancel:"Avbryt",clearCollection:"Tøm Samling",collectionExported:"Samling eksportert!",collectionImported:"Samling importert!",collectionCleared:"Samling tømt!",exportFailed:"Kunne ikke eksportere samling",importFailed:"Kunne ikke importere samling",clearFailed:"Kunne ikke tømme samling",hit:"treff",hits:"treff",loading:"Laster nytt spørsmål...",yourCollection:"Din Samling",language:"Språk",damageQuestion:t=>`Din Pokémon gjør ${t} skade hver runde. Hvor mange runder tar det å beseire denne Pokémonen?`}};function dn(t){return fn[t]}function Wt(t,e,l){const n=t.slice();return n[3]=e[l],n}function Kt(t,e,l){const n=t.slice();return n[6]=e[l],n}function Jt(t){let e,l,n,s,r=t[0].hp+"",o;return{c(){e=d("div"),l=d("span"),l.textContent="HP",n=_(),s=d("span"),o=C(r),f(l,"class","hp-label svelte-2rdllh"),f(s,"class","hp-value svelte-2rdllh"),f(e,"class","card-hp svelte-2rdllh")},m(c,u){M(c,e,u),i(e,l),i(e,n),i(e,s),i(s,o)},p(c,u){u&1&&r!==(r=c[0].hp+"")&&E(o,r)},d(c){c&&I(e)}}}function Gt(t){let e,l=oe(t[0].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=Xt(Kt(t,l,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();f(e,"class","card-types svelte-2rdllh")},m(s,r){M(s,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,r){if(r&1){l=oe(s[0].types);let o;for(o=0;o<l.length;o+=1){const c=Kt(s,l,o);n[o]?n[o].p(c,r):(n[o]=Xt(c),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(s){s&&I(e),Ae(n,s)}}}function Xt(t){let e,l=t[6]+"",n;return{c(){e=d("span"),n=C(l),f(e,"class","type-badge svelte-2rdllh")},m(s,r){M(s,e,r),i(e,n)},p(s,r){r&1&&l!==(l=s[6]+"")&&E(n,l)},d(s){s&&I(e)}}}function Zt(t){let e,l,n,s=oe(t[0].attacks),r=[];for(let o=0;o<s.length;o+=1)r[o]=xt(Wt(t,s,o));return{c(){e=d("div"),l=d("h4"),l.textContent="Attacks:",n=_();for(let o=0;o<r.length;o+=1)r[o].c();f(l,"class","svelte-2rdllh"),f(e,"class","card-attacks svelte-2rdllh")},m(o,c){M(o,e,c),i(e,l),i(e,n);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null)},p(o,c){if(c&5){s=oe(o[0].attacks);let u;for(u=0;u<s.length;u+=1){const a=Wt(o,s,u);r[u]?r[u].p(a,c):(r[u]=xt(a),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=s.length}},d(o){o&&I(e),Ae(r,o)}}}function $t(t){let e,l=t[3].damage+"",n;return{c(){e=d("span"),n=C(l),f(e,"class","attack-damage svelte-2rdllh")},m(s,r){M(s,e,r),i(e,n)},p(s,r){r&1&&l!==(l=s[3].damage+"")&&E(n,l)},d(s){s&&I(e)}}}function xt(t){let e,l,n=t[3].name+"",s,r,o,c=t[3].damage&&$t(t);return{c(){e=d("div"),l=d("span"),s=C(n),r=_(),c&&c.c(),o=_(),f(l,"class","attack-name svelte-2rdllh"),f(e,"class","attack svelte-2rdllh"),X(e,"highlighted",t[2]===t[3].name)},m(u,a){M(u,e,a),i(e,l),i(l,s),i(e,r),c&&c.m(e,null),i(e,o)},p(u,a){a&1&&n!==(n=u[3].name+"")&&E(s,n),u[3].damage?c?c.p(u,a):(c=$t(u),c.c(),c.m(e,o)):c&&(c.d(1),c=null),a&5&&X(e,"highlighted",u[2]===u[3].name)},d(u){u&&I(e),c&&c.d()}}}function gn(t){let e,l,n,s,r,o,c,u,a=t[0].name+"",v,g,p,m,b=t[0].hp&&Jt(t),h=t[0].types&&t[0].types.length>0&&Gt(t),k=t[1]&&t[0].attacks&&t[0].attacks.length>0&&Zt(t);return{c(){e=d("div"),l=d("div"),n=d("img"),o=_(),c=d("div"),u=d("h3"),v=C(a),g=_(),b&&b.c(),p=_(),h&&h.c(),m=_(),k&&k.c(),me(n.src,s=t[0].image)||f(n,"src",s),f(n,"alt",r=t[0].name),f(n,"class","svelte-2rdllh"),f(l,"class","card-image svelte-2rdllh"),f(u,"class","card-name svelte-2rdllh"),f(c,"class","card-info svelte-2rdllh"),f(e,"class","pokemon-card svelte-2rdllh")},m(S,A){M(S,e,A),i(e,l),i(l,n),i(e,o),i(e,c),i(c,u),i(u,v),i(c,g),b&&b.m(c,null),i(c,p),h&&h.m(c,null),i(c,m),k&&k.m(c,null)},p(S,[A]){A&1&&!me(n.src,s=S[0].image)&&f(n,"src",s),A&1&&r!==(r=S[0].name)&&f(n,"alt",r),A&1&&a!==(a=S[0].name+"")&&E(v,a),S[0].hp?b?b.p(S,A):(b=Jt(S),b.c(),b.m(c,p)):b&&(b.d(1),b=null),S[0].types&&S[0].types.length>0?h?h.p(S,A):(h=Gt(S),h.c(),h.m(c,m)):h&&(h.d(1),h=null),S[1]&&S[0].attacks&&S[0].attacks.length>0?k?k.p(S,A):(k=Zt(S),k.c(),k.m(c,null)):k&&(k.d(1),k=null)},i:Z,o:Z,d(S){S&&I(e),b&&b.d(),h&&h.d(),k&&k.d()}}}function mn(t,e,l){let{card:n}=e,{showAttacks:s=!1}=e,{highlightedAttack:r=null}=e;return t.$$set=o=>{"card"in o&&l(0,n=o.card),"showAttacks"in o&&l(1,s=o.showAttacks),"highlightedAttack"in o&&l(2,r=o.highlightedAttack)},[n,s,r]}class vn extends Me{constructor(e){super(),Ie(this,e,mn,gn,_e,{card:0,showAttacks:1,highlightedAttack:2})}}function el(t){let e,l,n,s,r=t[0].secondQuestion+"",o;return{c(){e=d("div"),l=d("span"),l.textContent="2.",n=_(),s=d("h3"),o=C(r),f(l,"class","question-number svelte-174fqld"),f(s,"class","question-text svelte-174fqld"),f(e,"class","question-item svelte-174fqld")},m(c,u){M(c,e,u),i(e,l),i(e,n),i(e,s),i(s,o)},p(c,u){u&1&&r!==(r=c[0].secondQuestion+"")&&E(o,r)},d(c){c&&I(e)}}}function tl(t){let e,l,n,s,r,o,c;return{c(){e=d("div"),l=d("label"),l.textContent="Answer 2:",n=_(),s=d("input"),f(l,"class","input-label svelte-174fqld"),f(s,"type","number"),f(s,"placeholder",r=t[1].enterAnswer),f(s,"class","answer-input svelte-174fqld"),f(e,"class","input-group svelte-174fqld")},m(u,a){M(u,e,a),i(e,l),i(e,n),i(e,s),ye(s,t[3]),o||(c=[j(s,"input",t[8]),j(s,"keypress",t[5])],o=!0)},p(u,a){a&2&&r!==(r=u[1].enterAnswer)&&f(s,"placeholder",r),a&8&&it(s.value)!==u[3]&&ye(s,u[3])},d(u){u&&I(e),o=!1,ie(c)}}}function pn(t){let e,l,n,s,r,o,c,u,a,v,g=t[0].questionText+"",p,m,b,h,k,S,A,T,L,q,y,P,H=t[1].submitAnswer+"",D,N,F,K,x;n=new vn({props:{card:t[0].card}});let Y=t[0].secondQuestion&&el(t),V=t[0].secondQuestion&&tl(t);return{c(){e=d("div"),l=d("div"),He(n.$$.fragment),s=_(),r=d("div"),o=d("div"),c=d("div"),u=d("span"),u.textContent="1.",a=_(),v=d("h3"),p=C(g),m=_(),Y&&Y.c(),b=_(),h=d("div"),k=d("div"),S=d("label"),S.textContent="Answer 1:",A=_(),T=d("input"),q=_(),V&&V.c(),y=_(),P=d("button"),D=C(H),f(l,"class","card-display svelte-174fqld"),f(u,"class","question-number svelte-174fqld"),f(v,"class","question-text svelte-174fqld"),f(c,"class","question-item svelte-174fqld"),f(o,"class","questions-list svelte-174fqld"),f(S,"class","input-label svelte-174fqld"),f(T,"type","number"),f(T,"placeholder",L=t[1].enterAnswer),f(T,"class","answer-input svelte-174fqld"),f(k,"class","input-group svelte-174fqld"),f(P,"class","submit-btn btn-primary svelte-174fqld"),P.disabled=N=!t[2]||t[0].secondQuestion&&!t[3],f(h,"class","answer-inputs-container svelte-174fqld"),f(r,"class","question-container svelte-174fqld"),f(e,"class","quiz-view svelte-174fqld")},m(O,W){M(O,e,W),i(e,l),qe(n,l,null),i(e,s),i(e,r),i(r,o),i(o,c),i(c,u),i(c,a),i(c,v),i(v,p),i(o,m),Y&&Y.m(o,null),i(r,b),i(r,h),i(h,k),i(k,S),i(k,A),i(k,T),ye(T,t[2]),i(h,q),V&&V.m(h,null),i(h,y),i(h,P),i(P,D),F=!0,K||(x=[j(T,"input",t[7]),j(T,"keypress",t[5]),j(P,"click",t[4])],K=!0)},p(O,[W]){const U={};W&1&&(U.card=O[0].card),n.$set(U),(!F||W&1)&&g!==(g=O[0].questionText+"")&&E(p,g),O[0].secondQuestion?Y?Y.p(O,W):(Y=el(O),Y.c(),Y.m(o,null)):Y&&(Y.d(1),Y=null),(!F||W&2&&L!==(L=O[1].enterAnswer))&&f(T,"placeholder",L),W&4&&it(T.value)!==O[2]&&ye(T,O[2]),O[0].secondQuestion?V?V.p(O,W):(V=tl(O),V.c(),V.m(h,y)):V&&(V.d(1),V=null),(!F||W&2)&&H!==(H=O[1].submitAnswer+"")&&E(D,H),(!F||W&13&&N!==(N=!O[2]||O[0].secondQuestion&&!O[3]))&&(P.disabled=N)},i(O){F||(ce(n.$$.fragment,O),F=!0)},o(O){ve(n.$$.fragment,O),F=!1},d(O){O&&I(e),Ee(n),Y&&Y.d(),V&&V.d(),K=!1,ie(x)}}}function hn(t,e,l){let{question:n}=e,{t:s}=e,{currentSet:r}=e;const o=ut();let c="",u="";function a(){const m=parseInt(c,10);if(!isNaN(m))if(n.secondQuestion&&n.secondAnswer!==void 0){const b=parseInt(u,10);isNaN(b)||o("answer",{firstAnswer:m,secondAnswer:b})}else o("answer",{firstAnswer:m})}function v(m){m.key==="Enter"&&a()}function g(){c=it(this.value),l(2,c)}function p(){u=it(this.value),l(3,u)}return t.$$set=m=>{"question"in m&&l(0,n=m.question),"t"in m&&l(1,s=m.t),"currentSet"in m&&l(6,r=m.currentSet)},[n,s,c,u,a,v,r,g,p]}class _n extends Me{constructor(e){super(),Ie(this,e,hn,pn,_e,{question:0,t:1,currentSet:6})}}function kn(t){let e,l,n,s=t[4].notQuite+"",r,o,c,u=t[4].incorrectMessage+"",a,v,g,p,m,b=t[4].correctMessage.toLowerCase()+"",h,k,S,A,T,L,q,y,P=t[4].encouragement+"",H,D=t[5]&&t[6]>0&&ll(t);return{c(){e=d("div"),e.textContent="✗",l=_(),n=d("h2"),r=C(s),o=_(),c=d("p"),a=C(u),v=_(),g=d("strong"),p=C(t[2]),m=C(", "),h=C(b),k=_(),S=d("strong"),A=C(t[1]),T=C("."),L=_(),D&&D.c(),q=_(),y=d("p"),H=C(P),f(e,"class","result-icon error svelte-1v74pgf"),f(n,"class","result-title svelte-1v74pgf"),f(g,"class","svelte-1v74pgf"),f(S,"class","svelte-1v74pgf"),f(c,"class","result-message svelte-1v74pgf"),f(y,"class","encouragement svelte-1v74pgf")},m(N,F){M(N,e,F),M(N,l,F),M(N,n,F),i(n,r),M(N,o,F),M(N,c,F),i(c,a),i(c,v),i(c,g),i(g,p),i(c,m),i(c,h),i(c,k),i(c,S),i(S,A),i(c,T),M(N,L,F),D&&D.m(N,F),M(N,q,F),M(N,y,F),i(y,H)},p(N,F){F&16&&s!==(s=N[4].notQuite+"")&&E(r,s),F&16&&u!==(u=N[4].incorrectMessage+"")&&E(a,u),F&4&&E(p,N[2]),F&16&&b!==(b=N[4].correctMessage.toLowerCase()+"")&&E(h,b),F&2&&E(A,N[1]),N[5]&&N[6]>0?D?D.p(N,F):(D=ll(N),D.c(),D.m(q.parentNode,q)):D&&(D.d(1),D=null),F&16&&P!==(P=N[4].encouragement+"")&&E(H,P)},d(N){N&&(I(e),I(l),I(n),I(o),I(c),I(L),I(q),I(y)),D&&D.d(N)}}}function bn(t){let e,l,n,s=t[4].correct+"",r,o,c,u=t[4].correctMessage+"",a,v,g,p,m,b=(t[1]===1?t[4].hit:t[4].hits)+"",h,k,S,A,T,L=t[5]&&!t[3]&&nl(t),q=t[3]&&sl(t);return{c(){e=d("div"),e.textContent="✓",l=_(),n=d("h2"),r=C(s),o=_(),c=d("p"),a=C(u),v=_(),g=d("strong"),p=C(t[1]),m=_(),h=C(b),k=C("!"),S=_(),L&&L.c(),A=_(),q&&q.c(),T=It(),f(e,"class","result-icon success svelte-1v74pgf"),f(n,"class","result-title svelte-1v74pgf"),f(g,"class","svelte-1v74pgf"),f(c,"class","result-message svelte-1v74pgf")},m(y,P){M(y,e,P),M(y,l,P),M(y,n,P),i(n,r),M(y,o,P),M(y,c,P),i(c,a),i(c,v),i(c,g),i(g,p),i(c,m),i(c,h),i(c,k),M(y,S,P),L&&L.m(y,P),M(y,A,P),q&&q.m(y,P),M(y,T,P)},p(y,P){P&16&&s!==(s=y[4].correct+"")&&E(r,s),P&16&&u!==(u=y[4].correctMessage+"")&&E(a,u),P&2&&E(p,y[1]),P&18&&b!==(b=(y[1]===1?y[4].hit:y[4].hits)+"")&&E(h,b),y[5]&&!y[3]?L?L.p(y,P):(L=nl(y),L.c(),L.m(A.parentNode,A)):L&&(L.d(1),L=null),y[3]?q?q.p(y,P):(q=sl(y),q.c(),q.m(T.parentNode,T)):q&&(q.d(1),q=null)},d(y){y&&(I(e),I(l),I(n),I(o),I(c),I(S),I(A),I(T)),L&&L.d(y),q&&q.d(y)}}}function ll(t){let e,l=t[4].language==="Språk"?"Streak reset! Try again.":"Rekke tilbakestilt! Prøv igjen.",n;return{c(){e=d("p"),n=C(l),f(e,"class","streak-lost svelte-1v74pgf")},m(s,r){M(s,e,r),i(e,n)},p(s,r){r&16&&l!==(l=s[4].language==="Språk"?"Streak reset! Try again.":"Rekke tilbakestilt! Prøv igjen.")&&E(n,l)},d(s){s&&I(e)}}}function nl(t){let e,l,n,s,r,o,c;function u(g,p){return g[7]===1?Cn:wn}let a=u(t),v=a(t);return{c(){e=d("div"),l=d("p"),v.c(),n=_(),s=d("div"),r=d("div"),o=_(),c=d("div"),f(l,"class","streak-text svelte-1v74pgf"),f(r,"class","streak-dot svelte-1v74pgf"),X(r,"filled",t[7]>=1),f(c,"class","streak-dot svelte-1v74pgf"),X(c,"filled",t[7]>=2),f(s,"class","streak-progress svelte-1v74pgf"),f(e,"class","streak-info svelte-1v74pgf")},m(g,p){M(g,e,p),i(e,l),v.m(l,null),i(e,n),i(e,s),i(s,r),i(s,o),i(s,c)},p(g,p){a===(a=u(g))&&v?v.p(g,p):(v.d(1),v=a(g),v&&(v.c(),v.m(l,null))),p&128&&X(r,"filled",g[7]>=1),p&128&&X(c,"filled",g[7]>=2)},d(g){g&&I(e),v.d()}}}function wn(t){let e=t[4].language==="Språk"?"Get 2 correct answers to win this rare card!":"Få 2 riktige svar for å vinne dette sjeldne kortet!",l;return{c(){l=C(e)},m(n,s){M(n,l,s)},p(n,s){s&16&&e!==(e=n[4].language==="Språk"?"Get 2 correct answers to win this rare card!":"Få 2 riktige svar for å vinne dette sjeldne kortet!")&&E(l,e)},d(n){n&&I(l)}}}function Cn(t){let e=t[4].language==="Språk"?"One more correct to win this card!":"Én til riktig for å vinne dette kortet!",l;return{c(){l=C(e)},m(n,s){M(n,l,s)},p(n,s){s&16&&e!==(e=n[4].language==="Språk"?"One more correct to win this card!":"Én til riktig for å vinne dette kortet!")&&E(l,e)},d(n){n&&I(l)}}}function sl(t){let e,l,n=t[4].youWonThisCard+"",s,r,o,c,u,a,v,g,p,m=t[3].name+"",b;return{c(){e=d("div"),l=d("h3"),s=C(n),r=_(),o=d("div"),c=d("div"),u=d("img"),g=_(),p=d("span"),b=C(m),f(l,"class","svelte-1v74pgf"),me(u.src,a=t[3].image)||f(u,"src",a),f(u,"alt",v=t[3].name),f(u,"class","svelte-1v74pgf"),f(p,"class","card-name svelte-1v74pgf"),f(c,"class","mini-card svelte-1v74pgf"),f(o,"class","cards-grid svelte-1v74pgf"),f(e,"class","won-cards svelte-1v74pgf")},m(h,k){M(h,e,k),i(e,l),i(l,s),i(e,r),i(e,o),i(o,c),i(c,u),i(c,g),i(c,p),i(p,b)},p(h,k){k&16&&n!==(n=h[4].youWonThisCard+"")&&E(s,n),k&8&&!me(u.src,a=h[3].image)&&f(u,"src",a),k&8&&v!==(v=h[3].name)&&f(u,"alt",v),k&8&&m!==(m=h[3].name+"")&&E(b,m)},d(h){h&&I(e)}}}function Sn(t){let e,l,n,s,r=t[4].nextQuestion+"",o,c,u;function a(p,m){return p[0]?bn:kn}let v=a(t),g=v(t);return{c(){e=d("div"),l=d("div"),g.c(),n=_(),s=d("button"),o=C(r),f(l,"class","result-card svelte-1v74pgf"),X(l,"correct",t[0]),X(l,"incorrect",!t[0]),f(s,"class","next-btn btn-primary svelte-1v74pgf"),f(e,"class","result-view svelte-1v74pgf")},m(p,m){M(p,e,m),i(e,l),g.m(l,null),i(e,n),i(e,s),i(s,o),c||(u=j(s,"click",t[8]),c=!0)},p(p,[m]){v===(v=a(p))&&g?g.p(p,m):(g.d(1),g=v(p),g&&(g.c(),g.m(l,null))),m&1&&X(l,"correct",p[0]),m&1&&X(l,"incorrect",!p[0]),m&16&&r!==(r=p[4].nextQuestion+"")&&E(o,r)},i:Z,o:Z,d(p){p&&I(e),g.d(),c=!1,u()}}}function yn(t,e,l){let{isCorrect:n}=e,{correctAnswer:s}=e,{userAnswer:r}=e,{wonCard:o}=e,{t:c}=e,{needsStreak:u=!1}=e,{streakProgress:a=0}=e,{currentStreak:v=0}=e;const g=ut();function p(){g("next")}return t.$$set=m=>{"isCorrect"in m&&l(0,n=m.isCorrect),"correctAnswer"in m&&l(1,s=m.correctAnswer),"userAnswer"in m&&l(2,r=m.userAnswer),"wonCard"in m&&l(3,o=m.wonCard),"t"in m&&l(4,c=m.t),"needsStreak"in m&&l(5,u=m.needsStreak),"streakProgress"in m&&l(6,a=m.streakProgress),"currentStreak"in m&&l(7,v=m.currentStreak)},[n,s,r,o,c,u,a,v,p]}class An extends Me{constructor(e){super(),Ie(this,e,yn,Sn,_e,{isCorrect:0,correctAnswer:1,userAnswer:2,wonCard:3,t:4,needsStreak:5,streakProgress:6,currentStreak:7})}}function qn(){try{const t=nn(),e=new Blob([t],{type:"application/json"}),l=URL.createObjectURL(e),n=document.createElement("a");n.href=l,n.download=`pokemon-collection-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(l)}catch(t){throw console.error("Error downloading backup:",t),new Error("Failed to download backup")}}function En(t){return new Promise(e=>{const l=new FileReader;l.onload=n=>{var s;try{const r=(s=n.target)==null?void 0:s.result,o=sn(r);e(o)}catch(r){console.error("Error reading file:",r),e({success:!1,error:"Failed to read file"})}},l.onerror=()=>{e({success:!1,error:"Failed to read file"})},l.readAsText(t)})}function rl(t,e,l){const n=t.slice();return n[33]=e[l],n}function ol(t,e,l){const n=t.slice();return n[36]=e[l],n}function il(t,e,l){const n=t.slice();return n[33]=e[l],n}function al(t,e,l){const n=t.slice();return n[36]=e[l],n}function In(t){let e=t[1].language==="Språk"?`Defeat ${t[10]>0?t[10].toLocaleString():0} HP to unlock 5 rare cards`:`Beseir ${t[10]>0?t[10].toLocaleString():0} HP for å låse opp 5 sjeldne kort`,l;return{c(){l=C(e)},m(n,s){M(n,l,s)},p(n,s){s[0]&1026&&e!==(e=n[1].language==="Språk"?`Defeat ${n[10]>0?n[10].toLocaleString():0} HP to unlock 5 rare cards`:`Beseir ${n[10]>0?n[10].toLocaleString():0} HP for å låse opp 5 sjeldne kort`)&&E(l,e)},d(n){n&&I(l)}}}function Mn(t){let e=t[1].language==="Språk"?"Rare cards unlocked!":"Sjeldne kort låst opp!",l;return{c(){l=C(e)},m(n,s){M(n,l,s)},p(n,s){s[0]&2&&e!==(e=n[1].language==="Språk"?"Rare cards unlocked!":"Sjeldne kort låst opp!")&&E(l,e)},d(n){n&&I(l)}}}function cl(t){let e,l;return{c(){e=d("div"),l=d("div"),f(l,"class","hp-progress-fill svelte-1c2fvge"),St(l,"width",t[8]+"%"),f(e,"class","hp-progress-bar svelte-1c2fvge")},m(n,s){M(n,e,s),i(e,l)},p(n,s){s[0]&256&&St(l,"width",n[8]+"%")},d(n){n&&I(e)}}}function ul(t){let e,l,n,s,r,o,c;function u(){return t[24](t[36])}return{c(){e=d("button"),l=d("img"),r=_(),me(l.src,n=t[36].image)||f(l,"src",n),f(l,"alt",s=t[36].name),f(l,"class","svelte-1c2fvge"),X(l,"locked",!t[9]),f(e,"class","rare-thumbnail svelte-1c2fvge"),X(e,"unlocked",t[9])},m(a,v){M(a,e,v),i(e,l),i(e,r),o||(c=j(e,"click",u),o=!0)},p(a,v){t=a,v[0]&16&&!me(l.src,n=t[36].image)&&f(l,"src",n),v[0]&16&&s!==(s=t[36].name)&&f(l,"alt",s),v[0]&512&&X(l,"locked",!t[9]),v[0]&512&&X(e,"unlocked",t[9])},d(a){a&&I(e),o=!1,c()}}}function Tn(t){let e,l=oe(t[0].cards),n=[];for(let s=0;s<l.length;s+=1)n[s]=ml(ol(t,l,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();f(e,"class","cards-grid svelte-1c2fvge")},m(s,r){M(s,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,r){if(r[0]&524289){l=oe(s[0].cards);let o;for(o=0;o<l.length;o+=1){const c=ol(s,l,o);n[o]?n[o].p(c,r):(n[o]=ml(c),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(s){s&&I(e),Ae(n,s)}}}function Qn(t){let e,l,n,s,r=t[1].noCardsYet+"",o,c,u,a=t[1].noCardsDescription+"",v;return{c(){e=d("div"),l=d("div"),l.textContent="📦",n=_(),s=d("h3"),o=C(r),c=_(),u=d("p"),v=C(a),f(l,"class","empty-icon svelte-1c2fvge"),f(s,"class","svelte-1c2fvge"),f(u,"class","svelte-1c2fvge"),f(e,"class","empty-state svelte-1c2fvge")},m(g,p){M(g,e,p),i(e,l),i(e,n),i(e,s),i(s,o),i(e,c),i(e,u),i(u,v)},p(g,p){p[0]&2&&r!==(r=g[1].noCardsYet+"")&&E(o,r),p[0]&2&&a!==(a=g[1].noCardsDescription+"")&&E(v,a)},d(g){g&&I(e)}}}function fl(t){let e,l,n=t[36].hp+"",s;return{c(){e=d("span"),l=C("HP "),s=C(n),f(e,"class","hp svelte-1c2fvge")},m(r,o){M(r,e,o),i(e,l),i(e,s)},p(r,o){o[0]&1&&n!==(n=r[36].hp+"")&&E(s,n)},d(r){r&&I(e)}}}function dl(t){let e,l=oe(t[36].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=gl(il(t,l,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();f(e,"class","types svelte-1c2fvge")},m(s,r){M(s,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,r){if(r[0]&1){l=oe(s[36].types);let o;for(o=0;o<l.length;o+=1){const c=il(s,l,o);n[o]?n[o].p(c,r):(n[o]=gl(c),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(s){s&&I(e),Ae(n,s)}}}function gl(t){let e,l=t[33]+"",n;return{c(){e=d("span"),n=C(l),f(e,"class","type svelte-1c2fvge")},m(s,r){M(s,e,r),i(e,n)},p(s,r){r[0]&1&&l!==(l=s[33]+"")&&E(n,l)},d(s){s&&I(e)}}}function ml(t){let e,l,n,s,r,o,c,u=t[36].name+"",a,v,g,p,m,b,h=t[36].hp&&fl(t),k=t[36].types&&t[36].types.length>0&&dl(t);function S(){return t[25](t[36])}return{c(){e=d("button"),l=d("img"),r=_(),o=d("div"),c=d("h4"),a=C(u),v=_(),h&&h.c(),g=_(),k&&k.c(),p=_(),me(l.src,n=t[36].image)||f(l,"src",n),f(l,"alt",s=t[36].name),f(l,"class","svelte-1c2fvge"),f(c,"class","svelte-1c2fvge"),f(o,"class","card-details svelte-1c2fvge"),f(e,"class","collection-card svelte-1c2fvge")},m(A,T){M(A,e,T),i(e,l),i(e,r),i(e,o),i(o,c),i(c,a),i(o,v),h&&h.m(o,null),i(o,g),k&&k.m(o,null),i(e,p),m||(b=j(e,"click",S),m=!0)},p(A,T){t=A,T[0]&1&&!me(l.src,n=t[36].image)&&f(l,"src",n),T[0]&1&&s!==(s=t[36].name)&&f(l,"alt",s),T[0]&1&&u!==(u=t[36].name+"")&&E(a,u),t[36].hp?h?h.p(t,T):(h=fl(t),h.c(),h.m(o,g)):h&&(h.d(1),h=null),t[36].types&&t[36].types.length>0?k?k.p(t,T):(k=dl(t),k.c(),k.m(o,null)):k&&(k.d(1),k=null)},d(A){A&&I(e),h&&h.d(),k&&k.d(),m=!1,b()}}}function vl(t){let e,l=t[6].text+"",n;return{c(){e=d("div"),n=C(l),f(e,"class","message svelte-1c2fvge"),X(e,"success",t[6].type==="success"),X(e,"error",t[6].type==="error")},m(s,r){M(s,e,r),i(e,n)},p(s,r){r[0]&64&&l!==(l=s[6].text+"")&&E(n,l),r[0]&64&&X(e,"success",s[6].type==="success"),r[0]&64&&X(e,"error",s[6].type==="error")},d(s){s&&I(e)}}}function pl(t){let e,l,n,s,r,o,c,u,a,v,g=t[3].name+"",p,m,b,h,k,S,A=t[3].hp&&hl(t),T=t[3].types&&t[3].types.length>0&&_l(t),L=t[3].rarity&&bl(t);return{c(){e=d("div"),l=d("div"),n=d("button"),n.textContent="×",s=_(),r=d("img"),u=_(),a=d("div"),v=d("h3"),p=C(g),m=_(),A&&A.c(),b=_(),T&&T.c(),h=_(),L&&L.c(),f(n,"class","close-modal svelte-1c2fvge"),me(r.src,o=t[3].image)||f(r,"src",o),f(r,"alt",c=t[3].name),f(r,"class","modal-card-image svelte-1c2fvge"),f(v,"class","svelte-1c2fvge"),f(a,"class","modal-card-info svelte-1c2fvge"),f(l,"class","card-modal svelte-1c2fvge"),f(l,"role","dialog"),f(e,"class","dialog-overlay svelte-1c2fvge"),f(e,"role","button"),f(e,"tabindex","-1")},m(q,y){M(q,e,y),i(e,l),i(l,n),i(l,s),i(l,r),i(l,u),i(l,a),i(a,v),i(v,p),i(a,m),A&&A.m(a,null),i(a,b),T&&T.m(a,null),i(a,h),L&&L.m(a,null),k||(S=[j(n,"click",t[20]),j(l,"click",Al(t[23])),j(e,"click",t[20]),j(e,"keydown",t[27])],k=!0)},p(q,y){y[0]&8&&!me(r.src,o=q[3].image)&&f(r,"src",o),y[0]&8&&c!==(c=q[3].name)&&f(r,"alt",c),y[0]&8&&g!==(g=q[3].name+"")&&E(p,g),q[3].hp?A?A.p(q,y):(A=hl(q),A.c(),A.m(a,b)):A&&(A.d(1),A=null),q[3].types&&q[3].types.length>0?T?T.p(q,y):(T=_l(q),T.c(),T.m(a,h)):T&&(T.d(1),T=null),q[3].rarity?L?L.p(q,y):(L=bl(q),L.c(),L.m(a,null)):L&&(L.d(1),L=null)},d(q){q&&I(e),A&&A.d(),T&&T.d(),L&&L.d(),k=!1,ie(S)}}}function hl(t){let e,l,n=t[3].hp+"",s;return{c(){e=d("div"),l=C("HP: "),s=C(n),f(e,"class","modal-hp svelte-1c2fvge")},m(r,o){M(r,e,o),i(e,l),i(e,s)},p(r,o){o[0]&8&&n!==(n=r[3].hp+"")&&E(s,n)},d(r){r&&I(e)}}}function _l(t){let e,l=oe(t[3].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=kl(rl(t,l,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();f(e,"class","modal-types svelte-1c2fvge")},m(s,r){M(s,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,r){if(r[0]&8){l=oe(s[3].types);let o;for(o=0;o<l.length;o+=1){const c=rl(s,l,o);n[o]?n[o].p(c,r):(n[o]=kl(c),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(s){s&&I(e),Ae(n,s)}}}function kl(t){let e,l=t[33]+"",n;return{c(){e=d("span"),n=C(l),f(e,"class","modal-type svelte-1c2fvge")},m(s,r){M(s,e,r),i(e,n)},p(s,r){r[0]&8&&l!==(l=s[33]+"")&&E(n,l)},d(s){s&&I(e)}}}function bl(t){let e,l,n=t[3].rarity+"",s;return{c(){e=d("div"),l=C("Rarity: "),s=C(n),f(e,"class","modal-rarity svelte-1c2fvge")},m(r,o){M(r,e,o),i(e,l),i(e,s)},p(r,o){o[0]&8&&n!==(n=r[3].rarity+"")&&E(s,n)},d(r){r&&I(e)}}}function wl(t){let e,l,n,s=t[1].clearCollectionTitle+"",r,o,c,u=t[1].clearCollectionMessage+"",a,v,g,p,m=t[1].cancel+"",b,h,k,S=t[1].clearCollection+"",A,T,L;return{c(){e=d("div"),l=d("div"),n=d("h3"),r=C(s),o=_(),c=d("p"),a=C(u),v=_(),g=d("div"),p=d("button"),b=C(m),h=_(),k=d("button"),A=C(S),f(n,"class","svelte-1c2fvge"),f(c,"class","svelte-1c2fvge"),f(p,"class","btn-secondary"),f(k,"class","btn-error"),f(g,"class","dialog-actions svelte-1c2fvge"),f(l,"class","dialog svelte-1c2fvge"),f(l,"role","dialog"),f(e,"class","dialog-overlay svelte-1c2fvge"),f(e,"role","button"),f(e,"tabindex","-1")},m(q,y){M(q,e,y),i(e,l),i(l,n),i(n,r),i(l,o),i(l,c),i(c,a),i(l,v),i(l,g),i(g,p),i(p,b),i(g,h),i(g,k),i(k,A),T||(L=[j(p,"click",t[16]),j(k,"click",t[17]),j(l,"click",Al(t[22])),j(l,"keydown",Nn),j(e,"click",t[16]),j(e,"keydown",t[28])],T=!0)},p(q,y){y[0]&2&&s!==(s=q[1].clearCollectionTitle+"")&&E(r,s),y[0]&2&&u!==(u=q[1].clearCollectionMessage+"")&&E(a,u),y[0]&2&&m!==(m=q[1].cancel+"")&&E(b,m),y[0]&2&&S!==(S=q[1].clearCollection+"")&&E(A,S)},d(q){q&&I(e),T=!1,ie(L)}}}function Ln(t){let e,l,n,s,r,o,c,u,a,v=t[1].yourCollection+"",g,p,m,b,h,k,S=t[0].cards.length+"",A,T,L,q=t[1].cardsCollected+"",y,P,H,D,N=t[0].stats.totalQuestions+"",F,K,x,Y=t[1].questionsAnswered+"",V,O,W,U,B=t[0].stats.correctAnswers+"",w,R,J,G=t[1].correctAnswers+"",ee,ke,pe,Te,Qe,ae,Ze,Le,Ye=t[1].accuracy+"",ft,Qt,Ne,Pe,De,$e=(t[1].language||"Language")+"",dt,Lt,Nt,he,be,we,Pt,ue,Ue,xe=t[1].exportBackup+"",gt,Dt,Ve,et=t[1].importBackup+"",mt,Rt,We,tt=t[1].clearThisSet+"",vt,Ft,Ce,Ot,pt,Ke,Je,ht,Bt;function zt(Q,z){return Q[9]?Mn:In}let lt=zt(t),fe=lt(t),le=!t[9]&&cl(t),Re=oe(t[4]),te=[];for(let Q=0;Q<Re.length;Q+=1)te[Q]=ul(al(t,Re,Q));function jt(Q,z){return Q[0].cards.length===0?Qn:Tn}let nt=jt(t),de=nt(t),ne=t[6]&&vl(t),se=t[3]&&pl(t),re=t[7]&&wl(t);return{c(){e=d("div"),l=d("div"),n=d("div"),fe.c(),s=_(),le&&le.c(),r=_(),o=d("div");for(let Q=0;Q<te.length;Q+=1)te[Q].c();c=_(),u=d("div"),a=d("h2"),g=C(v),p=_(),de.c(),m=_(),b=d("div"),h=d("div"),k=d("div"),A=C(S),T=_(),L=d("div"),y=C(q),P=_(),H=d("div"),D=d("div"),F=C(N),K=_(),x=d("div"),V=C(Y),O=_(),W=d("div"),U=d("div"),w=C(B),R=_(),J=d("div"),ee=C(G),ke=_(),pe=d("div"),Te=d("div"),Qe=C(t[11]),ae=C("%"),Ze=_(),Le=d("div"),ft=C(Ye),Qt=_(),Ne=d("div"),Pe=d("div"),De=d("label"),dt=C($e),Lt=C(":"),Nt=_(),he=d("select"),be=d("option"),be.textContent="English",we=d("option"),we.textContent="Norsk",Pt=_(),ue=d("div"),Ue=d("button"),gt=C(xe),Dt=_(),Ve=d("button"),mt=C(et),Rt=_(),We=d("button"),vt=C(tt),Ft=_(),Ce=d("input"),Ot=_(),ne&&ne.c(),pt=_(),se&&se.c(),Ke=_(),re&&re.c(),Je=It(),f(n,"class","rare-section-text svelte-1c2fvge"),f(o,"class","rare-cards-thumbnails svelte-1c2fvge"),f(l,"class","rare-cards-section svelte-1c2fvge"),f(a,"class","svelte-1c2fvge"),f(u,"class","collection-header svelte-1c2fvge"),f(k,"class","stat-value svelte-1c2fvge"),f(L,"class","stat-label svelte-1c2fvge"),f(h,"class","stat-card svelte-1c2fvge"),f(D,"class","stat-value svelte-1c2fvge"),f(x,"class","stat-label svelte-1c2fvge"),f(H,"class","stat-card svelte-1c2fvge"),f(U,"class","stat-value svelte-1c2fvge"),f(J,"class","stat-label svelte-1c2fvge"),f(W,"class","stat-card svelte-1c2fvge"),f(Te,"class","stat-value svelte-1c2fvge"),f(Le,"class","stat-label svelte-1c2fvge"),f(pe,"class","stat-card svelte-1c2fvge"),f(b,"class","stats-section svelte-1c2fvge"),f(De,"for","language-select"),f(De,"class","svelte-1c2fvge"),be.__value="en",ye(be,be.__value),f(be,"class","svelte-1c2fvge"),we.__value="no",ye(we,we.__value),f(we,"class","svelte-1c2fvge"),f(he,"id","language-select"),f(he,"class","language-selector svelte-1c2fvge"),f(Pe,"class","language-selector-container svelte-1c2fvge"),f(Ue,"class","btn-secondary"),f(Ve,"class","btn-secondary"),f(We,"class","btn-error"),f(Ce,"type","file"),f(Ce,"accept",".json"),St(Ce,"display","none"),f(ue,"class","functions-actions svelte-1c2fvge"),f(Ne,"class","functions-section svelte-1c2fvge"),f(e,"class","collection-view svelte-1c2fvge")},m(Q,z){M(Q,e,z),i(e,l),i(l,n),fe.m(n,null),i(l,s),le&&le.m(l,null),i(l,r),i(l,o);for(let $=0;$<te.length;$+=1)te[$]&&te[$].m(o,null);i(e,c),i(e,u),i(u,a),i(a,g),i(e,p),de.m(e,null),i(e,m),i(e,b),i(b,h),i(h,k),i(k,A),i(h,T),i(h,L),i(L,y),i(b,P),i(b,H),i(H,D),i(D,F),i(H,K),i(H,x),i(x,V),i(b,O),i(b,W),i(W,U),i(U,w),i(W,R),i(W,J),i(J,ee),i(b,ke),i(b,pe),i(pe,Te),i(Te,Qe),i(Te,ae),i(pe,Ze),i(pe,Le),i(Le,ft),i(e,Qt),i(e,Ne),i(Ne,Pe),i(Pe,De),i(De,dt),i(De,Lt),i(Pe,Nt),i(Pe,he),i(he,be),i(he,we),at(he,t[2]),i(Ne,Pt),i(Ne,ue),i(ue,Ue),i(Ue,gt),i(ue,Dt),i(ue,Ve),i(Ve,mt),i(ue,Rt),i(ue,We),i(We,vt),i(ue,Ft),i(ue,Ce),t[26](Ce),i(e,Ot),ne&&ne.m(e,null),M(Q,pt,z),se&&se.m(Q,z),M(Q,Ke,z),re&&re.m(Q,z),M(Q,Je,z),ht||(Bt=[j(he,"change",t[18]),j(Ue,"click",t[12]),j(Ve,"click",t[13]),j(We,"click",t[15]),j(Ce,"change",t[14])],ht=!0)},p(Q,z){if(lt===(lt=zt(Q))&&fe?fe.p(Q,z):(fe.d(1),fe=lt(Q),fe&&(fe.c(),fe.m(n,null))),Q[9]?le&&(le.d(1),le=null):le?le.p(Q,z):(le=cl(Q),le.c(),le.m(l,r)),z[0]&524816){Re=oe(Q[4]);let $;for($=0;$<Re.length;$+=1){const Ht=al(Q,Re,$);te[$]?te[$].p(Ht,z):(te[$]=ul(Ht),te[$].c(),te[$].m(o,null))}for(;$<te.length;$+=1)te[$].d(1);te.length=Re.length}z[0]&2&&v!==(v=Q[1].yourCollection+"")&&E(g,v),nt===(nt=jt(Q))&&de?de.p(Q,z):(de.d(1),de=nt(Q),de&&(de.c(),de.m(e,m))),z[0]&1&&S!==(S=Q[0].cards.length+"")&&E(A,S),z[0]&2&&q!==(q=Q[1].cardsCollected+"")&&E(y,q),z[0]&1&&N!==(N=Q[0].stats.totalQuestions+"")&&E(F,N),z[0]&2&&Y!==(Y=Q[1].questionsAnswered+"")&&E(V,Y),z[0]&1&&B!==(B=Q[0].stats.correctAnswers+"")&&E(w,B),z[0]&2&&G!==(G=Q[1].correctAnswers+"")&&E(ee,G),z[0]&2048&&E(Qe,Q[11]),z[0]&2&&Ye!==(Ye=Q[1].accuracy+"")&&E(ft,Ye),z[0]&2&&$e!==($e=(Q[1].language||"Language")+"")&&E(dt,$e),z[0]&4&&at(he,Q[2]),z[0]&2&&xe!==(xe=Q[1].exportBackup+"")&&E(gt,xe),z[0]&2&&et!==(et=Q[1].importBackup+"")&&E(mt,et),z[0]&2&&tt!==(tt=Q[1].clearThisSet+"")&&E(vt,tt),Q[6]?ne?ne.p(Q,z):(ne=vl(Q),ne.c(),ne.m(e,null)):ne&&(ne.d(1),ne=null),Q[3]?se?se.p(Q,z):(se=pl(Q),se.c(),se.m(Ke.parentNode,Ke)):se&&(se.d(1),se=null),Q[7]?re?re.p(Q,z):(re=wl(Q),re.c(),re.m(Je.parentNode,Je)):re&&(re.d(1),re=null)},i:Z,o:Z,d(Q){Q&&(I(e),I(pt),I(Ke),I(Je)),fe.d(),le&&le.d(),Ae(te,Q),de.d(),t[26](null),ne&&ne.d(),se&&se.d(Q),re&&re.d(Q),ht=!1,ie(Bt)}}}const Nn=()=>{};function Pn(t,e,l){let n,s,r,o,c;Ct(t,ct,w=>l(21,c=w));let{collection:u}=e,{t:a}=e,{language:v}=e,g=null,p=[],m=[];El(async()=>{await b()});async function b(){try{p=await Et(c);const w=[...p].sort((R,J)=>{const G=parseInt(R.localId||"0");return parseInt(J.localId||"0")-G});l(4,m=w.slice(0,5))}catch(w){console.error("Error loading rare cards:",w)}}const h=ut();let k,S=null,A=!1;function T(){try{qn(),y(a.collectionExported,"success")}catch{y(a.exportFailed,"error")}}function L(){k.click()}async function q(w){var G;const R=w.target,J=(G=R.files)==null?void 0:G[0];if(J){try{const ee=await En(J);ee.success?(y(a.collectionImported,"success"),h("refresh")):y(ee.error||a.importFailed,"error")}catch{y(a.importFailed,"error")}R.value=""}}function y(w,R){l(6,S={text:w,type:R}),setTimeout(()=>{l(6,S=null)},3e3)}function P(){l(7,A=!0)}function H(){l(7,A=!1)}function D(){try{ln(),l(7,A=!1),y(a.collectionCleared,"success"),h("refresh")}catch{y(a.clearFailed,"error")}}function N(w){const R=w.target;h("languageChange",R.value)}function F(w){l(3,g=w)}function K(){l(3,g=null)}function x(w){Ut.call(this,t,w)}function Y(w){Ut.call(this,t,w)}const V=w=>F({...w,collectedAt:new Date().toISOString()}),O=w=>F(w);function W(w){yt[w?"unshift":"push"](()=>{k=w,l(5,k)})}const U=w=>w.key==="Escape"&&K(),B=w=>w.key==="Escape"&&H();return t.$$set=w=>{"collection"in w&&l(0,u=w.collection),"t"in w&&l(1,a=w.t),"language"in w&&l(2,v=w.language)},t.$$.update=()=>{t.$$.dirty[0]&1&&l(11,n=u.stats.totalQuestions>0?Math.round(u.stats.correctAnswers/u.stats.totalQuestions*100):0),t.$$.dirty[0]&1&&l(10,s=16e3-(u.stats.totalHpDefeated||0)),t.$$.dirty[0]&2097153&&l(9,r=u.unlockedRareSets&&u.unlockedRareSets[c]||!1),t.$$.dirty[0]&1&&l(8,o=Math.min(u.stats.totalHpDefeated/16e3*100,100))},[u,a,v,g,m,k,S,A,o,r,s,n,T,L,q,P,H,D,N,F,K,c,x,Y,V,O,W,U,B]}class Dn extends Me{constructor(e){super(),Ie(this,e,Pn,Ln,_e,{collection:0,t:1,language:2},null,[-1,-1])}}function Rn(t){let e,l,n,s,r;return{c(){e=d("div"),l=d("div"),n=_(),s=d("p"),r=C(t[0]),f(l,"class","spinner svelte-1lxornd"),f(s,"class","svelte-1lxornd"),f(e,"class","loading-view svelte-1lxornd")},m(o,c){M(o,e,c),i(e,l),i(e,n),i(e,s),i(s,r)},p(o,[c]){c&1&&E(r,o[0])},i:Z,o:Z,d(o){o&&I(e)}}}function Fn(t,e,l){let{message:n="Loading..."}=e;return t.$$set=s=>{"message"in s&&l(0,n=s.message)},[n]}class On extends Me{constructor(e){super(),Ie(this,e,Fn,Rn,_e,{message:0})}}function Bn(t){let e,l,n,s,r,o,c,u,a,v,g;return{c(){e=d("div"),l=d("div"),l.textContent="⚠️",n=_(),s=d("h2"),s.textContent="Oops!",r=_(),o=d("p"),c=C(t[0]),u=_(),a=d("button"),a.textContent="Try Again",f(l,"class","error-icon svelte-na0xmw"),f(s,"class","svelte-na0xmw"),f(o,"class","svelte-na0xmw"),f(a,"class","btn-primary"),f(e,"class","error-view svelte-na0xmw")},m(p,m){M(p,e,m),i(e,l),i(e,n),i(e,s),i(e,r),i(e,o),i(o,c),i(e,u),i(e,a),v||(g=j(a,"click",t[1]),v=!0)},p(p,[m]){m&1&&E(c,p[0])},i:Z,o:Z,d(p){p&&I(e),v=!1,g()}}}function zn(t,e,l){let{message:n="Something went wrong"}=e;const s=ut();function r(){s("retry")}return t.$$set=o=>{"message"in o&&l(0,n=o.message)},[n,r]}class jn extends Me{constructor(e){super(),Ie(this,e,zn,Bn,_e,{message:0})}}function Hn(t,e,l){const n=t.slice();return n[32]=e[l],n}function Yn(t){let e,l;return e=new Dn({props:{collection:t[4],t:t[14],language:t[0]}}),e.$on("refresh",t[24]),e.$on("languageChange",t[26]),{c(){He(e.$$.fragment)},m(n,s){qe(e,n,s),l=!0},p(n,s){const r={};s[0]&16&&(r.collection=n[4]),s[0]&16384&&(r.t=n[14]),s[0]&1&&(r.language=n[0]),e.$set(r)},i(n){l||(ce(e.$$.fragment,n),l=!0)},o(n){ve(e.$$.fragment,n),l=!1},d(n){Ee(e,n)}}}function Un(t){let e,l,n,s;const r=[Jn,Kn,Wn,Vn],o=[];function c(u,a){return u[1]==="loading"?0:u[1]==="quiz"&&u[2]?1:u[1]==="result"&&u[2]?2:u[1]==="error"?3:-1}return~(e=c(t))&&(l=o[e]=r[e](t)),{c(){l&&l.c(),n=It()},m(u,a){~e&&o[e].m(u,a),M(u,n,a),s=!0},p(u,a){let v=e;e=c(u),e===v?~e&&o[e].p(u,a):(l&&(Ml(),ve(o[v],1,1,()=>{o[v]=null}),Tl()),~e?(l=o[e],l?l.p(u,a):(l=o[e]=r[e](u),l.c()),ce(l,1),l.m(n.parentNode,n)):l=null)},i(u){s||(ce(l),s=!0)},o(u){ve(l),s=!1},d(u){u&&I(n),~e&&o[e].d(u)}}}function Vn(t){let e,l;return e=new jn({props:{message:t[8]}}),e.$on("retry",t[21]),{c(){He(e.$$.fragment)},m(n,s){qe(e,n,s),l=!0},p(n,s){const r={};s[0]&256&&(r.message=n[8]),e.$set(r)},i(n){l||(ce(e.$$.fragment,n),l=!0)},o(n){ve(e.$$.fragment,n),l=!1},d(n){Ee(e,n)}}}function Wn(t){let e,l;return e=new An({props:{isCorrect:t[5],correctAnswer:t[2].correctAnswer,userAnswer:t[6],wonCard:t[7],t:t[14],needsStreak:t[12],streakProgress:t[13],currentStreak:t[4].currentStreak||0}}),e.$on("next",t[20]),{c(){He(e.$$.fragment)},m(n,s){qe(e,n,s),l=!0},p(n,s){const r={};s[0]&32&&(r.isCorrect=n[5]),s[0]&4&&(r.correctAnswer=n[2].correctAnswer),s[0]&64&&(r.userAnswer=n[6]),s[0]&128&&(r.wonCard=n[7]),s[0]&16384&&(r.t=n[14]),s[0]&4096&&(r.needsStreak=n[12]),s[0]&8192&&(r.streakProgress=n[13]),s[0]&16&&(r.currentStreak=n[4].currentStreak||0),e.$set(r)},i(n){l||(ce(e.$$.fragment,n),l=!0)},o(n){ve(e.$$.fragment,n),l=!1},d(n){Ee(e,n)}}}function Kn(t){var v;let e,l,n,s,r,o,c,u=oe(wt),a=[];for(let g=0;g<u.length;g+=1)a[g]=Gn(Hn(t,u,g));return s=new _n({props:{question:t[2],t:t[14],currentSet:((v=wt.find(t[25]))==null?void 0:v.name)||""}}),s.$on("answer",t[19]),{c(){e=d("div"),l=d("select");for(let g=0;g<a.length;g+=1)a[g].c();n=_(),He(s.$$.fragment),f(l,"class","set-selector svelte-162mefo"),f(e,"class","set-selector-container svelte-162mefo")},m(g,p){M(g,e,p),i(e,l);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(l,null);at(l,t[15]),M(g,n,p),qe(s,g,p),r=!0,o||(c=j(l,"change",t[16]),o=!0)},p(g,p){var b;(!r||p[0]&32768)&&at(l,g[15]);const m={};p[0]&4&&(m.question=g[2]),p[0]&16384&&(m.t=g[14]),p[0]&2048&&(m.currentSet=((b=wt.find(g[25]))==null?void 0:b.name)||""),s.$set(m)},i(g){r||(ce(s.$$.fragment,g),r=!0)},o(g){ve(s.$$.fragment,g),r=!1},d(g){g&&(I(e),I(n)),Ae(a,g),Ee(s,g),o=!1,c()}}}function Jn(t){let e,l;return e=new On({props:{message:t[14].loading}}),{c(){He(e.$$.fragment)},m(n,s){qe(e,n,s),l=!0},p(n,s){const r={};s[0]&16384&&(r.message=n[14].loading),e.$set(r)},i(n){l||(ce(e.$$.fragment,n),l=!0)},o(n){ve(e.$$.fragment,n),l=!1},d(n){Ee(e,n)}}}function Gn(t){let e;return{c(){e=d("option"),e.textContent=`${t[32].name}`,e.__value=t[32].id,ye(e,e.__value),f(e,"class","svelte-162mefo")},m(l,n){M(l,e,n)},p:Z,d(l){l&&I(e)}}}function Cl(t){let e,l,n,s=t[0]==="en"?"Choose Your Language":"Velg språk",r,o,c,u=t[0]==="en"?"You can change this anytime in My Collection":"Du kan endre dette når som helst i Min samling",a,v,g,p,m,b,h,k;return{c(){e=d("div"),l=d("div"),n=d("h2"),r=C(s),o=_(),c=d("p"),a=C(u),v=_(),g=d("div"),p=d("button"),p.innerHTML='<span class="flag svelte-162mefo">🇬🇧</span> <span>English</span>',m=_(),b=d("button"),b.innerHTML='<span class="flag svelte-162mefo">🇳🇴</span> <span>Norsk</span>',f(n,"class","svelte-162mefo"),f(c,"class","svelte-162mefo"),f(p,"class","language-btn svelte-162mefo"),f(b,"class","language-btn svelte-162mefo"),f(g,"class","language-buttons svelte-162mefo"),f(l,"class","dialog language-dialog svelte-162mefo"),f(e,"class","dialog-overlay svelte-162mefo"),f(e,"role","button"),f(e,"tabindex","-1")},m(S,A){M(S,e,A),i(e,l),i(l,n),i(n,r),i(l,o),i(l,c),i(c,a),i(l,v),i(l,g),i(g,p),i(g,m),i(g,b),h||(k=[j(p,"click",t[27]),j(b,"click",t[28])],h=!0)},p(S,A){A[0]&1&&s!==(s=S[0]==="en"?"Choose Your Language":"Velg språk")&&E(r,s),A[0]&1&&u!==(u=S[0]==="en"?"You can change this anytime in My Collection":"Du kan endre dette når som helst i Min samling")&&E(a,u)},d(S){S&&I(e),h=!1,ie(k)}}}function Xn(t){var B;let e,l,n,s,r=t[14].appTitle+"",o,c,u,a,v=t[14].playQuiz+"",g,p,m,b=t[14].myCollection+"",h,k,S=(((B=t[4])==null?void 0:B.cards.length)||0)+"",A,T,L=t[3].length+"",q,y,P,H,D,N,F,K,x,Y;const V=[Un,Yn],O=[];function W(w,R){return w[9]==="quiz"?0:1}D=W(t),N=O[D]=V[D](t);let U=t[10]&&Cl(t);return{c(){e=d("div"),l=d("header"),n=d("div"),s=d("h1"),o=C(r),c=_(),u=d("nav"),a=d("button"),g=C(v),p=_(),m=d("button"),h=C(b),k=C(" ("),A=C(S),T=C("/"),q=C(L),y=C(")"),P=_(),H=d("main"),N.c(),F=_(),U&&U.c(),f(s,"class","app-title svelte-162mefo"),f(a,"class","nav-btn svelte-162mefo"),X(a,"active",t[9]==="quiz"),f(m,"class","nav-btn svelte-162mefo"),X(m,"active",t[9]==="collection"),f(u,"class","svelte-162mefo"),f(n,"class","header-content svelte-162mefo"),f(l,"class","app-header svelte-162mefo"),f(H,"class","svelte-162mefo"),f(e,"class","app svelte-162mefo")},m(w,R){M(w,e,R),i(e,l),i(l,n),i(n,s),i(s,o),i(n,c),i(n,u),i(u,a),i(a,g),i(u,p),i(u,m),i(m,h),i(m,k),i(m,A),i(m,T),i(m,q),i(m,y),i(e,P),i(e,H),O[D].m(H,null),i(e,F),U&&U.m(e,null),K=!0,x||(Y=[j(a,"click",t[23]),j(m,"click",t[22])],x=!0)},p(w,R){var G;(!K||R[0]&16384)&&r!==(r=w[14].appTitle+"")&&E(o,r),(!K||R[0]&16384)&&v!==(v=w[14].playQuiz+"")&&E(g,v),(!K||R[0]&512)&&X(a,"active",w[9]==="quiz"),(!K||R[0]&16384)&&b!==(b=w[14].myCollection+"")&&E(h,b),(!K||R[0]&16)&&S!==(S=(((G=w[4])==null?void 0:G.cards.length)||0)+"")&&E(A,S),(!K||R[0]&8)&&L!==(L=w[3].length+"")&&E(q,L),(!K||R[0]&512)&&X(m,"active",w[9]==="collection");let J=D;D=W(w),D===J?O[D].p(w,R):(Ml(),ve(O[J],1,1,()=>{O[J]=null}),Tl(),N=O[D],N?N.p(w,R):(N=O[D]=V[D](w),N.c()),ce(N,1),N.m(H,null)),w[10]?U?U.p(w,R):(U=Cl(w),U.c(),U.m(e,null)):U&&(U.d(1),U=null)},i(w){K||(ce(N),K=!0)},o(w){ve(N),K=!1},d(w){w&&I(e),O[D].d(),U&&U.d(),x=!1,ie(Y)}}}function Zn(t,e,l){let n,s,r;Ct(t,ot,B=>l(0,s=B)),Ct(t,ct,B=>l(15,r=B));let o="loading",c=null,u=[],a,v=!1,g=0,p=0,m=null,b="",h="quiz",k=!1,S=r,A=!1,T=0;El(()=>{l(4,a=ge()),localStorage.getItem("tcg-seen-language-dialog")?P():l(10,k=!0)});function L(B){const w=B.target;ct.set(w.value),l(11,S=w.value),l(3,u=[]),P()}function q(B){ot.set(B)}function y(B){ot.set(B),localStorage.setItem("tcg-seen-language-dialog","true"),l(10,k=!1),P()}async function P(){var B;try{l(1,o="loading"),u.length===0&&l(3,u=await Et(S));const w=[...u].sort((ae,Ze)=>{const Le=parseInt(ae.localId||"0");return parseInt(Ze.localId||"0")-Le}),R=new Set(w.slice(0,5).map(ae=>ae.id)),J=new Set(a.cards.map(ae=>ae.id)),G=u.filter(ae=>!J.has(ae.id)&&!R.has(ae.id));if(G.length===0)throw new Error("Congratulations! You have collected all cards from this set!");const ee=$l(G),ke=await Zl(ee.id,S),pe=((B=ke.rarity)==null?void 0:B.toLowerCase())||"common",Qe=an(ke,n,pe!=="common");if(!Qe)throw new Error("Could not generate a valid question. Please try again.");l(12,A=pe!=="common"),a.streakCard&&a.streakCard.id===ke.id?l(13,T=a.currentStreak||0):l(13,T=0),l(2,c=Qe),l(1,o="quiz")}catch(w){console.error("Error loading question:",w),l(8,b=w instanceof Error?w.message:"Failed to load question"),l(1,o="error")}}async function H(){a.unlockedRareSets||l(4,a.unlockedRareSets={},a),!a.unlockedRareSets[S]&&a.stats.totalHpDefeated>=16e3&&(u.length===0&&l(3,u=await Et(S)),[...u].sort((R,J)=>{const G=parseInt(R.localId||"0");return parseInt(J.localId||"0")-G}).slice(0,5).forEach(R=>{const J={id:R.id,name:R.name,image:R.image,hp:R.hp,types:R.types,rarity:R.rarity,collectedAt:new Date().toISOString()};a.cards.some(ee=>ee.id===R.id)||a.cards.push(J)}),l(4,a.unlockedRareSets[S]=!0,a),je(a))}function D(B){var R,J;if(!c)return;l(6,g=B.detail.firstAnswer),p=B.detail.secondAnswer||0,l(5,v=cn(c,g,p));const w=v&&c.card.hp?c.card.hp:0;if(tn(v,w),l(7,m=null),v){let G=!1;if(A&&!c.secondQuestion?(l(4,a=ge()),((R=a.streakCard)==null?void 0:R.id)===c.card.id?l(4,a.currentStreak=(a.currentStreak||0)+1,a):(l(4,a.streakCard=c.card,a),l(4,a.currentStreak=1,a)),a.currentStreak>=2&&(G=!0,l(4,a.currentStreak=0,a),l(4,a.streakCard=void 0,a)),je(a)):G=!0,G){const ee={id:c.card.id,name:c.card.name,image:c.card.image,hp:c.card.hp,types:c.card.types,rarity:c.card.rarity,collectedAt:new Date().toISOString()};en(ee)&&l(7,m=c.card)}}else l(4,a=ge()),A&&((J=a.streakCard)==null?void 0:J.id)===c.card.id&&(l(4,a.currentStreak=0,a),l(4,a.streakCard=void 0,a),je(a));l(4,a=ge()),v&&(H(),l(4,a=ge())),l(1,o="result")}function N(){P()}function F(){P()}function K(){l(9,h="collection"),l(4,a=ge())}function x(){l(9,h="quiz")}function Y(){l(4,a=ge())}const V=B=>B.id===S,O=B=>q(B.detail),W=()=>y("en"),U=()=>y("no");return t.$$.update=()=>{t.$$.dirty[0]&1&&l(14,n=dn(s))},[s,o,c,u,a,v,g,m,b,h,k,S,A,T,n,r,L,q,y,D,N,F,K,x,Y,V,O,W,U]}class $n extends Me{constructor(e){super(),Ie(this,e,Zn,Xn,_e,{},null,[-1,-1])}}new $n({target:document.getElementById("app")});
