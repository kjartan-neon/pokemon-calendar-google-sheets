var wt=Object.defineProperty;var bt=(t,e,n)=>e in t?wt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var qe=(t,e,n)=>bt(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function M(){}function at(t){return t()}function Ue(){return Object.create(null)}function J(t){t.forEach(at)}function ut(t){return typeof t=="function"}function X(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let ye;function ie(t,e){return t===e?!0:(ye||(ye=document.createElement("a")),ye.href=e,t===ye.href)}function kt(t){return Object.keys(t).length===0}function o(t,e){t.appendChild(e)}function A(t,e,n){t.insertBefore(e,n||null)}function C(t){t.parentNode&&t.parentNode.removeChild(t)}function be(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function $(t){return document.createTextNode(t)}function b(){return $(" ")}function Ie(){return $("")}function I(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function Ct(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function u(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ft(t){return t===""?null:+t}function At(t){return Array.from(t.childNodes)}function T(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ve(t,e){t.value=e??""}function Et(t,e,n,l){t.style.setProperty(e,n,"")}function R(t,e,n){t.classList.toggle(e,!!n)}function $t(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}let me;function de(t){me=t}function dt(){if(!me)throw new Error("Function called outside component initialization");return me}function qt(t){dt().$$.on_mount.push(t)}function ke(){const t=dt();return(e,n,{cancelable:l=!1}={})=>{const s=t.$$.callbacks[e];if(s){const r=$t(e,n,{cancelable:l});return s.slice().forEach(c=>{c.call(t,r)}),!r.defaultPrevented}return!0}}function St(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(l=>l.call(this,e))}const ce=[],Te=[];let oe=[];const He=[],Nt=Promise.resolve();let Oe=!1;function Tt(){Oe||(Oe=!0,Nt.then(mt))}function Le(t){oe.push(t)}const Se=new Set;let re=0;function mt(){if(re!==0)return;const t=me;do{try{for(;re<ce.length;){const e=ce[re];re++,de(e),Ot(e.$$)}}catch(e){throw ce.length=0,re=0,e}for(de(null),ce.length=0,re=0;Te.length;)Te.pop()();for(let e=0;e<oe.length;e+=1){const n=oe[e];Se.has(n)||(Se.add(n),n())}oe.length=0}while(ce.length);for(;He.length;)He.pop()();Oe=!1,Se.clear(),de(t)}function Ot(t){if(t.fragment!==null){t.update(),J(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Le)}}function Lt(t){const e=[],n=[];oe.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),oe=e}const we=new Set;let K;function ht(){K={r:0,c:[],p:K}}function gt(){K.r||J(K.c),K=K.p}function B(t,e){t&&t.i&&(we.delete(t),t.i(e))}function V(t,e,n,l){if(t&&t.o){if(we.has(t))return;we.add(t),K.c.push(()=>{we.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function Y(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ae(t){t&&t.c()}function Z(t,e,n){const{fragment:l,after_update:s}=t.$$;l&&l.m(e,n),Le(()=>{const r=t.$$.on_mount.map(at).filter(ut);t.$$.on_destroy?t.$$.on_destroy.push(...r):J(r),t.$$.on_mount=[]}),s.forEach(Le)}function x(t,e){const n=t.$$;n.fragment!==null&&(Lt(n.after_update),J(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function It(t,e){t.$$.dirty[0]===-1&&(ce.push(t),Tt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ee(t,e,n,l,s,r,c=null,a=[-1]){const i=me;de(t);const f=t.$$={fragment:null,ctx:[],props:r,update:M,not_equal:s,bound:Ue(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(i?i.$$.context:[])),callbacks:Ue(),dirty:a,skip_bound:!1,root:e.target||i.$$.root};c&&c(f.root);let h=!1;if(f.ctx=n?n(t,e.props||{},(_,y,...g)=>{const v=g.length?g[0]:y;return f.ctx&&s(f.ctx[_],f.ctx[_]=v)&&(!f.skip_bound&&f.bound[_]&&f.bound[_](v),h&&It(t,_)),y}):[],f.update(),h=!0,J(f.before_update),f.fragment=l?l(f.ctx):!1,e.target){if(e.hydrate){const _=At(e.target);f.fragment&&f.fragment.l(_),_.forEach(C)}else f.fragment&&f.fragment.c();e.intro&&B(t.$$.fragment),Z(t,e.target,e.anchor),mt()}de(i)}class te{constructor(){qe(this,"$$");qe(this,"$$set")}$destroy(){x(this,1),this.$destroy=M}$on(e,n){if(!ut(n))return M;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!kt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Mt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Mt);const vt="https://api.tcgdex.net/v2/en",pt="swsh3";function _t(t){return`https://assets.tcgdex.net/en/swsh/${pt}/${t.split("-")[1]}/high.webp`}async function Pt(){try{const t=await fetch(`${vt}/sets/${pt}`);if(!t.ok)throw new Error("Failed to fetch cards from set");return((await t.json()).cards||[]).map(l=>({id:l.id,localId:l.localId,name:l.name,image:_t(l.id)}))}catch(t){throw console.error("Error fetching cards from set:",t),t}}async function Qt(t){try{const e=await fetch(`${vt}/cards/${t}`);if(!e.ok)throw new Error("Failed to fetch card details");return{...await e.json(),image:_t(t)}}catch(e){throw console.error("Error fetching card details:",e),e}}function zt(t){const e=Math.floor(Math.random()*t.length);return t[e]}const Me="pokemon-tcg-collection",yt="1.0";function Ft(){return{totalQuestions:0,correctAnswers:0,incorrectAnswers:0}}function Ne(){return{cards:[],stats:Ft(),version:yt}}function W(){try{const t=localStorage.getItem(Me);if(!t)return Ne();const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?(console.warn("Invalid collection format, resetting..."),Ne()):e}catch(t){return console.error("Error loading collection from local storage:",t),Ne()}}function Pe(t){try{const e={...t,version:yt};localStorage.setItem(Me,JSON.stringify(e))}catch(e){throw console.error("Error saving collection to local storage:",e),new Error("Failed to save collection")}}function Rt(t){try{const e=W();return e.cards.some(l=>l.id===t.id)?!1:(e.cards.push(t),Pe(e),!0)}catch(e){return console.error("Error adding card to collection:",e),!1}}function jt(t){try{const e=W();e.stats.totalQuestions++,t?e.stats.correctAnswers++:e.stats.incorrectAnswers++,Pe(e)}catch(e){console.error("Error updating stats:",e)}}function Dt(){try{localStorage.removeItem(Me)}catch(t){console.error("Error clearing collection:",t)}}function Bt(){const t=W();return JSON.stringify(t,null,2)}function Ut(t){try{const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?{success:!1,error:"Invalid collection format"}:!e.stats.totalQuestions===void 0||!e.stats.correctAnswers===void 0||!e.stats.incorrectAnswers===void 0?{success:!1,error:"Invalid stats format"}:(Pe(e),{success:!0})}catch(e){return console.error("Error importing collection:",e),{success:!1,error:"Failed to parse JSON file"}}}function Vt(){const t=Math.floor(Math.random()*50)+10,e=Math.floor(Math.random()*50)+10,n=["+","-"],l=n[Math.floor(Math.random()*n.length)];let s,r;if(l==="+")s=t+e,r=`What is ${t} + ${e}?`;else{s=t+e;const c=s;s=t,r=`What is ${c} - ${e}?`}return{question:r,answer:s}}function Ht(t){if(!t)return null;let e,n,l=!1;if(t.hp&&t.hp>0){l=!0;const s=[10,20,30,40,50][Math.floor(Math.random()*5)];n=Math.ceil(t.hp/s),e=`Your Pokémon deals ${s} damage each turn. How many turns does it take to defeat this Pokémon?`}else{const s=Vt();e=s.question,n=s.answer}return{card:t,questionText:e,correctAnswer:n,isPokemon:l}}function Jt(t,e){return e===t.correctAnswer}function Je(t,e,n){const l=t.slice();return l[3]=e[n],l}function Ye(t,e,n){const l=t.slice();return l[6]=e[n],l}function Ge(t){let e,n,l,s,r=t[0].hp+"",c;return{c(){e=d("div"),n=d("span"),n.textContent="HP",l=b(),s=d("span"),c=$(r),u(n,"class","hp-label svelte-1c2yytc"),u(s,"class","hp-value svelte-1c2yytc"),u(e,"class","card-hp svelte-1c2yytc")},m(a,i){A(a,e,i),o(e,n),o(e,l),o(e,s),o(s,c)},p(a,i){i&1&&r!==(r=a[0].hp+"")&&T(c,r)},d(a){a&&C(e)}}}function Ke(t){let e,n=Y(t[0].types),l=[];for(let s=0;s<n.length;s+=1)l[s]=We(Ye(t,n,s));return{c(){e=d("div");for(let s=0;s<l.length;s+=1)l[s].c();u(e,"class","card-types svelte-1c2yytc")},m(s,r){A(s,e,r);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null)},p(s,r){if(r&1){n=Y(s[0].types);let c;for(c=0;c<n.length;c+=1){const a=Ye(s,n,c);l[c]?l[c].p(a,r):(l[c]=We(a),l[c].c(),l[c].m(e,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=n.length}},d(s){s&&C(e),be(l,s)}}}function We(t){let e,n=t[6]+"",l;return{c(){e=d("span"),l=$(n),u(e,"class","type-badge svelte-1c2yytc")},m(s,r){A(s,e,r),o(e,l)},p(s,r){r&1&&n!==(n=s[6]+"")&&T(l,n)},d(s){s&&C(e)}}}function Xe(t){let e,n,l,s=Y(t[0].attacks),r=[];for(let c=0;c<s.length;c+=1)r[c]=xe(Je(t,s,c));return{c(){e=d("div"),n=d("h4"),n.textContent="Attacks:",l=b();for(let c=0;c<r.length;c+=1)r[c].c();u(n,"class","svelte-1c2yytc"),u(e,"class","card-attacks svelte-1c2yytc")},m(c,a){A(c,e,a),o(e,n),o(e,l);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null)},p(c,a){if(a&5){s=Y(c[0].attacks);let i;for(i=0;i<s.length;i+=1){const f=Je(c,s,i);r[i]?r[i].p(f,a):(r[i]=xe(f),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=s.length}},d(c){c&&C(e),be(r,c)}}}function Ze(t){let e,n=t[3].damage+"",l;return{c(){e=d("span"),l=$(n),u(e,"class","attack-damage svelte-1c2yytc")},m(s,r){A(s,e,r),o(e,l)},p(s,r){r&1&&n!==(n=s[3].damage+"")&&T(l,n)},d(s){s&&C(e)}}}function xe(t){let e,n,l=t[3].name+"",s,r,c,a=t[3].damage&&Ze(t);return{c(){e=d("div"),n=d("span"),s=$(l),r=b(),a&&a.c(),c=b(),u(n,"class","attack-name svelte-1c2yytc"),u(e,"class","attack svelte-1c2yytc"),R(e,"highlighted",t[2]===t[3].name)},m(i,f){A(i,e,f),o(e,n),o(n,s),o(e,r),a&&a.m(e,null),o(e,c)},p(i,f){f&1&&l!==(l=i[3].name+"")&&T(s,l),i[3].damage?a?a.p(i,f):(a=Ze(i),a.c(),a.m(e,c)):a&&(a.d(1),a=null),f&5&&R(e,"highlighted",i[2]===i[3].name)},d(i){i&&C(e),a&&a.d()}}}function Yt(t){let e,n,l,s,r,c,a,i,f=t[0].name+"",h,_,y,g,v=t[0].hp&&Ge(t),m=t[0].types&&t[0].types.length>0&&Ke(t),p=t[1]&&t[0].attacks&&t[0].attacks.length>0&&Xe(t);return{c(){e=d("div"),n=d("div"),l=d("img"),c=b(),a=d("div"),i=d("h3"),h=$(f),_=b(),v&&v.c(),y=b(),m&&m.c(),g=b(),p&&p.c(),ie(l.src,s=t[0].image)||u(l,"src",s),u(l,"alt",r=t[0].name),u(l,"class","svelte-1c2yytc"),u(n,"class","card-image svelte-1c2yytc"),u(i,"class","card-name svelte-1c2yytc"),u(a,"class","card-info svelte-1c2yytc"),u(e,"class","pokemon-card svelte-1c2yytc")},m(w,E){A(w,e,E),o(e,n),o(n,l),o(e,c),o(e,a),o(a,i),o(i,h),o(a,_),v&&v.m(a,null),o(a,y),m&&m.m(a,null),o(a,g),p&&p.m(a,null)},p(w,[E]){E&1&&!ie(l.src,s=w[0].image)&&u(l,"src",s),E&1&&r!==(r=w[0].name)&&u(l,"alt",r),E&1&&f!==(f=w[0].name+"")&&T(h,f),w[0].hp?v?v.p(w,E):(v=Ge(w),v.c(),v.m(a,y)):v&&(v.d(1),v=null),w[0].types&&w[0].types.length>0?m?m.p(w,E):(m=Ke(w),m.c(),m.m(a,g)):m&&(m.d(1),m=null),w[1]&&w[0].attacks&&w[0].attacks.length>0?p?p.p(w,E):(p=Xe(w),p.c(),p.m(a,null)):p&&(p.d(1),p=null)},i:M,o:M,d(w){w&&C(e),v&&v.d(),m&&m.d(),p&&p.d()}}}function Gt(t,e,n){let{card:l}=e,{showAttacks:s=!1}=e,{highlightedAttack:r=null}=e;return t.$$set=c=>{"card"in c&&n(0,l=c.card),"showAttacks"in c&&n(1,s=c.showAttacks),"highlightedAttack"in c&&n(2,r=c.highlightedAttack)},[l,s,r]}class Kt extends te{constructor(e){super(),ee(this,e,Gt,Yt,X,{card:0,showAttacks:1,highlightedAttack:2})}}function Wt(t){let e,n,l,s,r,c,a,i,f=t[0].questionText+"",h,_,y,g,v,m,p,w,E,k,S;return r=new Kt({props:{card:t[0].card}}),{c(){e=d("div"),n=d("div"),n.innerHTML='<h2 class="svelte-y6x4r1">Pok\\u00e9mon TCG Quiz</h2> <p class="set-info svelte-y6x4r1">Collecting Set: Sword &amp; Shield - Darkness Ablaze (swsh3)</p>',l=b(),s=d("div"),ae(r.$$.fragment),c=b(),a=d("div"),i=d("h3"),h=$(f),_=b(),y=d("div"),g=d("input"),v=b(),m=d("button"),p=$("Submit Answer"),u(n,"class","quiz-header svelte-y6x4r1"),u(s,"class","card-display svelte-y6x4r1"),u(i,"class","question-text svelte-y6x4r1"),u(g,"type","number"),u(g,"placeholder","Enter your answer"),u(g,"class","answer-input svelte-y6x4r1"),u(m,"class","submit-btn btn-primary svelte-y6x4r1"),m.disabled=w=!t[1],u(y,"class","answer-input-container svelte-y6x4r1"),u(a,"class","question-container svelte-y6x4r1"),u(e,"class","quiz-view svelte-y6x4r1")},m(q,P){A(q,e,P),o(e,n),o(e,l),o(e,s),Z(r,s,null),o(e,c),o(e,a),o(a,i),o(i,h),o(a,_),o(a,y),o(y,g),Ve(g,t[1]),o(y,v),o(y,m),o(m,p),E=!0,k||(S=[I(g,"input",t[4]),I(g,"keypress",t[3]),I(m,"click",t[2])],k=!0)},p(q,[P]){const L={};P&1&&(L.card=q[0].card),r.$set(L),(!E||P&1)&&f!==(f=q[0].questionText+"")&&T(h,f),P&2&&ft(g.value)!==q[1]&&Ve(g,q[1]),(!E||P&2&&w!==(w=!q[1]))&&(m.disabled=w)},i(q){E||(B(r.$$.fragment,q),E=!0)},o(q){V(r.$$.fragment,q),E=!1},d(q){q&&C(e),x(r),k=!1,J(S)}}}function Xt(t,e,n){let{question:l}=e;const s=ke();let r="";function c(){const f=parseInt(r,10);isNaN(f)||s("answer",f)}function a(f){f.key==="Enter"&&c()}function i(){r=ft(this.value),n(1,r)}return t.$$set=f=>{"question"in f&&n(0,l=f.question)},[l,r,c,a,i]}class Zt extends te{constructor(e){super(),ee(this,e,Xt,Wt,X,{question:0})}}function xt(t){let e,n,l,s,r,c,a,i,f,h,_,y,g,v;return{c(){e=d("div"),e.textContent="✗",n=b(),l=d("h2"),l.textContent="Not quite!",s=b(),r=d("p"),c=$("You answered "),a=d("strong"),i=$(t[2]),f=$(", but the correct answer was "),h=d("strong"),_=$(t[1]),y=$("."),g=b(),v=d("p"),v.textContent="Try again with the next question!",u(e,"class","result-icon error svelte-1ryvcfy"),u(l,"class","result-title svelte-1ryvcfy"),u(a,"class","svelte-1ryvcfy"),u(h,"class","svelte-1ryvcfy"),u(r,"class","result-message svelte-1ryvcfy"),u(v,"class","encouragement svelte-1ryvcfy")},m(m,p){A(m,e,p),A(m,n,p),A(m,l,p),A(m,s,p),A(m,r,p),o(r,c),o(r,a),o(a,i),o(r,f),o(r,h),o(h,_),o(r,y),A(m,g,p),A(m,v,p)},p(m,p){p&4&&T(i,m[2]),p&2&&T(_,m[1])},d(m){m&&(C(e),C(n),C(l),C(s),C(r),C(g),C(v))}}}function en(t){let e,n,l,s,r,c,a,i,f,h=t[1]===1?"hit":"hits",_,y,g,v,m=t[3]&&et(t);return{c(){e=d("div"),e.textContent="✓",n=b(),l=d("h2"),l.textContent="Correct!",s=b(),r=d("p"),c=$("Great job! The answer was "),a=d("strong"),i=$(t[1]),f=b(),_=$(h),y=$("!"),g=b(),m&&m.c(),v=Ie(),u(e,"class","result-icon success svelte-1ryvcfy"),u(l,"class","result-title svelte-1ryvcfy"),u(a,"class","svelte-1ryvcfy"),u(r,"class","result-message svelte-1ryvcfy")},m(p,w){A(p,e,w),A(p,n,w),A(p,l,w),A(p,s,w),A(p,r,w),o(r,c),o(r,a),o(a,i),o(r,f),o(r,_),o(r,y),A(p,g,w),m&&m.m(p,w),A(p,v,w)},p(p,w){w&2&&T(i,p[1]),w&2&&h!==(h=p[1]===1?"hit":"hits")&&T(_,h),p[3]?m?m.p(p,w):(m=et(p),m.c(),m.m(v.parentNode,v)):m&&(m.d(1),m=null)},d(p){p&&(C(e),C(n),C(l),C(s),C(r),C(g),C(v)),m&&m.d(p)}}}function et(t){let e,n,l,s,r,c,a,i,f,h,_=t[3].name+"",y;return{c(){e=d("div"),n=d("h3"),n.textContent="You won this card!",l=b(),s=d("div"),r=d("div"),c=d("img"),f=b(),h=d("span"),y=$(_),u(n,"class","svelte-1ryvcfy"),ie(c.src,a=t[3].image)||u(c,"src",a),u(c,"alt",i=t[3].name),u(c,"class","svelte-1ryvcfy"),u(h,"class","card-name svelte-1ryvcfy"),u(r,"class","mini-card svelte-1ryvcfy"),u(s,"class","cards-grid svelte-1ryvcfy"),u(e,"class","won-cards svelte-1ryvcfy")},m(g,v){A(g,e,v),o(e,n),o(e,l),o(e,s),o(s,r),o(r,c),o(r,f),o(r,h),o(h,y)},p(g,v){v&8&&!ie(c.src,a=g[3].image)&&u(c,"src",a),v&8&&i!==(i=g[3].name)&&u(c,"alt",i),v&8&&_!==(_=g[3].name+"")&&T(y,_)},d(g){g&&C(e)}}}function tn(t){let e,n,l,s,r,c;function a(h,_){return h[0]?en:xt}let i=a(t),f=i(t);return{c(){e=d("div"),n=d("div"),f.c(),l=b(),s=d("button"),s.textContent="Next Question",u(n,"class","result-card svelte-1ryvcfy"),R(n,"correct",t[0]),R(n,"incorrect",!t[0]),u(s,"class","next-btn btn-primary svelte-1ryvcfy"),u(e,"class","result-view svelte-1ryvcfy")},m(h,_){A(h,e,_),o(e,n),f.m(n,null),o(e,l),o(e,s),r||(c=I(s,"click",t[4]),r=!0)},p(h,[_]){i===(i=a(h))&&f?f.p(h,_):(f.d(1),f=i(h),f&&(f.c(),f.m(n,null))),_&1&&R(n,"correct",h[0]),_&1&&R(n,"incorrect",!h[0])},i:M,o:M,d(h){h&&C(e),f.d(),r=!1,c()}}}function nn(t,e,n){let{isCorrect:l}=e,{correctAnswer:s}=e,{userAnswer:r}=e,{wonCard:c}=e;const a=ke();function i(){a("next")}return t.$$set=f=>{"isCorrect"in f&&n(0,l=f.isCorrect),"correctAnswer"in f&&n(1,s=f.correctAnswer),"userAnswer"in f&&n(2,r=f.userAnswer),"wonCard"in f&&n(3,c=f.wonCard)},[l,s,r,c,i]}class ln extends te{constructor(e){super(),ee(this,e,nn,tn,X,{isCorrect:0,correctAnswer:1,userAnswer:2,wonCard:3})}}function sn(){try{const t=Bt(),e=new Blob([t],{type:"application/json"}),n=URL.createObjectURL(e),l=document.createElement("a");l.href=n,l.download=`pokemon-collection-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(n)}catch(t){throw console.error("Error downloading backup:",t),new Error("Failed to download backup")}}function rn(t){return new Promise(e=>{const n=new FileReader;n.onload=l=>{var s;try{const r=(s=l.target)==null?void 0:s.result,c=Ut(r);e(c)}catch(r){console.error("Error reading file:",r),e({success:!1,error:"Failed to read file"})}},n.onerror=()=>{e({success:!1,error:"Failed to read file"})},n.readAsText(t)})}function tt(t,e,n){const l=t.slice();return l[16]=e[n],l}function nt(t,e,n){const l=t.slice();return l[19]=e[n],l}function lt(t){let e,n=t[2].text+"",l;return{c(){e=d("div"),l=$(n),u(e,"class","message svelte-nc3glm"),R(e,"success",t[2].type==="success"),R(e,"error",t[2].type==="error")},m(s,r){A(s,e,r),o(e,l)},p(s,r){r&4&&n!==(n=s[2].text+"")&&T(l,n),r&4&&R(e,"success",s[2].type==="success"),r&4&&R(e,"error",s[2].type==="error")},d(s){s&&C(e)}}}function cn(t){let e,n=Y(t[0].cards),l=[];for(let s=0;s<n.length;s+=1)l[s]=ot(tt(t,n,s));return{c(){e=d("div");for(let s=0;s<l.length;s+=1)l[s].c();u(e,"class","cards-grid svelte-nc3glm")},m(s,r){A(s,e,r);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null)},p(s,r){if(r&1){n=Y(s[0].cards);let c;for(c=0;c<n.length;c+=1){const a=tt(s,n,c);l[c]?l[c].p(a,r):(l[c]=ot(a),l[c].c(),l[c].m(e,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=n.length}},d(s){s&&C(e),be(l,s)}}}function on(t){let e;return{c(){e=d("div"),e.innerHTML='<div class="empty-icon svelte-nc3glm">📦</div> <h3 class="svelte-nc3glm">No cards yet!</h3> <p class="svelte-nc3glm">Answer questions correctly to start building your collection.</p>',u(e,"class","empty-state svelte-nc3glm")},m(n,l){A(n,e,l)},p:M,d(n){n&&C(e)}}}function st(t){let e,n,l=t[16].hp+"",s;return{c(){e=d("span"),n=$("HP "),s=$(l),u(e,"class","hp svelte-nc3glm")},m(r,c){A(r,e,c),o(e,n),o(e,s)},p(r,c){c&1&&l!==(l=r[16].hp+"")&&T(s,l)},d(r){r&&C(e)}}}function rt(t){let e,n=Y(t[16].types),l=[];for(let s=0;s<n.length;s+=1)l[s]=ct(nt(t,n,s));return{c(){e=d("div");for(let s=0;s<l.length;s+=1)l[s].c();u(e,"class","types svelte-nc3glm")},m(s,r){A(s,e,r);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null)},p(s,r){if(r&1){n=Y(s[16].types);let c;for(c=0;c<n.length;c+=1){const a=nt(s,n,c);l[c]?l[c].p(a,r):(l[c]=ct(a),l[c].c(),l[c].m(e,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=n.length}},d(s){s&&C(e),be(l,s)}}}function ct(t){let e,n=t[19]+"",l;return{c(){e=d("span"),l=$(n),u(e,"class","type svelte-nc3glm")},m(s,r){A(s,e,r),o(e,l)},p(s,r){r&1&&n!==(n=s[19]+"")&&T(l,n)},d(s){s&&C(e)}}}function ot(t){let e,n,l,s,r,c,a,i=t[16].name+"",f,h,_,y,g=t[16].hp&&st(t),v=t[16].types&&t[16].types.length>0&&rt(t);return{c(){e=d("div"),n=d("img"),r=b(),c=d("div"),a=d("h4"),f=$(i),h=b(),g&&g.c(),_=b(),v&&v.c(),y=b(),ie(n.src,l=t[16].image)||u(n,"src",l),u(n,"alt",s=t[16].name),u(n,"class","svelte-nc3glm"),u(a,"class","svelte-nc3glm"),u(c,"class","card-details svelte-nc3glm"),u(e,"class","collection-card svelte-nc3glm")},m(m,p){A(m,e,p),o(e,n),o(e,r),o(e,c),o(c,a),o(a,f),o(c,h),g&&g.m(c,null),o(c,_),v&&v.m(c,null),o(e,y)},p(m,p){p&1&&!ie(n.src,l=m[16].image)&&u(n,"src",l),p&1&&s!==(s=m[16].name)&&u(n,"alt",s),p&1&&i!==(i=m[16].name+"")&&T(f,i),m[16].hp?g?g.p(m,p):(g=st(m),g.c(),g.m(c,_)):g&&(g.d(1),g=null),m[16].types&&m[16].types.length>0?v?v.p(m,p):(v=rt(m),v.c(),v.m(c,null)):v&&(v.d(1),v=null)},d(m){m&&C(e),g&&g.d(),v&&v.d()}}}function it(t){let e,n,l,s,r,c,a,i,f,h,_,y;return{c(){e=d("div"),n=d("div"),l=d("h3"),l.textContent="Clear Collection?",s=b(),r=d("p"),r.textContent="Are you sure you want to clear your entire collection? This action cannot be undone.",c=b(),a=d("div"),i=d("button"),i.textContent="Cancel",f=b(),h=d("button"),h.textContent="Clear Collection",u(l,"class","svelte-nc3glm"),u(r,"class","svelte-nc3glm"),u(i,"class","btn-secondary"),u(h,"class","btn-error"),u(a,"class","dialog-actions svelte-nc3glm"),u(n,"class","dialog svelte-nc3glm"),u(n,"role","dialog"),u(e,"class","dialog-overlay svelte-nc3glm"),u(e,"role","button"),u(e,"tabindex","-1")},m(g,v){A(g,e,v),o(e,n),o(n,l),o(n,s),o(n,r),o(n,c),o(n,a),o(a,i),o(a,f),o(a,h),_||(y=[I(i,"click",t[9]),I(h,"click",t[10]),I(n,"click",Ct(t[11])),I(e,"click",t[9]),I(e,"keydown",t[13])],_=!0)},p:M,d(g){g&&C(e),_=!1,J(y)}}}function an(t){let e,n,l,s,r,c,a,i,f,h,_,y,g,v,m,p,w,E=t[0].cards.length+"",k,S,q,P,L,j,G=t[0].stats.totalQuestions+"",ne,O,Q,le,H,he,ge=t[0].stats.correctAnswers+"",Ce,Qe,ve,ze,se,ue,Ae,Fe,Re,pe,je,Ee,fe,$e,De,z=t[2]&&lt(t);function Be(N,D){return N[0].cards.length===0?on:cn}let _e=Be(t),U=_e(t),F=t[3]&&it(t);return{c(){e=d("div"),n=d("div"),l=d("h2"),l.textContent="Your Collection",s=b(),r=d("div"),c=d("button"),c.textContent="Export Backup",a=b(),i=d("button"),i.textContent="Import Backup",f=b(),h=d("button"),h.textContent="Clear This Set",_=b(),y=d("input"),g=b(),z&&z.c(),v=b(),m=d("div"),p=d("div"),w=d("div"),k=$(E),S=b(),q=d("div"),q.textContent="Cards Collected",P=b(),L=d("div"),j=d("div"),ne=$(G),O=b(),Q=d("div"),Q.textContent="Questions Answered",le=b(),H=d("div"),he=d("div"),Ce=$(ge),Qe=b(),ve=d("div"),ve.textContent="Correct Answers",ze=b(),se=d("div"),ue=d("div"),Ae=$(t[4]),Fe=$("%"),Re=b(),pe=d("div"),pe.textContent="Accuracy",je=b(),U.c(),Ee=b(),F&&F.c(),fe=Ie(),u(l,"class","svelte-nc3glm"),u(c,"class","btn-secondary"),u(i,"class","btn-secondary"),u(h,"class","btn-error"),u(y,"type","file"),u(y,"accept",".json"),Et(y,"display","none"),u(r,"class","header-actions svelte-nc3glm"),u(n,"class","collection-header svelte-nc3glm"),u(w,"class","stat-value svelte-nc3glm"),u(q,"class","stat-label svelte-nc3glm"),u(p,"class","stat-card svelte-nc3glm"),u(j,"class","stat-value svelte-nc3glm"),u(Q,"class","stat-label svelte-nc3glm"),u(L,"class","stat-card svelte-nc3glm"),u(he,"class","stat-value svelte-nc3glm"),u(ve,"class","stat-label svelte-nc3glm"),u(H,"class","stat-card svelte-nc3glm"),u(ue,"class","stat-value svelte-nc3glm"),u(pe,"class","stat-label svelte-nc3glm"),u(se,"class","stat-card svelte-nc3glm"),u(m,"class","stats-section svelte-nc3glm"),u(e,"class","collection-view svelte-nc3glm")},m(N,D){A(N,e,D),o(e,n),o(n,l),o(n,s),o(n,r),o(r,c),o(r,a),o(r,i),o(r,f),o(r,h),o(r,_),o(r,y),t[12](y),o(e,g),z&&z.m(e,null),o(e,v),o(e,m),o(m,p),o(p,w),o(w,k),o(p,S),o(p,q),o(m,P),o(m,L),o(L,j),o(j,ne),o(L,O),o(L,Q),o(m,le),o(m,H),o(H,he),o(he,Ce),o(H,Qe),o(H,ve),o(m,ze),o(m,se),o(se,ue),o(ue,Ae),o(ue,Fe),o(se,Re),o(se,pe),o(e,je),U.m(e,null),A(N,Ee,D),F&&F.m(N,D),A(N,fe,D),$e||(De=[I(c,"click",t[5]),I(i,"click",t[6]),I(h,"click",t[8]),I(y,"change",t[7])],$e=!0)},p(N,[D]){N[2]?z?z.p(N,D):(z=lt(N),z.c(),z.m(e,v)):z&&(z.d(1),z=null),D&1&&E!==(E=N[0].cards.length+"")&&T(k,E),D&1&&G!==(G=N[0].stats.totalQuestions+"")&&T(ne,G),D&1&&ge!==(ge=N[0].stats.correctAnswers+"")&&T(Ce,ge),D&16&&T(Ae,N[4]),_e===(_e=Be(N))&&U?U.p(N,D):(U.d(1),U=_e(N),U&&(U.c(),U.m(e,null))),N[3]?F?F.p(N,D):(F=it(N),F.c(),F.m(fe.parentNode,fe)):F&&(F.d(1),F=null)},i:M,o:M,d(N){N&&(C(e),C(Ee),C(fe)),t[12](null),z&&z.d(),U.d(),F&&F.d(N),$e=!1,J(De)}}}function un(t,e,n){let l,{collection:s}=e;const r=ke();let c,a=null,i=!1;function f(){try{sn(),y("Collection exported successfully!","success")}catch{y("Failed to export collection","error")}}function h(){c.click()}async function _(k){var P;const S=k.target,q=(P=S.files)==null?void 0:P[0];if(q){try{const L=await rn(q);L.success?(y("Collection imported successfully!","success"),r("refresh")):y(L.error||"Failed to import collection","error")}catch{y("Failed to import collection","error")}S.value=""}}function y(k,S){n(2,a={text:k,type:S}),setTimeout(()=>{n(2,a=null)},3e3)}function g(){n(3,i=!0)}function v(){n(3,i=!1)}function m(){try{Dt(),n(3,i=!1),y("Collection cleared successfully!","success"),r("refresh")}catch{y("Failed to clear collection","error")}}function p(k){St.call(this,t,k)}function w(k){Te[k?"unshift":"push"](()=>{c=k,n(1,c)})}const E=k=>k.key==="Escape"&&v();return t.$$set=k=>{"collection"in k&&n(0,s=k.collection)},t.$$.update=()=>{t.$$.dirty&1&&n(4,l=s.stats.totalQuestions>0?Math.round(s.stats.correctAnswers/s.stats.totalQuestions*100):0)},[s,c,a,i,l,f,h,_,g,v,m,p,w,E]}class fn extends te{constructor(e){super(),ee(this,e,un,an,X,{collection:0})}}function dn(t){let e,n,l,s,r;return{c(){e=d("div"),n=d("div"),l=b(),s=d("p"),r=$(t[0]),u(n,"class","spinner svelte-1lxornd"),u(s,"class","svelte-1lxornd"),u(e,"class","loading-view svelte-1lxornd")},m(c,a){A(c,e,a),o(e,n),o(e,l),o(e,s),o(s,r)},p(c,[a]){a&1&&T(r,c[0])},i:M,o:M,d(c){c&&C(e)}}}function mn(t,e,n){let{message:l="Loading..."}=e;return t.$$set=s=>{"message"in s&&n(0,l=s.message)},[l]}class hn extends te{constructor(e){super(),ee(this,e,mn,dn,X,{message:0})}}function gn(t){let e,n,l,s,r,c,a,i,f,h,_;return{c(){e=d("div"),n=d("div"),n.textContent="⚠️",l=b(),s=d("h2"),s.textContent="Oops!",r=b(),c=d("p"),a=$(t[0]),i=b(),f=d("button"),f.textContent="Try Again",u(n,"class","error-icon svelte-na0xmw"),u(s,"class","svelte-na0xmw"),u(c,"class","svelte-na0xmw"),u(f,"class","btn-primary"),u(e,"class","error-view svelte-na0xmw")},m(y,g){A(y,e,g),o(e,n),o(e,l),o(e,s),o(e,r),o(e,c),o(c,a),o(e,i),o(e,f),h||(_=I(f,"click",t[1]),h=!0)},p(y,[g]){g&1&&T(a,y[0])},i:M,o:M,d(y){y&&C(e),h=!1,_()}}}function vn(t,e,n){let{message:l="Something went wrong"}=e;const s=ke();function r(){s("retry")}return t.$$set=c=>{"message"in c&&n(0,l=c.message)},[l,r]}class pn extends te{constructor(e){super(),ee(this,e,vn,gn,X,{message:0})}}function _n(t){let e,n;return e=new fn({props:{collection:t[3]}}),e.$on("refresh",t[14]),{c(){ae(e.$$.fragment)},m(l,s){Z(e,l,s),n=!0},p(l,s){const r={};s&8&&(r.collection=l[3]),e.$set(r)},i(l){n||(B(e.$$.fragment,l),n=!0)},o(l){V(e.$$.fragment,l),n=!1},d(l){x(e,l)}}}function yn(t){let e,n,l,s;const r=[Cn,kn,bn,wn],c=[];function a(i,f){return i[0]==="loading"?0:i[0]==="quiz"&&i[1]?1:i[0]==="result"&&i[1]?2:i[0]==="error"?3:-1}return~(e=a(t))&&(n=c[e]=r[e](t)),{c(){n&&n.c(),l=Ie()},m(i,f){~e&&c[e].m(i,f),A(i,l,f),s=!0},p(i,f){let h=e;e=a(i),e===h?~e&&c[e].p(i,f):(n&&(ht(),V(c[h],1,1,()=>{c[h]=null}),gt()),~e?(n=c[e],n?n.p(i,f):(n=c[e]=r[e](i),n.c()),B(n,1),n.m(l.parentNode,l)):n=null)},i(i){s||(B(n),s=!0)},o(i){V(n),s=!1},d(i){i&&C(l),~e&&c[e].d(i)}}}function wn(t){let e,n;return e=new pn({props:{message:t[7]}}),e.$on("retry",t[11]),{c(){ae(e.$$.fragment)},m(l,s){Z(e,l,s),n=!0},p(l,s){const r={};s&128&&(r.message=l[7]),e.$set(r)},i(l){n||(B(e.$$.fragment,l),n=!0)},o(l){V(e.$$.fragment,l),n=!1},d(l){x(e,l)}}}function bn(t){let e,n;return e=new ln({props:{isCorrect:t[4],correctAnswer:t[1].correctAnswer,userAnswer:t[5],wonCard:t[6]}}),e.$on("next",t[10]),{c(){ae(e.$$.fragment)},m(l,s){Z(e,l,s),n=!0},p(l,s){const r={};s&16&&(r.isCorrect=l[4]),s&2&&(r.correctAnswer=l[1].correctAnswer),s&32&&(r.userAnswer=l[5]),s&64&&(r.wonCard=l[6]),e.$set(r)},i(l){n||(B(e.$$.fragment,l),n=!0)},o(l){V(e.$$.fragment,l),n=!1},d(l){x(e,l)}}}function kn(t){let e,n;return e=new Zt({props:{question:t[1]}}),e.$on("answer",t[9]),{c(){ae(e.$$.fragment)},m(l,s){Z(e,l,s),n=!0},p(l,s){const r={};s&2&&(r.question=l[1]),e.$set(r)},i(l){n||(B(e.$$.fragment,l),n=!0)},o(l){V(e.$$.fragment,l),n=!1},d(l){x(e,l)}}}function Cn(t){let e,n;return e=new hn({props:{message:"Loading new question..."}}),{c(){ae(e.$$.fragment)},m(l,s){Z(e,l,s),n=!0},p:M,i(l){n||(B(e.$$.fragment,l),n=!0)},o(l){V(e.$$.fragment,l),n=!1},d(l){x(e,l)}}}function An(t){var ne;let e,n,l,s,r,c,a,i,f,h=(((ne=t[3])==null?void 0:ne.cards.length)||0)+"",_,y,g=t[2].length+"",v,m,p,w,E,k,S,q,P;const L=[yn,_n],j=[];function G(O,Q){return O[8]==="quiz"?0:1}return E=G(t),k=j[E]=L[E](t),{c(){e=d("div"),n=d("header"),l=d("h1"),l.textContent="Pok\\u00e9mon TCG Math Quiz",s=b(),r=d("nav"),c=d("button"),c.textContent="Play Quiz",a=b(),i=d("button"),f=$("My Collection ("),_=$(h),y=$("/"),v=$(g),m=$(")"),p=b(),w=d("main"),k.c(),u(l,"class","svelte-cy1rwm"),u(c,"class","nav-btn svelte-cy1rwm"),R(c,"active",t[8]==="quiz"),u(i,"class","nav-btn svelte-cy1rwm"),R(i,"active",t[8]==="collection"),u(r,"class","svelte-cy1rwm"),u(n,"class","app-header svelte-cy1rwm"),u(w,"class","svelte-cy1rwm"),u(e,"class","app svelte-cy1rwm")},m(O,Q){A(O,e,Q),o(e,n),o(n,l),o(n,s),o(n,r),o(r,c),o(r,a),o(r,i),o(i,f),o(i,_),o(i,y),o(i,v),o(i,m),o(e,p),o(e,w),j[E].m(w,null),S=!0,q||(P=[I(c,"click",t[13]),I(i,"click",t[12])],q=!0)},p(O,[Q]){var H;(!S||Q&256)&&R(c,"active",O[8]==="quiz"),(!S||Q&8)&&h!==(h=(((H=O[3])==null?void 0:H.cards.length)||0)+"")&&T(_,h),(!S||Q&4)&&g!==(g=O[2].length+"")&&T(v,g),(!S||Q&256)&&R(i,"active",O[8]==="collection");let le=E;E=G(O),E===le?j[E].p(O,Q):(ht(),V(j[le],1,1,()=>{j[le]=null}),gt(),k=j[E],k?k.p(O,Q):(k=j[E]=L[E](O),k.c()),B(k,1),k.m(w,null))},i(O){S||(B(k),S=!0)},o(O){V(k),S=!1},d(O){O&&C(e),j[E].d(),q=!1,J(P)}}}function En(t,e,n){let l="loading",s=null,r=[],c,a=!1,i=0,f=null,h="",_="quiz";qt(()=>{n(3,c=W()),y()});async function y(){try{n(0,l="loading"),r.length===0&&n(2,r=await Pt());const k=zt(r),S=await Qt(k.id),q=Ht(S);if(!q)throw new Error("Could not generate a valid question. Please try again.");n(1,s=q),n(0,l="quiz")}catch(k){console.error("Error loading question:",k),n(7,h=k instanceof Error?k.message:"Failed to load question"),n(0,l="error")}}function g(k){if(s){if(n(5,i=k.detail),n(4,a=Jt(s,i)),jt(a),n(6,f=null),a){const S={id:s.card.id,name:s.card.name,image:s.card.image,hp:s.card.hp,types:s.card.types,rarity:s.card.rarity,collectedAt:new Date().toISOString()};Rt(S)&&n(6,f=s.card)}n(3,c=W()),n(0,l="result")}}function v(){y()}function m(){y()}function p(){n(8,_="collection"),n(3,c=W())}function w(){n(8,_="quiz")}function E(){n(3,c=W())}return[l,s,r,c,a,i,f,h,_,g,v,m,p,w,E]}class $n extends te{constructor(e){super(),ee(this,e,En,An,X,{})}}new $n({target:document.getElementById("app")});
