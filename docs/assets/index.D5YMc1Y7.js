var Bl=Object.defineProperty;var zl=(t,e,l)=>e in t?Bl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var _t=(t,e,l)=>zl(t,typeof e!="symbol"?e+"":e,l);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function l(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=l(s);fetch(s.href,r)}})();function Z(){}function Sl(t){return t()}function Yt(){return Object.create(null)}function ie(t){t.forEach(Sl)}function Al(t){return typeof t=="function"}function _e(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let st;function ve(t,e){return t===e?!0:(st||(st=document.createElement("a")),st.href=e,t===st.href)}function jl(t){return Object.keys(t).length===0}function Hl(t,...e){if(t==null){for(const n of e)n(void 0);return Z}const l=t.subscribe(...e);return l.unsubscribe?()=>l.unsubscribe():l}function Ct(t,e,l){t.$$.on_destroy.push(Hl(e,l))}function i(t,e){t.appendChild(e)}function T(t,e,l){t.insertBefore(e,l||null)}function Q(t){t.parentNode&&t.parentNode.removeChild(t)}function Ae(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function d(t){return document.createElement(t)}function C(t){return document.createTextNode(t)}function k(){return C(" ")}function It(){return C("")}function j(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function ql(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function f(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function it(t){return t===""?null:+t}function Yl(t){return Array.from(t.childNodes)}function M(t,e){e=""+e,t.data!==e&&(t.data=e)}function Se(t,e){t.value=e??""}function yt(t,e,l,n){l==null?t.style.removeProperty(e):t.style.setProperty(e,l,"")}function at(t,e,l){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e){s.selected=!0;return}}t.selectedIndex=-1}function X(t,e,l){t.classList.toggle(e,!!l)}function Ul(t,e,{bubbles:l=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:l,cancelable:n})}let Xe;function Ge(t){Xe=t}function El(){if(!Xe)throw new Error("Function called outside component initialization");return Xe}function Il(t){El().$$.on_mount.push(t)}function ut(){const t=El();return(e,l,{cancelable:n=!1}={})=>{const s=t.$$.callbacks[e];if(s){const r=Ul(e,l,{cancelable:n});return s.slice().forEach(o=>{o.call(t,r)}),!r.defaultPrevented}return!0}}function Ut(t,e){const l=t.$$.callbacks[e.type];l&&l.slice().forEach(n=>n.call(this,e))}const Be=[],St=[];let ze=[];const Vt=[],Vl=Promise.resolve();let At=!1;function Wl(){At||(At=!0,Vl.then(Ml))}function qt(t){ze.push(t)}const kt=new Set;let Fe=0;function Ml(){if(Fe!==0)return;const t=Xe;do{try{for(;Fe<Be.length;){const e=Be[Fe];Fe++,Ge(e),Kl(e.$$)}}catch(e){throw Be.length=0,Fe=0,e}for(Ge(null),Be.length=0,Fe=0;St.length;)St.pop()();for(let e=0;e<ze.length;e+=1){const l=ze[e];kt.has(l)||(kt.add(l),l())}ze.length=0}while(Be.length);for(;Vt.length;)Vt.pop()();At=!1,kt.clear(),Ge(t)}function Kl(t){if(t.fragment!==null){t.update(),ie(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(qt)}}function Jl(t){const e=[],l=[];ze.forEach(n=>t.indexOf(n)===-1?e.push(n):l.push(n)),l.forEach(n=>n()),ze=e}const rt=new Set;let ye;function Ql(){ye={r:0,c:[],p:ye}}function Tl(){ye.r||ie(ye.c),ye=ye.p}function ue(t,e){t&&t.i&&(rt.delete(t),t.i(e))}function pe(t,e,l,n){if(t&&t.o){if(rt.has(t))return;rt.add(t),ye.c.push(()=>{rt.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}else n&&n()}function oe(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function He(t){t&&t.c()}function qe(t,e,l){const{fragment:n,after_update:s}=t.$$;n&&n.m(e,l),qt(()=>{const r=t.$$.on_mount.map(Sl).filter(Al);t.$$.on_destroy?t.$$.on_destroy.push(...r):ie(r),t.$$.on_mount=[]}),s.forEach(qt)}function Ee(t,e){const l=t.$$;l.fragment!==null&&(Jl(l.after_update),ie(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function Gl(t,e){t.$$.dirty[0]===-1&&(Be.push(t),Wl(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ie(t,e,l,n,s,r,o=null,a=[-1]){const u=Xe;Ge(t);const c=t.$$={fragment:null,ctx:[],props:r,update:Z,not_equal:s,bound:Yt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Yt(),dirty:a,skip_bound:!1,root:e.target||u.$$.root};o&&o(c.root);let v=!1;if(c.ctx=l?l(t,e.props||{},(g,p,...m)=>{const q=m.length?m[0]:p;return c.ctx&&s(c.ctx[g],c.ctx[g]=q)&&(!c.skip_bound&&c.bound[g]&&c.bound[g](q),v&&Gl(t,g)),p}):[],c.update(),v=!0,ie(c.before_update),c.fragment=n?n(c.ctx):!1,e.target){if(e.hydrate){const g=Yl(e.target);c.fragment&&c.fragment.l(g),g.forEach(Q)}else c.fragment&&c.fragment.c();e.intro&&ue(t.$$.fragment),qe(t,e.target,e.anchor),Ml()}Ge(u)}class Me{constructor(){_t(this,"$$");_t(this,"$$set")}$destroy(){Ee(this,1),this.$destroy=Z}$on(e,l){if(!Al(l))return Z;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const s=n.indexOf(l);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!jl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Xl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Xl);const Ll="https://api.tcgdex.net/v2/en";function Dl(t,e){const l=t.split("-")[1];return`https://assets.tcgdex.net/en/${Zl(e)}/${e}/${l}/high.webp`}function Zl(t){return t.startsWith("swsh")?"swsh":t.startsWith("sv")?"sv":t.startsWith("me")?"base":"swsh"}async function Et(t){try{const e=await fetch(`${Ll}/sets/${t}`);if(!e.ok)throw new Error("Failed to fetch cards from set");return((await e.json()).cards||[]).map(s=>({id:s.id,localId:s.localId,name:s.name,image:Dl(s.id,t)}))}catch(e){throw console.error("Error fetching cards from set:",e),e}}async function $l(t,e){try{const l=await fetch(`${Ll}/cards/${t}`);if(!l.ok)throw new Error("Failed to fetch card details");return{...await l.json(),image:Dl(t,e)}}catch(l){throw console.error("Error fetching card details:",l),l}}function xl(t){const e=Math.floor(Math.random()*t.length);return t[e]}const Mt="pokemon-tcg-collection",Nl="2.0";function en(){return{totalQuestions:0,correctAnswers:0,incorrectAnswers:0,totalHpDefeated:0}}function bt(){return{cards:[],stats:en(),version:Nl}}function me(){try{const t=localStorage.getItem(Mt);if(!t)return bt();const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?(console.warn("Invalid collection format, resetting..."),bt()):(e.stats.totalHpDefeated||(e.stats.totalHpDefeated=0),e.currentStreak||(e.currentStreak=0),e.unlockedRareSets||(e.unlockedRareSets={}),e)}catch(t){return console.error("Error loading collection from local storage:",t),bt()}}function je(t){try{const e={...t,version:Nl};localStorage.setItem(Mt,JSON.stringify(e))}catch(e){throw console.error("Error saving collection to local storage:",e),new Error("Failed to save collection")}}function tn(t){try{const e=me();return e.cards.some(n=>n.id===t.id)?!1:(e.cards.push(t),je(e),!0)}catch(e){return console.error("Error adding card to collection:",e),!1}}function ln(t,e){try{const l=me();l.stats.totalQuestions++,t?(l.stats.correctAnswers++,e&&(l.stats.totalHpDefeated+=e)):l.stats.incorrectAnswers++,je(l)}catch(l){console.error("Error updating stats:",l)}}function nn(){try{localStorage.removeItem(Mt)}catch(t){console.error("Error clearing collection:",t)}}function sn(){const t=me();return JSON.stringify(t,null,2)}function rn(t){try{const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?{success:!1,error:"Invalid collection format"}:!e.stats.totalQuestions===void 0||!e.stats.correctAnswers===void 0||!e.stats.incorrectAnswers===void 0?{success:!1,error:"Invalid stats format"}:(je(e),{success:!0})}catch(e){return console.error("Error importing collection:",e),{success:!1,error:"Failed to parse JSON file"}}}function on(){const t=Math.floor(Math.random()*50)+10,e=Math.floor(Math.random()*50)+10,l=["+","-"],n=l[Math.floor(Math.random()*l.length)];let s,r;if(n==="+")s=t+e,r=`What is ${t} + ${e}?`;else{s=t+e;const o=s;s=t,r=`What is ${o} - ${e}?`}return{question:r,answer:s}}function an(){const t=Math.floor(Math.random()*50)+10,e=Math.floor(Math.random()*50)+10,l=t+e;return{question:`What is ${t} + ${e}?`,answer:l}}function cn(t,e,l=!1){if(!t)return null;let n,s,r=!1,o,a;if(t.hp&&t.hp>0){r=!0;const u=[10,20,30,40,50,60,60,80,120,300][Math.floor(Math.random()*5)];s=Math.ceil(t.hp/u),n=e.damageQuestion(u)}else{const u=on();n=u.question,s=u.answer}if(l){const u=an();o=u.question,a=u.answer}return{card:t,questionText:n,correctAnswer:s,isPokemon:r,secondQuestion:o,secondAnswer:a}}function un(t,e,l){const n=e===t.correctAnswer;if(t.secondQuestion&&t.secondAnswer!==void 0){const s=l===t.secondAnswer;return n&&s}return n}const Oe=[];function Pl(t,e=Z){let l;const n=new Set;function s(a){if(_e(t,a)&&(t=a,l)){const u=!Oe.length;for(const c of n)c[1](),Oe.push(c,t);if(u){for(let c=0;c<Oe.length;c+=2)Oe[c][0](Oe[c+1]);Oe.length=0}}}function r(a){s(a(t))}function o(a,u=Z){const c=[a,u];return n.add(c),n.size===1&&(l=e(s,r)||Z),a(t),()=>{n.delete(c),n.size===0&&l&&(l(),l=null)}}return{set:s,update:r,subscribe:o}}const wt=[{id:"swsh3",name:"Sword & Shield - Darkness Ablaze"},{id:"sv05",name:"Scarlet & Violet - Temporal Forces"},{id:"sv06.5",name:"Scarlet & Violet - Shrouded Fable"}],Rl="tcg-math-settings";function fn(){return{language:"en",selectedSet:"swsh3"}}function Qt(){try{const t=localStorage.getItem(Rl);if(t){const e=JSON.parse(t);return{language:e.language||"en",selectedSet:e.selectedSet||"swsh3"}}}catch(t){console.error("Error loading settings:",t)}return fn()}function Fl(t){try{localStorage.setItem(Rl,JSON.stringify(t))}catch(e){console.error("Error saving settings:",e)}}const Ol=Qt(),ot=Pl(Ol.language),ct=Pl(Ol.selectedSet);ot.subscribe(t=>{const e=Qt();Fl({...e,language:t})});ct.subscribe(t=>{const e=Qt();Fl({...e,selectedSet:t})});const dn={en:{appTitle:"16k Pokemon Math Challenge",quizTitle:"TCG Math Challenge",playQuiz:"Play Quiz",myCollection:"My Collection",selectSet:"Select Set",selectLanguage:"Language",setInfo:"Collecting Set",enterAnswer:"Enter your answer",submitAnswer:"Submit Answer",nextQuestion:"Next Question",correct:"Correct!",notQuite:"Not quite!",correctMessage:"Great job! The answer was",incorrectMessage:"You answered",encouragement:"Try again with the next question!",youWonThisCard:"You won this card!",cardsCollected:"Cards Collected",questionsAnswered:"Questions Answered",correctAnswers:"Correct Answers",accuracy:"Accuracy",noCardsYet:"No cards yet!",noCardsDescription:"Answer questions correctly to start building your collection.",exportBackup:"Export Backup",importBackup:"Import Backup",clearThisSet:"Clear This Set",clearCollectionTitle:"Clear Collection?",clearCollectionMessage:"Are you sure you want to clear your entire collection? This action cannot be undone.",cancel:"Cancel",clearCollection:"Clear Collection",collectionExported:"Collection exported successfully!",collectionImported:"Collection imported successfully!",collectionCleared:"Collection cleared successfully!",exportFailed:"Failed to export collection",importFailed:"Failed to import collection",clearFailed:"Failed to clear collection",hit:"hit",hits:"hits",loading:"Loading new question...",yourCollection:"Your Collection",language:"Language",damageQuestion:t=>`Your Pokémon deals ${t} damage each turn. How many turns does it take to defeat this Pokémon?`},no:{appTitle:"16k Pokémon Matteutfordring",quizTitle:"TCG Matte Utfordring",playQuiz:"Spill Quiz",myCollection:"Min Samling",selectSet:"Velg Sett",selectLanguage:"Språk",setInfo:"Samler Sett",enterAnswer:"Skriv inn svaret ditt",submitAnswer:"Send Inn Svar",nextQuestion:"Neste Spørsmål",correct:"Riktig!",notQuite:"Ikke helt!",correctMessage:"Bra jobbet! Svaret var",incorrectMessage:"Du svarte",encouragement:"Prøv igjen med neste spørsmål!",youWonThisCard:"Du vant dette kortet!",cardsCollected:"Kort Samlet",questionsAnswered:"Spørsmål Besvart",correctAnswers:"Riktige Svar",accuracy:"Nøyaktighet",noCardsYet:"Ingen kort ennå!",noCardsDescription:"Svar riktig på spørsmål for å begynne å bygge samlingen din.",exportBackup:"Eksporter Backup",importBackup:"Importer Backup",clearThisSet:"Tøm Dette Settet",clearCollectionTitle:"Tøm Samling?",clearCollectionMessage:"Er du sikker på at du vil tømme hele samlingen din? Denne handlingen kan ikke angres.",cancel:"Avbryt",clearCollection:"Tøm Samling",collectionExported:"Samling eksportert!",collectionImported:"Samling importert!",collectionCleared:"Samling tømt!",exportFailed:"Kunne ikke eksportere samling",importFailed:"Kunne ikke importere samling",clearFailed:"Kunne ikke tømme samling",hit:"treff",hits:"treff",loading:"Laster nytt spørsmål...",yourCollection:"Din Samling",language:"Språk",damageQuestion:t=>`Din Pokémon gjør ${t} skade hver runde. Hvor mange runder tar det å beseire denne Pokémonen?`}};function gn(t){return dn[t]}function Wt(t,e,l){const n=t.slice();return n[4]=e[l],n}function Kt(t,e,l){const n=t.slice();return n[7]=e[l],n}function Jt(t){let e,l,n=t[0].rarity+"",s;return{c(){e=d("div"),l=d("span"),s=C(n),f(l,"class","rarity-badge svelte-1gymiiy"),f(e,"class","card-rarity svelte-1gymiiy")},m(r,o){T(r,e,o),i(e,l),i(l,s)},p(r,o){o&1&&n!==(n=r[0].rarity+"")&&M(s,n)},d(r){r&&Q(e)}}}function Gt(t){let e,l,n,s,r=t[0].hp+"",o;return{c(){e=d("div"),l=d("span"),l.textContent="HP",n=k(),s=d("span"),o=C(r),f(l,"class","hp-label svelte-1gymiiy"),f(s,"class","hp-value svelte-1gymiiy"),f(e,"class","card-hp svelte-1gymiiy")},m(a,u){T(a,e,u),i(e,l),i(e,n),i(e,s),i(s,o)},p(a,u){u&1&&r!==(r=a[0].hp+"")&&M(o,r)},d(a){a&&Q(e)}}}function Xt(t){let e,l=oe(t[0].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=Zt(Kt(t,l,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();f(e,"class","card-types svelte-1gymiiy")},m(s,r){T(s,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,r){if(r&1){l=oe(s[0].types);let o;for(o=0;o<l.length;o+=1){const a=Kt(s,l,o);n[o]?n[o].p(a,r):(n[o]=Zt(a),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(s){s&&Q(e),Ae(n,s)}}}function Zt(t){let e,l=t[7]+"",n;return{c(){e=d("span"),n=C(l),f(e,"class","type-badge svelte-1gymiiy")},m(s,r){T(s,e,r),i(e,n)},p(s,r){r&1&&l!==(l=s[7]+"")&&M(n,l)},d(s){s&&Q(e)}}}function $t(t){let e,l,n,s=oe(t[0].attacks),r=[];for(let o=0;o<s.length;o+=1)r[o]=el(Wt(t,s,o));return{c(){e=d("div"),l=d("h4"),l.textContent="Attacks:",n=k();for(let o=0;o<r.length;o+=1)r[o].c();f(l,"class","svelte-1gymiiy"),f(e,"class","card-attacks svelte-1gymiiy")},m(o,a){T(o,e,a),i(e,l),i(e,n);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null)},p(o,a){if(a&5){s=oe(o[0].attacks);let u;for(u=0;u<s.length;u+=1){const c=Wt(o,s,u);r[u]?r[u].p(c,a):(r[u]=el(c),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=s.length}},d(o){o&&Q(e),Ae(r,o)}}}function xt(t){let e,l=t[4].damage+"",n;return{c(){e=d("span"),n=C(l),f(e,"class","attack-damage svelte-1gymiiy")},m(s,r){T(s,e,r),i(e,n)},p(s,r){r&1&&l!==(l=s[4].damage+"")&&M(n,l)},d(s){s&&Q(e)}}}function el(t){let e,l,n=t[4].name+"",s,r,o,a=t[4].damage&&xt(t);return{c(){e=d("div"),l=d("span"),s=C(n),r=k(),a&&a.c(),o=k(),f(l,"class","attack-name svelte-1gymiiy"),f(e,"class","attack svelte-1gymiiy"),X(e,"highlighted",t[2]===t[4].name)},m(u,c){T(u,e,c),i(e,l),i(l,s),i(e,r),a&&a.m(e,null),i(e,o)},p(u,c){c&1&&n!==(n=u[4].name+"")&&M(s,n),u[4].damage?a?a.p(u,c):(a=xt(u),a.c(),a.m(e,o)):a&&(a.d(1),a=null),c&5&&X(e,"highlighted",u[2]===u[4].name)},d(u){u&&Q(e),a&&a.d()}}}function mn(t){let e,l,n,s,r,o,a,u,c=t[0].name+"",v,g,p,m,q,h=t[3]&&t[0].rarity&&Jt(t),b=t[0].hp&&Gt(t),A=t[0].types&&t[0].types.length>0&&Xt(t),y=t[1]&&t[0].attacks&&t[0].attacks.length>0&&$t(t);return{c(){e=d("div"),l=d("div"),n=d("img"),o=k(),a=d("div"),u=d("h3"),v=C(c),g=k(),h&&h.c(),p=k(),b&&b.c(),m=k(),A&&A.c(),q=k(),y&&y.c(),ve(n.src,s=t[0].image)||f(n,"src",s),f(n,"alt",r=t[0].name),f(n,"class","svelte-1gymiiy"),f(l,"class","card-image svelte-1gymiiy"),f(u,"class","card-name svelte-1gymiiy"),f(a,"class","card-info svelte-1gymiiy"),f(e,"class","pokemon-card svelte-1gymiiy")},m(_,E){T(_,e,E),i(e,l),i(l,n),i(e,o),i(e,a),i(a,u),i(u,v),i(a,g),h&&h.m(a,null),i(a,p),b&&b.m(a,null),i(a,m),A&&A.m(a,null),i(a,q),y&&y.m(a,null)},p(_,[E]){E&1&&!ve(n.src,s=_[0].image)&&f(n,"src",s),E&1&&r!==(r=_[0].name)&&f(n,"alt",r),E&1&&c!==(c=_[0].name+"")&&M(v,c),_[3]&&_[0].rarity?h?h.p(_,E):(h=Jt(_),h.c(),h.m(a,p)):h&&(h.d(1),h=null),_[0].hp?b?b.p(_,E):(b=Gt(_),b.c(),b.m(a,m)):b&&(b.d(1),b=null),_[0].types&&_[0].types.length>0?A?A.p(_,E):(A=Xt(_),A.c(),A.m(a,q)):A&&(A.d(1),A=null),_[1]&&_[0].attacks&&_[0].attacks.length>0?y?y.p(_,E):(y=$t(_),y.c(),y.m(a,null)):y&&(y.d(1),y=null)},i:Z,o:Z,d(_){_&&Q(e),h&&h.d(),b&&b.d(),A&&A.d(),y&&y.d()}}}function vn(t,e,l){let{card:n}=e,{showAttacks:s=!1}=e,{highlightedAttack:r=null}=e,{showRarity:o=!1}=e;return t.$$set=a=>{"card"in a&&l(0,n=a.card),"showAttacks"in a&&l(1,s=a.showAttacks),"highlightedAttack"in a&&l(2,r=a.highlightedAttack),"showRarity"in a&&l(3,o=a.showRarity)},[n,s,r,o]}class pn extends Me{constructor(e){super(),Ie(this,e,vn,mn,_e,{card:0,showAttacks:1,highlightedAttack:2,showRarity:3})}}function tl(t){let e,l,n,s,r=t[0].secondQuestion+"",o;return{c(){e=d("div"),l=d("span"),l.textContent="2.",n=k(),s=d("h3"),o=C(r),f(l,"class","question-number svelte-174fqld"),f(s,"class","question-text svelte-174fqld"),f(e,"class","question-item svelte-174fqld")},m(a,u){T(a,e,u),i(e,l),i(e,n),i(e,s),i(s,o)},p(a,u){u&1&&r!==(r=a[0].secondQuestion+"")&&M(o,r)},d(a){a&&Q(e)}}}function ll(t){let e,l,n,s,r,o,a;return{c(){e=d("div"),l=d("label"),l.textContent="Answer 2:",n=k(),s=d("input"),f(l,"class","input-label svelte-174fqld"),f(s,"type","number"),f(s,"placeholder",r=t[1].enterAnswer),f(s,"class","answer-input svelte-174fqld"),f(e,"class","input-group svelte-174fqld")},m(u,c){T(u,e,c),i(e,l),i(e,n),i(e,s),Se(s,t[3]),o||(a=[j(s,"input",t[8]),j(s,"keypress",t[5])],o=!0)},p(u,c){c&2&&r!==(r=u[1].enterAnswer)&&f(s,"placeholder",r),c&8&&it(s.value)!==u[3]&&Se(s,u[3])},d(u){u&&Q(e),o=!1,ie(a)}}}function hn(t){let e,l,n,s,r,o,a,u,c,v,g=t[0].questionText+"",p,m,q,h,b,A,y,_,E,I,S,N,H=t[1].submitAnswer+"",P,D,F,K,x;n=new pn({props:{card:t[0].card,showRarity:!0}});let Y=t[0].secondQuestion&&tl(t),V=t[0].secondQuestion&&ll(t);return{c(){e=d("div"),l=d("div"),He(n.$$.fragment),s=k(),r=d("div"),o=d("div"),a=d("div"),u=d("span"),u.textContent="1.",c=k(),v=d("h3"),p=C(g),m=k(),Y&&Y.c(),q=k(),h=d("div"),b=d("div"),A=d("label"),A.textContent="Answer 1:",y=k(),_=d("input"),I=k(),V&&V.c(),S=k(),N=d("button"),P=C(H),f(l,"class","card-display svelte-174fqld"),f(u,"class","question-number svelte-174fqld"),f(v,"class","question-text svelte-174fqld"),f(a,"class","question-item svelte-174fqld"),f(o,"class","questions-list svelte-174fqld"),f(A,"class","input-label svelte-174fqld"),f(_,"type","number"),f(_,"placeholder",E=t[1].enterAnswer),f(_,"class","answer-input svelte-174fqld"),f(b,"class","input-group svelte-174fqld"),f(N,"class","submit-btn btn-primary svelte-174fqld"),N.disabled=D=!t[2]||t[0].secondQuestion&&!t[3],f(h,"class","answer-inputs-container svelte-174fqld"),f(r,"class","question-container svelte-174fqld"),f(e,"class","quiz-view svelte-174fqld")},m(O,W){T(O,e,W),i(e,l),qe(n,l,null),i(e,s),i(e,r),i(r,o),i(o,a),i(a,u),i(a,c),i(a,v),i(v,p),i(o,m),Y&&Y.m(o,null),i(r,q),i(r,h),i(h,b),i(b,A),i(b,y),i(b,_),Se(_,t[2]),i(h,I),V&&V.m(h,null),i(h,S),i(h,N),i(N,P),F=!0,K||(x=[j(_,"input",t[7]),j(_,"keypress",t[5]),j(N,"click",t[4])],K=!0)},p(O,[W]){const U={};W&1&&(U.card=O[0].card),n.$set(U),(!F||W&1)&&g!==(g=O[0].questionText+"")&&M(p,g),O[0].secondQuestion?Y?Y.p(O,W):(Y=tl(O),Y.c(),Y.m(o,null)):Y&&(Y.d(1),Y=null),(!F||W&2&&E!==(E=O[1].enterAnswer))&&f(_,"placeholder",E),W&4&&it(_.value)!==O[2]&&Se(_,O[2]),O[0].secondQuestion?V?V.p(O,W):(V=ll(O),V.c(),V.m(h,S)):V&&(V.d(1),V=null),(!F||W&2)&&H!==(H=O[1].submitAnswer+"")&&M(P,H),(!F||W&13&&D!==(D=!O[2]||O[0].secondQuestion&&!O[3]))&&(N.disabled=D)},i(O){F||(ue(n.$$.fragment,O),F=!0)},o(O){pe(n.$$.fragment,O),F=!1},d(O){O&&Q(e),Ee(n),Y&&Y.d(),V&&V.d(),K=!1,ie(x)}}}function _n(t,e,l){let{question:n}=e,{t:s}=e,{currentSet:r}=e;const o=ut();let a="",u="";function c(){const m=parseInt(a,10);if(!isNaN(m))if(n.secondQuestion&&n.secondAnswer!==void 0){const q=parseInt(u,10);isNaN(q)||o("answer",{firstAnswer:m,secondAnswer:q})}else o("answer",{firstAnswer:m})}function v(m){m.key==="Enter"&&c()}function g(){a=it(this.value),l(2,a)}function p(){u=it(this.value),l(3,u)}return t.$$set=m=>{"question"in m&&l(0,n=m.question),"t"in m&&l(1,s=m.t),"currentSet"in m&&l(6,r=m.currentSet)},[n,s,a,u,c,v,r,g,p]}class kn extends Me{constructor(e){super(),Ie(this,e,_n,hn,_e,{question:0,t:1,currentSet:6})}}function bn(t){let e,l,n,s=t[4].notQuite+"",r,o,a,u=t[4].incorrectMessage+"",c,v,g,p,m,q=t[4].correctMessage.toLowerCase()+"",h,b,A,y,_,E,I,S,N=t[4].encouragement+"",H,P=t[5]&&t[6]>0&&nl(t);return{c(){e=d("div"),e.textContent="✗",l=k(),n=d("h2"),r=C(s),o=k(),a=d("p"),c=C(u),v=k(),g=d("strong"),p=C(t[2]),m=C(", "),h=C(q),b=k(),A=d("strong"),y=C(t[1]),_=C("."),E=k(),P&&P.c(),I=k(),S=d("p"),H=C(N),f(e,"class","result-icon error svelte-1v74pgf"),f(n,"class","result-title svelte-1v74pgf"),f(g,"class","svelte-1v74pgf"),f(A,"class","svelte-1v74pgf"),f(a,"class","result-message svelte-1v74pgf"),f(S,"class","encouragement svelte-1v74pgf")},m(D,F){T(D,e,F),T(D,l,F),T(D,n,F),i(n,r),T(D,o,F),T(D,a,F),i(a,c),i(a,v),i(a,g),i(g,p),i(a,m),i(a,h),i(a,b),i(a,A),i(A,y),i(a,_),T(D,E,F),P&&P.m(D,F),T(D,I,F),T(D,S,F),i(S,H)},p(D,F){F&16&&s!==(s=D[4].notQuite+"")&&M(r,s),F&16&&u!==(u=D[4].incorrectMessage+"")&&M(c,u),F&4&&M(p,D[2]),F&16&&q!==(q=D[4].correctMessage.toLowerCase()+"")&&M(h,q),F&2&&M(y,D[1]),D[5]&&D[6]>0?P?P.p(D,F):(P=nl(D),P.c(),P.m(I.parentNode,I)):P&&(P.d(1),P=null),F&16&&N!==(N=D[4].encouragement+"")&&M(H,N)},d(D){D&&(Q(e),Q(l),Q(n),Q(o),Q(a),Q(E),Q(I),Q(S)),P&&P.d(D)}}}function wn(t){let e,l,n,s=t[4].correct+"",r,o,a,u=t[4].correctMessage+"",c,v,g,p,m,q=(t[1]===1?t[4].hit:t[4].hits)+"",h,b,A,y,_,E=t[5]&&!t[3]&&sl(t),I=t[3]&&rl(t);return{c(){e=d("div"),e.textContent="✓",l=k(),n=d("h2"),r=C(s),o=k(),a=d("p"),c=C(u),v=k(),g=d("strong"),p=C(t[1]),m=k(),h=C(q),b=C("!"),A=k(),E&&E.c(),y=k(),I&&I.c(),_=It(),f(e,"class","result-icon success svelte-1v74pgf"),f(n,"class","result-title svelte-1v74pgf"),f(g,"class","svelte-1v74pgf"),f(a,"class","result-message svelte-1v74pgf")},m(S,N){T(S,e,N),T(S,l,N),T(S,n,N),i(n,r),T(S,o,N),T(S,a,N),i(a,c),i(a,v),i(a,g),i(g,p),i(a,m),i(a,h),i(a,b),T(S,A,N),E&&E.m(S,N),T(S,y,N),I&&I.m(S,N),T(S,_,N)},p(S,N){N&16&&s!==(s=S[4].correct+"")&&M(r,s),N&16&&u!==(u=S[4].correctMessage+"")&&M(c,u),N&2&&M(p,S[1]),N&18&&q!==(q=(S[1]===1?S[4].hit:S[4].hits)+"")&&M(h,q),S[5]&&!S[3]?E?E.p(S,N):(E=sl(S),E.c(),E.m(y.parentNode,y)):E&&(E.d(1),E=null),S[3]?I?I.p(S,N):(I=rl(S),I.c(),I.m(_.parentNode,_)):I&&(I.d(1),I=null)},d(S){S&&(Q(e),Q(l),Q(n),Q(o),Q(a),Q(A),Q(y),Q(_)),E&&E.d(S),I&&I.d(S)}}}function nl(t){let e,l=t[4].language==="Språk"?"Streak reset! Try again.":"Rekke tilbakestilt! Prøv igjen.",n;return{c(){e=d("p"),n=C(l),f(e,"class","streak-lost svelte-1v74pgf")},m(s,r){T(s,e,r),i(e,n)},p(s,r){r&16&&l!==(l=s[4].language==="Språk"?"Streak reset! Try again.":"Rekke tilbakestilt! Prøv igjen.")&&M(n,l)},d(s){s&&Q(e)}}}function sl(t){let e,l,n,s,r,o,a;function u(g,p){return g[7]===1?yn:Cn}let c=u(t),v=c(t);return{c(){e=d("div"),l=d("p"),v.c(),n=k(),s=d("div"),r=d("div"),o=k(),a=d("div"),f(l,"class","streak-text svelte-1v74pgf"),f(r,"class","streak-dot svelte-1v74pgf"),X(r,"filled",t[7]>=1),f(a,"class","streak-dot svelte-1v74pgf"),X(a,"filled",t[7]>=2),f(s,"class","streak-progress svelte-1v74pgf"),f(e,"class","streak-info svelte-1v74pgf")},m(g,p){T(g,e,p),i(e,l),v.m(l,null),i(e,n),i(e,s),i(s,r),i(s,o),i(s,a)},p(g,p){c===(c=u(g))&&v?v.p(g,p):(v.d(1),v=c(g),v&&(v.c(),v.m(l,null))),p&128&&X(r,"filled",g[7]>=1),p&128&&X(a,"filled",g[7]>=2)},d(g){g&&Q(e),v.d()}}}function Cn(t){let e=t[4].language==="Språk"?"Get 2 correct answers to win this rare card!":"Få 2 riktige svar for å vinne dette sjeldne kortet!",l;return{c(){l=C(e)},m(n,s){T(n,l,s)},p(n,s){s&16&&e!==(e=n[4].language==="Språk"?"Get 2 correct answers to win this rare card!":"Få 2 riktige svar for å vinne dette sjeldne kortet!")&&M(l,e)},d(n){n&&Q(l)}}}function yn(t){let e=t[4].language==="Språk"?"One more correct to win this card!":"Én til riktig for å vinne dette kortet!",l;return{c(){l=C(e)},m(n,s){T(n,l,s)},p(n,s){s&16&&e!==(e=n[4].language==="Språk"?"One more correct to win this card!":"Én til riktig for å vinne dette kortet!")&&M(l,e)},d(n){n&&Q(l)}}}function rl(t){let e,l,n=t[4].youWonThisCard+"",s,r,o,a,u,c,v,g,p,m=t[3].name+"",q;return{c(){e=d("div"),l=d("h3"),s=C(n),r=k(),o=d("div"),a=d("div"),u=d("img"),g=k(),p=d("span"),q=C(m),f(l,"class","svelte-1v74pgf"),ve(u.src,c=t[3].image)||f(u,"src",c),f(u,"alt",v=t[3].name),f(u,"class","svelte-1v74pgf"),f(p,"class","card-name svelte-1v74pgf"),f(a,"class","mini-card svelte-1v74pgf"),f(o,"class","cards-grid svelte-1v74pgf"),f(e,"class","won-cards svelte-1v74pgf")},m(h,b){T(h,e,b),i(e,l),i(l,s),i(e,r),i(e,o),i(o,a),i(a,u),i(a,g),i(a,p),i(p,q)},p(h,b){b&16&&n!==(n=h[4].youWonThisCard+"")&&M(s,n),b&8&&!ve(u.src,c=h[3].image)&&f(u,"src",c),b&8&&v!==(v=h[3].name)&&f(u,"alt",v),b&8&&m!==(m=h[3].name+"")&&M(q,m)},d(h){h&&Q(e)}}}function Sn(t){let e,l,n,s,r=t[4].nextQuestion+"",o,a,u;function c(p,m){return p[0]?wn:bn}let v=c(t),g=v(t);return{c(){e=d("div"),l=d("div"),g.c(),n=k(),s=d("button"),o=C(r),f(l,"class","result-card svelte-1v74pgf"),X(l,"correct",t[0]),X(l,"incorrect",!t[0]),f(s,"class","next-btn btn-primary svelte-1v74pgf"),f(e,"class","result-view svelte-1v74pgf")},m(p,m){T(p,e,m),i(e,l),g.m(l,null),i(e,n),i(e,s),i(s,o),a||(u=j(s,"click",t[8]),a=!0)},p(p,[m]){v===(v=c(p))&&g?g.p(p,m):(g.d(1),g=v(p),g&&(g.c(),g.m(l,null))),m&1&&X(l,"correct",p[0]),m&1&&X(l,"incorrect",!p[0]),m&16&&r!==(r=p[4].nextQuestion+"")&&M(o,r)},i:Z,o:Z,d(p){p&&Q(e),g.d(),a=!1,u()}}}function An(t,e,l){let{isCorrect:n}=e,{correctAnswer:s}=e,{userAnswer:r}=e,{wonCard:o}=e,{t:a}=e,{needsStreak:u=!1}=e,{streakProgress:c=0}=e,{currentStreak:v=0}=e;const g=ut();function p(){g("next")}return t.$$set=m=>{"isCorrect"in m&&l(0,n=m.isCorrect),"correctAnswer"in m&&l(1,s=m.correctAnswer),"userAnswer"in m&&l(2,r=m.userAnswer),"wonCard"in m&&l(3,o=m.wonCard),"t"in m&&l(4,a=m.t),"needsStreak"in m&&l(5,u=m.needsStreak),"streakProgress"in m&&l(6,c=m.streakProgress),"currentStreak"in m&&l(7,v=m.currentStreak)},[n,s,r,o,a,u,c,v,p]}class qn extends Me{constructor(e){super(),Ie(this,e,An,Sn,_e,{isCorrect:0,correctAnswer:1,userAnswer:2,wonCard:3,t:4,needsStreak:5,streakProgress:6,currentStreak:7})}}function En(){try{const t=sn(),e=new Blob([t],{type:"application/json"}),l=URL.createObjectURL(e),n=document.createElement("a");n.href=l,n.download=`pokemon-collection-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(l)}catch(t){throw console.error("Error downloading backup:",t),new Error("Failed to download backup")}}function In(t){return new Promise(e=>{const l=new FileReader;l.onload=n=>{var s;try{const r=(s=n.target)==null?void 0:s.result,o=rn(r);e(o)}catch(r){console.error("Error reading file:",r),e({success:!1,error:"Failed to read file"})}},l.onerror=()=>{e({success:!1,error:"Failed to read file"})},l.readAsText(t)})}function ol(t,e,l){const n=t.slice();return n[33]=e[l],n}function il(t,e,l){const n=t.slice();return n[36]=e[l],n}function al(t,e,l){const n=t.slice();return n[33]=e[l],n}function cl(t,e,l){const n=t.slice();return n[36]=e[l],n}function Mn(t){let e=t[1].language==="Språk"?`Defeat ${t[10]>0?t[10].toLocaleString():0} HP to unlock 5 rare cards`:`Beseir ${t[10]>0?t[10].toLocaleString():0} HP for å låse opp 5 sjeldne kort`,l;return{c(){l=C(e)},m(n,s){T(n,l,s)},p(n,s){s[0]&1026&&e!==(e=n[1].language==="Språk"?`Defeat ${n[10]>0?n[10].toLocaleString():0} HP to unlock 5 rare cards`:`Beseir ${n[10]>0?n[10].toLocaleString():0} HP for å låse opp 5 sjeldne kort`)&&M(l,e)},d(n){n&&Q(l)}}}function Qn(t){let e=t[1].language==="Språk"?"Rare cards unlocked!":"Sjeldne kort låst opp!",l;return{c(){l=C(e)},m(n,s){T(n,l,s)},p(n,s){s[0]&2&&e!==(e=n[1].language==="Språk"?"Rare cards unlocked!":"Sjeldne kort låst opp!")&&M(l,e)},d(n){n&&Q(l)}}}function ul(t){let e,l;return{c(){e=d("div"),l=d("div"),f(l,"class","hp-progress-fill svelte-1c2fvge"),yt(l,"width",t[8]+"%"),f(e,"class","hp-progress-bar svelte-1c2fvge")},m(n,s){T(n,e,s),i(e,l)},p(n,s){s[0]&256&&yt(l,"width",n[8]+"%")},d(n){n&&Q(e)}}}function fl(t){let e,l,n,s,r,o,a;function u(){return t[24](t[36])}return{c(){e=d("button"),l=d("img"),r=k(),ve(l.src,n=t[36].image)||f(l,"src",n),f(l,"alt",s=t[36].name),f(l,"class","svelte-1c2fvge"),X(l,"locked",!t[9]),f(e,"class","rare-thumbnail svelte-1c2fvge"),X(e,"unlocked",t[9])},m(c,v){T(c,e,v),i(e,l),i(e,r),o||(a=j(e,"click",u),o=!0)},p(c,v){t=c,v[0]&16&&!ve(l.src,n=t[36].image)&&f(l,"src",n),v[0]&16&&s!==(s=t[36].name)&&f(l,"alt",s),v[0]&512&&X(l,"locked",!t[9]),v[0]&512&&X(e,"unlocked",t[9])},d(c){c&&Q(e),o=!1,a()}}}function Tn(t){let e,l=oe(t[0].cards),n=[];for(let s=0;s<l.length;s+=1)n[s]=vl(il(t,l,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();f(e,"class","cards-grid svelte-1c2fvge")},m(s,r){T(s,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,r){if(r[0]&524289){l=oe(s[0].cards);let o;for(o=0;o<l.length;o+=1){const a=il(s,l,o);n[o]?n[o].p(a,r):(n[o]=vl(a),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(s){s&&Q(e),Ae(n,s)}}}function Ln(t){let e,l,n,s,r=t[1].noCardsYet+"",o,a,u,c=t[1].noCardsDescription+"",v;return{c(){e=d("div"),l=d("div"),l.textContent="📦",n=k(),s=d("h3"),o=C(r),a=k(),u=d("p"),v=C(c),f(l,"class","empty-icon svelte-1c2fvge"),f(s,"class","svelte-1c2fvge"),f(u,"class","svelte-1c2fvge"),f(e,"class","empty-state svelte-1c2fvge")},m(g,p){T(g,e,p),i(e,l),i(e,n),i(e,s),i(s,o),i(e,a),i(e,u),i(u,v)},p(g,p){p[0]&2&&r!==(r=g[1].noCardsYet+"")&&M(o,r),p[0]&2&&c!==(c=g[1].noCardsDescription+"")&&M(v,c)},d(g){g&&Q(e)}}}function dl(t){let e,l,n=t[36].hp+"",s;return{c(){e=d("span"),l=C("HP "),s=C(n),f(e,"class","hp svelte-1c2fvge")},m(r,o){T(r,e,o),i(e,l),i(e,s)},p(r,o){o[0]&1&&n!==(n=r[36].hp+"")&&M(s,n)},d(r){r&&Q(e)}}}function gl(t){let e,l=oe(t[36].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=ml(al(t,l,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();f(e,"class","types svelte-1c2fvge")},m(s,r){T(s,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,r){if(r[0]&1){l=oe(s[36].types);let o;for(o=0;o<l.length;o+=1){const a=al(s,l,o);n[o]?n[o].p(a,r):(n[o]=ml(a),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(s){s&&Q(e),Ae(n,s)}}}function ml(t){let e,l=t[33]+"",n;return{c(){e=d("span"),n=C(l),f(e,"class","type svelte-1c2fvge")},m(s,r){T(s,e,r),i(e,n)},p(s,r){r[0]&1&&l!==(l=s[33]+"")&&M(n,l)},d(s){s&&Q(e)}}}function vl(t){let e,l,n,s,r,o,a,u=t[36].name+"",c,v,g,p,m,q,h=t[36].hp&&dl(t),b=t[36].types&&t[36].types.length>0&&gl(t);function A(){return t[25](t[36])}return{c(){e=d("button"),l=d("img"),r=k(),o=d("div"),a=d("h4"),c=C(u),v=k(),h&&h.c(),g=k(),b&&b.c(),p=k(),ve(l.src,n=t[36].image)||f(l,"src",n),f(l,"alt",s=t[36].name),f(l,"class","svelte-1c2fvge"),f(a,"class","svelte-1c2fvge"),f(o,"class","card-details svelte-1c2fvge"),f(e,"class","collection-card svelte-1c2fvge")},m(y,_){T(y,e,_),i(e,l),i(e,r),i(e,o),i(o,a),i(a,c),i(o,v),h&&h.m(o,null),i(o,g),b&&b.m(o,null),i(e,p),m||(q=j(e,"click",A),m=!0)},p(y,_){t=y,_[0]&1&&!ve(l.src,n=t[36].image)&&f(l,"src",n),_[0]&1&&s!==(s=t[36].name)&&f(l,"alt",s),_[0]&1&&u!==(u=t[36].name+"")&&M(c,u),t[36].hp?h?h.p(t,_):(h=dl(t),h.c(),h.m(o,g)):h&&(h.d(1),h=null),t[36].types&&t[36].types.length>0?b?b.p(t,_):(b=gl(t),b.c(),b.m(o,null)):b&&(b.d(1),b=null)},d(y){y&&Q(e),h&&h.d(),b&&b.d(),m=!1,q()}}}function pl(t){let e,l=t[6].text+"",n;return{c(){e=d("div"),n=C(l),f(e,"class","message svelte-1c2fvge"),X(e,"success",t[6].type==="success"),X(e,"error",t[6].type==="error")},m(s,r){T(s,e,r),i(e,n)},p(s,r){r[0]&64&&l!==(l=s[6].text+"")&&M(n,l),r[0]&64&&X(e,"success",s[6].type==="success"),r[0]&64&&X(e,"error",s[6].type==="error")},d(s){s&&Q(e)}}}function hl(t){let e,l,n,s,r,o,a,u,c,v,g=t[3].name+"",p,m,q,h,b,A,y=t[3].hp&&_l(t),_=t[3].types&&t[3].types.length>0&&kl(t),E=t[3].rarity&&wl(t);return{c(){e=d("div"),l=d("div"),n=d("button"),n.textContent="×",s=k(),r=d("img"),u=k(),c=d("div"),v=d("h3"),p=C(g),m=k(),y&&y.c(),q=k(),_&&_.c(),h=k(),E&&E.c(),f(n,"class","close-modal svelte-1c2fvge"),ve(r.src,o=t[3].image)||f(r,"src",o),f(r,"alt",a=t[3].name),f(r,"class","modal-card-image svelte-1c2fvge"),f(v,"class","svelte-1c2fvge"),f(c,"class","modal-card-info svelte-1c2fvge"),f(l,"class","card-modal svelte-1c2fvge"),f(l,"role","dialog"),f(e,"class","dialog-overlay svelte-1c2fvge"),f(e,"role","button"),f(e,"tabindex","-1")},m(I,S){T(I,e,S),i(e,l),i(l,n),i(l,s),i(l,r),i(l,u),i(l,c),i(c,v),i(v,p),i(c,m),y&&y.m(c,null),i(c,q),_&&_.m(c,null),i(c,h),E&&E.m(c,null),b||(A=[j(n,"click",t[20]),j(l,"click",ql(t[23])),j(e,"click",t[20]),j(e,"keydown",t[27])],b=!0)},p(I,S){S[0]&8&&!ve(r.src,o=I[3].image)&&f(r,"src",o),S[0]&8&&a!==(a=I[3].name)&&f(r,"alt",a),S[0]&8&&g!==(g=I[3].name+"")&&M(p,g),I[3].hp?y?y.p(I,S):(y=_l(I),y.c(),y.m(c,q)):y&&(y.d(1),y=null),I[3].types&&I[3].types.length>0?_?_.p(I,S):(_=kl(I),_.c(),_.m(c,h)):_&&(_.d(1),_=null),I[3].rarity?E?E.p(I,S):(E=wl(I),E.c(),E.m(c,null)):E&&(E.d(1),E=null)},d(I){I&&Q(e),y&&y.d(),_&&_.d(),E&&E.d(),b=!1,ie(A)}}}function _l(t){let e,l,n=t[3].hp+"",s;return{c(){e=d("div"),l=C("HP: "),s=C(n),f(e,"class","modal-hp svelte-1c2fvge")},m(r,o){T(r,e,o),i(e,l),i(e,s)},p(r,o){o[0]&8&&n!==(n=r[3].hp+"")&&M(s,n)},d(r){r&&Q(e)}}}function kl(t){let e,l=oe(t[3].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=bl(ol(t,l,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();f(e,"class","modal-types svelte-1c2fvge")},m(s,r){T(s,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,r){if(r[0]&8){l=oe(s[3].types);let o;for(o=0;o<l.length;o+=1){const a=ol(s,l,o);n[o]?n[o].p(a,r):(n[o]=bl(a),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(s){s&&Q(e),Ae(n,s)}}}function bl(t){let e,l=t[33]+"",n;return{c(){e=d("span"),n=C(l),f(e,"class","modal-type svelte-1c2fvge")},m(s,r){T(s,e,r),i(e,n)},p(s,r){r[0]&8&&l!==(l=s[33]+"")&&M(n,l)},d(s){s&&Q(e)}}}function wl(t){let e,l,n=t[3].rarity+"",s;return{c(){e=d("div"),l=C("Rarity: "),s=C(n),f(e,"class","modal-rarity svelte-1c2fvge")},m(r,o){T(r,e,o),i(e,l),i(e,s)},p(r,o){o[0]&8&&n!==(n=r[3].rarity+"")&&M(s,n)},d(r){r&&Q(e)}}}function Cl(t){let e,l,n,s=t[1].clearCollectionTitle+"",r,o,a,u=t[1].clearCollectionMessage+"",c,v,g,p,m=t[1].cancel+"",q,h,b,A=t[1].clearCollection+"",y,_,E;return{c(){e=d("div"),l=d("div"),n=d("h3"),r=C(s),o=k(),a=d("p"),c=C(u),v=k(),g=d("div"),p=d("button"),q=C(m),h=k(),b=d("button"),y=C(A),f(n,"class","svelte-1c2fvge"),f(a,"class","svelte-1c2fvge"),f(p,"class","btn-secondary"),f(b,"class","btn-error"),f(g,"class","dialog-actions svelte-1c2fvge"),f(l,"class","dialog svelte-1c2fvge"),f(l,"role","dialog"),f(e,"class","dialog-overlay svelte-1c2fvge"),f(e,"role","button"),f(e,"tabindex","-1")},m(I,S){T(I,e,S),i(e,l),i(l,n),i(n,r),i(l,o),i(l,a),i(a,c),i(l,v),i(l,g),i(g,p),i(p,q),i(g,h),i(g,b),i(b,y),_||(E=[j(p,"click",t[16]),j(b,"click",t[17]),j(l,"click",ql(t[22])),j(l,"keydown",Nn),j(e,"click",t[16]),j(e,"keydown",t[28])],_=!0)},p(I,S){S[0]&2&&s!==(s=I[1].clearCollectionTitle+"")&&M(r,s),S[0]&2&&u!==(u=I[1].clearCollectionMessage+"")&&M(c,u),S[0]&2&&m!==(m=I[1].cancel+"")&&M(q,m),S[0]&2&&A!==(A=I[1].clearCollection+"")&&M(y,A)},d(I){I&&Q(e),_=!1,ie(E)}}}function Dn(t){let e,l,n,s,r,o,a,u,c,v=t[1].yourCollection+"",g,p,m,q,h,b,A=t[0].cards.length+"",y,_,E,I=t[1].cardsCollected+"",S,N,H,P,D=t[0].stats.totalQuestions+"",F,K,x,Y=t[1].questionsAnswered+"",V,O,W,U,B=t[0].stats.correctAnswers+"",w,R,J,G=t[1].correctAnswers+"",ee,ke,ae,Qe,Te,ce,Ze,Le,Ye=t[1].accuracy+"",ft,Tt,De,Ne,Pe,$e=(t[1].language||"Language")+"",dt,Lt,Dt,he,be,we,Nt,fe,Ue,xe=t[1].exportBackup+"",gt,Pt,Ve,et=t[1].importBackup+"",mt,Rt,We,tt=t[1].clearThisSet+"",vt,Ft,Ce,Ot,pt,Ke,Je,ht,Bt;function zt(L,z){return L[9]?Qn:Mn}let lt=zt(t),de=lt(t),le=!t[9]&&ul(t),Re=oe(t[4]),te=[];for(let L=0;L<Re.length;L+=1)te[L]=fl(cl(t,Re,L));function jt(L,z){return L[0].cards.length===0?Ln:Tn}let nt=jt(t),ge=nt(t),ne=t[6]&&pl(t),se=t[3]&&hl(t),re=t[7]&&Cl(t);return{c(){e=d("div"),l=d("div"),n=d("div"),de.c(),s=k(),le&&le.c(),r=k(),o=d("div");for(let L=0;L<te.length;L+=1)te[L].c();a=k(),u=d("div"),c=d("h2"),g=C(v),p=k(),ge.c(),m=k(),q=d("div"),h=d("div"),b=d("div"),y=C(A),_=k(),E=d("div"),S=C(I),N=k(),H=d("div"),P=d("div"),F=C(D),K=k(),x=d("div"),V=C(Y),O=k(),W=d("div"),U=d("div"),w=C(B),R=k(),J=d("div"),ee=C(G),ke=k(),ae=d("div"),Qe=d("div"),Te=C(t[11]),ce=C("%"),Ze=k(),Le=d("div"),ft=C(Ye),Tt=k(),De=d("div"),Ne=d("div"),Pe=d("label"),dt=C($e),Lt=C(":"),Dt=k(),he=d("select"),be=d("option"),be.textContent="English",we=d("option"),we.textContent="Norsk",Nt=k(),fe=d("div"),Ue=d("button"),gt=C(xe),Pt=k(),Ve=d("button"),mt=C(et),Rt=k(),We=d("button"),vt=C(tt),Ft=k(),Ce=d("input"),Ot=k(),ne&&ne.c(),pt=k(),se&&se.c(),Ke=k(),re&&re.c(),Je=It(),f(n,"class","rare-section-text svelte-1c2fvge"),f(o,"class","rare-cards-thumbnails svelte-1c2fvge"),f(l,"class","rare-cards-section svelte-1c2fvge"),f(c,"class","svelte-1c2fvge"),f(u,"class","collection-header svelte-1c2fvge"),f(b,"class","stat-value svelte-1c2fvge"),f(E,"class","stat-label svelte-1c2fvge"),f(h,"class","stat-card svelte-1c2fvge"),f(P,"class","stat-value svelte-1c2fvge"),f(x,"class","stat-label svelte-1c2fvge"),f(H,"class","stat-card svelte-1c2fvge"),f(U,"class","stat-value svelte-1c2fvge"),f(J,"class","stat-label svelte-1c2fvge"),f(W,"class","stat-card svelte-1c2fvge"),f(Qe,"class","stat-value svelte-1c2fvge"),f(Le,"class","stat-label svelte-1c2fvge"),f(ae,"class","stat-card svelte-1c2fvge"),f(q,"class","stats-section svelte-1c2fvge"),f(Pe,"for","language-select"),f(Pe,"class","svelte-1c2fvge"),be.__value="en",Se(be,be.__value),f(be,"class","svelte-1c2fvge"),we.__value="no",Se(we,we.__value),f(we,"class","svelte-1c2fvge"),f(he,"id","language-select"),f(he,"class","language-selector svelte-1c2fvge"),f(Ne,"class","language-selector-container svelte-1c2fvge"),f(Ue,"class","btn-secondary"),f(Ve,"class","btn-secondary"),f(We,"class","btn-error"),f(Ce,"type","file"),f(Ce,"accept",".json"),yt(Ce,"display","none"),f(fe,"class","functions-actions svelte-1c2fvge"),f(De,"class","functions-section svelte-1c2fvge"),f(e,"class","collection-view svelte-1c2fvge")},m(L,z){T(L,e,z),i(e,l),i(l,n),de.m(n,null),i(l,s),le&&le.m(l,null),i(l,r),i(l,o);for(let $=0;$<te.length;$+=1)te[$]&&te[$].m(o,null);i(e,a),i(e,u),i(u,c),i(c,g),i(e,p),ge.m(e,null),i(e,m),i(e,q),i(q,h),i(h,b),i(b,y),i(h,_),i(h,E),i(E,S),i(q,N),i(q,H),i(H,P),i(P,F),i(H,K),i(H,x),i(x,V),i(q,O),i(q,W),i(W,U),i(U,w),i(W,R),i(W,J),i(J,ee),i(q,ke),i(q,ae),i(ae,Qe),i(Qe,Te),i(Qe,ce),i(ae,Ze),i(ae,Le),i(Le,ft),i(e,Tt),i(e,De),i(De,Ne),i(Ne,Pe),i(Pe,dt),i(Pe,Lt),i(Ne,Dt),i(Ne,he),i(he,be),i(he,we),at(he,t[2]),i(De,Nt),i(De,fe),i(fe,Ue),i(Ue,gt),i(fe,Pt),i(fe,Ve),i(Ve,mt),i(fe,Rt),i(fe,We),i(We,vt),i(fe,Ft),i(fe,Ce),t[26](Ce),i(e,Ot),ne&&ne.m(e,null),T(L,pt,z),se&&se.m(L,z),T(L,Ke,z),re&&re.m(L,z),T(L,Je,z),ht||(Bt=[j(he,"change",t[18]),j(Ue,"click",t[12]),j(Ve,"click",t[13]),j(We,"click",t[15]),j(Ce,"change",t[14])],ht=!0)},p(L,z){if(lt===(lt=zt(L))&&de?de.p(L,z):(de.d(1),de=lt(L),de&&(de.c(),de.m(n,null))),L[9]?le&&(le.d(1),le=null):le?le.p(L,z):(le=ul(L),le.c(),le.m(l,r)),z[0]&524816){Re=oe(L[4]);let $;for($=0;$<Re.length;$+=1){const Ht=cl(L,Re,$);te[$]?te[$].p(Ht,z):(te[$]=fl(Ht),te[$].c(),te[$].m(o,null))}for(;$<te.length;$+=1)te[$].d(1);te.length=Re.length}z[0]&2&&v!==(v=L[1].yourCollection+"")&&M(g,v),nt===(nt=jt(L))&&ge?ge.p(L,z):(ge.d(1),ge=nt(L),ge&&(ge.c(),ge.m(e,m))),z[0]&1&&A!==(A=L[0].cards.length+"")&&M(y,A),z[0]&2&&I!==(I=L[1].cardsCollected+"")&&M(S,I),z[0]&1&&D!==(D=L[0].stats.totalQuestions+"")&&M(F,D),z[0]&2&&Y!==(Y=L[1].questionsAnswered+"")&&M(V,Y),z[0]&1&&B!==(B=L[0].stats.correctAnswers+"")&&M(w,B),z[0]&2&&G!==(G=L[1].correctAnswers+"")&&M(ee,G),z[0]&2048&&M(Te,L[11]),z[0]&2&&Ye!==(Ye=L[1].accuracy+"")&&M(ft,Ye),z[0]&2&&$e!==($e=(L[1].language||"Language")+"")&&M(dt,$e),z[0]&4&&at(he,L[2]),z[0]&2&&xe!==(xe=L[1].exportBackup+"")&&M(gt,xe),z[0]&2&&et!==(et=L[1].importBackup+"")&&M(mt,et),z[0]&2&&tt!==(tt=L[1].clearThisSet+"")&&M(vt,tt),L[6]?ne?ne.p(L,z):(ne=pl(L),ne.c(),ne.m(e,null)):ne&&(ne.d(1),ne=null),L[3]?se?se.p(L,z):(se=hl(L),se.c(),se.m(Ke.parentNode,Ke)):se&&(se.d(1),se=null),L[7]?re?re.p(L,z):(re=Cl(L),re.c(),re.m(Je.parentNode,Je)):re&&(re.d(1),re=null)},i:Z,o:Z,d(L){L&&(Q(e),Q(pt),Q(Ke),Q(Je)),de.d(),le&&le.d(),Ae(te,L),ge.d(),t[26](null),ne&&ne.d(),se&&se.d(L),re&&re.d(L),ht=!1,ie(Bt)}}}const Nn=()=>{};function Pn(t,e,l){let n,s,r,o,a;Ct(t,ct,w=>l(21,a=w));let{collection:u}=e,{t:c}=e,{language:v}=e,g=null,p=[],m=[];Il(async()=>{await q()});async function q(){try{p=await Et(a);const w=[...p].sort((R,J)=>{const G=parseInt(R.localId||"0");return parseInt(J.localId||"0")-G});l(4,m=w.slice(0,5))}catch(w){console.error("Error loading rare cards:",w)}}const h=ut();let b,A=null,y=!1;function _(){try{En(),S(c.collectionExported,"success")}catch{S(c.exportFailed,"error")}}function E(){b.click()}async function I(w){var G;const R=w.target,J=(G=R.files)==null?void 0:G[0];if(J){try{const ee=await In(J);ee.success?(S(c.collectionImported,"success"),h("refresh")):S(ee.error||c.importFailed,"error")}catch{S(c.importFailed,"error")}R.value=""}}function S(w,R){l(6,A={text:w,type:R}),setTimeout(()=>{l(6,A=null)},3e3)}function N(){l(7,y=!0)}function H(){l(7,y=!1)}function P(){try{nn(),l(7,y=!1),S(c.collectionCleared,"success"),h("refresh")}catch{S(c.clearFailed,"error")}}function D(w){const R=w.target;h("languageChange",R.value)}function F(w){l(3,g=w)}function K(){l(3,g=null)}function x(w){Ut.call(this,t,w)}function Y(w){Ut.call(this,t,w)}const V=w=>F({...w,collectedAt:new Date().toISOString()}),O=w=>F(w);function W(w){St[w?"unshift":"push"](()=>{b=w,l(5,b)})}const U=w=>w.key==="Escape"&&K(),B=w=>w.key==="Escape"&&H();return t.$$set=w=>{"collection"in w&&l(0,u=w.collection),"t"in w&&l(1,c=w.t),"language"in w&&l(2,v=w.language)},t.$$.update=()=>{t.$$.dirty[0]&1&&l(11,n=u.stats.totalQuestions>0?Math.round(u.stats.correctAnswers/u.stats.totalQuestions*100):0),t.$$.dirty[0]&1&&l(10,s=16e3-(u.stats.totalHpDefeated||0)),t.$$.dirty[0]&2097153&&l(9,r=u.unlockedRareSets&&u.unlockedRareSets[a]||!1),t.$$.dirty[0]&1&&l(8,o=Math.min(u.stats.totalHpDefeated/16e3*100,100))},[u,c,v,g,m,b,A,y,o,r,s,n,_,E,I,N,H,P,D,F,K,a,x,Y,V,O,W,U,B]}class Rn extends Me{constructor(e){super(),Ie(this,e,Pn,Dn,_e,{collection:0,t:1,language:2},null,[-1,-1])}}function Fn(t){let e,l,n,s,r;return{c(){e=d("div"),l=d("div"),n=k(),s=d("p"),r=C(t[0]),f(l,"class","spinner svelte-1lxornd"),f(s,"class","svelte-1lxornd"),f(e,"class","loading-view svelte-1lxornd")},m(o,a){T(o,e,a),i(e,l),i(e,n),i(e,s),i(s,r)},p(o,[a]){a&1&&M(r,o[0])},i:Z,o:Z,d(o){o&&Q(e)}}}function On(t,e,l){let{message:n="Loading..."}=e;return t.$$set=s=>{"message"in s&&l(0,n=s.message)},[n]}class Bn extends Me{constructor(e){super(),Ie(this,e,On,Fn,_e,{message:0})}}function zn(t){let e,l,n,s,r,o,a,u,c,v,g;return{c(){e=d("div"),l=d("div"),l.textContent="⚠️",n=k(),s=d("h2"),s.textContent="Oops!",r=k(),o=d("p"),a=C(t[0]),u=k(),c=d("button"),c.textContent="Try Again",f(l,"class","error-icon svelte-na0xmw"),f(s,"class","svelte-na0xmw"),f(o,"class","svelte-na0xmw"),f(c,"class","btn-primary"),f(e,"class","error-view svelte-na0xmw")},m(p,m){T(p,e,m),i(e,l),i(e,n),i(e,s),i(e,r),i(e,o),i(o,a),i(e,u),i(e,c),v||(g=j(c,"click",t[1]),v=!0)},p(p,[m]){m&1&&M(a,p[0])},i:Z,o:Z,d(p){p&&Q(e),v=!1,g()}}}function jn(t,e,l){let{message:n="Something went wrong"}=e;const s=ut();function r(){s("retry")}return t.$$set=o=>{"message"in o&&l(0,n=o.message)},[n,r]}class Hn extends Me{constructor(e){super(),Ie(this,e,jn,zn,_e,{message:0})}}function Yn(t,e,l){const n=t.slice();return n[32]=e[l],n}function Un(t){let e,l;return e=new Rn({props:{collection:t[4],t:t[14],language:t[0]}}),e.$on("refresh",t[24]),e.$on("languageChange",t[26]),{c(){He(e.$$.fragment)},m(n,s){qe(e,n,s),l=!0},p(n,s){const r={};s[0]&16&&(r.collection=n[4]),s[0]&16384&&(r.t=n[14]),s[0]&1&&(r.language=n[0]),e.$set(r)},i(n){l||(ue(e.$$.fragment,n),l=!0)},o(n){pe(e.$$.fragment,n),l=!1},d(n){Ee(e,n)}}}function Vn(t){let e,l,n,s;const r=[Gn,Jn,Kn,Wn],o=[];function a(u,c){return u[1]==="loading"?0:u[1]==="quiz"&&u[2]?1:u[1]==="result"&&u[2]?2:u[1]==="error"?3:-1}return~(e=a(t))&&(l=o[e]=r[e](t)),{c(){l&&l.c(),n=It()},m(u,c){~e&&o[e].m(u,c),T(u,n,c),s=!0},p(u,c){let v=e;e=a(u),e===v?~e&&o[e].p(u,c):(l&&(Ql(),pe(o[v],1,1,()=>{o[v]=null}),Tl()),~e?(l=o[e],l?l.p(u,c):(l=o[e]=r[e](u),l.c()),ue(l,1),l.m(n.parentNode,n)):l=null)},i(u){s||(ue(l),s=!0)},o(u){pe(l),s=!1},d(u){u&&Q(n),~e&&o[e].d(u)}}}function Wn(t){let e,l;return e=new Hn({props:{message:t[8]}}),e.$on("retry",t[21]),{c(){He(e.$$.fragment)},m(n,s){qe(e,n,s),l=!0},p(n,s){const r={};s[0]&256&&(r.message=n[8]),e.$set(r)},i(n){l||(ue(e.$$.fragment,n),l=!0)},o(n){pe(e.$$.fragment,n),l=!1},d(n){Ee(e,n)}}}function Kn(t){let e,l;return e=new qn({props:{isCorrect:t[5],correctAnswer:t[2].correctAnswer,userAnswer:t[6],wonCard:t[7],t:t[14],needsStreak:t[12],streakProgress:t[13],currentStreak:t[4].currentStreak||0}}),e.$on("next",t[20]),{c(){He(e.$$.fragment)},m(n,s){qe(e,n,s),l=!0},p(n,s){const r={};s[0]&32&&(r.isCorrect=n[5]),s[0]&4&&(r.correctAnswer=n[2].correctAnswer),s[0]&64&&(r.userAnswer=n[6]),s[0]&128&&(r.wonCard=n[7]),s[0]&16384&&(r.t=n[14]),s[0]&4096&&(r.needsStreak=n[12]),s[0]&8192&&(r.streakProgress=n[13]),s[0]&16&&(r.currentStreak=n[4].currentStreak||0),e.$set(r)},i(n){l||(ue(e.$$.fragment,n),l=!0)},o(n){pe(e.$$.fragment,n),l=!1},d(n){Ee(e,n)}}}function Jn(t){var v;let e,l,n,s,r,o,a,u=oe(wt),c=[];for(let g=0;g<u.length;g+=1)c[g]=Xn(Yn(t,u,g));return s=new kn({props:{question:t[2],t:t[14],currentSet:((v=wt.find(t[25]))==null?void 0:v.name)||""}}),s.$on("answer",t[19]),{c(){e=d("div"),l=d("select");for(let g=0;g<c.length;g+=1)c[g].c();n=k(),He(s.$$.fragment),f(l,"class","set-selector svelte-162mefo"),f(e,"class","set-selector-container svelte-162mefo")},m(g,p){T(g,e,p),i(e,l);for(let m=0;m<c.length;m+=1)c[m]&&c[m].m(l,null);at(l,t[15]),T(g,n,p),qe(s,g,p),r=!0,o||(a=j(l,"change",t[16]),o=!0)},p(g,p){var q;(!r||p[0]&32768)&&at(l,g[15]);const m={};p[0]&4&&(m.question=g[2]),p[0]&16384&&(m.t=g[14]),p[0]&2048&&(m.currentSet=((q=wt.find(g[25]))==null?void 0:q.name)||""),s.$set(m)},i(g){r||(ue(s.$$.fragment,g),r=!0)},o(g){pe(s.$$.fragment,g),r=!1},d(g){g&&(Q(e),Q(n)),Ae(c,g),Ee(s,g),o=!1,a()}}}function Gn(t){let e,l;return e=new Bn({props:{message:t[14].loading}}),{c(){He(e.$$.fragment)},m(n,s){qe(e,n,s),l=!0},p(n,s){const r={};s[0]&16384&&(r.message=n[14].loading),e.$set(r)},i(n){l||(ue(e.$$.fragment,n),l=!0)},o(n){pe(e.$$.fragment,n),l=!1},d(n){Ee(e,n)}}}function Xn(t){let e;return{c(){e=d("option"),e.textContent=`${t[32].name}`,e.__value=t[32].id,Se(e,e.__value),f(e,"class","svelte-162mefo")},m(l,n){T(l,e,n)},p:Z,d(l){l&&Q(e)}}}function yl(t){let e,l,n,s=t[0]==="en"?"Choose Your Language":"Velg språk",r,o,a,u=t[0]==="en"?"You can change this anytime in My Collection":"Du kan endre dette når som helst i Min samling",c,v,g,p,m,q,h,b;return{c(){e=d("div"),l=d("div"),n=d("h2"),r=C(s),o=k(),a=d("p"),c=C(u),v=k(),g=d("div"),p=d("button"),p.innerHTML='<span class="flag svelte-162mefo">🇬🇧</span> <span>English</span>',m=k(),q=d("button"),q.innerHTML='<span class="flag svelte-162mefo">🇳🇴</span> <span>Norsk</span>',f(n,"class","svelte-162mefo"),f(a,"class","svelte-162mefo"),f(p,"class","language-btn svelte-162mefo"),f(q,"class","language-btn svelte-162mefo"),f(g,"class","language-buttons svelte-162mefo"),f(l,"class","dialog language-dialog svelte-162mefo"),f(e,"class","dialog-overlay svelte-162mefo"),f(e,"role","button"),f(e,"tabindex","-1")},m(A,y){T(A,e,y),i(e,l),i(l,n),i(n,r),i(l,o),i(l,a),i(a,c),i(l,v),i(l,g),i(g,p),i(g,m),i(g,q),h||(b=[j(p,"click",t[27]),j(q,"click",t[28])],h=!0)},p(A,y){y[0]&1&&s!==(s=A[0]==="en"?"Choose Your Language":"Velg språk")&&M(r,s),y[0]&1&&u!==(u=A[0]==="en"?"You can change this anytime in My Collection":"Du kan endre dette når som helst i Min samling")&&M(c,u)},d(A){A&&Q(e),h=!1,ie(b)}}}function Zn(t){var B;let e,l,n,s,r=t[14].appTitle+"",o,a,u,c,v=t[14].playQuiz+"",g,p,m,q=t[14].myCollection+"",h,b,A=(((B=t[4])==null?void 0:B.cards.length)||0)+"",y,_,E=t[3].length+"",I,S,N,H,P,D,F,K,x,Y;const V=[Vn,Un],O=[];function W(w,R){return w[9]==="quiz"?0:1}P=W(t),D=O[P]=V[P](t);let U=t[10]&&yl(t);return{c(){e=d("div"),l=d("header"),n=d("div"),s=d("h1"),o=C(r),a=k(),u=d("nav"),c=d("button"),g=C(v),p=k(),m=d("button"),h=C(q),b=C(" ("),y=C(A),_=C("/"),I=C(E),S=C(")"),N=k(),H=d("main"),D.c(),F=k(),U&&U.c(),f(s,"class","app-title svelte-162mefo"),f(c,"class","nav-btn svelte-162mefo"),X(c,"active",t[9]==="quiz"),f(m,"class","nav-btn svelte-162mefo"),X(m,"active",t[9]==="collection"),f(u,"class","svelte-162mefo"),f(n,"class","header-content svelte-162mefo"),f(l,"class","app-header svelte-162mefo"),f(H,"class","svelte-162mefo"),f(e,"class","app svelte-162mefo")},m(w,R){T(w,e,R),i(e,l),i(l,n),i(n,s),i(s,o),i(n,a),i(n,u),i(u,c),i(c,g),i(u,p),i(u,m),i(m,h),i(m,b),i(m,y),i(m,_),i(m,I),i(m,S),i(e,N),i(e,H),O[P].m(H,null),i(e,F),U&&U.m(e,null),K=!0,x||(Y=[j(c,"click",t[23]),j(m,"click",t[22])],x=!0)},p(w,R){var G;(!K||R[0]&16384)&&r!==(r=w[14].appTitle+"")&&M(o,r),(!K||R[0]&16384)&&v!==(v=w[14].playQuiz+"")&&M(g,v),(!K||R[0]&512)&&X(c,"active",w[9]==="quiz"),(!K||R[0]&16384)&&q!==(q=w[14].myCollection+"")&&M(h,q),(!K||R[0]&16)&&A!==(A=(((G=w[4])==null?void 0:G.cards.length)||0)+"")&&M(y,A),(!K||R[0]&8)&&E!==(E=w[3].length+"")&&M(I,E),(!K||R[0]&512)&&X(m,"active",w[9]==="collection");let J=P;P=W(w),P===J?O[P].p(w,R):(Ql(),pe(O[J],1,1,()=>{O[J]=null}),Tl(),D=O[P],D?D.p(w,R):(D=O[P]=V[P](w),D.c()),ue(D,1),D.m(H,null)),w[10]?U?U.p(w,R):(U=yl(w),U.c(),U.m(e,null)):U&&(U.d(1),U=null)},i(w){K||(ue(D),K=!0)},o(w){pe(D),K=!1},d(w){w&&Q(e),O[P].d(),U&&U.d(),x=!1,ie(Y)}}}function $n(t,e,l){let n,s,r;Ct(t,ot,B=>l(0,s=B)),Ct(t,ct,B=>l(15,r=B));let o="loading",a=null,u=[],c,v=!1,g=0,p=0,m=null,q="",h="quiz",b=!1,A=r,y=!1,_=0;Il(()=>{l(4,c=me()),localStorage.getItem("tcg-seen-language-dialog")?N():l(10,b=!0)});function E(B){const w=B.target;ct.set(w.value),l(11,A=w.value),l(3,u=[]),N()}function I(B){ot.set(B)}function S(B){ot.set(B),localStorage.setItem("tcg-seen-language-dialog","true"),l(10,b=!1),N()}async function N(){var B;try{l(1,o="loading"),u.length===0&&l(3,u=await Et(A));const w=[...u].sort((ce,Ze)=>{const Le=parseInt(ce.localId||"0");return parseInt(Ze.localId||"0")-Le}),R=new Set(w.slice(0,5).map(ce=>ce.id)),J=new Set(c.cards.map(ce=>ce.id)),G=u.filter(ce=>!J.has(ce.id)&&!R.has(ce.id));if(G.length===0)throw new Error("Congratulations! You have collected all cards from this set!");const ee=xl(G),ke=await $l(ee.id,A),ae=((B=ke.rarity)==null?void 0:B.toLowerCase())||"common",Te=cn(ke,n,ae!=="common"&&ae!=="rare"&&ae!=="double rare");if(!Te)throw new Error("Could not generate a valid question. Please try again.");l(12,y=ae!=="common"),c.streakCard&&c.streakCard.id===ke.id?l(13,_=c.currentStreak||0):l(13,_=0),l(2,a=Te),l(1,o="quiz")}catch(w){console.error("Error loading question:",w),l(8,q=w instanceof Error?w.message:"Failed to load question"),l(1,o="error")}}async function H(){c.unlockedRareSets||l(4,c.unlockedRareSets={},c),!c.unlockedRareSets[A]&&c.stats.totalHpDefeated>=16e3&&(u.length===0&&l(3,u=await Et(A)),[...u].sort((R,J)=>{const G=parseInt(R.localId||"0");return parseInt(J.localId||"0")-G}).slice(0,5).forEach(R=>{const J={id:R.id,name:R.name,image:R.image,hp:R.hp,types:R.types,rarity:R.rarity,collectedAt:new Date().toISOString()};c.cards.some(ee=>ee.id===R.id)||c.cards.push(J)}),l(4,c.unlockedRareSets[A]=!0,c),je(c))}function P(B){var R,J;if(!a)return;l(6,g=B.detail.firstAnswer),p=B.detail.secondAnswer||0,l(5,v=un(a,g,p));const w=v&&a.card.hp?a.card.hp:0;if(ln(v,w),l(7,m=null),v){let G=!1;if(y&&!a.secondQuestion?(l(4,c=me()),((R=c.streakCard)==null?void 0:R.id)===a.card.id?l(4,c.currentStreak=(c.currentStreak||0)+1,c):(l(4,c.streakCard=a.card,c),l(4,c.currentStreak=1,c)),c.currentStreak>=2&&(G=!0,l(4,c.currentStreak=0,c),l(4,c.streakCard=void 0,c)),je(c)):G=!0,G){const ee={id:a.card.id,name:a.card.name,image:a.card.image,hp:a.card.hp,types:a.card.types,rarity:a.card.rarity,collectedAt:new Date().toISOString()};tn(ee)&&l(7,m=a.card)}}else l(4,c=me()),y&&((J=c.streakCard)==null?void 0:J.id)===a.card.id&&(l(4,c.currentStreak=0,c),l(4,c.streakCard=void 0,c),je(c));l(4,c=me()),v&&(H(),l(4,c=me())),l(1,o="result")}function D(){N()}function F(){N()}function K(){l(9,h="collection"),l(4,c=me())}function x(){l(9,h="quiz")}function Y(){l(4,c=me())}const V=B=>B.id===A,O=B=>I(B.detail),W=()=>S("en"),U=()=>S("no");return t.$$.update=()=>{t.$$.dirty[0]&1&&l(14,n=gn(s))},[s,o,a,u,c,v,g,m,q,h,b,A,y,_,n,r,E,I,S,P,D,F,K,x,Y,V,O,W,U]}class xn extends Me{constructor(e){super(),Ie(this,e,$n,Zn,_e,{},null,[-1,-1])}}new xn({target:document.getElementById("app")});
