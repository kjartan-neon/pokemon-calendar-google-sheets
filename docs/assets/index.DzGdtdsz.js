var Mn=Object.defineProperty;var qn=(t,e,l)=>e in t?Mn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var el=(t,e,l)=>qn(t,typeof e!="symbol"?e+"":e,l);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function l(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=l(s);fetch(s.href,o)}})();function ee(){}function gn(t){return t()}function Il(){return Object.create(null)}function _e(t){t.forEach(gn)}function vn(t){return typeof t=="function"}function je(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Pt;function qe(t,e){return t===e?!0:(Pt||(Pt=document.createElement("a")),Pt.href=e,t===Pt.href)}function zn(t){return Object.keys(t).length===0}function Qn(t,...e){if(t==null){for(const n of e)n(void 0);return ee}const l=t.subscribe(...e);return l.unsubscribe?()=>l.unsubscribe():l}function _t(t,e,l){t.$$.on_destroy.push(Qn(e,l))}function r(t,e){t.appendChild(e)}function z(t,e,l){t.insertBefore(e,l||null)}function M(t){t.parentNode&&t.parentNode.removeChild(t)}function Ye(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function d(t){return document.createElement(t)}function h(t){return document.createTextNode(t)}function k(){return h(" ")}function il(){return h("")}function F(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function pn(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function a(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function jt(t){return t===""?null:+t}function En(t){return Array.from(t.childNodes)}function A(t,e){e=""+e,t.data!==e&&(t.data=e)}function pe(t,e){t.value=e??""}function Le(t,e,l,n){l==null?t.style.removeProperty(e):t.style.setProperty(e,l,"")}function Re(t,e,l){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e){s.selected=!0;return}}t.selectedIndex=-1}function J(t,e,l){t.classList.toggle(e,!!l)}function Ln(t,e,{bubbles:l=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:l,cancelable:n})}let kt;function ht(t){kt=t}function _n(){if(!kt)throw new Error("Function called outside component initialization");return kt}function hn(t){_n().$$.on_mount.push(t)}function Ot(){const t=_n();return(e,l,{cancelable:n=!1}={})=>{const s=t.$$.callbacks[e];if(s){const o=Ln(e,l,{cancelable:n});return s.slice().forEach(i=>{i.call(t,o)}),!o.defaultPrevented}return!0}}function Pl(t,e){const l=t.$$.callbacks[e.type];l&&l.slice().forEach(n=>n.call(this,e))}const it=[],nl=[];let at=[];const Nl=[],Tn=Promise.resolve();let sl=!1;function In(){sl||(sl=!0,Tn.then(kn))}function rl(t){at.push(t)}const tl=new Set;let rt=0;function kn(){if(rt!==0)return;const t=kt;do{try{for(;rt<it.length;){const e=it[rt];rt++,ht(e),Pn(e.$$)}}catch(e){throw it.length=0,rt=0,e}for(ht(null),it.length=0,rt=0;nl.length;)nl.pop()();for(let e=0;e<at.length;e+=1){const l=at[e];tl.has(l)||(tl.add(l),l())}at.length=0}while(it.length);for(;Nl.length;)Nl.pop()();sl=!1,tl.clear(),ht(t)}function Pn(t){if(t.fragment!==null){t.update(),_e(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(rl)}}function Nn(t){const e=[],l=[];at.forEach(n=>t.indexOf(n)===-1?e.push(n):l.push(n)),l.forEach(n=>n()),at=e}const Nt=new Set;let He;function bn(){He={r:0,c:[],p:He}}function wn(){He.r||_e(He.c),He=He.p}function ye(t,e){t&&t.i&&(Nt.delete(t),t.i(e))}function ze(t,e,l,n){if(t&&t.o){if(Nt.has(t))return;Nt.add(t),He.c.push(()=>{Nt.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}else n&&n()}function be(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ut(t){t&&t.c()}function Ke(t,e,l){const{fragment:n,after_update:s}=t.$$;n&&n.m(e,l),rl(()=>{const o=t.$$.on_mount.map(gn).filter(vn);t.$$.on_destroy?t.$$.on_destroy.push(...o):_e(o),t.$$.on_mount=[]}),s.forEach(rl)}function Ue(t,e){const l=t.$$;l.fragment!==null&&(Nn(l.after_update),_e(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function Dn(t,e){t.$$.dirty[0]===-1&&(it.push(t),In(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function We(t,e,l,n,s,o,i=null,u=[-1]){const f=kt;ht(t);const c=t.$$={fragment:null,ctx:[],props:o,update:ee,not_equal:s,bound:Il(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:Il(),dirty:u,skip_bound:!1,root:e.target||f.$$.root};i&&i(c.root);let m=!1;if(c.ctx=l?l(t,e.props||{},(v,p,...g)=>{const b=g.length?g[0]:p;return c.ctx&&s(c.ctx[v],c.ctx[v]=b)&&(!c.skip_bound&&c.bound[v]&&c.bound[v](b),m&&Dn(t,v)),p}):[],c.update(),m=!0,_e(c.before_update),c.fragment=n?n(c.ctx):!1,e.target){if(e.hydrate){const v=En(e.target);c.fragment&&c.fragment.l(v),v.forEach(M)}else c.fragment&&c.fragment.c();e.intro&&ye(t.$$.fragment),Ke(t,e.target,e.anchor),kn()}ht(f)}class Ge{constructor(){el(this,"$$");el(this,"$$set")}$destroy(){Ue(this,1),this.$destroy=ee}$on(e,l){if(!vn(l))return ee;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const s=n.indexOf(l);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!zn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Rn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Rn);const yn="https://api.tcgdex.net/v2/en";function Cn(t,e){const l=t.split("-")[1];return`https://assets.tcgdex.net/en/${jn(e)}/${e}/${l}/high.webp`}function jn(t){return t.startsWith("swsh")?"swsh":t.startsWith("sv")?"sv":t.startsWith("me")?"base":"swsh"}async function ol(t){try{const e=await fetch(`${yn}/sets/${t}`);if(!e.ok)throw new Error("Failed to fetch cards from set");return((await e.json()).cards||[]).map(s=>({id:s.id,localId:s.localId,name:s.name,image:Cn(s.id,t)}))}catch(e){throw console.error("Error fetching cards from set:",e),e}}async function Fn(t,e){try{const l=await fetch(`${yn}/cards/${t}`);if(!l.ok)throw new Error("Failed to fetch card details");return{...await l.json(),image:Cn(t,e)}}catch(l){throw console.error("Error fetching card details:",l),l}}function On(t){const e=Math.floor(Math.random()*t.length);return t[e]}const al="pokemon-tcg-collection",Sn="2.0";function Bn(){return{totalQuestions:0,correctAnswers:0,incorrectAnswers:0,totalHpDefeated:0}}function ll(){return{cards:[],stats:Bn(),version:Sn}}function Me(){try{const t=localStorage.getItem(al);if(!t)return ll();const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?(console.warn("Invalid collection format, resetting..."),ll()):(e.stats.totalHpDefeated||(e.stats.totalHpDefeated=0),e.currentStreak||(e.currentStreak=0),e.unlockedRareSets||(e.unlockedRareSets={}),e)}catch(t){return console.error("Error loading collection from local storage:",t),ll()}}function ct(t){try{const e={...t,version:Sn};localStorage.setItem(al,JSON.stringify(e))}catch(e){throw console.error("Error saving collection to local storage:",e),new Error("Failed to save collection")}}function Vn(t){try{const e=Me();return e.cards.some(n=>n.id===t.id)?!1:(e.cards.push(t),ct(e),!0)}catch(e){return console.error("Error adding card to collection:",e),!1}}function Hn(t,e){try{const l=Me();l.stats.totalQuestions++,t?(l.stats.correctAnswers++,e&&(l.stats.totalHpDefeated+=e)):l.stats.incorrectAnswers++,ct(l)}catch(l){console.error("Error updating stats:",l)}}function Yn(){try{localStorage.removeItem(al)}catch(t){console.error("Error clearing collection:",t)}}function Kn(){const t=Me();return JSON.stringify(t,null,2)}function Un(t){try{const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?{success:!1,error:"Invalid collection format"}:!e.stats.totalQuestions===void 0||!e.stats.correctAnswers===void 0||!e.stats.incorrectAnswers===void 0?{success:!1,error:"Invalid stats format"}:(ct(e),{success:!0})}catch(e){return console.error("Error importing collection:",e),{success:!1,error:"Failed to parse JSON file"}}}function Dl(t){const e=Math.floor(Math.random()*9)+1,l=Math.floor(Math.random()*9)+1,n=e+l;return{question:t.mathQuestion(e,l,"+"),answer:n}}function Rl(t){const e=["+","-"],l=e[Math.floor(Math.random()*e.length)];let n,s;if(l==="+"){const o=Math.floor(Math.random()*50)+10,i=Math.floor(Math.random()*50)+10;n=o+i,s=t.mathQuestion(o,i,"+")}else{const o=Math.floor(Math.random()*50)+10,i=Math.floor(Math.random()*50)+10;n=o+i;const u=n;n=o,s=t.mathQuestion(u,i,"-")}return{question:s,answer:n}}function Wn(t){const e=Math.floor(Math.random()*50)+10,l=Math.floor(Math.random()*50)+10,n=["+","-"],s=n[Math.floor(Math.random()*n.length)];let o,i;if(s==="+")o=e+l,i=t.mathQuestion(e,l,"+");else{o=e+l;const u=o;o=e,i=t.mathQuestion(u,l,"-")}return{question:i,answer:o}}function Gn(t){const e=Math.floor(Math.random()*50)+10,l=Math.floor(Math.random()*50)+10,n=e+l;return{question:t.mathQuestion(e,l,"+"),answer:n}}function Jn(t,e,l=!1,n=4){if(!t)return null;let s,o,i=!1,u,f;if(n===1){const c=Dl(e);s=c.question,o=c.answer}else if(n===2||n===3){const c=Rl(e);s=c.question,o=c.answer}else if(t.hp&&t.hp>0){i=!0;const c=[10,20,30,40,50,60,60,80,120,300][Math.floor(Math.random()*5)];o=Math.ceil(t.hp/c),s=e.damageQuestion(c)}else{const c=Wn(e);s=c.question,o=c.answer}if(l)if(n===1){const c=Dl(e);u=c.question,f=c.answer}else if(n===2||n===3){const c=Rl(e);u=c.question,f=c.answer}else{const c=Gn(e);u=c.question,f=c.answer}return{card:t,questionText:s,correctAnswer:o,isPokemon:i,secondQuestion:u,secondAnswer:f}}function Zn(t,e,l){const n=e===t.correctAnswer;if(t.secondQuestion&&t.secondAnswer!==void 0){const s=l===t.secondAnswer;return n&&s}return n}const ot=[];function cl(t,e=ee){let l;const n=new Set;function s(u){if(je(t,u)&&(t=u,l)){const f=!ot.length;for(const c of n)c[1](),ot.push(c,t);if(f){for(let c=0;c<ot.length;c+=2)ot[c][0](ot[c+1]);ot.length=0}}}function o(u){s(u(t))}function i(u,f=ee){const c=[u,f];return n.add(c),n.size===1&&(l=e(s,o)||ee),u(t),()=>{n.delete(c),n.size===0&&l&&(l(),l=null)}}return{set:s,update:o,subscribe:i}}const Dt=[{id:"swsh3",name:"Sword & Shield - Darkness Ablaze"},{id:"sv05",name:"Scarlet & Violet - Temporal Forces"},{id:"sv06.5",name:"Scarlet & Violet - Shrouded Fable"}],An="tcg-math-settings";function Xn(){return{language:"en",selectedSet:"swsh3",klassetrinn:4}}function Bt(){try{const t=localStorage.getItem(An);if(t){const e=JSON.parse(t);return{language:e.language||"en",selectedSet:e.selectedSet||"swsh3",klassetrinn:e.klassetrinn||4}}}catch(t){console.error("Error loading settings:",t)}return Xn()}function ul(t){try{localStorage.setItem(An,JSON.stringify(t))}catch(e){console.error("Error saving settings:",e)}}const fl=Bt(),Rt=cl(fl.language),Ft=cl(fl.selectedSet),bt=cl(fl.klassetrinn);Rt.subscribe(t=>{const e=Bt();ul({...e,language:t})});Ft.subscribe(t=>{const e=Bt();ul({...e,selectedSet:t})});bt.subscribe(t=>{const e=Bt();ul({...e,klassetrinn:t})});const $n={en:{appTitle:"16k Pokemon Math Challenge",quizTitle:"TCG Math Challenge",playQuiz:"Play Quiz",myCollection:"My Collection",selectSet:"Select Set",selectLanguage:"Language",setInfo:"Collecting Set",enterAnswer:"Enter your answer",submitAnswer:"Submit Answer",nextQuestion:"Next Question",correct:"Correct!",notQuite:"Not quite!",correctMessage:"Great job! The answer was",incorrectMessage:"You answered",encouragement:"Try again with the next question!",youWonThisCard:"You won this card!",cardsCollected:"Cards Collected",questionsAnswered:"Questions Answered",correctAnswers:"Correct Answers",accuracy:"Accuracy",noCardsYet:"No cards yet!",noCardsDescription:"Answer questions correctly to start building your collection.",exportBackup:"Export Backup",importBackup:"Import Backup",clearThisSet:"Clear This Set",clearCollectionTitle:"Clear Collection?",clearCollectionMessage:"Are you sure you want to clear your entire collection? This action cannot be undone.",cancel:"Cancel",clearCollection:"Clear Collection",collectionExported:"Collection exported successfully!",collectionImported:"Collection imported successfully!",collectionCleared:"Collection cleared successfully!",exportFailed:"Failed to export collection",importFailed:"Failed to import collection",clearFailed:"Failed to clear collection",hit:"hit",hits:"hits",loading:"Loading new question...",yourCollection:"Your Collection",language:"Language",gradeLevel:"Grade Level",damageQuestion:t=>`Your Pok√©mon deals ${t} damage each turn. How many turns does it take to defeat this Pok√©mon?`,mathQuestion:(t,e,l)=>`What is ${t} ${l} ${e}?`},no:{appTitle:"16k Pok√©mon Matteutfordring",quizTitle:"TCG Matte Utfordring",playQuiz:"Spill Quiz",myCollection:"Min Samling",selectSet:"Velg Sett",selectLanguage:"Spr√•k",setInfo:"Samler Sett",enterAnswer:"Skriv inn svaret ditt",submitAnswer:"Send Inn Svar",nextQuestion:"Neste Sp√∏rsm√•l",correct:"Riktig!",notQuite:"Ikke helt!",correctMessage:"Bra jobbet! Svaret var",incorrectMessage:"Du svarte",encouragement:"Pr√∏v igjen med neste sp√∏rsm√•l!",youWonThisCard:"Du vant dette kortet!",cardsCollected:"Kort Samlet",questionsAnswered:"Sp√∏rsm√•l Besvart",correctAnswers:"Riktige Svar",accuracy:"N√∏yaktighet",noCardsYet:"Ingen kort enn√•!",noCardsDescription:"Svar riktig p√• sp√∏rsm√•l for √• begynne √• bygge samlingen din.",exportBackup:"Eksporter Backup",importBackup:"Importer Backup",clearThisSet:"T√∏m Dette Settet",clearCollectionTitle:"T√∏m Samling?",clearCollectionMessage:"Er du sikker p√• at du vil t√∏mme hele samlingen din? Denne handlingen kan ikke angres.",cancel:"Avbryt",clearCollection:"T√∏m Samling",collectionExported:"Samling eksportert!",collectionImported:"Samling importert!",collectionCleared:"Samling t√∏mt!",exportFailed:"Kunne ikke eksportere samling",importFailed:"Kunne ikke importere samling",clearFailed:"Kunne ikke t√∏mme samling",hit:"treff",hits:"treff",loading:"Laster nytt sp√∏rsm√•l...",yourCollection:"Din Samling",language:"Spr√•k",gradeLevel:"Klassetrinn",damageQuestion:t=>`Din Pok√©mon gj√∏r ${t} skade hver runde. Hvor mange runder tar det √• beseire denne Pok√©monen?`,mathQuestion:(t,e,l)=>`Hva er ${t} ${l} ${e}?`}};function xn(t){return $n[t]}function jl(t,e,l){const n=t.slice();return n[4]=e[l],n}function Fl(t){let e,l,n=t[0].rarity+"",s;return{c(){e=d("div"),l=d("span"),s=h(n),a(l,"class","rarity-badge svelte-1gymiiy"),a(e,"class","card-rarity svelte-1gymiiy")},m(o,i){z(o,e,i),r(e,l),r(l,s)},p(o,i){i&1&&n!==(n=o[0].rarity+"")&&A(s,n)},d(o){o&&M(e)}}}function Ol(t){let e,l,n,s=be(t[0].attacks),o=[];for(let i=0;i<s.length;i+=1)o[i]=Vl(jl(t,s,i));return{c(){e=d("div"),l=d("h4"),l.textContent="Attacks:",n=k();for(let i=0;i<o.length;i+=1)o[i].c();a(l,"class","svelte-1gymiiy"),a(e,"class","card-attacks svelte-1gymiiy")},m(i,u){z(i,e,u),r(e,l),r(e,n);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null)},p(i,u){if(u&5){s=be(i[0].attacks);let f;for(f=0;f<s.length;f+=1){const c=jl(i,s,f);o[f]?o[f].p(c,u):(o[f]=Vl(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=s.length}},d(i){i&&M(e),Ye(o,i)}}}function Bl(t){let e,l=t[4].damage+"",n;return{c(){e=d("span"),n=h(l),a(e,"class","attack-damage svelte-1gymiiy")},m(s,o){z(s,e,o),r(e,n)},p(s,o){o&1&&l!==(l=s[4].damage+"")&&A(n,l)},d(s){s&&M(e)}}}function Vl(t){let e,l,n=t[4].name+"",s,o,i,u=t[4].damage&&Bl(t);return{c(){e=d("div"),l=d("span"),s=h(n),o=k(),u&&u.c(),i=k(),a(l,"class","attack-name svelte-1gymiiy"),a(e,"class","attack svelte-1gymiiy"),J(e,"highlighted",t[2]===t[4].name)},m(f,c){z(f,e,c),r(e,l),r(l,s),r(e,o),u&&u.m(e,null),r(e,i)},p(f,c){c&1&&n!==(n=f[4].name+"")&&A(s,n),f[4].damage?u?u.p(f,c):(u=Bl(f),u.c(),u.m(e,i)):u&&(u.d(1),u=null),c&5&&J(e,"highlighted",f[2]===f[4].name)},d(f){f&&M(e),u&&u.d()}}}function es(t){let e,l,n,s,o,i,u,f,c=t[0].name+"",m,v,p,g=t[3]&&t[0].rarity&&Fl(t),b=t[1]&&t[0].attacks&&t[0].attacks.length>0&&Ol(t);return{c(){e=d("div"),l=d("div"),n=d("img"),i=k(),u=d("div"),f=d("h3"),m=h(c),v=k(),g&&g.c(),p=k(),b&&b.c(),qe(n.src,s=t[0].image)||a(n,"src",s),a(n,"alt",o=t[0].name),a(n,"class","svelte-1gymiiy"),a(l,"class","card-image svelte-1gymiiy"),a(f,"class","card-name svelte-1gymiiy"),a(u,"class","card-info svelte-1gymiiy"),a(e,"class","pokemon-card svelte-1gymiiy")},m(_,y){z(_,e,y),r(e,l),r(l,n),r(e,i),r(e,u),r(u,f),r(f,m),r(u,v),g&&g.m(u,null),r(u,p),b&&b.m(u,null)},p(_,[y]){y&1&&!qe(n.src,s=_[0].image)&&a(n,"src",s),y&1&&o!==(o=_[0].name)&&a(n,"alt",o),y&1&&c!==(c=_[0].name+"")&&A(m,c),_[3]&&_[0].rarity?g?g.p(_,y):(g=Fl(_),g.c(),g.m(u,p)):g&&(g.d(1),g=null),_[1]&&_[0].attacks&&_[0].attacks.length>0?b?b.p(_,y):(b=Ol(_),b.c(),b.m(u,null)):b&&(b.d(1),b=null)},i:ee,o:ee,d(_){_&&M(e),g&&g.d(),b&&b.d()}}}function ts(t,e,l){let{card:n}=e,{showAttacks:s=!1}=e,{highlightedAttack:o=null}=e,{showRarity:i=!1}=e;return t.$$set=u=>{"card"in u&&l(0,n=u.card),"showAttacks"in u&&l(1,s=u.showAttacks),"highlightedAttack"in u&&l(2,o=u.highlightedAttack),"showRarity"in u&&l(3,i=u.showRarity)},[n,s,o,i]}class ls extends Ge{constructor(e){super(),We(this,e,ts,es,je,{card:0,showAttacks:1,highlightedAttack:2,showRarity:3})}}function Hl(t){let e;return{c(){e=d("span"),e.textContent="1.",a(e,"class","question-number svelte-174fqld")},m(l,n){z(l,e,n)},d(l){l&&M(e)}}}function Yl(t){let e,l,n,s,o=t[0].secondQuestion+"",i,u,f,c,m,v,p;return{c(){e=d("div"),l=d("span"),l.textContent="2.",n=k(),s=d("h3"),i=h(o),u=k(),f=d("div"),c=d("input"),a(l,"class","question-number svelte-174fqld"),a(s,"class","question-text svelte-174fqld"),a(e,"class","question-item svelte-174fqld"),Le(e,"padding-top","2em"),a(c,"type","number"),a(c,"placeholder",m=t[1].enterAnswer),a(c,"class","answer-input svelte-174fqld"),a(f,"class","input-group svelte-174fqld")},m(g,b){z(g,e,b),r(e,l),r(e,n),r(e,s),r(s,i),z(g,u,b),z(g,f,b),r(f,c),pe(c,t[3]),v||(p=[F(c,"input",t[8]),F(c,"keypress",t[5])],v=!0)},p(g,b){b&1&&o!==(o=g[0].secondQuestion+"")&&A(i,o),b&2&&m!==(m=g[1].enterAnswer)&&a(c,"placeholder",m),b&8&&jt(c.value)!==g[3]&&pe(c,g[3])},d(g){g&&(M(e),M(u),M(f)),v=!1,_e(p)}}}function ns(t){let e,l,n,s,o,i,u,f,c,m=t[0].questionText+"",v,p,g,b,_,y,N,Q,L=t[1].submitAnswer+"",T,q,C,D,V;n=new ls({props:{card:t[0].card,showRarity:!0}});let P=t[0].secondQuestion&&Hl(),E=t[0].secondQuestion&&Yl(t);return{c(){e=d("div"),l=d("div"),ut(n.$$.fragment),s=k(),o=d("div"),i=d("div"),u=d("div"),P&&P.c(),f=k(),c=d("h3"),v=h(m),p=k(),g=d("div"),b=d("input"),y=k(),E&&E.c(),N=k(),Q=d("button"),T=h(L),a(l,"class","card-display svelte-174fqld"),a(c,"class","question-text svelte-174fqld"),a(u,"class","question-item svelte-174fqld"),a(b,"type","number"),a(b,"placeholder",_=t[1].enterAnswer),a(b,"class","answer-input svelte-174fqld"),a(g,"class","input-group svelte-174fqld"),a(Q,"class","submit-btn btn-primary svelte-174fqld"),Le(Q,"margin-top","2em"),Q.disabled=q=!t[2]||t[0].secondQuestion&&!t[3],a(i,"class","questions-list svelte-174fqld"),a(o,"class","question-container svelte-174fqld"),a(e,"class","quiz-view svelte-174fqld")},m(I,O){z(I,e,O),r(e,l),Ke(n,l,null),r(e,s),r(e,o),r(o,i),r(i,u),P&&P.m(u,null),r(u,f),r(u,c),r(c,v),r(i,p),r(i,g),r(g,b),pe(b,t[2]),r(i,y),E&&E.m(i,null),r(i,N),r(i,Q),r(Q,T),C=!0,D||(V=[F(b,"input",t[7]),F(b,"keypress",t[5]),F(Q,"click",t[4])],D=!0)},p(I,[O]){const $={};O&1&&($.card=I[0].card),n.$set($),I[0].secondQuestion?P||(P=Hl(),P.c(),P.m(u,f)):P&&(P.d(1),P=null),(!C||O&1)&&m!==(m=I[0].questionText+"")&&A(v,m),(!C||O&2&&_!==(_=I[1].enterAnswer))&&a(b,"placeholder",_),O&4&&jt(b.value)!==I[2]&&pe(b,I[2]),I[0].secondQuestion?E?E.p(I,O):(E=Yl(I),E.c(),E.m(i,N)):E&&(E.d(1),E=null),(!C||O&2)&&L!==(L=I[1].submitAnswer+"")&&A(T,L),(!C||O&13&&q!==(q=!I[2]||I[0].secondQuestion&&!I[3]))&&(Q.disabled=q)},i(I){C||(ye(n.$$.fragment,I),C=!0)},o(I){ze(n.$$.fragment,I),C=!1},d(I){I&&M(e),Ue(n),P&&P.d(),E&&E.d(),D=!1,_e(V)}}}function ss(t,e,l){let{question:n}=e,{t:s}=e,{currentSet:o}=e;const i=Ot();let u="",f="";function c(){const g=parseInt(u,10);if(!isNaN(g))if(n.secondQuestion&&n.secondAnswer!==void 0){const b=parseInt(f,10);isNaN(b)||i("answer",{firstAnswer:g,secondAnswer:b})}else i("answer",{firstAnswer:g})}function m(g){g.key==="Enter"&&c()}function v(){u=jt(this.value),l(2,u)}function p(){f=jt(this.value),l(3,f)}return t.$$set=g=>{"question"in g&&l(0,n=g.question),"t"in g&&l(1,s=g.t),"currentSet"in g&&l(6,o=g.currentSet)},[n,s,u,f,c,m,o,v,p]}class rs extends Ge{constructor(e){super(),We(this,e,ss,ns,je,{question:0,t:1,currentSet:6})}}function os(t){let e,l,n,s=t[4].notQuite+"",o,i,u,f=t[4].incorrectMessage+"",c,m,v,p,g,b=t[4].correctMessage.toLowerCase()+"",_,y,N,Q,L,T,q,C,D=t[4].encouragement+"",V,P=t[5]&&t[6]>0&&Kl(t);return{c(){e=d("div"),e.textContent="‚úó",l=k(),n=d("h2"),o=h(s),i=k(),u=d("p"),c=h(f),m=k(),v=d("strong"),p=h(t[2]),g=h(", "),_=h(b),y=k(),N=d("strong"),Q=h(t[1]),L=h("."),T=k(),P&&P.c(),q=k(),C=d("p"),V=h(D),a(e,"class","result-icon error svelte-1v74pgf"),a(n,"class","result-title svelte-1v74pgf"),a(v,"class","svelte-1v74pgf"),a(N,"class","svelte-1v74pgf"),a(u,"class","result-message svelte-1v74pgf"),a(C,"class","encouragement svelte-1v74pgf")},m(E,I){z(E,e,I),z(E,l,I),z(E,n,I),r(n,o),z(E,i,I),z(E,u,I),r(u,c),r(u,m),r(u,v),r(v,p),r(u,g),r(u,_),r(u,y),r(u,N),r(N,Q),r(u,L),z(E,T,I),P&&P.m(E,I),z(E,q,I),z(E,C,I),r(C,V)},p(E,I){I&16&&s!==(s=E[4].notQuite+"")&&A(o,s),I&16&&f!==(f=E[4].incorrectMessage+"")&&A(c,f),I&4&&A(p,E[2]),I&16&&b!==(b=E[4].correctMessage.toLowerCase()+"")&&A(_,b),I&2&&A(Q,E[1]),E[5]&&E[6]>0?P?P.p(E,I):(P=Kl(E),P.c(),P.m(q.parentNode,q)):P&&(P.d(1),P=null),I&16&&D!==(D=E[4].encouragement+"")&&A(V,D)},d(E){E&&(M(e),M(l),M(n),M(i),M(u),M(T),M(q),M(C)),P&&P.d(E)}}}function is(t){let e,l,n,s=t[4].correct+"",o,i,u,f=t[4].correctMessage+"",c,m,v,p,g,b=(t[1]===1?t[4].hit:t[4].hits)+"",_,y,N,Q,L,T=t[5]&&!t[3]&&Ul(t),q=t[3]&&Wl(t);return{c(){e=d("div"),e.textContent="‚úì",l=k(),n=d("h2"),o=h(s),i=k(),u=d("p"),c=h(f),m=k(),v=d("strong"),p=h(t[1]),g=k(),_=h(b),y=h("!"),N=k(),T&&T.c(),Q=k(),q&&q.c(),L=il(),a(e,"class","result-icon success svelte-1v74pgf"),a(n,"class","result-title svelte-1v74pgf"),a(v,"class","svelte-1v74pgf"),a(u,"class","result-message svelte-1v74pgf")},m(C,D){z(C,e,D),z(C,l,D),z(C,n,D),r(n,o),z(C,i,D),z(C,u,D),r(u,c),r(u,m),r(u,v),r(v,p),r(u,g),r(u,_),r(u,y),z(C,N,D),T&&T.m(C,D),z(C,Q,D),q&&q.m(C,D),z(C,L,D)},p(C,D){D&16&&s!==(s=C[4].correct+"")&&A(o,s),D&16&&f!==(f=C[4].correctMessage+"")&&A(c,f),D&2&&A(p,C[1]),D&18&&b!==(b=(C[1]===1?C[4].hit:C[4].hits)+"")&&A(_,b),C[5]&&!C[3]?T?T.p(C,D):(T=Ul(C),T.c(),T.m(Q.parentNode,Q)):T&&(T.d(1),T=null),C[3]?q?q.p(C,D):(q=Wl(C),q.c(),q.m(L.parentNode,L)):q&&(q.d(1),q=null)},d(C){C&&(M(e),M(l),M(n),M(i),M(u),M(N),M(Q),M(L)),T&&T.d(C),q&&q.d(C)}}}function Kl(t){let e,l=t[4].language==="Spr√•k"?"Streak reset! Try again.":"Rekke tilbakestilt! Pr√∏v igjen.",n;return{c(){e=d("p"),n=h(l),a(e,"class","streak-lost svelte-1v74pgf")},m(s,o){z(s,e,o),r(e,n)},p(s,o){o&16&&l!==(l=s[4].language==="Spr√•k"?"Streak reset! Try again.":"Rekke tilbakestilt! Pr√∏v igjen.")&&A(n,l)},d(s){s&&M(e)}}}function Ul(t){let e,l,n,s,o,i,u;function f(v,p){return v[7]===1?cs:as}let c=f(t),m=c(t);return{c(){e=d("div"),l=d("p"),m.c(),n=k(),s=d("div"),o=d("div"),i=k(),u=d("div"),a(l,"class","streak-text svelte-1v74pgf"),a(o,"class","streak-dot svelte-1v74pgf"),J(o,"filled",t[7]>=1),a(u,"class","streak-dot svelte-1v74pgf"),J(u,"filled",t[7]>=2),a(s,"class","streak-progress svelte-1v74pgf"),a(e,"class","streak-info svelte-1v74pgf")},m(v,p){z(v,e,p),r(e,l),m.m(l,null),r(e,n),r(e,s),r(s,o),r(s,i),r(s,u)},p(v,p){c===(c=f(v))&&m?m.p(v,p):(m.d(1),m=c(v),m&&(m.c(),m.m(l,null))),p&128&&J(o,"filled",v[7]>=1),p&128&&J(u,"filled",v[7]>=2)},d(v){v&&M(e),m.d()}}}function as(t){let e=t[4].language==="Spr√•k"?"Get 2 correct answers to win this rare card!":"F√• 2 riktige svar for √• vinne dette sjeldne kortet!",l;return{c(){l=h(e)},m(n,s){z(n,l,s)},p(n,s){s&16&&e!==(e=n[4].language==="Spr√•k"?"Get 2 correct answers to win this rare card!":"F√• 2 riktige svar for √• vinne dette sjeldne kortet!")&&A(l,e)},d(n){n&&M(l)}}}function cs(t){let e=t[4].language==="Spr√•k"?"One more correct to win this card!":"√ân til riktig for √• vinne dette kortet!",l;return{c(){l=h(e)},m(n,s){z(n,l,s)},p(n,s){s&16&&e!==(e=n[4].language==="Spr√•k"?"One more correct to win this card!":"√ân til riktig for √• vinne dette kortet!")&&A(l,e)},d(n){n&&M(l)}}}function Wl(t){let e,l,n=t[4].youWonThisCard+"",s,o,i,u,f,c,m,v,p,g=t[3].name+"",b;return{c(){e=d("div"),l=d("h3"),s=h(n),o=k(),i=d("div"),u=d("div"),f=d("img"),v=k(),p=d("span"),b=h(g),a(l,"class","svelte-1v74pgf"),qe(f.src,c=t[3].image)||a(f,"src",c),a(f,"alt",m=t[3].name),a(f,"class","svelte-1v74pgf"),a(p,"class","card-name svelte-1v74pgf"),a(u,"class","mini-card svelte-1v74pgf"),a(i,"class","cards-grid svelte-1v74pgf"),a(e,"class","won-cards svelte-1v74pgf")},m(_,y){z(_,e,y),r(e,l),r(l,s),r(e,o),r(e,i),r(i,u),r(u,f),r(u,v),r(u,p),r(p,b)},p(_,y){y&16&&n!==(n=_[4].youWonThisCard+"")&&A(s,n),y&8&&!qe(f.src,c=_[3].image)&&a(f,"src",c),y&8&&m!==(m=_[3].name)&&a(f,"alt",m),y&8&&g!==(g=_[3].name+"")&&A(b,g)},d(_){_&&M(e)}}}function us(t){let e,l,n,s,o=t[4].nextQuestion+"",i,u,f;function c(p,g){return p[0]?is:os}let m=c(t),v=m(t);return{c(){e=d("div"),l=d("div"),v.c(),n=k(),s=d("button"),i=h(o),a(l,"class","result-card svelte-1v74pgf"),J(l,"correct",t[0]),J(l,"incorrect",!t[0]),a(s,"class","next-btn btn-primary svelte-1v74pgf"),a(e,"class","result-view svelte-1v74pgf")},m(p,g){z(p,e,g),r(e,l),v.m(l,null),r(e,n),r(e,s),r(s,i),u||(f=F(s,"click",t[8]),u=!0)},p(p,[g]){m===(m=c(p))&&v?v.p(p,g):(v.d(1),v=m(p),v&&(v.c(),v.m(l,null))),g&1&&J(l,"correct",p[0]),g&1&&J(l,"incorrect",!p[0]),g&16&&o!==(o=p[4].nextQuestion+"")&&A(i,o)},i:ee,o:ee,d(p){p&&M(e),v.d(),u=!1,f()}}}function fs(t,e,l){let{isCorrect:n}=e,{correctAnswer:s}=e,{userAnswer:o}=e,{wonCard:i}=e,{t:u}=e,{needsStreak:f=!1}=e,{streakProgress:c=0}=e,{currentStreak:m=0}=e;const v=Ot();function p(){v("next")}return t.$$set=g=>{"isCorrect"in g&&l(0,n=g.isCorrect),"correctAnswer"in g&&l(1,s=g.correctAnswer),"userAnswer"in g&&l(2,o=g.userAnswer),"wonCard"in g&&l(3,i=g.wonCard),"t"in g&&l(4,u=g.t),"needsStreak"in g&&l(5,f=g.needsStreak),"streakProgress"in g&&l(6,c=g.streakProgress),"currentStreak"in g&&l(7,m=g.currentStreak)},[n,s,o,i,u,f,c,m,p]}class ds extends Ge{constructor(e){super(),We(this,e,fs,us,je,{isCorrect:0,correctAnswer:1,userAnswer:2,wonCard:3,t:4,needsStreak:5,streakProgress:6,currentStreak:7})}}function ms(){try{const t=Kn(),e=new Blob([t],{type:"application/json"}),l=URL.createObjectURL(e),n=document.createElement("a");n.href=l,n.download=`pokemon-collection-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(l)}catch(t){throw console.error("Error downloading backup:",t),new Error("Failed to download backup")}}function gs(t){return new Promise(e=>{const l=new FileReader;l.onload=n=>{var s;try{const o=(s=n.target)==null?void 0:s.result,i=Un(o);e(i)}catch(o){console.error("Error reading file:",o),e({success:!1,error:"Failed to read file"})}},l.onerror=()=>{e({success:!1,error:"Failed to read file"})},l.readAsText(t)})}function Gl(t,e,l){const n=t.slice();return n[43]=e[l],n}function Jl(t,e,l){const n=t.slice();return n[46]=e[l],n}function Zl(t,e,l){const n=t.slice();return n[43]=e[l],n}function Xl(t,e,l){const n=t.slice();return n[46]=e[l],n}function vs(t,e,l){const n=t.slice();return n[53]=e[l],n}function ps(t){let e;return{c(){e=d("option"),e.textContent=`${t[53].name}`,e.__value=t[53].id,pe(e,e.__value),a(e,"class","svelte-f04vdu")},m(l,n){z(l,e,n)},p:ee,d(l){l&&M(e)}}}function $l(t){let e,l,n=t[2]==="en"?`${t[14]} missing`:`${t[14]} mangler`,s,o;return{c(){e=d("span"),l=h("("),s=h(n),o=h(")"),a(e,"class","missing-count svelte-f04vdu")},m(i,u){z(i,e,u),r(e,l),r(e,s),r(e,o)},p(i,u){u[0]&16388&&n!==(n=i[2]==="en"?`${i[14]} missing`:`${i[14]} mangler`)&&A(s,n)},d(i){i&&M(e)}}}function _s(t){let e=t[2]==="en"?`Defeat ${t[17]>0?t[17].toLocaleString():0} HP to unlock 5 rare cards`:`Beseire ${t[17]>0?t[17].toLocaleString():0} HP for √• l√•se opp 5 sjeldne kort`,l;return{c(){l=h(e)},m(n,s){z(n,l,s)},p(n,s){s[0]&131076&&e!==(e=n[2]==="en"?`Defeat ${n[17]>0?n[17].toLocaleString():0} HP to unlock 5 rare cards`:`Beseire ${n[17]>0?n[17].toLocaleString():0} HP for √• l√•se opp 5 sjeldne kort`)&&A(l,e)},d(n){n&&M(l)}}}function hs(t){let e=t[2]==="en"?"Rare cards unlocked!":"Sjeldne kort l√•st opp!",l;return{c(){l=h(e)},m(n,s){z(n,l,s)},p(n,s){s[0]&4&&e!==(e=n[2]==="en"?"Rare cards unlocked!":"Sjeldne kort l√•st opp!")&&A(l,e)},d(n){n&&M(l)}}}function xl(t){let e,l;return{c(){e=d("div"),l=d("div"),a(l,"class","hp-progress-fill svelte-f04vdu"),Le(l,"width",t[15]+"%"),a(e,"class","hp-progress-bar svelte-f04vdu")},m(n,s){z(n,e,s),r(e,l)},p(n,s){s[0]&32768&&Le(l,"width",n[15]+"%")},d(n){n&&M(e)}}}function en(t){let e,l,n,s,o,i,u;function f(){return t[34](t[46])}return{c(){e=d("button"),l=d("img"),o=k(),qe(l.src,n=t[46].image)||a(l,"src",n),a(l,"alt",s=t[46].name),a(l,"class","svelte-f04vdu"),J(l,"locked",!t[16]),a(e,"class","rare-thumbnail svelte-f04vdu"),J(e,"unlocked",t[16])},m(c,m){z(c,e,m),r(e,l),r(e,o),i||(u=F(e,"click",f),i=!0)},p(c,m){t=c,m[0]&8&&!qe(l.src,n=t[46].image)&&a(l,"src",n),m[0]&8&&s!==(s=t[46].name)&&a(l,"alt",s),m[0]&65536&&J(l,"locked",!t[16]),m[0]&65536&&J(e,"unlocked",t[16])},d(c){c&&M(e),i=!1,u()}}}function ks(t){let e,l=be(t[5]),n=[];for(let s=0;s<l.length;s+=1)n[s]=sn(Jl(t,l,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();a(e,"class","cards-grid svelte-f04vdu")},m(s,o){z(s,e,o);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,o){if(o[0]&536870944){l=be(s[5]);let i;for(i=0;i<l.length;i+=1){const u=Jl(s,l,i);n[i]?n[i].p(u,o):(n[i]=sn(u),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=l.length}},d(s){s&&M(e),Ye(n,s)}}}function bs(t){let e,l,n,s,o=t[1].noCardsYet+"",i,u,f,c=t[1].noCardsDescription+"",m;return{c(){e=d("div"),l=d("div"),l.textContent="üì¶",n=k(),s=d("h3"),i=h(o),u=k(),f=d("p"),m=h(c),a(l,"class","empty-icon svelte-f04vdu"),a(s,"class","svelte-f04vdu"),a(f,"class","svelte-f04vdu"),a(e,"class","empty-state svelte-f04vdu")},m(v,p){z(v,e,p),r(e,l),r(e,n),r(e,s),r(s,i),r(e,u),r(e,f),r(f,m)},p(v,p){p[0]&2&&o!==(o=v[1].noCardsYet+"")&&A(i,o),p[0]&2&&c!==(c=v[1].noCardsDescription+"")&&A(m,c)},d(v){v&&M(e)}}}function tn(t){let e,l,n=t[46].hp+"",s;return{c(){e=d("span"),l=h("HP "),s=h(n),a(e,"class","hp svelte-f04vdu")},m(o,i){z(o,e,i),r(e,l),r(e,s)},p(o,i){i[0]&32&&n!==(n=o[46].hp+"")&&A(s,n)},d(o){o&&M(e)}}}function ln(t){let e,l=be(t[46].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=nn(Zl(t,l,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();a(e,"class","types svelte-f04vdu")},m(s,o){z(s,e,o);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,o){if(o[0]&32){l=be(s[46].types);let i;for(i=0;i<l.length;i+=1){const u=Zl(s,l,i);n[i]?n[i].p(u,o):(n[i]=nn(u),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=l.length}},d(s){s&&M(e),Ye(n,s)}}}function nn(t){let e,l=t[43]+"",n;return{c(){e=d("span"),n=h(l),a(e,"class","type svelte-f04vdu")},m(s,o){z(s,e,o),r(e,n)},p(s,o){o[0]&32&&l!==(l=s[43]+"")&&A(n,l)},d(s){s&&M(e)}}}function sn(t){let e,l,n,s,o,i,u,f=t[46].name+"",c,m,v,p,g,b,_=t[46].hp&&tn(t),y=t[46].types&&t[46].types.length>0&&ln(t);function N(){return t[35](t[46])}return{c(){e=d("button"),l=d("img"),o=k(),i=d("div"),u=d("h4"),c=h(f),m=k(),_&&_.c(),v=k(),y&&y.c(),p=k(),qe(l.src,n=t[46].image)||a(l,"src",n),a(l,"alt",s=t[46].name),a(l,"class","svelte-f04vdu"),a(u,"class","svelte-f04vdu"),a(i,"class","card-details svelte-f04vdu"),a(e,"class","collection-card svelte-f04vdu")},m(Q,L){z(Q,e,L),r(e,l),r(e,o),r(e,i),r(i,u),r(u,c),r(i,m),_&&_.m(i,null),r(i,v),y&&y.m(i,null),r(e,p),g||(b=F(e,"click",N),g=!0)},p(Q,L){t=Q,L[0]&32&&!qe(l.src,n=t[46].image)&&a(l,"src",n),L[0]&32&&s!==(s=t[46].name)&&a(l,"alt",s),L[0]&32&&f!==(f=t[46].name+"")&&A(c,f),t[46].hp?_?_.p(t,L):(_=tn(t),_.c(),_.m(i,v)):_&&(_.d(1),_=null),t[46].types&&t[46].types.length>0?y?y.p(t,L):(y=ln(t),y.c(),y.m(i,null)):y&&(y.d(1),y=null)},d(Q){Q&&M(e),_&&_.d(),y&&y.d(),g=!1,b()}}}function rn(t){let e,l=t[10].text+"",n;return{c(){e=d("div"),n=h(l),a(e,"class","message svelte-f04vdu"),J(e,"success",t[10].type==="success"),J(e,"error",t[10].type==="error")},m(s,o){z(s,e,o),r(e,n)},p(s,o){o[0]&1024&&l!==(l=s[10].text+"")&&A(n,l),o[0]&1024&&J(e,"success",s[10].type==="success"),o[0]&1024&&J(e,"error",s[10].type==="error")},d(s){s&&M(e)}}}function on(t){let e,l,n,s,o,i,u,f,c,m,v=t[8].name+"",p,g,b,_,y,N,Q=t[8].hp&&an(t),L=t[8].types&&t[8].types.length>0&&cn(t),T=t[8].rarity&&fn(t);return{c(){e=d("div"),l=d("div"),n=d("button"),n.textContent="√ó",s=k(),o=d("img"),f=k(),c=d("div"),m=d("h3"),p=h(v),g=k(),Q&&Q.c(),b=k(),L&&L.c(),_=k(),T&&T.c(),a(n,"class","close-modal svelte-f04vdu"),qe(o.src,i=t[8].image)||a(o,"src",i),a(o,"alt",u=t[8].name),a(o,"class","modal-card-image svelte-f04vdu"),a(m,"class","svelte-f04vdu"),a(c,"class","modal-card-info svelte-f04vdu"),a(l,"class","card-modal svelte-f04vdu"),a(l,"role","dialog"),a(e,"class","dialog-overlay svelte-f04vdu"),a(e,"role","button"),a(e,"tabindex","-1")},m(q,C){z(q,e,C),r(e,l),r(l,n),r(l,s),r(l,o),r(l,f),r(l,c),r(c,m),r(m,p),r(c,g),Q&&Q.m(c,null),r(c,b),L&&L.m(c,null),r(c,_),T&&T.m(c,null),y||(N=[F(n,"click",t[30]),F(l,"click",pn(t[33])),F(e,"click",t[30]),F(e,"keydown",t[37])],y=!0)},p(q,C){C[0]&256&&!qe(o.src,i=q[8].image)&&a(o,"src",i),C[0]&256&&u!==(u=q[8].name)&&a(o,"alt",u),C[0]&256&&v!==(v=q[8].name+"")&&A(p,v),q[8].hp?Q?Q.p(q,C):(Q=an(q),Q.c(),Q.m(c,b)):Q&&(Q.d(1),Q=null),q[8].types&&q[8].types.length>0?L?L.p(q,C):(L=cn(q),L.c(),L.m(c,_)):L&&(L.d(1),L=null),q[8].rarity?T?T.p(q,C):(T=fn(q),T.c(),T.m(c,null)):T&&(T.d(1),T=null)},d(q){q&&M(e),Q&&Q.d(),L&&L.d(),T&&T.d(),y=!1,_e(N)}}}function an(t){let e,l,n=t[8].hp+"",s;return{c(){e=d("div"),l=h("HP: "),s=h(n),a(e,"class","modal-hp svelte-f04vdu")},m(o,i){z(o,e,i),r(e,l),r(e,s)},p(o,i){i[0]&256&&n!==(n=o[8].hp+"")&&A(s,n)},d(o){o&&M(e)}}}function cn(t){let e,l=be(t[8].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=un(Gl(t,l,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();a(e,"class","modal-types svelte-f04vdu")},m(s,o){z(s,e,o);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,o){if(o[0]&256){l=be(s[8].types);let i;for(i=0;i<l.length;i+=1){const u=Gl(s,l,i);n[i]?n[i].p(u,o):(n[i]=un(u),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=l.length}},d(s){s&&M(e),Ye(n,s)}}}function un(t){let e,l=t[43]+"",n;return{c(){e=d("span"),n=h(l),a(e,"class","modal-type svelte-f04vdu")},m(s,o){z(s,e,o),r(e,n)},p(s,o){o[0]&256&&l!==(l=s[43]+"")&&A(n,l)},d(s){s&&M(e)}}}function fn(t){let e,l,n=t[8].rarity+"",s;return{c(){e=d("div"),l=h("Rarity: "),s=h(n),a(e,"class","modal-rarity svelte-f04vdu")},m(o,i){z(o,e,i),r(e,l),r(e,s)},p(o,i){i[0]&256&&n!==(n=o[8].rarity+"")&&A(s,n)},d(o){o&&M(e)}}}function dn(t){let e,l,n,s=t[1].clearCollectionTitle+"",o,i,u,f=t[1].clearCollectionMessage+"",c,m,v,p,g=t[1].cancel+"",b,_,y,N=t[1].clearCollection+"",Q,L,T;return{c(){e=d("div"),l=d("div"),n=d("h3"),o=h(s),i=k(),u=d("p"),c=h(f),m=k(),v=d("div"),p=d("button"),b=h(g),_=k(),y=d("button"),Q=h(N),a(n,"class","svelte-f04vdu"),a(u,"class","svelte-f04vdu"),a(p,"class","btn-secondary"),a(y,"class","btn-error"),a(v,"class","dialog-actions svelte-f04vdu"),a(l,"class","dialog svelte-f04vdu"),a(l,"role","dialog"),a(e,"class","dialog-overlay svelte-f04vdu"),a(e,"role","button"),a(e,"tabindex","-1")},m(q,C){z(q,e,C),r(e,l),r(l,n),r(n,o),r(l,i),r(l,u),r(u,c),r(l,m),r(l,v),r(v,p),r(p,b),r(v,_),r(v,y),r(y,Q),L||(T=[F(p,"click",t[25]),F(y,"click",t[26]),F(l,"click",pn(t[32])),F(l,"keydown",ys),F(e,"click",t[25]),F(e,"keydown",t[38])],L=!0)},p(q,C){C[0]&2&&s!==(s=q[1].clearCollectionTitle+"")&&A(o,s),C[0]&2&&f!==(f=q[1].clearCollectionMessage+"")&&A(c,f),C[0]&2&&g!==(g=q[1].cancel+"")&&A(b,g),C[0]&2&&N!==(N=q[1].clearCollection+"")&&A(Q,N)},d(q){q&&M(e),L=!1,_e(T)}}}function ws(t){let e,l,n,s,o,i,u=t[2]==="en"?`Quiz Cards: ${t[12]} / ${t[13]}`:`Quiz-kort: ${t[12]} / ${t[13]}`,f,c,m,v=t[2]==="en"?`Total: ${t[6]} / ${t[7]}`:`Totalt: ${t[6]} / ${t[7]}`,p,g,b,_,y,N,Q,L,T,q,C,D,V,P=t[0].cards.length+"",E,I,O,$=t[1].cardsCollected+"",ge,W,U,le,Y=t[0].stats.totalQuestions+"",ne,H,K,Z=t[1].questionsAnswered+"",se,Qe,re,ve,he=t[0].stats.correctAnswers+"",B,x,S,R=t[1].correctAnswers+"",X,ie,te,ae,Je,ft,we,Ze,Xe=t[1].accuracy+"",wt,dl,$e,xe,et,tt,yt=(t[1].language||"Language")+"",Vt,ml,gl,Ee,Fe,Oe,vl,lt,nt,Ct=t[1].gradeLevel+"",Ht,pl,_l,ke,Te,St=t[1].gradeLevel+"",Yt,hl,Ie,At=t[1].gradeLevel+"",Kt,kl,Pe,Mt=t[1].gradeLevel+"",Ut,bl,Ne,qt=t[1].gradeLevel+"",Wt,wl,De,zt=t[1].gradeLevel+"",Gt,yl,Cl,Ce,dt,Qt=t[1].exportBackup+"",Jt,Sl,mt,Et=t[1].importBackup+"",Zt,Al,gt,Lt=t[1].clearThisSet+"",Xt,Ml,Be,ql,$t,vt,pt,xt,zl,Ql=be(Dt),Ve=[];for(let w=0;w<Ql.length;w+=1)Ve[w]=ps(vs(t,Ql,w));let ce=t[14]>0&&$l(t);function El(w,j){return w[16]?hs:_s}let Tt=El(t),Se=Tt(t),ue=!t[16]&&xl(t),st=be(t[3]),oe=[];for(let w=0;w<st.length;w+=1)oe[w]=en(Xl(t,st,w));function Ll(w,j){return w[0].cards.length===0?bs:ks}let It=Ll(t),Ae=It(t),fe=t[10]&&rn(t),de=t[8]&&on(t),me=t[11]&&dn(t);return{c(){e=d("div"),l=d("div"),n=d("select");for(let w=0;w<Ve.length;w+=1)Ve[w].c();s=k(),o=d("div"),i=d("div"),f=h(u),c=k(),m=d("div"),p=h(v),g=k(),ce&&ce.c(),b=k(),_=d("div"),y=d("div"),Se.c(),N=k(),ue&&ue.c(),Q=k(),L=d("div");for(let w=0;w<oe.length;w+=1)oe[w].c();T=k(),Ae.c(),q=k(),C=d("div"),D=d("div"),V=d("div"),E=h(P),I=k(),O=d("div"),ge=h($),W=k(),U=d("div"),le=d("div"),ne=h(Y),H=k(),K=d("div"),se=h(Z),Qe=k(),re=d("div"),ve=d("div"),B=h(he),x=k(),S=d("div"),X=h(R),ie=k(),te=d("div"),ae=d("div"),Je=h(t[18]),ft=h("%"),we=k(),Ze=d("div"),wt=h(Xe),dl=k(),$e=d("div"),xe=d("div"),et=d("div"),tt=d("label"),Vt=h(yt),ml=h(":"),gl=k(),Ee=d("select"),Fe=d("option"),Fe.textContent="English",Oe=d("option"),Oe.textContent="Norsk",vl=k(),lt=d("div"),nt=d("label"),Ht=h(Ct),pl=h(":"),_l=k(),ke=d("select"),Te=d("option"),Yt=h(St),hl=h(" 1"),Ie=d("option"),Kt=h(At),kl=h(" 2"),Pe=d("option"),Ut=h(Mt),bl=h(" 3"),Ne=d("option"),Wt=h(qt),wl=h(" 4"),De=d("option"),Gt=h(zt),yl=h(" 5"),Cl=k(),Ce=d("div"),dt=d("button"),Jt=h(Qt),Sl=k(),mt=d("button"),Zt=h(Et),Al=k(),gt=d("button"),Xt=h(Lt),Ml=k(),Be=d("input"),ql=k(),fe&&fe.c(),$t=k(),de&&de.c(),vt=k(),me&&me.c(),pt=il(),a(n,"class","set-selector svelte-f04vdu"),a(i,"class","regular-cards-count svelte-f04vdu"),a(m,"class","total-cards-count svelte-f04vdu"),a(o,"class","set-counter svelte-f04vdu"),a(l,"class","set-selector-container svelte-f04vdu"),a(y,"class","rare-section-text svelte-f04vdu"),a(L,"class","rare-cards-thumbnails svelte-f04vdu"),a(_,"class","rare-cards-section svelte-f04vdu"),a(V,"class","stat-value svelte-f04vdu"),a(O,"class","stat-label svelte-f04vdu"),a(D,"class","stat-card svelte-f04vdu"),a(le,"class","stat-value svelte-f04vdu"),a(K,"class","stat-label svelte-f04vdu"),a(U,"class","stat-card svelte-f04vdu"),a(ve,"class","stat-value svelte-f04vdu"),a(S,"class","stat-label svelte-f04vdu"),a(re,"class","stat-card svelte-f04vdu"),a(ae,"class","stat-value svelte-f04vdu"),a(Ze,"class","stat-label svelte-f04vdu"),a(te,"class","stat-card svelte-f04vdu"),a(C,"class","stats-section svelte-f04vdu"),a(tt,"for","language-select"),a(tt,"class","svelte-f04vdu"),Fe.__value="en",pe(Fe,Fe.__value),a(Fe,"class","svelte-f04vdu"),Oe.__value="no",pe(Oe,Oe.__value),a(Oe,"class","svelte-f04vdu"),a(Ee,"id","language-select"),a(Ee,"class","settings-selector svelte-f04vdu"),a(et,"class","selector-group svelte-f04vdu"),a(nt,"for","klassetrinn-select"),a(nt,"class","svelte-f04vdu"),Te.__value=1,pe(Te,Te.__value),a(Te,"class","svelte-f04vdu"),Ie.__value=2,pe(Ie,Ie.__value),a(Ie,"class","svelte-f04vdu"),Pe.__value=3,pe(Pe,Pe.__value),a(Pe,"class","svelte-f04vdu"),Ne.__value=4,pe(Ne,Ne.__value),a(Ne,"class","svelte-f04vdu"),De.__value=5,pe(De,De.__value),a(De,"class","svelte-f04vdu"),a(ke,"id","klassetrinn-select"),a(ke,"class","settings-selector svelte-f04vdu"),a(lt,"class","selector-group svelte-f04vdu"),a(xe,"class","settings-selectors svelte-f04vdu"),a(dt,"class","btn-secondary"),a(mt,"class","btn-secondary"),a(gt,"class","btn-error"),a(Be,"type","file"),a(Be,"accept",".json"),Le(Be,"display","none"),a(Ce,"class","functions-actions svelte-f04vdu"),a($e,"class","functions-section svelte-f04vdu"),a(e,"class","collection-view svelte-f04vdu")},m(w,j){z(w,e,j),r(e,l),r(l,n);for(let G=0;G<Ve.length;G+=1)Ve[G]&&Ve[G].m(n,null);Re(n,t[4]),r(l,s),r(l,o),r(o,i),r(i,f),r(o,c),r(o,m),r(m,p),r(m,g),ce&&ce.m(m,null),r(e,b),r(e,_),r(_,y),Se.m(y,null),r(_,N),ue&&ue.m(_,null),r(_,Q),r(_,L);for(let G=0;G<oe.length;G+=1)oe[G]&&oe[G].m(L,null);r(e,T),Ae.m(e,null),r(e,q),r(e,C),r(C,D),r(D,V),r(V,E),r(D,I),r(D,O),r(O,ge),r(C,W),r(C,U),r(U,le),r(le,ne),r(U,H),r(U,K),r(K,se),r(C,Qe),r(C,re),r(re,ve),r(ve,B),r(re,x),r(re,S),r(S,X),r(C,ie),r(C,te),r(te,ae),r(ae,Je),r(ae,ft),r(te,we),r(te,Ze),r(Ze,wt),r(e,dl),r(e,$e),r($e,xe),r(xe,et),r(et,tt),r(tt,Vt),r(tt,ml),r(et,gl),r(et,Ee),r(Ee,Fe),r(Ee,Oe),Re(Ee,t[2]),r(xe,vl),r(xe,lt),r(lt,nt),r(nt,Ht),r(nt,pl),r(lt,_l),r(lt,ke),r(ke,Te),r(Te,Yt),r(Te,hl),r(ke,Ie),r(Ie,Kt),r(Ie,kl),r(ke,Pe),r(Pe,Ut),r(Pe,bl),r(ke,Ne),r(Ne,Wt),r(Ne,wl),r(ke,De),r(De,Gt),r(De,yl),Re(ke,t[19]),r($e,Cl),r($e,Ce),r(Ce,dt),r(dt,Jt),r(Ce,Sl),r(Ce,mt),r(mt,Zt),r(Ce,Al),r(Ce,gt),r(gt,Xt),r(Ce,Ml),r(Ce,Be),t[36](Be),r(e,ql),fe&&fe.m(e,null),z(w,$t,j),de&&de.m(w,j),z(w,vt,j),me&&me.m(w,j),z(w,pt,j),xt||(zl=[F(n,"change",t[20]),F(Ee,"change",t[27]),F(ke,"change",t[28]),F(dt,"click",t[21]),F(mt,"click",t[22]),F(gt,"click",t[24]),F(Be,"change",t[23])],xt=!0)},p(w,j){if(j[0]&16&&Re(n,w[4]),j[0]&12292&&u!==(u=w[2]==="en"?`Quiz Cards: ${w[12]} / ${w[13]}`:`Quiz-kort: ${w[12]} / ${w[13]}`)&&A(f,u),j[0]&196&&v!==(v=w[2]==="en"?`Total: ${w[6]} / ${w[7]}`:`Totalt: ${w[6]} / ${w[7]}`)&&A(p,v),w[14]>0?ce?ce.p(w,j):(ce=$l(w),ce.c(),ce.m(m,null)):ce&&(ce.d(1),ce=null),Tt===(Tt=El(w))&&Se?Se.p(w,j):(Se.d(1),Se=Tt(w),Se&&(Se.c(),Se.m(y,null))),w[16]?ue&&(ue.d(1),ue=null):ue?ue.p(w,j):(ue=xl(w),ue.c(),ue.m(_,Q)),j[0]&536936456){st=be(w[3]);let G;for(G=0;G<st.length;G+=1){const Tl=Xl(w,st,G);oe[G]?oe[G].p(Tl,j):(oe[G]=en(Tl),oe[G].c(),oe[G].m(L,null))}for(;G<oe.length;G+=1)oe[G].d(1);oe.length=st.length}It===(It=Ll(w))&&Ae?Ae.p(w,j):(Ae.d(1),Ae=It(w),Ae&&(Ae.c(),Ae.m(e,q))),j[0]&1&&P!==(P=w[0].cards.length+"")&&A(E,P),j[0]&2&&$!==($=w[1].cardsCollected+"")&&A(ge,$),j[0]&1&&Y!==(Y=w[0].stats.totalQuestions+"")&&A(ne,Y),j[0]&2&&Z!==(Z=w[1].questionsAnswered+"")&&A(se,Z),j[0]&1&&he!==(he=w[0].stats.correctAnswers+"")&&A(B,he),j[0]&2&&R!==(R=w[1].correctAnswers+"")&&A(X,R),j[0]&262144&&A(Je,w[18]),j[0]&2&&Xe!==(Xe=w[1].accuracy+"")&&A(wt,Xe),j[0]&2&&yt!==(yt=(w[1].language||"Language")+"")&&A(Vt,yt),j[0]&4&&Re(Ee,w[2]),j[0]&2&&Ct!==(Ct=w[1].gradeLevel+"")&&A(Ht,Ct),j[0]&2&&St!==(St=w[1].gradeLevel+"")&&A(Yt,St),j[0]&2&&At!==(At=w[1].gradeLevel+"")&&A(Kt,At),j[0]&2&&Mt!==(Mt=w[1].gradeLevel+"")&&A(Ut,Mt),j[0]&2&&qt!==(qt=w[1].gradeLevel+"")&&A(Wt,qt),j[0]&2&&zt!==(zt=w[1].gradeLevel+"")&&A(Gt,zt),j[0]&524288&&Re(ke,w[19]),j[0]&2&&Qt!==(Qt=w[1].exportBackup+"")&&A(Jt,Qt),j[0]&2&&Et!==(Et=w[1].importBackup+"")&&A(Zt,Et),j[0]&2&&Lt!==(Lt=w[1].clearThisSet+"")&&A(Xt,Lt),w[10]?fe?fe.p(w,j):(fe=rn(w),fe.c(),fe.m(e,null)):fe&&(fe.d(1),fe=null),w[8]?de?de.p(w,j):(de=on(w),de.c(),de.m(vt.parentNode,vt)):de&&(de.d(1),de=null),w[11]?me?me.p(w,j):(me=dn(w),me.c(),me.m(pt.parentNode,pt)):me&&(me.d(1),me=null)},i:ee,o:ee,d(w){w&&(M(e),M($t),M(vt),M(pt)),Ye(Ve,w),ce&&ce.d(),Se.d(),ue&&ue.d(),Ye(oe,w),Ae.d(),t[36](null),fe&&fe.d(),de&&de.d(w),me&&me.d(w),xt=!1,_e(zl)}}}const ys=()=>{};function Cs(t,e,l){let n,s,o,i,u,f,c,m,v,p,g,b;_t(t,Ft,S=>l(39,g=S)),_t(t,bt,S=>l(19,b=S));let{collection:_}=e,{t:y}=e,{language:N}=e,Q=null,L=[],T=[],q=g;hn(async()=>{await C()});async function C(){try{l(31,L=await ol(q));const S=[...L].sort((R,X)=>{const ie=parseInt(R.localId||"0");return parseInt(X.localId||"0")-ie});l(3,T=S.slice(0,5))}catch(S){console.error("Error loading rare cards:",S)}}function D(S){const R=S.target;l(4,q=R.value),C()}const V=Ot();let P,E=null,I=!1;function O(){try{ms(),W(y.collectionExported,"success")}catch{W(y.exportFailed,"error")}}function $(){P.click()}async function ge(S){var ie;const R=S.target,X=(ie=R.files)==null?void 0:ie[0];if(X){try{const te=await gs(X);te.success?(W(y.collectionImported,"success"),V("refresh")):W(te.error||y.importFailed,"error")}catch{W(y.importFailed,"error")}R.value=""}}function W(S,R){l(10,E={text:S,type:R}),setTimeout(()=>{l(10,E=null)},3e3)}function U(){l(11,I=!0)}function le(){l(11,I=!1)}function Y(){try{Yn(),l(11,I=!1),W(y.collectionCleared,"success"),V("refresh")}catch{W(y.clearFailed,"error")}}function ne(S){const R=S.target;V("languageChange",R.value)}function H(S){const R=S.target;bt.set(Number(R.value))}function K(S){l(8,Q=S)}function Z(){l(8,Q=null)}function se(S){Pl.call(this,t,S)}function Qe(S){Pl.call(this,t,S)}const re=S=>K({...S,collectedAt:new Date().toISOString()}),ve=S=>K(S);function he(S){nl[S?"unshift":"push"](()=>{P=S,l(9,P)})}const B=S=>S.key==="Escape"&&Z(),x=S=>S.key==="Escape"&&le();return t.$$set=S=>{"collection"in S&&l(0,_=S.collection),"t"in S&&l(1,y=S.t),"language"in S&&l(2,N=S.language)},t.$$.update=()=>{t.$$.dirty[0]&1&&l(18,n=_.stats.totalQuestions>0?Math.round(_.stats.correctAnswers/_.stats.totalQuestions*100):0),t.$$.dirty[0]&1&&l(17,s=16e3-(_.stats.totalHpDefeated||0)),t.$$.dirty[0]&17&&l(16,o=_.unlockedRareSets&&_.unlockedRareSets[q]||!1),t.$$.dirty[0]&1&&l(15,i=Math.min(_.stats.totalHpDefeated/16e3*100,100)),t.$$.dirty[0]&17&&l(5,u=_.cards.filter(S=>S.id.startsWith(q+"-"))),t.$$.dirty[0]&32&&l(6,f=u.length),t.$$.dirty[1]&1&&l(7,c=L.length),t.$$.dirty[0]&192&&l(14,m=c-f),t.$$.dirty[1]&1&&l(13,v=L.length-5),t.$$.dirty[0]&40&&l(12,p=u.filter(S=>!T.some(X=>X.id===S.id)).length)},[_,y,N,T,q,u,f,c,Q,P,E,I,p,v,m,i,o,s,n,b,D,O,$,ge,U,le,Y,ne,H,K,Z,L,se,Qe,re,ve,he,B,x]}class Ss extends Ge{constructor(e){super(),We(this,e,Cs,ws,je,{collection:0,t:1,language:2},null,[-1,-1])}}function As(t){let e,l,n,s,o;return{c(){e=d("div"),l=d("div"),n=k(),s=d("p"),o=h(t[0]),a(l,"class","spinner svelte-1lxornd"),a(s,"class","svelte-1lxornd"),a(e,"class","loading-view svelte-1lxornd")},m(i,u){z(i,e,u),r(e,l),r(e,n),r(e,s),r(s,o)},p(i,[u]){u&1&&A(o,i[0])},i:ee,o:ee,d(i){i&&M(e)}}}function Ms(t,e,l){let{message:n="Loading..."}=e;return t.$$set=s=>{"message"in s&&l(0,n=s.message)},[n]}class qs extends Ge{constructor(e){super(),We(this,e,Ms,As,je,{message:0})}}function zs(t){let e,l,n,s,o,i,u,f,c,m,v;return{c(){e=d("div"),l=d("div"),l.textContent="‚ö†Ô∏è",n=k(),s=d("h2"),s.textContent="Oops!",o=k(),i=d("p"),u=h(t[0]),f=k(),c=d("button"),c.textContent="Try Again",a(l,"class","error-icon svelte-na0xmw"),a(s,"class","svelte-na0xmw"),a(i,"class","svelte-na0xmw"),a(c,"class","btn-primary"),a(e,"class","error-view svelte-na0xmw")},m(p,g){z(p,e,g),r(e,l),r(e,n),r(e,s),r(e,o),r(e,i),r(i,u),r(e,f),r(e,c),m||(v=F(c,"click",t[1]),m=!0)},p(p,[g]){g&1&&A(u,p[0])},i:ee,o:ee,d(p){p&&M(e),m=!1,v()}}}function Qs(t,e,l){let{message:n="Something went wrong"}=e;const s=Ot();function o(){s("retry")}return t.$$set=i=>{"message"in i&&l(0,n=i.message)},[n,o]}class Es extends Ge{constructor(e){super(),We(this,e,Qs,zs,je,{message:0})}}const Ls="data:image/png;base64,W0RVTU1ZIEZJTEUgQ09OVEVOVF0=";function Ts(t,e,l){const n=t.slice();return n[42]=e[l],n}function Is(t){let e,l;return e=new Ss({props:{collection:t[4],t:t[16],language:t[0]}}),e.$on("refresh",t[27]),e.$on("languageChange",t[29]),{c(){ut(e.$$.fragment)},m(n,s){Ke(e,n,s),l=!0},p(n,s){const o={};s[0]&16&&(o.collection=n[4]),s[0]&65536&&(o.t=n[16]),s[0]&1&&(o.language=n[0]),e.$set(o)},i(n){l||(ye(e.$$.fragment,n),l=!0)},o(n){ze(e.$$.fragment,n),l=!1},d(n){Ue(e,n)}}}function Ps(t){let e,l,n,s;const o=[js,Rs,Ds,Ns],i=[];function u(f,c){return f[1]==="loading"?0:f[1]==="quiz"&&f[2]?1:f[1]==="result"&&f[2]?2:f[1]==="error"?3:-1}return~(e=u(t))&&(l=i[e]=o[e](t)),{c(){l&&l.c(),n=il()},m(f,c){~e&&i[e].m(f,c),z(f,n,c),s=!0},p(f,c){let m=e;e=u(f),e===m?~e&&i[e].p(f,c):(l&&(bn(),ze(i[m],1,1,()=>{i[m]=null}),wn()),~e?(l=i[e],l?l.p(f,c):(l=i[e]=o[e](f),l.c()),ye(l,1),l.m(n.parentNode,n)):l=null)},i(f){s||(ye(l),s=!0)},o(f){ze(l),s=!1},d(f){f&&M(n),~e&&i[e].d(f)}}}function Ns(t){let e,l;return e=new Es({props:{message:t[8]}}),e.$on("retry",t[24]),{c(){ut(e.$$.fragment)},m(n,s){Ke(e,n,s),l=!0},p(n,s){const o={};s[0]&256&&(o.message=n[8]),e.$set(o)},i(n){l||(ye(e.$$.fragment,n),l=!0)},o(n){ze(e.$$.fragment,n),l=!1},d(n){Ue(e,n)}}}function Ds(t){let e,l;return e=new ds({props:{isCorrect:t[5],correctAnswer:t[2].correctAnswer,userAnswer:t[6],wonCard:t[7],t:t[16],needsStreak:t[12],streakProgress:t[13],currentStreak:t[4].currentStreak||0}}),e.$on("next",t[23]),{c(){ut(e.$$.fragment)},m(n,s){Ke(e,n,s),l=!0},p(n,s){const o={};s[0]&32&&(o.isCorrect=n[5]),s[0]&4&&(o.correctAnswer=n[2].correctAnswer),s[0]&64&&(o.userAnswer=n[6]),s[0]&128&&(o.wonCard=n[7]),s[0]&65536&&(o.t=n[16]),s[0]&4096&&(o.needsStreak=n[12]),s[0]&8192&&(o.streakProgress=n[13]),s[0]&16&&(o.currentStreak=n[4].currentStreak||0),e.$set(o)},i(n){l||(ye(e.$$.fragment,n),l=!0)},o(n){ze(e.$$.fragment,n),l=!1},d(n){Ue(e,n)}}}function Rs(t){var m;let e,l,n,s,o,i,u,f=be(Dt),c=[];for(let v=0;v<f.length;v+=1)c[v]=Fs(Ts(t,f,v));return s=new rs({props:{question:t[2],t:t[16],currentSet:((m=Dt.find(t[28]))==null?void 0:m.name)||""}}),s.$on("answer",t[22]),{c(){e=d("div"),l=d("select");for(let v=0;v<c.length;v+=1)c[v].c();n=k(),ut(s.$$.fragment),a(l,"class","set-selector svelte-1mmoizy"),a(e,"class","set-selector-container svelte-1mmoizy")},m(v,p){z(v,e,p),r(e,l);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(l,null);Re(l,t[17]),z(v,n,p),Ke(s,v,p),o=!0,i||(u=F(l,"change",t[18]),i=!0)},p(v,p){var b;(!o||p[0]&131072)&&Re(l,v[17]);const g={};p[0]&4&&(g.question=v[2]),p[0]&65536&&(g.t=v[16]),p[0]&2048&&(g.currentSet=((b=Dt.find(v[28]))==null?void 0:b.name)||""),s.$set(g)},i(v){o||(ye(s.$$.fragment,v),o=!0)},o(v){ze(s.$$.fragment,v),o=!1},d(v){v&&(M(e),M(n)),Ye(c,v),Ue(s,v),i=!1,u()}}}function js(t){let e,l;return e=new qs({props:{message:t[16].loading}}),{c(){ut(e.$$.fragment)},m(n,s){Ke(e,n,s),l=!0},p(n,s){const o={};s[0]&65536&&(o.message=n[16].loading),e.$set(o)},i(n){l||(ye(e.$$.fragment,n),l=!0)},o(n){ze(e.$$.fragment,n),l=!1},d(n){Ue(e,n)}}}function Fs(t){let e;return{c(){e=d("option"),e.textContent=`${t[42].name}`,e.__value=t[42].id,pe(e,e.__value),a(e,"class","svelte-1mmoizy")},m(l,n){z(l,e,n)},p:ee,d(l){l&&M(e)}}}function mn(t){let e,l;function n(i,u){return i[15]?Os:Bs}let s=n(t),o=s(t);return{c(){e=d("div"),l=d("div"),o.c(),a(l,"class","dialog language-dialog svelte-1mmoizy"),a(e,"class","dialog-overlay svelte-1mmoizy"),a(e,"role","button"),a(e,"tabindex","-1")},m(i,u){z(i,e,u),r(e,l),o.m(l,null)},p(i,u){s===(s=n(i))&&o?o.p(i,u):(o.d(1),o=s(i),o&&(o.c(),o.m(l,null)))},d(i){i&&M(e),o.d()}}}function Os(t){let e,l=t[14]==="en"?"Choose Grade Level":"Velg Klassetrinn",n,s,o,i=t[14]==="en"?"Select the appropriate difficulty level. You can change this anytime in My Collection.":"Velg passende vanskelighetsniv√•. Du kan endre dette n√•r som helst i Min samling.",u,f,c,m,v,p,g,b=t[14]==="en"?"Simple addition (5 + 3)":"Enkel addisjon (5 + 3)",_,y,N,Q,L,T,q=t[14]==="en"?"Addition & subtraction":"Addisjon og subtraksjon",C,D,V,P,E,I,O=t[14]==="en"?"Addition & subtraction":"Addisjon og subtraksjon",$,ge,W,U,le,Y,ne=t[14]==="en"?"With Pokemon challenges":"Med Pokemon utfordringer",H,K,Z,se,Qe,re,ve=t[14]==="en"?"With Pokemon challenges":"Med Pokemon utfordringer",he,B,x;return{c(){e=d("h2"),n=h(l),s=k(),o=d("p"),u=h(i),f=k(),c=d("div"),m=d("button"),v=d("span"),v.textContent="1",p=k(),g=d("span"),_=h(b),y=k(),N=d("button"),Q=d("span"),Q.textContent="2",L=k(),T=d("span"),C=h(q),D=k(),V=d("button"),P=d("span"),P.textContent="3",E=k(),I=d("span"),$=h(O),ge=k(),W=d("button"),U=d("span"),U.textContent="4",le=k(),Y=d("span"),H=h(ne),K=k(),Z=d("button"),se=d("span"),se.textContent="5",Qe=k(),re=d("span"),he=h(ve),a(e,"class","svelte-1mmoizy"),a(o,"class","svelte-1mmoizy"),a(v,"class","grade-number svelte-1mmoizy"),a(g,"class","grade-description svelte-1mmoizy"),a(m,"class","klassetrinn-btn svelte-1mmoizy"),a(Q,"class","grade-number svelte-1mmoizy"),a(T,"class","grade-description svelte-1mmoizy"),a(N,"class","klassetrinn-btn svelte-1mmoizy"),a(P,"class","grade-number svelte-1mmoizy"),a(I,"class","grade-description svelte-1mmoizy"),a(V,"class","klassetrinn-btn svelte-1mmoizy"),a(U,"class","grade-number svelte-1mmoizy"),a(Y,"class","grade-description svelte-1mmoizy"),a(W,"class","klassetrinn-btn svelte-1mmoizy"),a(se,"class","grade-number svelte-1mmoizy"),a(re,"class","grade-description svelte-1mmoizy"),a(Z,"class","klassetrinn-btn svelte-1mmoizy"),a(c,"class","klassetrinn-buttons svelte-1mmoizy")},m(S,R){z(S,e,R),r(e,n),z(S,s,R),z(S,o,R),r(o,u),z(S,f,R),z(S,c,R),r(c,m),r(m,v),r(m,p),r(m,g),r(g,_),r(c,y),r(c,N),r(N,Q),r(N,L),r(N,T),r(T,C),r(c,D),r(c,V),r(V,P),r(V,E),r(V,I),r(I,$),r(c,ge),r(c,W),r(W,U),r(W,le),r(W,Y),r(Y,H),r(c,K),r(c,Z),r(Z,se),r(Z,Qe),r(Z,re),r(re,he),B||(x=[F(m,"click",t[32]),F(N,"click",t[33]),F(V,"click",t[34]),F(W,"click",t[35]),F(Z,"click",t[36])],B=!0)},p(S,R){R[0]&16384&&l!==(l=S[14]==="en"?"Choose Grade Level":"Velg Klassetrinn")&&A(n,l),R[0]&16384&&i!==(i=S[14]==="en"?"Select the appropriate difficulty level. You can change this anytime in My Collection.":"Velg passende vanskelighetsniv√•. Du kan endre dette n√•r som helst i Min samling.")&&A(u,i),R[0]&16384&&b!==(b=S[14]==="en"?"Simple addition (5 + 3)":"Enkel addisjon (5 + 3)")&&A(_,b),R[0]&16384&&q!==(q=S[14]==="en"?"Addition & subtraction":"Addisjon og subtraksjon")&&A(C,q),R[0]&16384&&O!==(O=S[14]==="en"?"Addition & subtraction":"Addisjon og subtraksjon")&&A($,O),R[0]&16384&&ne!==(ne=S[14]==="en"?"With Pokemon challenges":"Med Pokemon utfordringer")&&A(H,ne),R[0]&16384&&ve!==(ve=S[14]==="en"?"With Pokemon challenges":"Med Pokemon utfordringer")&&A(he,ve)},d(S){S&&(M(e),M(s),M(o),M(f),M(c)),B=!1,_e(x)}}}function Bs(t){let e,l=t[0]==="en"?"Choose Your Language":"Velkommen",n,s,o,i=t[0]==="en"?"You can change this anytime in My Collection":"Hei! Dette er et matte spill for barn i 1-7 trinn, og her skal du samle p√• pokemon kort. Du skal finne finne de super sjeldene gull kortene ved og sl√• kort med tilsammen 16000HP. Velg spr√•k: (du kan endre dette n√•r som helst i Min samling)",u,f,c,m,v,p,g,b;return{c(){e=d("h2"),n=h(l),s=k(),o=d("p"),u=h(i),f=k(),c=d("div"),m=d("button"),m.innerHTML='<span class="flag svelte-1mmoizy">üá¨üáß</span> <span>English</span>',v=k(),p=d("button"),p.innerHTML='<span class="flag svelte-1mmoizy">üá≥üá¥</span> <span>Norsk</span>',a(e,"class","svelte-1mmoizy"),a(o,"class","svelte-1mmoizy"),a(m,"class","language-btn svelte-1mmoizy"),a(p,"class","language-btn svelte-1mmoizy"),a(c,"class","language-buttons svelte-1mmoizy")},m(_,y){z(_,e,y),r(e,n),z(_,s,y),z(_,o,y),r(o,u),z(_,f,y),z(_,c,y),r(c,m),r(c,v),r(c,p),g||(b=[F(m,"click",t[30]),F(p,"click",t[31])],g=!0)},p(_,y){y[0]&1&&l!==(l=_[0]==="en"?"Choose Your Language":"Velkommen")&&A(n,l),y[0]&1&&i!==(i=_[0]==="en"?"You can change this anytime in My Collection":"Hei! Dette er et matte spill for barn i 1-7 trinn, og her skal du samle p√• pokemon kort. Du skal finne finne de super sjeldene gull kortene ved og sl√• kort med tilsammen 16000HP. Velg spr√•k: (du kan endre dette n√•r som helst i Min samling)")&&A(u,i)},d(_){_&&(M(e),M(s),M(o),M(f),M(c)),g=!1,_e(b)}}}function Vs(t){var ne;let e,l,n,s,o=t[16].appTitle+"",i,u,f,c,m=t[16].playQuiz+"",v,p,g,b=t[16].myCollection+"",_,y,N=(((ne=t[4])==null?void 0:ne.cards.length)||0)+"",Q,L,T=t[3].length+"",q,C,D,V,P,E,I,O,$,ge;const W=[Ps,Is],U=[];function le(H,K){return H[9]==="quiz"?0:1}P=le(t),E=U[P]=W[P](t);let Y=t[10]&&mn(t);return{c(){e=d("div"),l=d("header"),n=d("div"),s=d("h1"),i=h(o),u=k(),f=d("nav"),c=d("button"),v=h(m),p=k(),g=d("button"),_=h(b),y=h(" ("),Q=h(N),L=h("/"),q=h(T),C=h(")"),D=k(),V=d("main"),E.c(),I=k(),Y&&Y.c(),a(s,"class","app-title svelte-1mmoizy"),a(c,"class","nav-btn svelte-1mmoizy"),J(c,"active",t[9]==="quiz"),a(g,"class","nav-btn svelte-1mmoizy"),J(g,"active",t[9]==="collection"),a(f,"class","svelte-1mmoizy"),a(n,"class","header-content svelte-1mmoizy"),a(l,"class","app-header svelte-1mmoizy"),Le(l,"background-image","url("+Ls+")"),Le(l,"background-size","cover"),Le(l,"background-position","top center"),Le(l,"background-repeat","no-repeat"),a(V,"class","svelte-1mmoizy"),a(e,"class","app svelte-1mmoizy")},m(H,K){z(H,e,K),r(e,l),r(l,n),r(n,s),r(s,i),r(n,u),r(n,f),r(f,c),r(c,v),r(f,p),r(f,g),r(g,_),r(g,y),r(g,Q),r(g,L),r(g,q),r(g,C),r(e,D),r(e,V),U[P].m(V,null),r(e,I),Y&&Y.m(e,null),O=!0,$||(ge=[F(c,"click",t[26]),F(g,"click",t[25])],$=!0)},p(H,K){var se;(!O||K[0]&65536)&&o!==(o=H[16].appTitle+"")&&A(i,o),(!O||K[0]&65536)&&m!==(m=H[16].playQuiz+"")&&A(v,m),(!O||K[0]&512)&&J(c,"active",H[9]==="quiz"),(!O||K[0]&65536)&&b!==(b=H[16].myCollection+"")&&A(_,b),(!O||K[0]&16)&&N!==(N=(((se=H[4])==null?void 0:se.cards.length)||0)+"")&&A(Q,N),(!O||K[0]&8)&&T!==(T=H[3].length+"")&&A(q,T),(!O||K[0]&512)&&J(g,"active",H[9]==="collection");let Z=P;P=le(H),P===Z?U[P].p(H,K):(bn(),ze(U[Z],1,1,()=>{U[Z]=null}),wn(),E=U[P],E?E.p(H,K):(E=U[P]=W[P](H),E.c()),ye(E,1),E.m(V,null)),H[10]?Y?Y.p(H,K):(Y=mn(H),Y.c(),Y.m(e,null)):Y&&(Y.d(1),Y=null)},i(H){O||(ye(E),O=!0)},o(H){ze(E),O=!1},d(H){H&&M(e),U[P].d(),Y&&Y.d(),$=!1,_e(ge)}}}function Hs(t,e,l){let n,s,o,i;_t(t,bt,B=>l(38,s=B)),_t(t,Rt,B=>l(0,o=B)),_t(t,Ft,B=>l(17,i=B));let u="loading",f=null,c=[],m,v=!1,p=0,g=0,b=null,_="",y="quiz",N=!1,Q=i,L=!1,T=0;hn(()=>{l(4,m=Me()),localStorage.getItem("tcg-seen-language-dialog")?I():l(10,N=!0)});function q(B){const x=B.target;Ft.set(x.value),l(11,Q=x.value),l(3,c=[]),I()}function C(B){Rt.set(B)}let D="en",V=!1;function P(B){l(14,D=B),l(15,V=!0)}function E(B){Rt.set(D),bt.set(B),localStorage.setItem("tcg-seen-language-dialog","true"),l(10,N=!1),l(15,V=!1),I()}async function I(){var B;try{l(1,u="loading"),c.length===0&&l(3,c=await ol(Q));const x=[...c].sort((we,Ze)=>{const Xe=parseInt(we.localId||"0");return parseInt(Ze.localId||"0")-Xe}),S=new Set(x.slice(0,5).map(we=>we.id)),R=new Set(m.cards.map(we=>we.id)),X=c.filter(we=>!R.has(we.id)&&!S.has(we.id));if(X.length===0)throw new Error("Congratulations! You have collected all cards from this set!");const ie=On(X),te=await Fn(ie.id,Q),ae=((B=te.rarity)==null?void 0:B.toLowerCase())||"common",Je=ae!=="common"&&ae!=="uncommon"&&ae!=="rare"&&ae!=="double rare",ft=Jn(te,n,Je,s);if(!ft)throw new Error("Could not generate a valid question. Please try again.");l(12,L=Je?!1:ae!=="common"&&ae!=="uncommon"&&ae!=="rare"&&ae!=="double rare"),m.streakCard&&m.streakCard.id===te.id?l(13,T=m.currentStreak||0):l(13,T=0),l(2,f=ft),l(1,u="quiz")}catch(x){console.error("Error loading question:",x),l(8,_=x instanceof Error?x.message:"Failed to load question"),l(1,u="error")}}async function O(){m.unlockedRareSets||l(4,m.unlockedRareSets={},m),!m.unlockedRareSets[Q]&&m.stats.totalHpDefeated>=16e3&&(c.length===0&&l(3,c=await ol(Q)),[...c].sort((S,R)=>{const X=parseInt(S.localId||"0");return parseInt(R.localId||"0")-X}).slice(0,5).forEach(S=>{const R={id:S.id,name:S.name,image:S.image,hp:S.hp,types:S.types,rarity:S.rarity,collectedAt:new Date().toISOString()};m.cards.some(ie=>ie.id===S.id)||m.cards.push(R)}),l(4,m.unlockedRareSets[Q]=!0,m),ct(m))}function $(B){var S,R;if(!f)return;l(6,p=B.detail.firstAnswer),g=B.detail.secondAnswer||0,l(5,v=Zn(f,p,g));const x=v&&f.card.hp?f.card.hp:0;if(Hn(v,x),l(7,b=null),v){let X=!1;if(L&&!f.secondQuestion?(l(4,m=Me()),((S=m.streakCard)==null?void 0:S.id)===f.card.id?l(4,m.currentStreak=(m.currentStreak||0)+1,m):(l(4,m.streakCard=f.card,m),l(4,m.currentStreak=1,m)),m.currentStreak>=2&&(X=!0,l(4,m.currentStreak=0,m),l(4,m.streakCard=void 0,m)),ct(m)):X=!0,X){const ie={id:f.card.id,name:f.card.name,image:f.card.image,hp:f.card.hp,types:f.card.types,rarity:f.card.rarity,collectedAt:new Date().toISOString()};Vn(ie)&&l(7,b=f.card)}}else l(4,m=Me()),L&&((R=m.streakCard)==null?void 0:R.id)===f.card.id&&(l(4,m.currentStreak=0,m),l(4,m.streakCard=void 0,m),ct(m));l(4,m=Me()),v&&(O(),l(4,m=Me())),l(1,u="result")}function ge(){I()}function W(){I()}function U(){l(9,y="collection"),l(4,m=Me())}function le(){l(9,y="quiz")}function Y(){l(4,m=Me())}const ne=B=>B.id===Q,H=B=>C(B.detail),K=()=>P("en"),Z=()=>P("no"),se=()=>E(1),Qe=()=>E(2),re=()=>E(3),ve=()=>E(4),he=()=>E(5);return t.$$.update=()=>{t.$$.dirty[0]&1&&l(16,n=xn(o))},[o,u,f,c,m,v,p,b,_,y,N,Q,L,T,D,V,n,i,q,C,P,E,$,ge,W,U,le,Y,ne,H,K,Z,se,Qe,re,ve,he]}class Ys extends Ge{constructor(e){super(),We(this,e,Hs,Vs,je,{},null,[-1,-1])}}new Ys({target:document.getElementById("app")});
