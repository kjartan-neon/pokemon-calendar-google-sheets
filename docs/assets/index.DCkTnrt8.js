var Sl=Object.defineProperty;var yl=(t,e,l)=>e in t?Sl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var gt=(t,e,l)=>yl(t,typeof e!="symbol"?e+"":e,l);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function l(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=l(s);fetch(s.href,o)}})();function Y(){}function cl(t){return t()}function Ot(){return Object.create(null)}function re(t){t.forEach(cl)}function ul(t){return typeof t=="function"}function ae(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Xe;function Ae(t,e){return t===e?!0:(Xe||(Xe=document.createElement("a")),Xe.href=e,t===Xe.href)}function Al(t){return Object.keys(t).length===0}function El(t,...e){if(t==null){for(const n of e)n(void 0);return Y}const l=t.subscribe(...e);return l.unsubscribe?()=>l.unsubscribe():l}function zt(t,e,l){t.$$.on_destroy.push(El(e,l))}function i(t,e){t.appendChild(e)}function L(t,e,l){t.insertBefore(e,l||null)}function T(t){t.parentNode&&t.parentNode.removeChild(t)}function Ee(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function g(t){return document.createElement(t)}function w(t){return document.createTextNode(t)}function b(){return w(" ")}function et(){return w("")}function R(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function Tl(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function u(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function fl(t){return t===""?null:+t}function Ll(t){return Array.from(t.childNodes)}function A(t,e){e=""+e,t.data!==e&&(t.data=e)}function je(t,e){t.value=e??""}function ht(t,e,l,n){l==null?t.style.removeProperty(e):t.style.setProperty(e,l,"")}function xe(t,e,l){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e){s.selected=!0;return}}t.selectedIndex=-1}function V(t,e,l){t.classList.toggle(e,!!l)}function Ml(t,e,{bubbles:l=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:l,cancelable:n})}let qe;function Ne(t){qe=t}function dl(){if(!qe)throw new Error("Function called outside component initialization");return qe}function Nl(t){dl().$$.on_mount.push(t)}function tt(){const t=dl();return(e,l,{cancelable:n=!1}={})=>{const s=t.$$.callbacks[e];if(s){const o=Ml(e,l,{cancelable:n});return s.slice().forEach(r=>{r.call(t,o)}),!o.defaultPrevented}return!0}}function jl(t,e){const l=t.$$.callbacks[e.type];l&&l.slice().forEach(n=>n.call(this,e))}const Se=[],_t=[];let ye=[];const Bt=[],ql=Promise.resolve();let kt=!1;function Il(){kt||(kt=!0,ql.then(gl))}function bt(t){ye.push(t)}const mt=new Set;let we=0;function gl(){if(we!==0)return;const t=qe;do{try{for(;we<Se.length;){const e=Se[we];we++,Ne(e),Pl(e.$$)}}catch(e){throw Se.length=0,we=0,e}for(Ne(null),Se.length=0,we=0;_t.length;)_t.pop()();for(let e=0;e<ye.length;e+=1){const l=ye[e];mt.has(l)||(mt.add(l),l())}ye.length=0}while(Se.length);for(;Bt.length;)Bt.pop()();kt=!1,mt.clear(),Ne(t)}function Pl(t){if(t.fragment!==null){t.update(),re(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(bt)}}function Dl(t){const e=[],l=[];ye.forEach(n=>t.indexOf(n)===-1?e.push(n):l.push(n)),l.forEach(n=>n()),ye=e}const Ze=new Set;let de;function hl(){de={r:0,c:[],p:de}}function ml(){de.r||re(de.c),de=de.p}function $(t,e){t&&t.i&&(Ze.delete(t),t.i(e))}function se(t,e,l,n){if(t&&t.o){if(Ze.has(t))return;Ze.add(t),de.c.push(()=>{Ze.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}else n&&n()}function x(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Te(t){t&&t.c()}function ge(t,e,l){const{fragment:n,after_update:s}=t.$$;n&&n.m(e,l),bt(()=>{const o=t.$$.on_mount.map(cl).filter(ul);t.$$.on_destroy?t.$$.on_destroy.push(...o):re(o),t.$$.on_mount=[]}),s.forEach(bt)}function he(t,e){const l=t.$$;l.fragment!==null&&(Dl(l.after_update),re(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function Fl(t,e){t.$$.dirty[0]===-1&&(Se.push(t),Il(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function me(t,e,l,n,s,o,r=null,a=[-1]){const f=qe;Ne(t);const c=t.$$={fragment:null,ctx:[],props:o,update:Y,not_equal:s,bound:Ot(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:Ot(),dirty:a,skip_bound:!1,root:e.target||f.$$.root};r&&r(c.root);let p=!1;if(c.ctx=l?l(t,e.props||{},(d,h,...m)=>{const v=m.length?m[0]:h;return c.ctx&&s(c.ctx[d],c.ctx[d]=v)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](v),p&&Fl(t,d)),h}):[],c.update(),p=!0,re(c.before_update),c.fragment=n?n(c.ctx):!1,e.target){if(e.hydrate){const d=Ll(e.target);c.fragment&&c.fragment.l(d),d.forEach(T)}else c.fragment&&c.fragment.c();e.intro&&$(t.$$.fragment),ge(t,e.target,e.anchor),gl()}Ne(f)}class pe{constructor(){gt(this,"$$");gt(this,"$$set")}$destroy(){he(this,1),this.$destroy=Y}$on(e,l){if(!ul(l))return Y;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const s=n.indexOf(l);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!Al(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ql="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ql);const pl="https://api.tcgdex.net/v2/en";function vl(t,e){const l=t.split("-")[1];return`https://assets.tcgdex.net/en/${Ol(e)}/${e}/${l}/high.webp`}function Ol(t){return t.startsWith("swsh")?"swsh":t.startsWith("sv")?"sv":t.startsWith("me")?"base":"swsh"}async function zl(t){try{const e=await fetch(`${pl}/sets/${t}`);if(!e.ok)throw new Error("Failed to fetch cards from set");return((await e.json()).cards||[]).map(s=>({id:s.id,localId:s.localId,name:s.name,image:vl(s.id,t)}))}catch(e){throw console.error("Error fetching cards from set:",e),e}}async function Bl(t,e){try{const l=await fetch(`${pl}/cards/${t}`);if(!l.ok)throw new Error("Failed to fetch card details");return{...await l.json(),image:vl(t,e)}}catch(l){throw console.error("Error fetching card details:",l),l}}function Rl(t){const e=Math.floor(Math.random()*t.length);return t[e]}const Ct="pokemon-tcg-collection",_l="2.0";function Hl(){return{totalQuestions:0,correctAnswers:0,incorrectAnswers:0,totalHpDefeated:0}}function pt(){return{cards:[],stats:Hl(),version:_l}}function oe(){try{const t=localStorage.getItem(Ct);if(!t)return pt();const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?(console.warn("Invalid collection format, resetting..."),pt()):(e.stats.totalHpDefeated||(e.stats.totalHpDefeated=0),e.currentStreak||(e.currentStreak=0),e)}catch(t){return console.error("Error loading collection from local storage:",t),pt()}}function Ie(t){try{const e={...t,version:_l};localStorage.setItem(Ct,JSON.stringify(e))}catch(e){throw console.error("Error saving collection to local storage:",e),new Error("Failed to save collection")}}function Yl(t){try{const e=oe();return e.cards.some(n=>n.id===t.id)?!1:(e.cards.push(t),Ie(e),!0)}catch(e){return console.error("Error adding card to collection:",e),!1}}function Vl(t,e){try{const l=oe();l.stats.totalQuestions++,t?(l.stats.correctAnswers++,e&&(l.stats.totalHpDefeated+=e)):l.stats.incorrectAnswers++,Ie(l)}catch(l){console.error("Error updating stats:",l)}}function Kl(){try{localStorage.removeItem(Ct)}catch(t){console.error("Error clearing collection:",t)}}function Ul(){const t=oe();return JSON.stringify(t,null,2)}function Wl(t){try{const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?{success:!1,error:"Invalid collection format"}:!e.stats.totalQuestions===void 0||!e.stats.correctAnswers===void 0||!e.stats.incorrectAnswers===void 0?{success:!1,error:"Invalid stats format"}:(Ie(e),{success:!0})}catch(e){return console.error("Error importing collection:",e),{success:!1,error:"Failed to parse JSON file"}}}function Jl(){const t=Math.floor(Math.random()*50)+10,e=Math.floor(Math.random()*50)+10,l=["+","-"],n=l[Math.floor(Math.random()*l.length)];let s,o;if(n==="+")s=t+e,o=`What is ${t} + ${e}?`;else{s=t+e;const r=s;s=t,o=`What is ${r} - ${e}?`}return{question:o,answer:s}}function Gl(t){if(!t)return null;let e,l,n=!1;if(t.hp&&t.hp>0){n=!0;const s=[10,20,30,40,50][Math.floor(Math.random()*5)];l=Math.ceil(t.hp/s),e=`Your Pokémon deals ${s} damage each turn. How many turns does it take to defeat this Pokémon?`}else{const s=Jl();e=s.question,l=s.answer}return{card:t,questionText:e,correctAnswer:l,isPokemon:n}}function Xl(t,e){return e===t.correctAnswer}const Ce=[];function kl(t,e=Y){let l;const n=new Set;function s(a){if(ae(t,a)&&(t=a,l)){const f=!Ce.length;for(const c of n)c[1](),Ce.push(c,t);if(f){for(let c=0;c<Ce.length;c+=2)Ce[c][0](Ce[c+1]);Ce.length=0}}}function o(a){s(a(t))}function r(a,f=Y){const c=[a,f];return n.add(c),n.size===1&&(l=e(s,o)||Y),a(t),()=>{n.delete(c),n.size===0&&l&&(l(),l=null)}}return{set:s,update:o,subscribe:r}}const vt=[{id:"swsh3",name:"Sword & Shield - Darkness Ablaze"},{id:"sv05",name:"Scarlet & Violet - Temporal Forces"},{id:"sv06.5",name:"Scarlet & Violet - Shrouded Fable"}],bl="tcg-math-settings";function Zl(){return{language:"en",selectedSet:"swsh3"}}function St(){try{const t=localStorage.getItem(bl);if(t){const e=JSON.parse(t);return{language:e.language||"en",selectedSet:e.selectedSet||"swsh3"}}}catch(t){console.error("Error loading settings:",t)}return Zl()}function wl(t){try{localStorage.setItem(bl,JSON.stringify(t))}catch(e){console.error("Error saving settings:",e)}}const Cl=St(),$e=kl(Cl.language),wt=kl(Cl.selectedSet);$e.subscribe(t=>{const e=St();wl({...e,language:t})});wt.subscribe(t=>{const e=St();wl({...e,selectedSet:t})});const $l={en:{appTitle:"16 K",quizTitle:"TCG Math Challenge",playQuiz:"Play Quiz",myCollection:"My Collection",selectSet:"Select Set",selectLanguage:"Language",setInfo:"Collecting Set",enterAnswer:"Enter your answer",submitAnswer:"Submit Answer",nextQuestion:"Next Question",correct:"Correct!",notQuite:"Not quite!",correctMessage:"Great job! The answer was",incorrectMessage:"You answered",encouragement:"Try again with the next question!",youWonThisCard:"You won this card!",cardsCollected:"Cards Collected",questionsAnswered:"Questions Answered",correctAnswers:"Correct Answers",accuracy:"Accuracy",noCardsYet:"No cards yet!",noCardsDescription:"Answer questions correctly to start building your collection.",exportBackup:"Export Backup",importBackup:"Import Backup",clearThisSet:"Clear This Set",clearCollectionTitle:"Clear Collection?",clearCollectionMessage:"Are you sure you want to clear your entire collection? This action cannot be undone.",cancel:"Cancel",clearCollection:"Clear Collection",collectionExported:"Collection exported successfully!",collectionImported:"Collection imported successfully!",collectionCleared:"Collection cleared successfully!",exportFailed:"Failed to export collection",importFailed:"Failed to import collection",clearFailed:"Failed to clear collection",hit:"hit",hits:"hits",loading:"Loading new question...",yourCollection:"Your Collection",language:"Language"},no:{appTitle:"16 K",quizTitle:"TCG Matte Utfordring",playQuiz:"Spill Quiz",myCollection:"Min Samling",selectSet:"Velg Sett",selectLanguage:"Språk",setInfo:"Samler Sett",enterAnswer:"Skriv inn svaret ditt",submitAnswer:"Send Inn Svar",nextQuestion:"Neste Spørsmål",correct:"Riktig!",notQuite:"Ikke helt!",correctMessage:"Bra jobbet! Svaret var",incorrectMessage:"Du svarte",encouragement:"Prøv igjen med neste spørsmål!",youWonThisCard:"Du vant dette kortet!",cardsCollected:"Kort Samlet",questionsAnswered:"Spørsmål Besvart",correctAnswers:"Riktige Svar",accuracy:"Nøyaktighet",noCardsYet:"Ingen kort ennå!",noCardsDescription:"Svar riktig på spørsmål for å begynne å bygge samlingen din.",exportBackup:"Eksporter Backup",importBackup:"Importer Backup",clearThisSet:"Tøm Dette Settet",clearCollectionTitle:"Tøm Samling?",clearCollectionMessage:"Er du sikker på at du vil tømme hele samlingen din? Denne handlingen kan ikke angres.",cancel:"Avbryt",clearCollection:"Tøm Samling",collectionExported:"Samling eksportert!",collectionImported:"Samling importert!",collectionCleared:"Samling tømt!",exportFailed:"Kunne ikke eksportere samling",importFailed:"Kunne ikke importere samling",clearFailed:"Kunne ikke tømme samling",hit:"treff",hits:"treff",loading:"Laster nytt spørsmål...",yourCollection:"Din Samling",language:"Språk"}};function xl(t){return $l[t]}function Rt(t,e,l){const n=t.slice();return n[3]=e[l],n}function Ht(t,e,l){const n=t.slice();return n[6]=e[l],n}function Yt(t){let e,l,n,s,o=t[0].hp+"",r;return{c(){e=g("div"),l=g("span"),l.textContent="HP",n=b(),s=g("span"),r=w(o),u(l,"class","hp-label svelte-2rdllh"),u(s,"class","hp-value svelte-2rdllh"),u(e,"class","card-hp svelte-2rdllh")},m(a,f){L(a,e,f),i(e,l),i(e,n),i(e,s),i(s,r)},p(a,f){f&1&&o!==(o=a[0].hp+"")&&A(r,o)},d(a){a&&T(e)}}}function Vt(t){let e,l=x(t[0].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=Kt(Ht(t,l,s));return{c(){e=g("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","card-types svelte-2rdllh")},m(s,o){L(s,e,o);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null)},p(s,o){if(o&1){l=x(s[0].types);let r;for(r=0;r<l.length;r+=1){const a=Ht(s,l,r);n[r]?n[r].p(a,o):(n[r]=Kt(a),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=l.length}},d(s){s&&T(e),Ee(n,s)}}}function Kt(t){let e,l=t[6]+"",n;return{c(){e=g("span"),n=w(l),u(e,"class","type-badge svelte-2rdllh")},m(s,o){L(s,e,o),i(e,n)},p(s,o){o&1&&l!==(l=s[6]+"")&&A(n,l)},d(s){s&&T(e)}}}function Ut(t){let e,l,n,s=x(t[0].attacks),o=[];for(let r=0;r<s.length;r+=1)o[r]=Jt(Rt(t,s,r));return{c(){e=g("div"),l=g("h4"),l.textContent="Attacks:",n=b();for(let r=0;r<o.length;r+=1)o[r].c();u(l,"class","svelte-2rdllh"),u(e,"class","card-attacks svelte-2rdllh")},m(r,a){L(r,e,a),i(e,l),i(e,n);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null)},p(r,a){if(a&5){s=x(r[0].attacks);let f;for(f=0;f<s.length;f+=1){const c=Rt(r,s,f);o[f]?o[f].p(c,a):(o[f]=Jt(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=s.length}},d(r){r&&T(e),Ee(o,r)}}}function Wt(t){let e,l=t[3].damage+"",n;return{c(){e=g("span"),n=w(l),u(e,"class","attack-damage svelte-2rdllh")},m(s,o){L(s,e,o),i(e,n)},p(s,o){o&1&&l!==(l=s[3].damage+"")&&A(n,l)},d(s){s&&T(e)}}}function Jt(t){let e,l,n=t[3].name+"",s,o,r,a=t[3].damage&&Wt(t);return{c(){e=g("div"),l=g("span"),s=w(n),o=b(),a&&a.c(),r=b(),u(l,"class","attack-name svelte-2rdllh"),u(e,"class","attack svelte-2rdllh"),V(e,"highlighted",t[2]===t[3].name)},m(f,c){L(f,e,c),i(e,l),i(l,s),i(e,o),a&&a.m(e,null),i(e,r)},p(f,c){c&1&&n!==(n=f[3].name+"")&&A(s,n),f[3].damage?a?a.p(f,c):(a=Wt(f),a.c(),a.m(e,r)):a&&(a.d(1),a=null),c&5&&V(e,"highlighted",f[2]===f[3].name)},d(f){f&&T(e),a&&a.d()}}}function en(t){let e,l,n,s,o,r,a,f,c=t[0].name+"",p,d,h,m,v=t[0].hp&&Yt(t),_=t[0].types&&t[0].types.length>0&&Vt(t),k=t[1]&&t[0].attacks&&t[0].attacks.length>0&&Ut(t);return{c(){e=g("div"),l=g("div"),n=g("img"),r=b(),a=g("div"),f=g("h3"),p=w(c),d=b(),v&&v.c(),h=b(),_&&_.c(),m=b(),k&&k.c(),Ae(n.src,s=t[0].image)||u(n,"src",s),u(n,"alt",o=t[0].name),u(n,"class","svelte-2rdllh"),u(l,"class","card-image svelte-2rdllh"),u(f,"class","card-name svelte-2rdllh"),u(a,"class","card-info svelte-2rdllh"),u(e,"class","pokemon-card svelte-2rdllh")},m(S,E){L(S,e,E),i(e,l),i(l,n),i(e,r),i(e,a),i(a,f),i(f,p),i(a,d),v&&v.m(a,null),i(a,h),_&&_.m(a,null),i(a,m),k&&k.m(a,null)},p(S,[E]){E&1&&!Ae(n.src,s=S[0].image)&&u(n,"src",s),E&1&&o!==(o=S[0].name)&&u(n,"alt",o),E&1&&c!==(c=S[0].name+"")&&A(p,c),S[0].hp?v?v.p(S,E):(v=Yt(S),v.c(),v.m(a,h)):v&&(v.d(1),v=null),S[0].types&&S[0].types.length>0?_?_.p(S,E):(_=Vt(S),_.c(),_.m(a,m)):_&&(_.d(1),_=null),S[1]&&S[0].attacks&&S[0].attacks.length>0?k?k.p(S,E):(k=Ut(S),k.c(),k.m(a,null)):k&&(k.d(1),k=null)},i:Y,o:Y,d(S){S&&T(e),v&&v.d(),_&&_.d(),k&&k.d()}}}function tn(t,e,l){let{card:n}=e,{showAttacks:s=!1}=e,{highlightedAttack:o=null}=e;return t.$$set=r=>{"card"in r&&l(0,n=r.card),"showAttacks"in r&&l(1,s=r.showAttacks),"highlightedAttack"in r&&l(2,o=r.highlightedAttack)},[n,s,o]}class ln extends pe{constructor(e){super(),me(this,e,tn,en,ae,{card:0,showAttacks:1,highlightedAttack:2})}}function nn(t){let e,l,n,s,o,r,a=t[0].questionText+"",f,c,p,d,h,m,v,_=t[1].submitAnswer+"",k,S,E,O,I;return n=new ln({props:{card:t[0].card}}),{c(){e=g("div"),l=g("div"),Te(n.$$.fragment),s=b(),o=g("div"),r=g("h3"),f=w(a),c=b(),p=g("div"),d=g("input"),m=b(),v=g("button"),k=w(_),u(l,"class","card-display svelte-1ohble"),u(r,"class","question-text svelte-1ohble"),u(d,"type","number"),u(d,"placeholder",h=t[1].enterAnswer),u(d,"class","answer-input svelte-1ohble"),u(v,"class","submit-btn btn-primary svelte-1ohble"),v.disabled=S=!t[2],u(p,"class","answer-input-container svelte-1ohble"),u(o,"class","question-container svelte-1ohble"),u(e,"class","quiz-view svelte-1ohble")},m(y,C){L(y,e,C),i(e,l),ge(n,l,null),i(e,s),i(e,o),i(o,r),i(r,f),i(o,c),i(o,p),i(p,d),je(d,t[2]),i(p,m),i(p,v),i(v,k),E=!0,O||(I=[R(d,"input",t[6]),R(d,"keypress",t[4]),R(v,"click",t[3])],O=!0)},p(y,[C]){const D={};C&1&&(D.card=y[0].card),n.$set(D),(!E||C&1)&&a!==(a=y[0].questionText+"")&&A(f,a),(!E||C&2&&h!==(h=y[1].enterAnswer))&&u(d,"placeholder",h),C&4&&fl(d.value)!==y[2]&&je(d,y[2]),(!E||C&2)&&_!==(_=y[1].submitAnswer+"")&&A(k,_),(!E||C&4&&S!==(S=!y[2]))&&(v.disabled=S)},i(y){E||($(n.$$.fragment,y),E=!0)},o(y){se(n.$$.fragment,y),E=!1},d(y){y&&T(e),he(n),O=!1,re(I)}}}function sn(t,e,l){let{question:n}=e,{t:s}=e,{currentSet:o}=e;const r=tt();let a="";function f(){const d=parseInt(a,10);isNaN(d)||r("answer",d)}function c(d){d.key==="Enter"&&f()}function p(){a=fl(this.value),l(2,a)}return t.$$set=d=>{"question"in d&&l(0,n=d.question),"t"in d&&l(1,s=d.t),"currentSet"in d&&l(5,o=d.currentSet)},[n,s,a,f,c,o,p]}class rn extends pe{constructor(e){super(),me(this,e,sn,nn,ae,{question:0,t:1,currentSet:5})}}function on(t){let e,l,n,s=t[4].notQuite+"",o,r,a,f=t[4].incorrectMessage+"",c,p,d,h,m,v=t[4].correctMessage.toLowerCase()+"",_,k,S,E,O,I,y,C,D=t[4].encouragement+"",N,M=t[5]&&t[6]>0&&Gt(t);return{c(){e=g("div"),e.textContent="✗",l=b(),n=g("h2"),o=w(s),r=b(),a=g("p"),c=w(f),p=b(),d=g("strong"),h=w(t[2]),m=w(", "),_=w(v),k=b(),S=g("strong"),E=w(t[1]),O=w("."),I=b(),M&&M.c(),y=b(),C=g("p"),N=w(D),u(e,"class","result-icon error svelte-1v74pgf"),u(n,"class","result-title svelte-1v74pgf"),u(d,"class","svelte-1v74pgf"),u(S,"class","svelte-1v74pgf"),u(a,"class","result-message svelte-1v74pgf"),u(C,"class","encouragement svelte-1v74pgf")},m(P,j){L(P,e,j),L(P,l,j),L(P,n,j),i(n,o),L(P,r,j),L(P,a,j),i(a,c),i(a,p),i(a,d),i(d,h),i(a,m),i(a,_),i(a,k),i(a,S),i(S,E),i(a,O),L(P,I,j),M&&M.m(P,j),L(P,y,j),L(P,C,j),i(C,N)},p(P,j){j&16&&s!==(s=P[4].notQuite+"")&&A(o,s),j&16&&f!==(f=P[4].incorrectMessage+"")&&A(c,f),j&4&&A(h,P[2]),j&16&&v!==(v=P[4].correctMessage.toLowerCase()+"")&&A(_,v),j&2&&A(E,P[1]),P[5]&&P[6]>0?M?M.p(P,j):(M=Gt(P),M.c(),M.m(y.parentNode,y)):M&&(M.d(1),M=null),j&16&&D!==(D=P[4].encouragement+"")&&A(N,D)},d(P){P&&(T(e),T(l),T(n),T(r),T(a),T(I),T(y),T(C)),M&&M.d(P)}}}function an(t){let e,l,n,s=t[4].correct+"",o,r,a,f=t[4].correctMessage+"",c,p,d,h,m,v=(t[1]===1?t[4].hit:t[4].hits)+"",_,k,S,E,O,I=t[5]&&!t[3]&&Xt(t),y=t[3]&&Zt(t);return{c(){e=g("div"),e.textContent="✓",l=b(),n=g("h2"),o=w(s),r=b(),a=g("p"),c=w(f),p=b(),d=g("strong"),h=w(t[1]),m=b(),_=w(v),k=w("!"),S=b(),I&&I.c(),E=b(),y&&y.c(),O=et(),u(e,"class","result-icon success svelte-1v74pgf"),u(n,"class","result-title svelte-1v74pgf"),u(d,"class","svelte-1v74pgf"),u(a,"class","result-message svelte-1v74pgf")},m(C,D){L(C,e,D),L(C,l,D),L(C,n,D),i(n,o),L(C,r,D),L(C,a,D),i(a,c),i(a,p),i(a,d),i(d,h),i(a,m),i(a,_),i(a,k),L(C,S,D),I&&I.m(C,D),L(C,E,D),y&&y.m(C,D),L(C,O,D)},p(C,D){D&16&&s!==(s=C[4].correct+"")&&A(o,s),D&16&&f!==(f=C[4].correctMessage+"")&&A(c,f),D&2&&A(h,C[1]),D&18&&v!==(v=(C[1]===1?C[4].hit:C[4].hits)+"")&&A(_,v),C[5]&&!C[3]?I?I.p(C,D):(I=Xt(C),I.c(),I.m(E.parentNode,E)):I&&(I.d(1),I=null),C[3]?y?y.p(C,D):(y=Zt(C),y.c(),y.m(O.parentNode,O)):y&&(y.d(1),y=null)},d(C){C&&(T(e),T(l),T(n),T(r),T(a),T(S),T(E),T(O)),I&&I.d(C),y&&y.d(C)}}}function Gt(t){let e,l=t[4].language==="Språk"?"Streak reset! Try again.":"Rekke tilbakestilt! Prøv igjen.",n;return{c(){e=g("p"),n=w(l),u(e,"class","streak-lost svelte-1v74pgf")},m(s,o){L(s,e,o),i(e,n)},p(s,o){o&16&&l!==(l=s[4].language==="Språk"?"Streak reset! Try again.":"Rekke tilbakestilt! Prøv igjen.")&&A(n,l)},d(s){s&&T(e)}}}function Xt(t){let e,l,n,s,o,r,a;function f(d,h){return d[7]===1?un:cn}let c=f(t),p=c(t);return{c(){e=g("div"),l=g("p"),p.c(),n=b(),s=g("div"),o=g("div"),r=b(),a=g("div"),u(l,"class","streak-text svelte-1v74pgf"),u(o,"class","streak-dot svelte-1v74pgf"),V(o,"filled",t[7]>=1),u(a,"class","streak-dot svelte-1v74pgf"),V(a,"filled",t[7]>=2),u(s,"class","streak-progress svelte-1v74pgf"),u(e,"class","streak-info svelte-1v74pgf")},m(d,h){L(d,e,h),i(e,l),p.m(l,null),i(e,n),i(e,s),i(s,o),i(s,r),i(s,a)},p(d,h){c===(c=f(d))&&p?p.p(d,h):(p.d(1),p=c(d),p&&(p.c(),p.m(l,null))),h&128&&V(o,"filled",d[7]>=1),h&128&&V(a,"filled",d[7]>=2)},d(d){d&&T(e),p.d()}}}function cn(t){let e=t[4].language==="Språk"?"Get 2 correct answers to win this rare card!":"Få 2 riktige svar for å vinne dette sjeldne kortet!",l;return{c(){l=w(e)},m(n,s){L(n,l,s)},p(n,s){s&16&&e!==(e=n[4].language==="Språk"?"Get 2 correct answers to win this rare card!":"Få 2 riktige svar for å vinne dette sjeldne kortet!")&&A(l,e)},d(n){n&&T(l)}}}function un(t){let e=t[4].language==="Språk"?"One more correct to win this card!":"Én til riktig for å vinne dette kortet!",l;return{c(){l=w(e)},m(n,s){L(n,l,s)},p(n,s){s&16&&e!==(e=n[4].language==="Språk"?"One more correct to win this card!":"Én til riktig for å vinne dette kortet!")&&A(l,e)},d(n){n&&T(l)}}}function Zt(t){let e,l,n=t[4].youWonThisCard+"",s,o,r,a,f,c,p,d,h,m=t[3].name+"",v;return{c(){e=g("div"),l=g("h3"),s=w(n),o=b(),r=g("div"),a=g("div"),f=g("img"),d=b(),h=g("span"),v=w(m),u(l,"class","svelte-1v74pgf"),Ae(f.src,c=t[3].image)||u(f,"src",c),u(f,"alt",p=t[3].name),u(f,"class","svelte-1v74pgf"),u(h,"class","card-name svelte-1v74pgf"),u(a,"class","mini-card svelte-1v74pgf"),u(r,"class","cards-grid svelte-1v74pgf"),u(e,"class","won-cards svelte-1v74pgf")},m(_,k){L(_,e,k),i(e,l),i(l,s),i(e,o),i(e,r),i(r,a),i(a,f),i(a,d),i(a,h),i(h,v)},p(_,k){k&16&&n!==(n=_[4].youWonThisCard+"")&&A(s,n),k&8&&!Ae(f.src,c=_[3].image)&&u(f,"src",c),k&8&&p!==(p=_[3].name)&&u(f,"alt",p),k&8&&m!==(m=_[3].name+"")&&A(v,m)},d(_){_&&T(e)}}}function fn(t){let e,l,n,s,o=t[4].nextQuestion+"",r,a,f;function c(h,m){return h[0]?an:on}let p=c(t),d=p(t);return{c(){e=g("div"),l=g("div"),d.c(),n=b(),s=g("button"),r=w(o),u(l,"class","result-card svelte-1v74pgf"),V(l,"correct",t[0]),V(l,"incorrect",!t[0]),u(s,"class","next-btn btn-primary svelte-1v74pgf"),u(e,"class","result-view svelte-1v74pgf")},m(h,m){L(h,e,m),i(e,l),d.m(l,null),i(e,n),i(e,s),i(s,r),a||(f=R(s,"click",t[8]),a=!0)},p(h,[m]){p===(p=c(h))&&d?d.p(h,m):(d.d(1),d=p(h),d&&(d.c(),d.m(l,null))),m&1&&V(l,"correct",h[0]),m&1&&V(l,"incorrect",!h[0]),m&16&&o!==(o=h[4].nextQuestion+"")&&A(r,o)},i:Y,o:Y,d(h){h&&T(e),d.d(),a=!1,f()}}}function dn(t,e,l){let{isCorrect:n}=e,{correctAnswer:s}=e,{userAnswer:o}=e,{wonCard:r}=e,{t:a}=e,{needsStreak:f=!1}=e,{streakProgress:c=0}=e,{currentStreak:p=0}=e;const d=tt();function h(){d("next")}return t.$$set=m=>{"isCorrect"in m&&l(0,n=m.isCorrect),"correctAnswer"in m&&l(1,s=m.correctAnswer),"userAnswer"in m&&l(2,o=m.userAnswer),"wonCard"in m&&l(3,r=m.wonCard),"t"in m&&l(4,a=m.t),"needsStreak"in m&&l(5,f=m.needsStreak),"streakProgress"in m&&l(6,c=m.streakProgress),"currentStreak"in m&&l(7,p=m.currentStreak)},[n,s,o,r,a,f,c,p,h]}class gn extends pe{constructor(e){super(),me(this,e,dn,fn,ae,{isCorrect:0,correctAnswer:1,userAnswer:2,wonCard:3,t:4,needsStreak:5,streakProgress:6,currentStreak:7})}}function hn(){try{const t=Ul(),e=new Blob([t],{type:"application/json"}),l=URL.createObjectURL(e),n=document.createElement("a");n.href=l,n.download=`pokemon-collection-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(l)}catch(t){throw console.error("Error downloading backup:",t),new Error("Failed to download backup")}}function mn(t){return new Promise(e=>{const l=new FileReader;l.onload=n=>{var s;try{const o=(s=n.target)==null?void 0:s.result,r=Wl(o);e(r)}catch(o){console.error("Error reading file:",o),e({success:!1,error:"Failed to read file"})}},l.onerror=()=>{e({success:!1,error:"Failed to read file"})},l.readAsText(t)})}function $t(t,e,l){const n=t.slice();return n[21]=e[l],n}function xt(t,e,l){const n=t.slice();return n[24]=e[l],n}function el(t,e,l){const n=t.slice();return n[27]=e[l],n[29]=l,n}function pn(t){let e,l=t[1].language==="Språk"?"No stars yet":"Ingen stjäerner ennå",n;return{c(){e=g("span"),n=w(l),u(e,"class","no-stars svelte-xg8ucf")},m(s,o){L(s,e,o),i(e,n)},p(s,o){o&2&&l!==(l=s[1].language==="Språk"?"No stars yet":"Ingen stjäerner ennå")&&A(n,l)},d(s){s&&T(e)}}}function vn(t){let e,l=x(Array(t[7])),n=[];for(let s=0;s<l.length;s+=1)n[s]=tl(el(t,l,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=et()},m(s,o){for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(s,o);L(s,e,o)},p(s,o){if(o&128){l=x(Array(s[7]));let r;for(r=0;r<l.length;r+=1){const a=el(s,l,r);n[r]?n[r].p(a,o):(n[r]=tl(a),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=l.length}},d(s){s&&T(e),Ee(n,s)}}}function tl(t){let e;return{c(){e=g("span"),e.textContent="⭐",u(e,"class","star filled svelte-xg8ucf"),u(e,"key",t[29])},m(l,n){L(l,e,n)},p:Y,d(l){l&&T(e)}}}function ll(t){let e,l=t[4].text+"",n;return{c(){e=g("div"),n=w(l),u(e,"class","message svelte-xg8ucf"),V(e,"success",t[4].type==="success"),V(e,"error",t[4].type==="error")},m(s,o){L(s,e,o),i(e,n)},p(s,o){o&16&&l!==(l=s[4].text+"")&&A(n,l),o&16&&V(e,"success",s[4].type==="success"),o&16&&V(e,"error",s[4].type==="error")},d(s){s&&T(e)}}}function _n(t){let e,l=x(t[0].cards),n=[];for(let s=0;s<l.length;s+=1)n[s]=ol($t(t,l,s));return{c(){e=g("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","cards-grid svelte-xg8ucf")},m(s,o){L(s,e,o);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null)},p(s,o){if(o&1){l=x(s[0].cards);let r;for(r=0;r<l.length;r+=1){const a=$t(s,l,r);n[r]?n[r].p(a,o):(n[r]=ol(a),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=l.length}},d(s){s&&T(e),Ee(n,s)}}}function kn(t){let e,l,n,s,o=t[1].noCardsYet+"",r,a,f,c=t[1].noCardsDescription+"",p;return{c(){e=g("div"),l=g("div"),l.textContent="📦",n=b(),s=g("h3"),r=w(o),a=b(),f=g("p"),p=w(c),u(l,"class","empty-icon svelte-xg8ucf"),u(s,"class","svelte-xg8ucf"),u(f,"class","svelte-xg8ucf"),u(e,"class","empty-state svelte-xg8ucf")},m(d,h){L(d,e,h),i(e,l),i(e,n),i(e,s),i(s,r),i(e,a),i(e,f),i(f,p)},p(d,h){h&2&&o!==(o=d[1].noCardsYet+"")&&A(r,o),h&2&&c!==(c=d[1].noCardsDescription+"")&&A(p,c)},d(d){d&&T(e)}}}function nl(t){let e,l,n=t[21].hp+"",s;return{c(){e=g("span"),l=w("HP "),s=w(n),u(e,"class","hp svelte-xg8ucf")},m(o,r){L(o,e,r),i(e,l),i(e,s)},p(o,r){r&1&&n!==(n=o[21].hp+"")&&A(s,n)},d(o){o&&T(e)}}}function sl(t){let e,l=x(t[21].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=rl(xt(t,l,s));return{c(){e=g("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","types svelte-xg8ucf")},m(s,o){L(s,e,o);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null)},p(s,o){if(o&1){l=x(s[21].types);let r;for(r=0;r<l.length;r+=1){const a=xt(s,l,r);n[r]?n[r].p(a,o):(n[r]=rl(a),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=l.length}},d(s){s&&T(e),Ee(n,s)}}}function rl(t){let e,l=t[24]+"",n;return{c(){e=g("span"),n=w(l),u(e,"class","type svelte-xg8ucf")},m(s,o){L(s,e,o),i(e,n)},p(s,o){o&1&&l!==(l=s[24]+"")&&A(n,l)},d(s){s&&T(e)}}}function ol(t){let e,l,n,s,o,r,a,f=t[21].name+"",c,p,d,h,m=t[21].hp&&nl(t),v=t[21].types&&t[21].types.length>0&&sl(t);return{c(){e=g("div"),l=g("img"),o=b(),r=g("div"),a=g("h4"),c=w(f),p=b(),m&&m.c(),d=b(),v&&v.c(),h=b(),Ae(l.src,n=t[21].image)||u(l,"src",n),u(l,"alt",s=t[21].name),u(l,"class","svelte-xg8ucf"),u(a,"class","svelte-xg8ucf"),u(r,"class","card-details svelte-xg8ucf"),u(e,"class","collection-card svelte-xg8ucf")},m(_,k){L(_,e,k),i(e,l),i(e,o),i(e,r),i(r,a),i(a,c),i(r,p),m&&m.m(r,null),i(r,d),v&&v.m(r,null),i(e,h)},p(_,k){k&1&&!Ae(l.src,n=_[21].image)&&u(l,"src",n),k&1&&s!==(s=_[21].name)&&u(l,"alt",s),k&1&&f!==(f=_[21].name+"")&&A(c,f),_[21].hp?m?m.p(_,k):(m=nl(_),m.c(),m.m(r,d)):m&&(m.d(1),m=null),_[21].types&&_[21].types.length>0?v?v.p(_,k):(v=sl(_),v.c(),v.m(r,null)):v&&(v.d(1),v=null)},d(_){_&&T(e),m&&m.d(),v&&v.d()}}}function il(t){let e,l,n,s=t[1].clearCollectionTitle+"",o,r,a,f=t[1].clearCollectionMessage+"",c,p,d,h,m=t[1].cancel+"",v,_,k,S=t[1].clearCollection+"",E,O,I;return{c(){e=g("div"),l=g("div"),n=g("h3"),o=w(s),r=b(),a=g("p"),c=w(f),p=b(),d=g("div"),h=g("button"),v=w(m),_=b(),k=g("button"),E=w(S),u(n,"class","svelte-xg8ucf"),u(a,"class","svelte-xg8ucf"),u(h,"class","btn-secondary"),u(k,"class","btn-error"),u(d,"class","dialog-actions svelte-xg8ucf"),u(l,"class","dialog svelte-xg8ucf"),u(l,"role","dialog"),u(e,"class","dialog-overlay svelte-xg8ucf"),u(e,"role","button"),u(e,"tabindex","-1")},m(y,C){L(y,e,C),i(e,l),i(l,n),i(n,o),i(l,r),i(l,a),i(a,c),i(l,p),i(l,d),i(d,h),i(h,v),i(d,_),i(d,k),i(k,E),O||(I=[R(h,"click",t[13]),R(k,"click",t[14]),R(l,"click",Tl(t[16])),R(e,"click",t[13]),R(e,"keydown",t[18])],O=!0)},p(y,C){C&2&&s!==(s=y[1].clearCollectionTitle+"")&&A(o,s),C&2&&f!==(f=y[1].clearCollectionMessage+"")&&A(c,f),C&2&&m!==(m=y[1].cancel+"")&&A(v,m),C&2&&S!==(S=y[1].clearCollection+"")&&A(E,S)},d(y){y&&T(e),O=!1,re(I)}}}function bn(t){let e,l,n,s,o,r,a=t[1].language==="Språk"?`${t[6].toLocaleString()} HP to next star`:`${t[6].toLocaleString()} HP til neste stjäerne`,f,c,p,d,h,m,v,_=t[1].yourCollection+"",k,S,E,O,I,y=(t[1].language||"Language")+"",C,D,N,M,P,j,Z,K,ee,U=t[1].exportBackup+"",ie,F,H,Q=t[1].importBackup+"",B,W,X,ce=t[1].clearThisSet+"",ue,yt,fe,At,lt,te,ve,Pe,De=t[0].cards.length+"",nt,Et,Fe,Qe=t[1].cardsCollected+"",st,Tt,_e,Oe,ze=t[0].stats.totalQuestions+"",rt,Lt,Be,Re=t[1].questionsAnswered+"",ot,Mt,ke,He,Ye=t[0].stats.correctAnswers+"",it,Nt,Ve,Ke=t[1].correctAnswers+"",at,jt,be,Le,ct,qt,It,Ue,We=t[1].accuracy+"",ut,Pt,ft,Me,dt,Dt;function Ft(q,z){return q[7]>0?vn:pn}let Je=Ft(t),le=Je(t),J=t[4]&&ll(t);function Qt(q,z){return q[0].cards.length===0?kn:_n}let Ge=Qt(t),ne=Ge(t),G=t[5]&&il(t);return{c(){e=g("div"),l=g("div"),n=g("div"),le.c(),s=b(),o=g("div"),r=g("div"),f=w(a),c=b(),p=g("div"),d=g("div"),h=b(),m=g("div"),v=g("h2"),k=w(_),S=b(),E=g("div"),O=g("div"),I=g("label"),C=w(y),D=w(":"),N=b(),M=g("select"),P=g("option"),P.textContent="English",j=g("option"),j.textContent="Norsk",Z=b(),K=g("div"),ee=g("button"),ie=w(U),F=b(),H=g("button"),B=w(Q),W=b(),X=g("button"),ue=w(ce),yt=b(),fe=g("input"),At=b(),J&&J.c(),lt=b(),te=g("div"),ve=g("div"),Pe=g("div"),nt=w(De),Et=b(),Fe=g("div"),st=w(Qe),Tt=b(),_e=g("div"),Oe=g("div"),rt=w(ze),Lt=b(),Be=g("div"),ot=w(Re),Mt=b(),ke=g("div"),He=g("div"),it=w(Ye),Nt=b(),Ve=g("div"),at=w(Ke),jt=b(),be=g("div"),Le=g("div"),ct=w(t[8]),qt=w("%"),It=b(),Ue=g("div"),ut=w(We),Pt=b(),ne.c(),ft=b(),G&&G.c(),Me=et(),u(n,"class","stars-display svelte-xg8ucf"),u(r,"class","hp-progress-text svelte-xg8ucf"),u(d,"class","hp-progress-fill svelte-xg8ucf"),ht(d,"width",(16e3-t[6])/16e3*100+"%"),u(p,"class","hp-progress-bar svelte-xg8ucf"),u(o,"class","hp-progress svelte-xg8ucf"),u(l,"class","stars-section svelte-xg8ucf"),u(v,"class","svelte-xg8ucf"),u(I,"for","language-select"),u(I,"class","svelte-xg8ucf"),P.__value="en",je(P,P.__value),u(P,"class","svelte-xg8ucf"),j.__value="no",je(j,j.__value),u(j,"class","svelte-xg8ucf"),u(M,"id","language-select"),u(M,"class","language-selector svelte-xg8ucf"),u(O,"class","language-selector-container svelte-xg8ucf"),u(ee,"class","btn-secondary"),u(H,"class","btn-secondary"),u(X,"class","btn-error"),u(fe,"type","file"),u(fe,"accept",".json"),ht(fe,"display","none"),u(K,"class","header-actions svelte-xg8ucf"),u(E,"class","header-controls svelte-xg8ucf"),u(m,"class","collection-header svelte-xg8ucf"),u(Pe,"class","stat-value svelte-xg8ucf"),u(Fe,"class","stat-label svelte-xg8ucf"),u(ve,"class","stat-card svelte-xg8ucf"),u(Oe,"class","stat-value svelte-xg8ucf"),u(Be,"class","stat-label svelte-xg8ucf"),u(_e,"class","stat-card svelte-xg8ucf"),u(He,"class","stat-value svelte-xg8ucf"),u(Ve,"class","stat-label svelte-xg8ucf"),u(ke,"class","stat-card svelte-xg8ucf"),u(Le,"class","stat-value svelte-xg8ucf"),u(Ue,"class","stat-label svelte-xg8ucf"),u(be,"class","stat-card svelte-xg8ucf"),u(te,"class","stats-section svelte-xg8ucf"),u(e,"class","collection-view svelte-xg8ucf")},m(q,z){L(q,e,z),i(e,l),i(l,n),le.m(n,null),i(l,s),i(l,o),i(o,r),i(r,f),i(o,c),i(o,p),i(p,d),i(e,h),i(e,m),i(m,v),i(v,k),i(m,S),i(m,E),i(E,O),i(O,I),i(I,C),i(I,D),i(O,N),i(O,M),i(M,P),i(M,j),xe(M,t[2]),i(E,Z),i(E,K),i(K,ee),i(ee,ie),i(K,F),i(K,H),i(H,B),i(K,W),i(K,X),i(X,ue),i(K,yt),i(K,fe),t[17](fe),i(e,At),J&&J.m(e,null),i(e,lt),i(e,te),i(te,ve),i(ve,Pe),i(Pe,nt),i(ve,Et),i(ve,Fe),i(Fe,st),i(te,Tt),i(te,_e),i(_e,Oe),i(Oe,rt),i(_e,Lt),i(_e,Be),i(Be,ot),i(te,Mt),i(te,ke),i(ke,He),i(He,it),i(ke,Nt),i(ke,Ve),i(Ve,at),i(te,jt),i(te,be),i(be,Le),i(Le,ct),i(Le,qt),i(be,It),i(be,Ue),i(Ue,ut),i(e,Pt),ne.m(e,null),L(q,ft,z),G&&G.m(q,z),L(q,Me,z),dt||(Dt=[R(M,"change",t[15]),R(ee,"click",t[9]),R(H,"click",t[10]),R(X,"click",t[12]),R(fe,"change",t[11])],dt=!0)},p(q,[z]){Je===(Je=Ft(q))&&le?le.p(q,z):(le.d(1),le=Je(q),le&&(le.c(),le.m(n,null))),z&66&&a!==(a=q[1].language==="Språk"?`${q[6].toLocaleString()} HP to next star`:`${q[6].toLocaleString()} HP til neste stjäerne`)&&A(f,a),z&64&&ht(d,"width",(16e3-q[6])/16e3*100+"%"),z&2&&_!==(_=q[1].yourCollection+"")&&A(k,_),z&2&&y!==(y=(q[1].language||"Language")+"")&&A(C,y),z&4&&xe(M,q[2]),z&2&&U!==(U=q[1].exportBackup+"")&&A(ie,U),z&2&&Q!==(Q=q[1].importBackup+"")&&A(B,Q),z&2&&ce!==(ce=q[1].clearThisSet+"")&&A(ue,ce),q[4]?J?J.p(q,z):(J=ll(q),J.c(),J.m(e,lt)):J&&(J.d(1),J=null),z&1&&De!==(De=q[0].cards.length+"")&&A(nt,De),z&2&&Qe!==(Qe=q[1].cardsCollected+"")&&A(st,Qe),z&1&&ze!==(ze=q[0].stats.totalQuestions+"")&&A(rt,ze),z&2&&Re!==(Re=q[1].questionsAnswered+"")&&A(ot,Re),z&1&&Ye!==(Ye=q[0].stats.correctAnswers+"")&&A(it,Ye),z&2&&Ke!==(Ke=q[1].correctAnswers+"")&&A(at,Ke),z&256&&A(ct,q[8]),z&2&&We!==(We=q[1].accuracy+"")&&A(ut,We),Ge===(Ge=Qt(q))&&ne?ne.p(q,z):(ne.d(1),ne=Ge(q),ne&&(ne.c(),ne.m(e,null))),q[5]?G?G.p(q,z):(G=il(q),G.c(),G.m(Me.parentNode,Me)):G&&(G.d(1),G=null)},i:Y,o:Y,d(q){q&&(T(e),T(ft),T(Me)),le.d(),t[17](null),J&&J.d(),ne.d(),G&&G.d(q),dt=!1,re(Dt)}}}function wn(t,e,l){let n,s,o,{collection:r}=e,{t:a}=e,{language:f}=e;const c=tt();let p,d=null,h=!1;function m(){try{hn(),k(a.collectionExported,"success")}catch{k(a.exportFailed,"error")}}function v(){p.click()}async function _(N){var j;const M=N.target,P=(j=M.files)==null?void 0:j[0];if(P){try{const Z=await mn(P);Z.success?(k(a.collectionImported,"success"),c("refresh")):k(Z.error||a.importFailed,"error")}catch{k(a.importFailed,"error")}M.value=""}}function k(N,M){l(4,d={text:N,type:M}),setTimeout(()=>{l(4,d=null)},3e3)}function S(){l(5,h=!0)}function E(){l(5,h=!1)}function O(){try{Kl(),l(5,h=!1),k(a.collectionCleared,"success"),c("refresh")}catch{k(a.clearFailed,"error")}}function I(N){const M=N.target;c("languageChange",M.value)}function y(N){jl.call(this,t,N)}function C(N){_t[N?"unshift":"push"](()=>{p=N,l(3,p)})}const D=N=>N.key==="Escape"&&E();return t.$$set=N=>{"collection"in N&&l(0,r=N.collection),"t"in N&&l(1,a=N.t),"language"in N&&l(2,f=N.language)},t.$$.update=()=>{t.$$.dirty&1&&l(8,n=r.stats.totalQuestions>0?Math.round(r.stats.correctAnswers/r.stats.totalQuestions*100):0),t.$$.dirty&1&&l(7,s=Math.floor((r.stats.totalHpDefeated||0)/16e3)),t.$$.dirty&1&&l(6,o=16e3-(r.stats.totalHpDefeated||0)%16e3)},[r,a,f,p,d,h,o,s,n,m,v,_,S,E,O,I,y,C,D]}class Cn extends pe{constructor(e){super(),me(this,e,wn,bn,ae,{collection:0,t:1,language:2})}}function Sn(t){let e,l,n,s,o;return{c(){e=g("div"),l=g("div"),n=b(),s=g("p"),o=w(t[0]),u(l,"class","spinner svelte-1lxornd"),u(s,"class","svelte-1lxornd"),u(e,"class","loading-view svelte-1lxornd")},m(r,a){L(r,e,a),i(e,l),i(e,n),i(e,s),i(s,o)},p(r,[a]){a&1&&A(o,r[0])},i:Y,o:Y,d(r){r&&T(e)}}}function yn(t,e,l){let{message:n="Loading..."}=e;return t.$$set=s=>{"message"in s&&l(0,n=s.message)},[n]}class An extends pe{constructor(e){super(),me(this,e,yn,Sn,ae,{message:0})}}function En(t){let e,l,n,s,o,r,a,f,c,p,d;return{c(){e=g("div"),l=g("div"),l.textContent="⚠️",n=b(),s=g("h2"),s.textContent="Oops!",o=b(),r=g("p"),a=w(t[0]),f=b(),c=g("button"),c.textContent="Try Again",u(l,"class","error-icon svelte-na0xmw"),u(s,"class","svelte-na0xmw"),u(r,"class","svelte-na0xmw"),u(c,"class","btn-primary"),u(e,"class","error-view svelte-na0xmw")},m(h,m){L(h,e,m),i(e,l),i(e,n),i(e,s),i(e,o),i(e,r),i(r,a),i(e,f),i(e,c),p||(d=R(c,"click",t[1]),p=!0)},p(h,[m]){m&1&&A(a,h[0])},i:Y,o:Y,d(h){h&&T(e),p=!1,d()}}}function Tn(t,e,l){let{message:n="Something went wrong"}=e;const s=tt();function o(){s("retry")}return t.$$set=r=>{"message"in r&&l(0,n=r.message)},[n,o]}class Ln extends pe{constructor(e){super(),me(this,e,Tn,En,ae,{message:0})}}function Mn(t,e,l){const n=t.slice();return n[30]=e[l],n}function Nn(t){let e,l;return e=new Cn({props:{collection:t[4],t:t[14],language:t[0]}}),e.$on("refresh",t[24]),e.$on("languageChange",t[26]),{c(){Te(e.$$.fragment)},m(n,s){ge(e,n,s),l=!0},p(n,s){const o={};s[0]&16&&(o.collection=n[4]),s[0]&16384&&(o.t=n[14]),s[0]&1&&(o.language=n[0]),e.$set(o)},i(n){l||($(e.$$.fragment,n),l=!0)},o(n){se(e.$$.fragment,n),l=!1},d(n){he(e,n)}}}function jn(t){let e,l,n,s;const o=[Dn,Pn,In,qn],r=[];function a(f,c){return f[1]==="loading"?0:f[1]==="quiz"&&f[2]?1:f[1]==="result"&&f[2]?2:f[1]==="error"?3:-1}return~(e=a(t))&&(l=r[e]=o[e](t)),{c(){l&&l.c(),n=et()},m(f,c){~e&&r[e].m(f,c),L(f,n,c),s=!0},p(f,c){let p=e;e=a(f),e===p?~e&&r[e].p(f,c):(l&&(hl(),se(r[p],1,1,()=>{r[p]=null}),ml()),~e?(l=r[e],l?l.p(f,c):(l=r[e]=o[e](f),l.c()),$(l,1),l.m(n.parentNode,n)):l=null)},i(f){s||($(l),s=!0)},o(f){se(l),s=!1},d(f){f&&T(n),~e&&r[e].d(f)}}}function qn(t){let e,l;return e=new Ln({props:{message:t[8]}}),e.$on("retry",t[21]),{c(){Te(e.$$.fragment)},m(n,s){ge(e,n,s),l=!0},p(n,s){const o={};s[0]&256&&(o.message=n[8]),e.$set(o)},i(n){l||($(e.$$.fragment,n),l=!0)},o(n){se(e.$$.fragment,n),l=!1},d(n){he(e,n)}}}function In(t){let e,l;return e=new gn({props:{isCorrect:t[5],correctAnswer:t[2].correctAnswer,userAnswer:t[6],wonCard:t[7],t:t[14],needsStreak:t[12],streakProgress:t[13],currentStreak:t[4].currentStreak||0}}),e.$on("next",t[20]),{c(){Te(e.$$.fragment)},m(n,s){ge(e,n,s),l=!0},p(n,s){const o={};s[0]&32&&(o.isCorrect=n[5]),s[0]&4&&(o.correctAnswer=n[2].correctAnswer),s[0]&64&&(o.userAnswer=n[6]),s[0]&128&&(o.wonCard=n[7]),s[0]&16384&&(o.t=n[14]),s[0]&4096&&(o.needsStreak=n[12]),s[0]&8192&&(o.streakProgress=n[13]),s[0]&16&&(o.currentStreak=n[4].currentStreak||0),e.$set(o)},i(n){l||($(e.$$.fragment,n),l=!0)},o(n){se(e.$$.fragment,n),l=!1},d(n){he(e,n)}}}function Pn(t){var p;let e,l,n,s,o,r,a,f=x(vt),c=[];for(let d=0;d<f.length;d+=1)c[d]=Fn(Mn(t,f,d));return s=new rn({props:{question:t[2],t:t[14],currentSet:((p=vt.find(t[25]))==null?void 0:p.name)||""}}),s.$on("answer",t[19]),{c(){e=g("div"),l=g("select");for(let d=0;d<c.length;d+=1)c[d].c();n=b(),Te(s.$$.fragment),u(l,"class","set-selector svelte-m0aajl"),u(e,"class","set-selector-container svelte-m0aajl")},m(d,h){L(d,e,h),i(e,l);for(let m=0;m<c.length;m+=1)c[m]&&c[m].m(l,null);xe(l,t[15]),L(d,n,h),ge(s,d,h),o=!0,r||(a=R(l,"change",t[16]),r=!0)},p(d,h){var v;(!o||h[0]&32768)&&xe(l,d[15]);const m={};h[0]&4&&(m.question=d[2]),h[0]&16384&&(m.t=d[14]),h[0]&2048&&(m.currentSet=((v=vt.find(d[25]))==null?void 0:v.name)||""),s.$set(m)},i(d){o||($(s.$$.fragment,d),o=!0)},o(d){se(s.$$.fragment,d),o=!1},d(d){d&&(T(e),T(n)),Ee(c,d),he(s,d),r=!1,a()}}}function Dn(t){let e,l;return e=new An({props:{message:t[14].loading}}),{c(){Te(e.$$.fragment)},m(n,s){ge(e,n,s),l=!0},p(n,s){const o={};s[0]&16384&&(o.message=n[14].loading),e.$set(o)},i(n){l||($(e.$$.fragment,n),l=!0)},o(n){se(e.$$.fragment,n),l=!1},d(n){he(e,n)}}}function Fn(t){let e;return{c(){e=g("option"),e.textContent=`${t[30].name}`,e.__value=t[30].id,je(e,e.__value),u(e,"class","svelte-m0aajl")},m(l,n){L(l,e,n)},p:Y,d(l){l&&T(e)}}}function al(t){let e,l,n,s=t[0]==="en"?"Choose Your Language":"Velg språk",o,r,a,f=t[0]==="en"?"You can change this anytime in My Collection":"Du kan endre dette når som helst i Min samling",c,p,d,h,m,v,_,k;return{c(){e=g("div"),l=g("div"),n=g("h2"),o=w(s),r=b(),a=g("p"),c=w(f),p=b(),d=g("div"),h=g("button"),h.innerHTML='<span class="flag svelte-m0aajl">🇬🇧</span> <span>English</span>',m=b(),v=g("button"),v.innerHTML='<span class="flag svelte-m0aajl">🇳🇴</span> <span>Norsk</span>',u(n,"class","svelte-m0aajl"),u(a,"class","svelte-m0aajl"),u(h,"class","language-btn svelte-m0aajl"),u(v,"class","language-btn svelte-m0aajl"),u(d,"class","language-buttons svelte-m0aajl"),u(l,"class","dialog language-dialog svelte-m0aajl"),u(e,"class","dialog-overlay svelte-m0aajl"),u(e,"role","button"),u(e,"tabindex","-1")},m(S,E){L(S,e,E),i(e,l),i(l,n),i(n,o),i(l,r),i(l,a),i(a,c),i(l,p),i(l,d),i(d,h),i(d,m),i(d,v),_||(k=[R(h,"click",t[27]),R(v,"click",t[28])],_=!0)},p(S,E){E[0]&1&&s!==(s=S[0]==="en"?"Choose Your Language":"Velg språk")&&A(o,s),E[0]&1&&f!==(f=S[0]==="en"?"You can change this anytime in My Collection":"Du kan endre dette når som helst i Min samling")&&A(c,f)},d(S){S&&T(e),_=!1,re(k)}}}function Qn(t){var H;let e,l,n,s=t[14].appTitle+"",o,r,a,f,c=t[14].playQuiz+"",p,d,h,m=t[14].myCollection+"",v,_,k=(((H=t[4])==null?void 0:H.cards.length)||0)+"",S,E,O=t[3].length+"",I,y,C,D,N,M,P,j,Z,K;const ee=[jn,Nn],U=[];function ie(Q,B){return Q[9]==="quiz"?0:1}N=ie(t),M=U[N]=ee[N](t);let F=t[10]&&al(t);return{c(){e=g("div"),l=g("header"),n=g("h1"),o=w(s),r=b(),a=g("nav"),f=g("button"),p=w(c),d=b(),h=g("button"),v=w(m),_=w(" ("),S=w(k),E=w("/"),I=w(O),y=w(")"),C=b(),D=g("main"),M.c(),P=b(),F&&F.c(),u(n,"class","app-title svelte-m0aajl"),u(f,"class","nav-btn svelte-m0aajl"),V(f,"active",t[9]==="quiz"),u(h,"class","nav-btn svelte-m0aajl"),V(h,"active",t[9]==="collection"),u(a,"class","svelte-m0aajl"),u(l,"class","app-header svelte-m0aajl"),u(D,"class","svelte-m0aajl"),u(e,"class","app svelte-m0aajl")},m(Q,B){L(Q,e,B),i(e,l),i(l,n),i(n,o),i(l,r),i(l,a),i(a,f),i(f,p),i(a,d),i(a,h),i(h,v),i(h,_),i(h,S),i(h,E),i(h,I),i(h,y),i(e,C),i(e,D),U[N].m(D,null),i(e,P),F&&F.m(e,null),j=!0,Z||(K=[R(f,"click",t[23]),R(h,"click",t[22])],Z=!0)},p(Q,B){var X;(!j||B[0]&16384)&&s!==(s=Q[14].appTitle+"")&&A(o,s),(!j||B[0]&16384)&&c!==(c=Q[14].playQuiz+"")&&A(p,c),(!j||B[0]&512)&&V(f,"active",Q[9]==="quiz"),(!j||B[0]&16384)&&m!==(m=Q[14].myCollection+"")&&A(v,m),(!j||B[0]&16)&&k!==(k=(((X=Q[4])==null?void 0:X.cards.length)||0)+"")&&A(S,k),(!j||B[0]&8)&&O!==(O=Q[3].length+"")&&A(I,O),(!j||B[0]&512)&&V(h,"active",Q[9]==="collection");let W=N;N=ie(Q),N===W?U[N].p(Q,B):(hl(),se(U[W],1,1,()=>{U[W]=null}),ml(),M=U[N],M?M.p(Q,B):(M=U[N]=ee[N](Q),M.c()),$(M,1),M.m(D,null)),Q[10]?F?F.p(Q,B):(F=al(Q),F.c(),F.m(e,null)):F&&(F.d(1),F=null)},i(Q){j||($(M),j=!0)},o(Q){se(M),j=!1},d(Q){Q&&T(e),U[N].d(),F&&F.d(),Z=!1,re(K)}}}function On(t,e,l){let n,s,o;zt(t,$e,F=>l(0,s=F)),zt(t,wt,F=>l(15,o=F));let r="loading",a=null,f=[],c,p=!1,d=0,h=null,m="",v="quiz",_=!1,k=o,S=!1,E=0;Nl(()=>{l(4,c=oe()),localStorage.getItem("tcg-seen-language-dialog")?C():l(10,_=!0)});function O(F){const H=F.target;wt.set(H.value),l(11,k=H.value),l(3,f=[]),C()}function I(F){$e.set(F)}function y(F){$e.set(F),localStorage.setItem("tcg-seen-language-dialog","true"),l(10,_=!1),C()}async function C(){var F;try{l(1,r="loading"),f.length===0&&l(3,f=await zl(k));const H=new Set(c.cards.map(ue=>ue.id)),Q=f.filter(ue=>!H.has(ue.id));if(Q.length===0)throw new Error("Congratulations! You have collected all cards from this set!");const B=Rl(Q),W=await Bl(B.id,k),X=Gl(W);if(!X)throw new Error("Could not generate a valid question. Please try again.");const ce=((F=W.rarity)==null?void 0:F.toLowerCase())||"common";l(12,S=ce!=="common"),c.streakCard&&c.streakCard.id===W.id?l(13,E=c.currentStreak||0):l(13,E=0),l(2,a=X),l(1,r="quiz")}catch(H){console.error("Error loading question:",H),l(8,m=H instanceof Error?H.message:"Failed to load question"),l(1,r="error")}}function D(F){var Q,B;if(!a)return;l(6,d=F.detail),l(5,p=Xl(a,d));const H=p&&a.card.hp?a.card.hp:0;if(Vl(p,H),l(7,h=null),p){let W=!1;if(S?(l(4,c=oe()),((Q=c.streakCard)==null?void 0:Q.id)===a.card.id?l(4,c.currentStreak=(c.currentStreak||0)+1,c):(l(4,c.streakCard=a.card,c),l(4,c.currentStreak=1,c)),c.currentStreak>=2&&(W=!0,l(4,c.currentStreak=0,c),l(4,c.streakCard=void 0,c)),Ie(c)):W=!0,W){const X={id:a.card.id,name:a.card.name,image:a.card.image,hp:a.card.hp,types:a.card.types,rarity:a.card.rarity,collectedAt:new Date().toISOString()};Yl(X)&&l(7,h=a.card)}}else l(4,c=oe()),S&&((B=c.streakCard)==null?void 0:B.id)===a.card.id&&(l(4,c.currentStreak=0,c),l(4,c.streakCard=void 0,c),Ie(c));l(4,c=oe()),l(1,r="result")}function N(){C()}function M(){C()}function P(){l(9,v="collection"),l(4,c=oe())}function j(){l(9,v="quiz")}function Z(){l(4,c=oe())}const K=F=>F.id===k,ee=F=>I(F.detail),U=()=>y("en"),ie=()=>y("no");return t.$$.update=()=>{t.$$.dirty[0]&1&&l(14,n=xl(s))},[s,r,a,f,c,p,d,h,m,v,_,k,S,E,n,o,O,I,y,D,N,M,P,j,Z,K,ee,U,ie]}class zn extends pe{constructor(e){super(),me(this,e,On,Qn,ae,{},null,[-1,-1])}}new zn({target:document.getElementById("app")});
