var Kt=Object.defineProperty;var Jt=(t,e,l)=>e in t?Kt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var Je=(t,e,l)=>Jt(t,typeof e!="symbol"?e+"":e,l);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function l(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=l(s);fetch(s.href,r)}})();function W(){}function Qt(t){return t()}function dt(){return Object.create(null)}function oe(t){t.forEach(Qt)}function zt(t){return typeof t=="function"}function ce(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Be;function Ce(t,e){return t===e?!0:(Be||(Be=document.createElement("a")),Be.href=e,t===Be.href)}function Gt(t){return Object.keys(t).length===0}function Ht(t,...e){if(t==null){for(const n of e)n(void 0);return W}const l=t.subscribe(...e);return l.unsubscribe?()=>l.unsubscribe():l}function ht(t,e,l){t.$$.on_destroy.push(Ht(e,l))}function i(t,e){t.appendChild(e)}function T(t,e,l){t.insertBefore(e,l||null)}function E(t){t.parentNode&&t.parentNode.removeChild(t)}function Qe(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function d(t){return document.createElement(t)}function k(t){return document.createTextNode(t)}function C(){return k(" ")}function lt(){return k("")}function U(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function $t(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function u(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function Ft(t){return t===""?null:+t}function Xt(t){return Array.from(t.childNodes)}function S(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ie(t,e){t.value=e??""}function Zt(t,e,l,n){t.style.setProperty(e,l,"")}function Pe(t,e,l){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e){s.selected=!0;return}}t.selectedIndex=-1}function X(t,e,l){t.classList.toggle(e,!!l)}function xt(t,e,{bubbles:l=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:l,cancelable:n})}let Ne;function Me(t){Ne=t}function Lt(){if(!Ne)throw new Error("Function called outside component initialization");return Ne}function el(t){Lt().$$.on_mount.push(t)}function je(){const t=Lt();return(e,l,{cancelable:n=!1}={})=>{const s=t.$$.callbacks[e];if(s){const r=xt(e,l,{cancelable:n});return s.slice().forEach(o=>{o.call(t,r)}),!r.defaultPrevented}return!0}}function tl(t,e){const l=t.$$.callbacks[e.type];l&&l.slice().forEach(n=>n.call(this,e))}const be=[],$e=[];let ke=[];const mt=[],ll=Promise.resolve();let Xe=!1;function nl(){Xe||(Xe=!0,ll.then(Ot))}function Ze(t){ke.push(t)}const Ge=new Set;let _e=0;function Ot(){if(_e!==0)return;const t=Ne;do{try{for(;_e<be.length;){const e=be[_e];_e++,Me(e),sl(e.$$)}}catch(e){throw be.length=0,_e=0,e}for(Me(null),be.length=0,_e=0;$e.length;)$e.pop()();for(let e=0;e<ke.length;e+=1){const l=ke[e];Ge.has(l)||(Ge.add(l),l())}ke.length=0}while(be.length);for(;mt.length;)mt.pop()();Xe=!1,Ge.clear(),Me(t)}function sl(t){if(t.fragment!==null){t.update(),oe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ze)}}function rl(t){const e=[],l=[];ke.forEach(n=>t.indexOf(n)===-1?e.push(n):l.push(n)),l.forEach(n=>n()),ke=e}const Re=new Set;let ue;function Dt(){ue={r:0,c:[],p:ue}}function Bt(){ue.r||oe(ue.c),ue=ue.p}function te(t,e){t&&t.i&&(Re.delete(t),t.i(e))}function ne(t,e,l,n){if(t&&t.o){if(Re.has(t))return;Re.add(t),ue.c.push(()=>{Re.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}else n&&n()}function re(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ye(t){t&&t.c()}function de(t,e,l){const{fragment:n,after_update:s}=t.$$;n&&n.m(e,l),Ze(()=>{const r=t.$$.on_mount.map(Qt).filter(zt);t.$$.on_destroy?t.$$.on_destroy.push(...r):oe(r),t.$$.on_mount=[]}),s.forEach(Ze)}function he(t,e){const l=t.$$;l.fragment!==null&&(rl(l.after_update),oe(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function ol(t,e){t.$$.dirty[0]===-1&&(be.push(t),nl(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function me(t,e,l,n,s,r,o=null,c=[-1]){const a=Ne;Me(t);const f=t.$$={fragment:null,ctx:[],props:r,update:W,not_equal:s,bound:dt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:dt(),dirty:c,skip_bound:!1,root:e.target||a.$$.root};o&&o(f.root);let w=!1;if(f.ctx=l?l(t,e.props||{},(h,g,...m)=>{const v=m.length?m[0]:g;return f.ctx&&s(f.ctx[h],f.ctx[h]=v)&&(!f.skip_bound&&f.bound[h]&&f.bound[h](v),w&&ol(t,h)),g}):[],f.update(),w=!0,oe(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){const h=Xt(e.target);f.fragment&&f.fragment.l(h),h.forEach(E)}else f.fragment&&f.fragment.c();e.intro&&te(t.$$.fragment),de(t,e.target,e.anchor),Ot()}Me(a)}class ge{constructor(){Je(this,"$$");Je(this,"$$set")}$destroy(){he(this,1),this.$destroy=W}$on(e,l){if(!zt(l))return W;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const s=n.indexOf(l);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!Gt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const il="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(il);const Pt="https://api.tcgdex.net/v2/en";function Rt(t,e){const l=t.split("-")[1];return`https://assets.tcgdex.net/en/${cl(e)}/${e}/${l}/high.webp`}function cl(t){return t.startsWith("swsh")?"swsh":t.startsWith("sv")?"sv":t.startsWith("me")?"base":"swsh"}async function al(t){try{const e=await fetch(`${Pt}/sets/${t}`);if(!e.ok)throw new Error("Failed to fetch cards from set");return((await e.json()).cards||[]).map(s=>({id:s.id,localId:s.localId,name:s.name,image:Rt(s.id,t)}))}catch(e){throw console.error("Error fetching cards from set:",e),e}}async function ul(t,e){try{const l=await fetch(`${Pt}/cards/${t}`);if(!l.ok)throw new Error("Failed to fetch card details");return{...await l.json(),image:Rt(t,e)}}catch(l){throw console.error("Error fetching card details:",l),l}}function fl(t){const e=Math.floor(Math.random()*t.length);return t[e]}const nt="pokemon-tcg-collection",jt="1.0";function dl(){return{totalQuestions:0,correctAnswers:0,incorrectAnswers:0}}function He(){return{cards:[],stats:dl(),version:jt}}function fe(){try{const t=localStorage.getItem(nt);if(!t)return He();const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?(console.warn("Invalid collection format, resetting..."),He()):e}catch(t){return console.error("Error loading collection from local storage:",t),He()}}function st(t){try{const e={...t,version:jt};localStorage.setItem(nt,JSON.stringify(e))}catch(e){throw console.error("Error saving collection to local storage:",e),new Error("Failed to save collection")}}function hl(t){try{const e=fe();return e.cards.some(n=>n.id===t.id)?!1:(e.cards.push(t),st(e),!0)}catch(e){return console.error("Error adding card to collection:",e),!1}}function ml(t){try{const e=fe();e.stats.totalQuestions++,t?e.stats.correctAnswers++:e.stats.incorrectAnswers++,st(e)}catch(e){console.error("Error updating stats:",e)}}function gl(){try{localStorage.removeItem(nt)}catch(t){console.error("Error clearing collection:",t)}}function pl(){const t=fe();return JSON.stringify(t,null,2)}function vl(t){try{const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?{success:!1,error:"Invalid collection format"}:!e.stats.totalQuestions===void 0||!e.stats.correctAnswers===void 0||!e.stats.incorrectAnswers===void 0?{success:!1,error:"Invalid stats format"}:(st(e),{success:!0})}catch(e){return console.error("Error importing collection:",e),{success:!1,error:"Failed to parse JSON file"}}}function _l(){const t=Math.floor(Math.random()*50)+10,e=Math.floor(Math.random()*50)+10,l=["+","-"],n=l[Math.floor(Math.random()*l.length)];let s,r;if(n==="+")s=t+e,r=`What is ${t} + ${e}?`;else{s=t+e;const o=s;s=t,r=`What is ${o} - ${e}?`}return{question:r,answer:s}}function wl(t){if(!t)return null;let e,l,n=!1;if(t.hp&&t.hp>0){n=!0;const s=[10,20,30,40,50][Math.floor(Math.random()*5)];l=Math.ceil(t.hp/s),e=`Your Pokémon deals ${s} damage each turn. How many turns does it take to defeat this Pokémon?`}else{const s=_l();e=s.question,l=s.answer}return{card:t,questionText:e,correctAnswer:l,isPokemon:n}}function bl(t,e){return e===t.correctAnswer}const we=[];function Vt(t,e=W){let l;const n=new Set;function s(c){if(ce(t,c)&&(t=c,l)){const a=!we.length;for(const f of n)f[1](),we.push(f,t);if(a){for(let f=0;f<we.length;f+=2)we[f][0](we[f+1]);we.length=0}}}function r(c){s(c(t))}function o(c,a=W){const f=[c,a];return n.add(f),n.size===1&&(l=e(s,r)||W),c(t),()=>{n.delete(f),n.size===0&&l&&(l(),l=null)}}return{set:s,update:r,subscribe:o}}const xe=[{id:"swsh3",name:"Sword & Shield - Darkness Ablaze"},{id:"sv05",name:"Scarlet & Violet - Temporal Forces"},{id:"sv06.5",name:"Scarlet & Violet - Shrouded Fable"}],Yt="tcg-math-settings";function kl(){return{language:"en",selectedSet:"swsh3"}}function rt(){try{const t=localStorage.getItem(Yt);if(t){const e=JSON.parse(t);return{language:e.language||"en",selectedSet:e.selectedSet||"swsh3"}}}catch(t){console.error("Error loading settings:",t)}return kl()}function Ut(t){try{localStorage.setItem(Yt,JSON.stringify(t))}catch(e){console.error("Error saving settings:",e)}}const Wt=rt(),et=Vt(Wt.language),tt=Vt(Wt.selectedSet);et.subscribe(t=>{const e=rt();Ut({...e,language:t})});tt.subscribe(t=>{const e=rt();Ut({...e,selectedSet:t})});const Cl={en:{appTitle:"TCG Math",quizTitle:"TCG Math Challenge",playQuiz:"Play Quiz",myCollection:"My Collection",selectSet:"Select Set",selectLanguage:"Language",setInfo:"Collecting Set",enterAnswer:"Enter your answer",submitAnswer:"Submit Answer",nextQuestion:"Next Question",correct:"Correct!",notQuite:"Not quite!",correctMessage:"Great job! The answer was",incorrectMessage:"You answered",encouragement:"Try again with the next question!",youWonThisCard:"You won this card!",cardsCollected:"Cards Collected",questionsAnswered:"Questions Answered",correctAnswers:"Correct Answers",accuracy:"Accuracy",noCardsYet:"No cards yet!",noCardsDescription:"Answer questions correctly to start building your collection.",exportBackup:"Export Backup",importBackup:"Import Backup",clearThisSet:"Clear This Set",clearCollectionTitle:"Clear Collection?",clearCollectionMessage:"Are you sure you want to clear your entire collection? This action cannot be undone.",cancel:"Cancel",clearCollection:"Clear Collection",collectionExported:"Collection exported successfully!",collectionImported:"Collection imported successfully!",collectionCleared:"Collection cleared successfully!",exportFailed:"Failed to export collection",importFailed:"Failed to import collection",clearFailed:"Failed to clear collection",hit:"hit",hits:"hits",loading:"Loading new question...",yourCollection:"Your Collection"},no:{appTitle:"TCG Matte",quizTitle:"TCG Matte Utfordring",playQuiz:"Spill Quiz",myCollection:"Min Samling",selectSet:"Velg Sett",selectLanguage:"Språk",setInfo:"Samler Sett",enterAnswer:"Skriv inn svaret ditt",submitAnswer:"Send Inn Svar",nextQuestion:"Neste Spørsmål",correct:"Riktig!",notQuite:"Ikke helt!",correctMessage:"Bra jobbet! Svaret var",incorrectMessage:"Du svarte",encouragement:"Prøv igjen med neste spørsmål!",youWonThisCard:"Du vant dette kortet!",cardsCollected:"Kort Samlet",questionsAnswered:"Spørsmål Besvart",correctAnswers:"Riktige Svar",accuracy:"Nøyaktighet",noCardsYet:"Ingen kort ennå!",noCardsDescription:"Svar riktig på spørsmål for å begynne å bygge samlingen din.",exportBackup:"Eksporter Backup",importBackup:"Importer Backup",clearThisSet:"Tøm Dette Settet",clearCollectionTitle:"Tøm Samling?",clearCollectionMessage:"Er du sikker på at du vil tømme hele samlingen din? Denne handlingen kan ikke angres.",cancel:"Avbryt",clearCollection:"Tøm Samling",collectionExported:"Samling eksportert!",collectionImported:"Samling importert!",collectionCleared:"Samling tømt!",exportFailed:"Kunne ikke eksportere samling",importFailed:"Kunne ikke importere samling",clearFailed:"Kunne ikke tømme samling",hit:"treff",hits:"treff",loading:"Laster nytt spørsmål...",yourCollection:"Din Samling"}};function yl(t){return Cl[t]}function gt(t,e,l){const n=t.slice();return n[3]=e[l],n}function pt(t,e,l){const n=t.slice();return n[6]=e[l],n}function vt(t){let e,l,n,s,r=t[0].hp+"",o;return{c(){e=d("div"),l=d("span"),l.textContent="HP",n=C(),s=d("span"),o=k(r),u(l,"class","hp-label svelte-2rdllh"),u(s,"class","hp-value svelte-2rdllh"),u(e,"class","card-hp svelte-2rdllh")},m(c,a){T(c,e,a),i(e,l),i(e,n),i(e,s),i(s,o)},p(c,a){a&1&&r!==(r=c[0].hp+"")&&S(o,r)},d(c){c&&E(e)}}}function _t(t){let e,l=re(t[0].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=wt(pt(t,l,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","card-types svelte-2rdllh")},m(s,r){T(s,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,r){if(r&1){l=re(s[0].types);let o;for(o=0;o<l.length;o+=1){const c=pt(s,l,o);n[o]?n[o].p(c,r):(n[o]=wt(c),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(s){s&&E(e),Qe(n,s)}}}function wt(t){let e,l=t[6]+"",n;return{c(){e=d("span"),n=k(l),u(e,"class","type-badge svelte-2rdllh")},m(s,r){T(s,e,r),i(e,n)},p(s,r){r&1&&l!==(l=s[6]+"")&&S(n,l)},d(s){s&&E(e)}}}function bt(t){let e,l,n,s=re(t[0].attacks),r=[];for(let o=0;o<s.length;o+=1)r[o]=Ct(gt(t,s,o));return{c(){e=d("div"),l=d("h4"),l.textContent="Attacks:",n=C();for(let o=0;o<r.length;o+=1)r[o].c();u(l,"class","svelte-2rdllh"),u(e,"class","card-attacks svelte-2rdllh")},m(o,c){T(o,e,c),i(e,l),i(e,n);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null)},p(o,c){if(c&5){s=re(o[0].attacks);let a;for(a=0;a<s.length;a+=1){const f=gt(o,s,a);r[a]?r[a].p(f,c):(r[a]=Ct(f),r[a].c(),r[a].m(e,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=s.length}},d(o){o&&E(e),Qe(r,o)}}}function kt(t){let e,l=t[3].damage+"",n;return{c(){e=d("span"),n=k(l),u(e,"class","attack-damage svelte-2rdllh")},m(s,r){T(s,e,r),i(e,n)},p(s,r){r&1&&l!==(l=s[3].damage+"")&&S(n,l)},d(s){s&&E(e)}}}function Ct(t){let e,l,n=t[3].name+"",s,r,o,c=t[3].damage&&kt(t);return{c(){e=d("div"),l=d("span"),s=k(n),r=C(),c&&c.c(),o=C(),u(l,"class","attack-name svelte-2rdllh"),u(e,"class","attack svelte-2rdllh"),X(e,"highlighted",t[2]===t[3].name)},m(a,f){T(a,e,f),i(e,l),i(l,s),i(e,r),c&&c.m(e,null),i(e,o)},p(a,f){f&1&&n!==(n=a[3].name+"")&&S(s,n),a[3].damage?c?c.p(a,f):(c=kt(a),c.c(),c.m(e,o)):c&&(c.d(1),c=null),f&5&&X(e,"highlighted",a[2]===a[3].name)},d(a){a&&E(e),c&&c.d()}}}function Sl(t){let e,l,n,s,r,o,c,a,f=t[0].name+"",w,h,g,m,v=t[0].hp&&vt(t),_=t[0].types&&t[0].types.length>0&&_t(t),b=t[1]&&t[0].attacks&&t[0].attacks.length>0&&bt(t);return{c(){e=d("div"),l=d("div"),n=d("img"),o=C(),c=d("div"),a=d("h3"),w=k(f),h=C(),v&&v.c(),g=C(),_&&_.c(),m=C(),b&&b.c(),Ce(n.src,s=t[0].image)||u(n,"src",s),u(n,"alt",r=t[0].name),u(n,"class","svelte-2rdllh"),u(l,"class","card-image svelte-2rdllh"),u(a,"class","card-name svelte-2rdllh"),u(c,"class","card-info svelte-2rdllh"),u(e,"class","pokemon-card svelte-2rdllh")},m(y,q){T(y,e,q),i(e,l),i(l,n),i(e,o),i(e,c),i(c,a),i(a,w),i(c,h),v&&v.m(c,null),i(c,g),_&&_.m(c,null),i(c,m),b&&b.m(c,null)},p(y,[q]){q&1&&!Ce(n.src,s=y[0].image)&&u(n,"src",s),q&1&&r!==(r=y[0].name)&&u(n,"alt",r),q&1&&f!==(f=y[0].name+"")&&S(w,f),y[0].hp?v?v.p(y,q):(v=vt(y),v.c(),v.m(c,g)):v&&(v.d(1),v=null),y[0].types&&y[0].types.length>0?_?_.p(y,q):(_=_t(y),_.c(),_.m(c,m)):_&&(_.d(1),_=null),y[1]&&y[0].attacks&&y[0].attacks.length>0?b?b.p(y,q):(b=bt(y),b.c(),b.m(c,null)):b&&(b.d(1),b=null)},i:W,o:W,d(y){y&&E(e),v&&v.d(),_&&_.d(),b&&b.d()}}}function Al(t,e,l){let{card:n}=e,{showAttacks:s=!1}=e,{highlightedAttack:r=null}=e;return t.$$set=o=>{"card"in o&&l(0,n=o.card),"showAttacks"in o&&l(1,s=o.showAttacks),"highlightedAttack"in o&&l(2,r=o.highlightedAttack)},[n,s,r]}class ql extends ge{constructor(e){super(),me(this,e,Al,Sl,ce,{card:0,showAttacks:1,highlightedAttack:2})}}function El(t){let e,l,n,s=t[1].quizTitle+"",r,o,c,a=t[1].setInfo+"",f,w,h,g,m,v,_,b,y,q=t[0].questionText+"",Q,p,A,I,B,M,F,O=t[1].submitAnswer+"",P,J,R,G,K;return v=new ql({props:{card:t[0].card}}),{c(){e=d("div"),l=d("div"),n=d("h2"),r=k(s),o=C(),c=d("p"),f=k(a),w=k(": "),h=k(t[2]),g=C(),m=d("div"),ye(v.$$.fragment),_=C(),b=d("div"),y=d("h3"),Q=k(q),p=C(),A=d("div"),I=d("input"),M=C(),F=d("button"),P=k(O),u(n,"class","quiz-title svelte-1ohble"),u(c,"class","set-info svelte-1ohble"),u(l,"class","quiz-header svelte-1ohble"),u(m,"class","card-display svelte-1ohble"),u(y,"class","question-text svelte-1ohble"),u(I,"type","number"),u(I,"placeholder",B=t[1].enterAnswer),u(I,"class","answer-input svelte-1ohble"),u(F,"class","submit-btn btn-primary svelte-1ohble"),F.disabled=J=!t[3],u(A,"class","answer-input-container svelte-1ohble"),u(b,"class","question-container svelte-1ohble"),u(e,"class","quiz-view svelte-1ohble")},m(z,D){T(z,e,D),i(e,l),i(l,n),i(n,r),i(l,o),i(l,c),i(c,f),i(c,w),i(c,h),i(e,g),i(e,m),de(v,m,null),i(e,_),i(e,b),i(b,y),i(y,Q),i(b,p),i(b,A),i(A,I),Ie(I,t[3]),i(A,M),i(A,F),i(F,P),R=!0,G||(K=[U(I,"input",t[6]),U(I,"keypress",t[5]),U(F,"click",t[4])],G=!0)},p(z,[D]){(!R||D&2)&&s!==(s=z[1].quizTitle+"")&&S(r,s),(!R||D&2)&&a!==(a=z[1].setInfo+"")&&S(f,a),(!R||D&4)&&S(h,z[2]);const j={};D&1&&(j.card=z[0].card),v.$set(j),(!R||D&1)&&q!==(q=z[0].questionText+"")&&S(Q,q),(!R||D&2&&B!==(B=z[1].enterAnswer))&&u(I,"placeholder",B),D&8&&Ft(I.value)!==z[3]&&Ie(I,z[3]),(!R||D&2)&&O!==(O=z[1].submitAnswer+"")&&S(P,O),(!R||D&8&&J!==(J=!z[3]))&&(F.disabled=J)},i(z){R||(te(v.$$.fragment,z),R=!0)},o(z){ne(v.$$.fragment,z),R=!1},d(z){z&&E(e),he(v),G=!1,oe(K)}}}function Tl(t,e,l){let{question:n}=e,{t:s}=e,{currentSet:r}=e;const o=je();let c="";function a(){const h=parseInt(c,10);isNaN(h)||o("answer",h)}function f(h){h.key==="Enter"&&a()}function w(){c=Ft(this.value),l(3,c)}return t.$$set=h=>{"question"in h&&l(0,n=h.question),"t"in h&&l(1,s=h.t),"currentSet"in h&&l(2,r=h.currentSet)},[n,s,r,c,a,f,w]}class Ml extends ge{constructor(e){super(),me(this,e,Tl,El,ce,{question:0,t:1,currentSet:2})}}function Il(t){let e,l,n,s=t[4].notQuite+"",r,o,c,a=t[4].incorrectMessage+"",f,w,h,g,m,v=t[4].correctMessage.toLowerCase()+"",_,b,y,q,Q,p,A,I=t[4].encouragement+"",B;return{c(){e=d("div"),e.textContent="✗",l=C(),n=d("h2"),r=k(s),o=C(),c=d("p"),f=k(a),w=C(),h=d("strong"),g=k(t[2]),m=k(", "),_=k(v),b=C(),y=d("strong"),q=k(t[1]),Q=k("."),p=C(),A=d("p"),B=k(I),u(e,"class","result-icon error svelte-tq4u2e"),u(n,"class","result-title svelte-tq4u2e"),u(h,"class","svelte-tq4u2e"),u(y,"class","svelte-tq4u2e"),u(c,"class","result-message svelte-tq4u2e"),u(A,"class","encouragement svelte-tq4u2e")},m(M,F){T(M,e,F),T(M,l,F),T(M,n,F),i(n,r),T(M,o,F),T(M,c,F),i(c,f),i(c,w),i(c,h),i(h,g),i(c,m),i(c,_),i(c,b),i(c,y),i(y,q),i(c,Q),T(M,p,F),T(M,A,F),i(A,B)},p(M,F){F&16&&s!==(s=M[4].notQuite+"")&&S(r,s),F&16&&a!==(a=M[4].incorrectMessage+"")&&S(f,a),F&4&&S(g,M[2]),F&16&&v!==(v=M[4].correctMessage.toLowerCase()+"")&&S(_,v),F&2&&S(q,M[1]),F&16&&I!==(I=M[4].encouragement+"")&&S(B,I)},d(M){M&&(E(e),E(l),E(n),E(o),E(c),E(p),E(A))}}}function Nl(t){let e,l,n,s=t[4].correct+"",r,o,c,a=t[4].correctMessage+"",f,w,h,g,m,v=(t[1]===1?t[4].hit:t[4].hits)+"",_,b,y,q,Q=t[3]&&yt(t);return{c(){e=d("div"),e.textContent="✓",l=C(),n=d("h2"),r=k(s),o=C(),c=d("p"),f=k(a),w=C(),h=d("strong"),g=k(t[1]),m=C(),_=k(v),b=k("!"),y=C(),Q&&Q.c(),q=lt(),u(e,"class","result-icon success svelte-tq4u2e"),u(n,"class","result-title svelte-tq4u2e"),u(h,"class","svelte-tq4u2e"),u(c,"class","result-message svelte-tq4u2e")},m(p,A){T(p,e,A),T(p,l,A),T(p,n,A),i(n,r),T(p,o,A),T(p,c,A),i(c,f),i(c,w),i(c,h),i(h,g),i(c,m),i(c,_),i(c,b),T(p,y,A),Q&&Q.m(p,A),T(p,q,A)},p(p,A){A&16&&s!==(s=p[4].correct+"")&&S(r,s),A&16&&a!==(a=p[4].correctMessage+"")&&S(f,a),A&2&&S(g,p[1]),A&18&&v!==(v=(p[1]===1?p[4].hit:p[4].hits)+"")&&S(_,v),p[3]?Q?Q.p(p,A):(Q=yt(p),Q.c(),Q.m(q.parentNode,q)):Q&&(Q.d(1),Q=null)},d(p){p&&(E(e),E(l),E(n),E(o),E(c),E(y),E(q)),Q&&Q.d(p)}}}function yt(t){let e,l,n=t[4].youWonThisCard+"",s,r,o,c,a,f,w,h,g,m=t[3].name+"",v;return{c(){e=d("div"),l=d("h3"),s=k(n),r=C(),o=d("div"),c=d("div"),a=d("img"),h=C(),g=d("span"),v=k(m),u(l,"class","svelte-tq4u2e"),Ce(a.src,f=t[3].image)||u(a,"src",f),u(a,"alt",w=t[3].name),u(a,"class","svelte-tq4u2e"),u(g,"class","card-name svelte-tq4u2e"),u(c,"class","mini-card svelte-tq4u2e"),u(o,"class","cards-grid svelte-tq4u2e"),u(e,"class","won-cards svelte-tq4u2e")},m(_,b){T(_,e,b),i(e,l),i(l,s),i(e,r),i(e,o),i(o,c),i(c,a),i(c,h),i(c,g),i(g,v)},p(_,b){b&16&&n!==(n=_[4].youWonThisCard+"")&&S(s,n),b&8&&!Ce(a.src,f=_[3].image)&&u(a,"src",f),b&8&&w!==(w=_[3].name)&&u(a,"alt",w),b&8&&m!==(m=_[3].name+"")&&S(v,m)},d(_){_&&E(e)}}}function Ql(t){let e,l,n,s,r=t[4].nextQuestion+"",o,c,a;function f(g,m){return g[0]?Nl:Il}let w=f(t),h=w(t);return{c(){e=d("div"),l=d("div"),h.c(),n=C(),s=d("button"),o=k(r),u(l,"class","result-card svelte-tq4u2e"),X(l,"correct",t[0]),X(l,"incorrect",!t[0]),u(s,"class","next-btn btn-primary svelte-tq4u2e"),u(e,"class","result-view svelte-tq4u2e")},m(g,m){T(g,e,m),i(e,l),h.m(l,null),i(e,n),i(e,s),i(s,o),c||(a=U(s,"click",t[5]),c=!0)},p(g,[m]){w===(w=f(g))&&h?h.p(g,m):(h.d(1),h=w(g),h&&(h.c(),h.m(l,null))),m&1&&X(l,"correct",g[0]),m&1&&X(l,"incorrect",!g[0]),m&16&&r!==(r=g[4].nextQuestion+"")&&S(o,r)},i:W,o:W,d(g){g&&E(e),h.d(),c=!1,a()}}}function zl(t,e,l){let{isCorrect:n}=e,{correctAnswer:s}=e,{userAnswer:r}=e,{wonCard:o}=e,{t:c}=e;const a=je();function f(){a("next")}return t.$$set=w=>{"isCorrect"in w&&l(0,n=w.isCorrect),"correctAnswer"in w&&l(1,s=w.correctAnswer),"userAnswer"in w&&l(2,r=w.userAnswer),"wonCard"in w&&l(3,o=w.wonCard),"t"in w&&l(4,c=w.t)},[n,s,r,o,c,f]}class Fl extends ge{constructor(e){super(),me(this,e,zl,Ql,ce,{isCorrect:0,correctAnswer:1,userAnswer:2,wonCard:3,t:4})}}function Ll(){try{const t=pl(),e=new Blob([t],{type:"application/json"}),l=URL.createObjectURL(e),n=document.createElement("a");n.href=l,n.download=`pokemon-collection-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(l)}catch(t){throw console.error("Error downloading backup:",t),new Error("Failed to download backup")}}function Ol(t){return new Promise(e=>{const l=new FileReader;l.onload=n=>{var s;try{const r=(s=n.target)==null?void 0:s.result,o=vl(r);e(o)}catch(r){console.error("Error reading file:",r),e({success:!1,error:"Failed to read file"})}},l.onerror=()=>{e({success:!1,error:"Failed to read file"})},l.readAsText(t)})}function St(t,e,l){const n=t.slice();return n[17]=e[l],n}function At(t,e,l){const n=t.slice();return n[20]=e[l],n}function qt(t){let e,l=t[3].text+"",n;return{c(){e=d("div"),n=k(l),u(e,"class","message svelte-tdwh"),X(e,"success",t[3].type==="success"),X(e,"error",t[3].type==="error")},m(s,r){T(s,e,r),i(e,n)},p(s,r){r&8&&l!==(l=s[3].text+"")&&S(n,l),r&8&&X(e,"success",s[3].type==="success"),r&8&&X(e,"error",s[3].type==="error")},d(s){s&&E(e)}}}function Dl(t){let e,l=re(t[0].cards),n=[];for(let s=0;s<l.length;s+=1)n[s]=It(St(t,l,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","cards-grid svelte-tdwh")},m(s,r){T(s,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,r){if(r&1){l=re(s[0].cards);let o;for(o=0;o<l.length;o+=1){const c=St(s,l,o);n[o]?n[o].p(c,r):(n[o]=It(c),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(s){s&&E(e),Qe(n,s)}}}function Bl(t){let e,l,n,s,r=t[1].noCardsYet+"",o,c,a,f=t[1].noCardsDescription+"",w;return{c(){e=d("div"),l=d("div"),l.textContent="📦",n=C(),s=d("h3"),o=k(r),c=C(),a=d("p"),w=k(f),u(l,"class","empty-icon svelte-tdwh"),u(s,"class","svelte-tdwh"),u(a,"class","svelte-tdwh"),u(e,"class","empty-state svelte-tdwh")},m(h,g){T(h,e,g),i(e,l),i(e,n),i(e,s),i(s,o),i(e,c),i(e,a),i(a,w)},p(h,g){g&2&&r!==(r=h[1].noCardsYet+"")&&S(o,r),g&2&&f!==(f=h[1].noCardsDescription+"")&&S(w,f)},d(h){h&&E(e)}}}function Et(t){let e,l,n=t[17].hp+"",s;return{c(){e=d("span"),l=k("HP "),s=k(n),u(e,"class","hp svelte-tdwh")},m(r,o){T(r,e,o),i(e,l),i(e,s)},p(r,o){o&1&&n!==(n=r[17].hp+"")&&S(s,n)},d(r){r&&E(e)}}}function Tt(t){let e,l=re(t[17].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=Mt(At(t,l,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","types svelte-tdwh")},m(s,r){T(s,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,r){if(r&1){l=re(s[17].types);let o;for(o=0;o<l.length;o+=1){const c=At(s,l,o);n[o]?n[o].p(c,r):(n[o]=Mt(c),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(s){s&&E(e),Qe(n,s)}}}function Mt(t){let e,l=t[20]+"",n;return{c(){e=d("span"),n=k(l),u(e,"class","type svelte-tdwh")},m(s,r){T(s,e,r),i(e,n)},p(s,r){r&1&&l!==(l=s[20]+"")&&S(n,l)},d(s){s&&E(e)}}}function It(t){let e,l,n,s,r,o,c,a=t[17].name+"",f,w,h,g,m=t[17].hp&&Et(t),v=t[17].types&&t[17].types.length>0&&Tt(t);return{c(){e=d("div"),l=d("img"),r=C(),o=d("div"),c=d("h4"),f=k(a),w=C(),m&&m.c(),h=C(),v&&v.c(),g=C(),Ce(l.src,n=t[17].image)||u(l,"src",n),u(l,"alt",s=t[17].name),u(l,"class","svelte-tdwh"),u(c,"class","svelte-tdwh"),u(o,"class","card-details svelte-tdwh"),u(e,"class","collection-card svelte-tdwh")},m(_,b){T(_,e,b),i(e,l),i(e,r),i(e,o),i(o,c),i(c,f),i(o,w),m&&m.m(o,null),i(o,h),v&&v.m(o,null),i(e,g)},p(_,b){b&1&&!Ce(l.src,n=_[17].image)&&u(l,"src",n),b&1&&s!==(s=_[17].name)&&u(l,"alt",s),b&1&&a!==(a=_[17].name+"")&&S(f,a),_[17].hp?m?m.p(_,b):(m=Et(_),m.c(),m.m(o,h)):m&&(m.d(1),m=null),_[17].types&&_[17].types.length>0?v?v.p(_,b):(v=Tt(_),v.c(),v.m(o,null)):v&&(v.d(1),v=null)},d(_){_&&E(e),m&&m.d(),v&&v.d()}}}function Nt(t){let e,l,n,s=t[1].clearCollectionTitle+"",r,o,c,a=t[1].clearCollectionMessage+"",f,w,h,g,m=t[1].cancel+"",v,_,b,y=t[1].clearCollection+"",q,Q,p;return{c(){e=d("div"),l=d("div"),n=d("h3"),r=k(s),o=C(),c=d("p"),f=k(a),w=C(),h=d("div"),g=d("button"),v=k(m),_=C(),b=d("button"),q=k(y),u(n,"class","svelte-tdwh"),u(c,"class","svelte-tdwh"),u(g,"class","btn-secondary"),u(b,"class","btn-error"),u(h,"class","dialog-actions svelte-tdwh"),u(l,"class","dialog svelte-tdwh"),u(l,"role","dialog"),u(e,"class","dialog-overlay svelte-tdwh"),u(e,"role","button"),u(e,"tabindex","-1")},m(A,I){T(A,e,I),i(e,l),i(l,n),i(n,r),i(l,o),i(l,c),i(c,f),i(l,w),i(l,h),i(h,g),i(g,v),i(h,_),i(h,b),i(b,q),Q||(p=[U(g,"click",t[10]),U(b,"click",t[11]),U(l,"click",$t(t[12])),U(e,"click",t[10]),U(e,"keydown",t[14])],Q=!0)},p(A,I){I&2&&s!==(s=A[1].clearCollectionTitle+"")&&S(r,s),I&2&&a!==(a=A[1].clearCollectionMessage+"")&&S(f,a),I&2&&m!==(m=A[1].cancel+"")&&S(v,m),I&2&&y!==(y=A[1].clearCollection+"")&&S(q,y)},d(A){A&&E(e),Q=!1,oe(p)}}}function Pl(t){let e,l,n,s=t[1].yourCollection+"",r,o,c,a,f=t[1].exportBackup+"",w,h,g,m=t[1].importBackup+"",v,_,b,y=t[1].clearThisSet+"",q,Q,p,A,I,B,M,F,O=t[0].cards.length+"",P,J,R,G=t[1].cardsCollected+"",K,z,D,j,ie=t[0].stats.totalQuestions+"",pe,Se,Z,ae=t[1].questionsAnswered+"",x,Ae,se,N,Y=t[0].stats.correctAnswers+"",ee,qe,ze,Fe=t[1].correctAnswers+"",Ve,ot,ve,Ee,Ye,it,ct,Le,Oe=t[1].accuracy+"",Ue,at,We,Te,Ke,ut,H=t[3]&&qt(t);function ft(L,V){return L[0].cards.length===0?Bl:Dl}let De=ft(t),le=De(t),$=t[4]&&Nt(t);return{c(){e=d("div"),l=d("div"),n=d("h2"),r=k(s),o=C(),c=d("div"),a=d("button"),w=k(f),h=C(),g=d("button"),v=k(m),_=C(),b=d("button"),q=k(y),Q=C(),p=d("input"),A=C(),H&&H.c(),I=C(),B=d("div"),M=d("div"),F=d("div"),P=k(O),J=C(),R=d("div"),K=k(G),z=C(),D=d("div"),j=d("div"),pe=k(ie),Se=C(),Z=d("div"),x=k(ae),Ae=C(),se=d("div"),N=d("div"),ee=k(Y),qe=C(),ze=d("div"),Ve=k(Fe),ot=C(),ve=d("div"),Ee=d("div"),Ye=k(t[5]),it=k("%"),ct=C(),Le=d("div"),Ue=k(Oe),at=C(),le.c(),We=C(),$&&$.c(),Te=lt(),u(n,"class","svelte-tdwh"),u(a,"class","btn-secondary"),u(g,"class","btn-secondary"),u(b,"class","btn-error"),u(p,"type","file"),u(p,"accept",".json"),Zt(p,"display","none"),u(c,"class","header-actions svelte-tdwh"),u(l,"class","collection-header svelte-tdwh"),u(F,"class","stat-value svelte-tdwh"),u(R,"class","stat-label svelte-tdwh"),u(M,"class","stat-card svelte-tdwh"),u(j,"class","stat-value svelte-tdwh"),u(Z,"class","stat-label svelte-tdwh"),u(D,"class","stat-card svelte-tdwh"),u(N,"class","stat-value svelte-tdwh"),u(ze,"class","stat-label svelte-tdwh"),u(se,"class","stat-card svelte-tdwh"),u(Ee,"class","stat-value svelte-tdwh"),u(Le,"class","stat-label svelte-tdwh"),u(ve,"class","stat-card svelte-tdwh"),u(B,"class","stats-section svelte-tdwh"),u(e,"class","collection-view svelte-tdwh")},m(L,V){T(L,e,V),i(e,l),i(l,n),i(n,r),i(l,o),i(l,c),i(c,a),i(a,w),i(c,h),i(c,g),i(g,v),i(c,_),i(c,b),i(b,q),i(c,Q),i(c,p),t[13](p),i(e,A),H&&H.m(e,null),i(e,I),i(e,B),i(B,M),i(M,F),i(F,P),i(M,J),i(M,R),i(R,K),i(B,z),i(B,D),i(D,j),i(j,pe),i(D,Se),i(D,Z),i(Z,x),i(B,Ae),i(B,se),i(se,N),i(N,ee),i(se,qe),i(se,ze),i(ze,Ve),i(B,ot),i(B,ve),i(ve,Ee),i(Ee,Ye),i(Ee,it),i(ve,ct),i(ve,Le),i(Le,Ue),i(e,at),le.m(e,null),T(L,We,V),$&&$.m(L,V),T(L,Te,V),Ke||(ut=[U(a,"click",t[6]),U(g,"click",t[7]),U(b,"click",t[9]),U(p,"change",t[8])],Ke=!0)},p(L,[V]){V&2&&s!==(s=L[1].yourCollection+"")&&S(r,s),V&2&&f!==(f=L[1].exportBackup+"")&&S(w,f),V&2&&m!==(m=L[1].importBackup+"")&&S(v,m),V&2&&y!==(y=L[1].clearThisSet+"")&&S(q,y),L[3]?H?H.p(L,V):(H=qt(L),H.c(),H.m(e,I)):H&&(H.d(1),H=null),V&1&&O!==(O=L[0].cards.length+"")&&S(P,O),V&2&&G!==(G=L[1].cardsCollected+"")&&S(K,G),V&1&&ie!==(ie=L[0].stats.totalQuestions+"")&&S(pe,ie),V&2&&ae!==(ae=L[1].questionsAnswered+"")&&S(x,ae),V&1&&Y!==(Y=L[0].stats.correctAnswers+"")&&S(ee,Y),V&2&&Fe!==(Fe=L[1].correctAnswers+"")&&S(Ve,Fe),V&32&&S(Ye,L[5]),V&2&&Oe!==(Oe=L[1].accuracy+"")&&S(Ue,Oe),De===(De=ft(L))&&le?le.p(L,V):(le.d(1),le=De(L),le&&(le.c(),le.m(e,null))),L[4]?$?$.p(L,V):($=Nt(L),$.c(),$.m(Te.parentNode,Te)):$&&($.d(1),$=null)},i:W,o:W,d(L){L&&(E(e),E(We),E(Te)),t[13](null),H&&H.d(),le.d(),$&&$.d(L),Ke=!1,oe(ut)}}}function Rl(t,e,l){let n,{collection:s}=e,{t:r}=e;const o=je();let c,a=null,f=!1;function w(){try{Ll(),m(r.collectionExported,"success")}catch{m(r.exportFailed,"error")}}function h(){c.click()}async function g(p){var B;const A=p.target,I=(B=A.files)==null?void 0:B[0];if(I){try{const M=await Ol(I);M.success?(m(r.collectionImported,"success"),o("refresh")):m(M.error||r.importFailed,"error")}catch{m(r.importFailed,"error")}A.value=""}}function m(p,A){l(3,a={text:p,type:A}),setTimeout(()=>{l(3,a=null)},3e3)}function v(){l(4,f=!0)}function _(){l(4,f=!1)}function b(){try{gl(),l(4,f=!1),m(r.collectionCleared,"success"),o("refresh")}catch{m(r.clearFailed,"error")}}function y(p){tl.call(this,t,p)}function q(p){$e[p?"unshift":"push"](()=>{c=p,l(2,c)})}const Q=p=>p.key==="Escape"&&_();return t.$$set=p=>{"collection"in p&&l(0,s=p.collection),"t"in p&&l(1,r=p.t)},t.$$.update=()=>{t.$$.dirty&1&&l(5,n=s.stats.totalQuestions>0?Math.round(s.stats.correctAnswers/s.stats.totalQuestions*100):0)},[s,r,c,a,f,n,w,h,g,v,_,b,y,q,Q]}class jl extends ge{constructor(e){super(),me(this,e,Rl,Pl,ce,{collection:0,t:1})}}function Vl(t){let e,l,n,s,r;return{c(){e=d("div"),l=d("div"),n=C(),s=d("p"),r=k(t[0]),u(l,"class","spinner svelte-1lxornd"),u(s,"class","svelte-1lxornd"),u(e,"class","loading-view svelte-1lxornd")},m(o,c){T(o,e,c),i(e,l),i(e,n),i(e,s),i(s,r)},p(o,[c]){c&1&&S(r,o[0])},i:W,o:W,d(o){o&&E(e)}}}function Yl(t,e,l){let{message:n="Loading..."}=e;return t.$$set=s=>{"message"in s&&l(0,n=s.message)},[n]}class Ul extends ge{constructor(e){super(),me(this,e,Yl,Vl,ce,{message:0})}}function Wl(t){let e,l,n,s,r,o,c,a,f,w,h;return{c(){e=d("div"),l=d("div"),l.textContent="⚠️",n=C(),s=d("h2"),s.textContent="Oops!",r=C(),o=d("p"),c=k(t[0]),a=C(),f=d("button"),f.textContent="Try Again",u(l,"class","error-icon svelte-na0xmw"),u(s,"class","svelte-na0xmw"),u(o,"class","svelte-na0xmw"),u(f,"class","btn-primary"),u(e,"class","error-view svelte-na0xmw")},m(g,m){T(g,e,m),i(e,l),i(e,n),i(e,s),i(e,r),i(e,o),i(o,c),i(e,a),i(e,f),w||(h=U(f,"click",t[1]),w=!0)},p(g,[m]){m&1&&S(c,g[0])},i:W,o:W,d(g){g&&E(e),w=!1,h()}}}function Kl(t,e,l){let{message:n="Something went wrong"}=e;const s=je();function r(){s("retry")}return t.$$set=o=>{"message"in o&&l(0,n=o.message)},[n,r]}class Jl extends ge{constructor(e){super(),me(this,e,Kl,Wl,ce,{message:0})}}function Gl(t,e,l){const n=t.slice();return n[23]=e[l],n}function Hl(t){let e;return{c(){e=d("option"),e.textContent=`${t[23].name}`,e.__value=t[23].id,Ie(e,e.__value),u(e,"class","svelte-1osm06m")},m(l,n){T(l,e,n)},p:W,d(l){l&&E(e)}}}function $l(t){let e,l;return e=new jl({props:{collection:t[4],t:t[11]}}),e.$on("refresh",t[20]),{c(){ye(e.$$.fragment)},m(n,s){de(e,n,s),l=!0},p(n,s){const r={};s&16&&(r.collection=n[4]),s&2048&&(r.t=n[11]),e.$set(r)},i(n){l||(te(e.$$.fragment,n),l=!0)},o(n){ne(e.$$.fragment,n),l=!1},d(n){he(e,n)}}}function Xl(t){let e,l,n,s;const r=[tn,en,xl,Zl],o=[];function c(a,f){return a[1]==="loading"?0:a[1]==="quiz"&&a[2]?1:a[1]==="result"&&a[2]?2:a[1]==="error"?3:-1}return~(e=c(t))&&(l=o[e]=r[e](t)),{c(){l&&l.c(),n=lt()},m(a,f){~e&&o[e].m(a,f),T(a,n,f),s=!0},p(a,f){let w=e;e=c(a),e===w?~e&&o[e].p(a,f):(l&&(Dt(),ne(o[w],1,1,()=>{o[w]=null}),Bt()),~e?(l=o[e],l?l.p(a,f):(l=o[e]=r[e](a),l.c()),te(l,1),l.m(n.parentNode,n)):l=null)},i(a){s||(te(l),s=!0)},o(a){ne(l),s=!1},d(a){a&&E(n),~e&&o[e].d(a)}}}function Zl(t){let e,l;return e=new Jl({props:{message:t[8]}}),e.$on("retry",t[17]),{c(){ye(e.$$.fragment)},m(n,s){de(e,n,s),l=!0},p(n,s){const r={};s&256&&(r.message=n[8]),e.$set(r)},i(n){l||(te(e.$$.fragment,n),l=!0)},o(n){ne(e.$$.fragment,n),l=!1},d(n){he(e,n)}}}function xl(t){let e,l;return e=new Fl({props:{isCorrect:t[5],correctAnswer:t[2].correctAnswer,userAnswer:t[6],wonCard:t[7],t:t[11]}}),e.$on("next",t[16]),{c(){ye(e.$$.fragment)},m(n,s){de(e,n,s),l=!0},p(n,s){const r={};s&32&&(r.isCorrect=n[5]),s&4&&(r.correctAnswer=n[2].correctAnswer),s&64&&(r.userAnswer=n[6]),s&128&&(r.wonCard=n[7]),s&2048&&(r.t=n[11]),e.$set(r)},i(n){l||(te(e.$$.fragment,n),l=!0)},o(n){ne(e.$$.fragment,n),l=!1},d(n){he(e,n)}}}function en(t){var n;let e,l;return e=new Ml({props:{question:t[2],t:t[11],currentSet:((n=xe.find(t[21]))==null?void 0:n.name)||""}}),e.$on("answer",t[15]),{c(){ye(e.$$.fragment)},m(s,r){de(e,s,r),l=!0},p(s,r){var c;const o={};r&4&&(o.question=s[2]),r&2048&&(o.t=s[11]),r&1024&&(o.currentSet=((c=xe.find(s[21]))==null?void 0:c.name)||""),e.$set(o)},i(s){l||(te(e.$$.fragment,s),l=!0)},o(s){ne(e.$$.fragment,s),l=!1},d(s){he(e,s)}}}function tn(t){let e,l;return e=new Ul({props:{message:t[11].loading}}),{c(){ye(e.$$.fragment)},m(n,s){de(e,n,s),l=!0},p(n,s){const r={};s&2048&&(r.message=n[11].loading),e.$set(r)},i(n){l||(te(e.$$.fragment,n),l=!0)},o(n){ne(e.$$.fragment,n),l=!1},d(n){he(e,n)}}}function ln(t){var se;let e,l,n,s=t[11].appTitle+"",r,o,c,a,f,w,h,g,m,v,_,b,y=t[11].playQuiz+"",q,Q,p,A=t[11].myCollection+"",I,B,M=(((se=t[4])==null?void 0:se.cards.length)||0)+"",F,O,P=t[3].length+"",J,R,G,K,z,D,j,ie,pe,Se=re(xe),Z=[];for(let N=0;N<Se.length;N+=1)Z[N]=Hl(Gl(t,Se,N));const ae=[Xl,$l],x=[];function Ae(N,Y){return N[9]==="quiz"?0:1}return z=Ae(t),D=x[z]=ae[z](t),{c(){e=d("div"),l=d("header"),n=d("h1"),r=k(s),o=C(),c=d("div"),a=d("div"),f=d("select");for(let N=0;N<Z.length;N+=1)Z[N].c();w=C(),h=d("select"),g=d("option"),g.textContent="English",m=d("option"),m.textContent="Norsk",v=C(),_=d("nav"),b=d("button"),q=k(y),Q=C(),p=d("button"),I=k(A),B=k(" ("),F=k(M),O=k("/"),J=k(P),R=k(")"),G=C(),K=d("main"),D.c(),u(n,"class","app-title svelte-1osm06m"),u(f,"class","selector svelte-1osm06m"),g.__value="en",Ie(g,g.__value),u(g,"class","svelte-1osm06m"),m.__value="no",Ie(m,m.__value),u(m,"class","svelte-1osm06m"),u(h,"class","selector svelte-1osm06m"),u(a,"class","selectors svelte-1osm06m"),u(c,"class","header-controls svelte-1osm06m"),u(b,"class","nav-btn svelte-1osm06m"),X(b,"active",t[9]==="quiz"),u(p,"class","nav-btn svelte-1osm06m"),X(p,"active",t[9]==="collection"),u(_,"class","svelte-1osm06m"),u(l,"class","app-header svelte-1osm06m"),u(K,"class","svelte-1osm06m"),u(e,"class","app svelte-1osm06m")},m(N,Y){T(N,e,Y),i(e,l),i(l,n),i(n,r),i(l,o),i(l,c),i(c,a),i(a,f);for(let ee=0;ee<Z.length;ee+=1)Z[ee]&&Z[ee].m(f,null);Pe(f,t[12]),i(a,w),i(a,h),i(h,g),i(h,m),Pe(h,t[0]),i(l,v),i(l,_),i(_,b),i(b,q),i(_,Q),i(_,p),i(p,I),i(p,B),i(p,F),i(p,O),i(p,J),i(p,R),i(e,G),i(e,K),x[z].m(K,null),j=!0,ie||(pe=[U(f,"change",t[13]),U(h,"change",t[14]),U(b,"click",t[19]),U(p,"click",t[18])],ie=!0)},p(N,[Y]){var qe;(!j||Y&2048)&&s!==(s=N[11].appTitle+"")&&S(r,s),(!j||Y&4096)&&Pe(f,N[12]),(!j||Y&1)&&Pe(h,N[0]),(!j||Y&2048)&&y!==(y=N[11].playQuiz+"")&&S(q,y),(!j||Y&512)&&X(b,"active",N[9]==="quiz"),(!j||Y&2048)&&A!==(A=N[11].myCollection+"")&&S(I,A),(!j||Y&16)&&M!==(M=(((qe=N[4])==null?void 0:qe.cards.length)||0)+"")&&S(F,M),(!j||Y&8)&&P!==(P=N[3].length+"")&&S(J,P),(!j||Y&512)&&X(p,"active",N[9]==="collection");let ee=z;z=Ae(N),z===ee?x[z].p(N,Y):(Dt(),ne(x[ee],1,1,()=>{x[ee]=null}),Bt(),D=x[z],D?D.p(N,Y):(D=x[z]=ae[z](N),D.c()),te(D,1),D.m(K,null))},i(N){j||(te(D),j=!0)},o(N){ne(D),j=!1},d(N){N&&E(e),Qe(Z,N),x[z].d(),ie=!1,oe(pe)}}}function nn(t,e,l){let n,s,r;ht(t,et,O=>l(0,s=O)),ht(t,tt,O=>l(12,r=O));let o="loading",c=null,a=[],f,w=!1,h=0,g=null,m="",v="quiz",_=r;el(()=>{l(4,f=fe()),q()});function b(O){const P=O.target;tt.set(P.value),l(10,_=P.value),l(3,a=[]),q()}function y(O){const P=O.target;et.set(P.value)}async function q(){try{l(1,o="loading"),a.length===0&&l(3,a=await al(_));const O=new Set(f.cards.map(K=>K.id)),P=a.filter(K=>!O.has(K.id));if(P.length===0)throw new Error("Congratulations! You have collected all cards from this set!");const J=fl(P),R=await ul(J.id,_),G=wl(R);if(!G)throw new Error("Could not generate a valid question. Please try again.");l(2,c=G),l(1,o="quiz")}catch(O){console.error("Error loading question:",O),l(8,m=O instanceof Error?O.message:"Failed to load question"),l(1,o="error")}}function Q(O){if(c){if(l(6,h=O.detail),l(5,w=bl(c,h)),ml(w),l(7,g=null),w){const P={id:c.card.id,name:c.card.name,image:c.card.image,hp:c.card.hp,types:c.card.types,rarity:c.card.rarity,collectedAt:new Date().toISOString()};hl(P)&&l(7,g=c.card)}l(4,f=fe()),l(1,o="result")}}function p(){q()}function A(){q()}function I(){l(9,v="collection"),l(4,f=fe())}function B(){l(9,v="quiz")}function M(){l(4,f=fe())}const F=O=>O.id===_;return t.$$.update=()=>{t.$$.dirty&1&&l(11,n=yl(s))},[s,o,c,a,f,w,h,g,m,v,_,n,r,b,y,Q,p,A,I,B,M,F]}class sn extends ge{constructor(e){super(),me(this,e,nn,ln,ce,{})}}new sn({target:document.getElementById("app")});
