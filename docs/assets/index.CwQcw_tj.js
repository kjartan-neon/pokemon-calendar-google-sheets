var Pl=Object.defineProperty;var Rl=(t,e,l)=>e in t?Pl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var _t=(t,e,l)=>Rl(t,typeof e!="symbol"?e+"":e,l);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function l(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=l(s);fetch(s.href,r)}})();function Z(){}function bl(t){return t()}function Yt(){return Object.create(null)}function ie(t){t.forEach(bl)}function wl(t){return typeof t=="function"}function _e(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let st;function ve(t,e){return t===e?!0:(st||(st=document.createElement("a")),st.href=e,t===st.href)}function Fl(t){return Object.keys(t).length===0}function Ol(t,...e){if(t==null){for(const n of e)n(void 0);return Z}const l=t.subscribe(...e);return l.unsubscribe?()=>l.unsubscribe():l}function Ct(t,e,l){t.$$.on_destroy.push(Ol(e,l))}function o(t,e){t.appendChild(e)}function Q(t,e,l){t.insertBefore(e,l||null)}function E(t){t.parentNode&&t.parentNode.removeChild(t)}function je(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function d(t){return document.createElement(t)}function w(t){return document.createTextNode(t)}function _(){return w(" ")}function It(){return w("")}function j(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function Cl(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function f(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function it(t){return t===""?null:+t}function Bl(t){return Array.from(t.childNodes)}function A(t,e){e=""+e,t.data!==e&&(t.data=e)}function ye(t,e){t.value=e??""}function St(t,e,l,n){l==null?t.style.removeProperty(e):t.style.setProperty(e,l,"")}function at(t,e,l){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e){s.selected=!0;return}}t.selectedIndex=-1}function X(t,e,l){t.classList.toggle(e,!!l)}function zl(t,e,{bubbles:l=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:l,cancelable:n})}let Xe;function Ge(t){Xe=t}function Sl(){if(!Xe)throw new Error("Function called outside component initialization");return Xe}function yl(t){Sl().$$.on_mount.push(t)}function ut(){const t=Sl();return(e,l,{cancelable:n=!1}={})=>{const s=t.$$.callbacks[e];if(s){const r=zl(e,l,{cancelable:n});return s.slice().forEach(i=>{i.call(t,r)}),!r.defaultPrevented}return!0}}function Ut(t,e){const l=t.$$.callbacks[e.type];l&&l.slice().forEach(n=>n.call(this,e))}const Oe=[],yt=[];let Be=[];const Vt=[],jl=Promise.resolve();let At=!1;function Hl(){At||(At=!0,jl.then(Al))}function qt(t){Be.push(t)}const kt=new Set;let Re=0;function Al(){if(Re!==0)return;const t=Xe;do{try{for(;Re<Oe.length;){const e=Oe[Re];Re++,Ge(e),Yl(e.$$)}}catch(e){throw Oe.length=0,Re=0,e}for(Ge(null),Oe.length=0,Re=0;yt.length;)yt.pop()();for(let e=0;e<Be.length;e+=1){const l=Be[e];kt.has(l)||(kt.add(l),l())}Be.length=0}while(Oe.length);for(;Vt.length;)Vt.pop()();At=!1,kt.clear(),Ge(t)}function Yl(t){if(t.fragment!==null){t.update(),ie(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(qt)}}function Ul(t){const e=[],l=[];Be.forEach(n=>t.indexOf(n)===-1?e.push(n):l.push(n)),l.forEach(n=>n()),Be=e}const rt=new Set;let Se;function ql(){Se={r:0,c:[],p:Se}}function El(){Se.r||ie(Se.c),Se=Se.p}function ce(t,e){t&&t.i&&(rt.delete(t),t.i(e))}function pe(t,e,l,n){if(t&&t.o){if(rt.has(t))return;rt.add(t),Se.c.push(()=>{rt.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}else n&&n()}function ue(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function He(t){t&&t.c()}function Ae(t,e,l){const{fragment:n,after_update:s}=t.$$;n&&n.m(e,l),qt(()=>{const r=t.$$.on_mount.map(bl).filter(wl);t.$$.on_destroy?t.$$.on_destroy.push(...r):ie(r),t.$$.on_mount=[]}),s.forEach(qt)}function qe(t,e){const l=t.$$;l.fragment!==null&&(Ul(l.after_update),ie(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function Vl(t,e){t.$$.dirty[0]===-1&&(Oe.push(t),Hl(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ee(t,e,l,n,s,r,i=null,c=[-1]){const u=Xe;Ge(t);const a=t.$$={fragment:null,ctx:[],props:r,update:Z,not_equal:s,bound:Yt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Yt(),dirty:c,skip_bound:!1,root:e.target||u.$$.root};i&&i(a.root);let v=!1;if(a.ctx=l?l(t,e.props||{},(g,p,...m)=>{const k=m.length?m[0]:p;return a.ctx&&s(a.ctx[g],a.ctx[g]=k)&&(!a.skip_bound&&a.bound[g]&&a.bound[g](k),v&&Vl(t,g)),p}):[],a.update(),v=!0,ie(a.before_update),a.fragment=n?n(a.ctx):!1,e.target){if(e.hydrate){const g=Bl(e.target);a.fragment&&a.fragment.l(g),g.forEach(E)}else a.fragment&&a.fragment.c();e.intro&&ce(t.$$.fragment),Ae(t,e.target,e.anchor),Al()}Ge(u)}class Ie{constructor(){_t(this,"$$");_t(this,"$$set")}$destroy(){qe(this,1),this.$destroy=Z}$on(e,l){if(!wl(l))return Z;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const s=n.indexOf(l);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!Fl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Wl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Wl);const Il="https://api.tcgdex.net/v2/en";function Ml(t,e){const l=t.split("-")[1];return`https://assets.tcgdex.net/en/${Kl(e)}/${e}/${l}/high.webp`}function Kl(t){return t.startsWith("swsh")?"swsh":t.startsWith("sv")?"sv":t.startsWith("me")?"base":"swsh"}async function Et(t){try{const e=await fetch(`${Il}/sets/${t}`);if(!e.ok)throw new Error("Failed to fetch cards from set");return((await e.json()).cards||[]).map(s=>({id:s.id,localId:s.localId,name:s.name,image:Ml(s.id,t)}))}catch(e){throw console.error("Error fetching cards from set:",e),e}}async function Jl(t,e){try{const l=await fetch(`${Il}/cards/${t}`);if(!l.ok)throw new Error("Failed to fetch card details");return{...await l.json(),image:Ml(t,e)}}catch(l){throw console.error("Error fetching card details:",l),l}}function Gl(t){const e=Math.floor(Math.random()*t.length);return t[e]}const Mt="pokemon-tcg-collection",Ql="2.0";function Xl(){return{totalQuestions:0,correctAnswers:0,incorrectAnswers:0,totalHpDefeated:0}}function bt(){return{cards:[],stats:Xl(),version:Ql}}function me(){try{const t=localStorage.getItem(Mt);if(!t)return bt();const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?(console.warn("Invalid collection format, resetting..."),bt()):(e.stats.totalHpDefeated||(e.stats.totalHpDefeated=0),e.currentStreak||(e.currentStreak=0),e.unlockedRareSets||(e.unlockedRareSets={}),e)}catch(t){return console.error("Error loading collection from local storage:",t),bt()}}function ze(t){try{const e={...t,version:Ql};localStorage.setItem(Mt,JSON.stringify(e))}catch(e){throw console.error("Error saving collection to local storage:",e),new Error("Failed to save collection")}}function Zl(t){try{const e=me();return e.cards.some(n=>n.id===t.id)?!1:(e.cards.push(t),ze(e),!0)}catch(e){return console.error("Error adding card to collection:",e),!1}}function $l(t,e){try{const l=me();l.stats.totalQuestions++,t?(l.stats.correctAnswers++,e&&(l.stats.totalHpDefeated+=e)):l.stats.incorrectAnswers++,ze(l)}catch(l){console.error("Error updating stats:",l)}}function xl(){try{localStorage.removeItem(Mt)}catch(t){console.error("Error clearing collection:",t)}}function en(){const t=me();return JSON.stringify(t,null,2)}function tn(t){try{const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?{success:!1,error:"Invalid collection format"}:!e.stats.totalQuestions===void 0||!e.stats.correctAnswers===void 0||!e.stats.incorrectAnswers===void 0?{success:!1,error:"Invalid stats format"}:(ze(e),{success:!0})}catch(e){return console.error("Error importing collection:",e),{success:!1,error:"Failed to parse JSON file"}}}function ln(){const t=Math.floor(Math.random()*50)+10,e=Math.floor(Math.random()*50)+10,l=["+","-"],n=l[Math.floor(Math.random()*l.length)];let s,r;if(n==="+")s=t+e,r=`What is ${t} + ${e}?`;else{s=t+e;const i=s;s=t,r=`What is ${i} - ${e}?`}return{question:r,answer:s}}function nn(){const t=Math.floor(Math.random()*50)+10,e=Math.floor(Math.random()*50)+10,l=t+e;return{question:`What is ${t} + ${e}?`,answer:l}}function sn(t,e,l=!1){if(!t)return null;let n,s,r=!1,i,c;if(t.hp&&t.hp>0){r=!0;const u=[10,20,30,40,50,60,60,80,120,300][Math.floor(Math.random()*5)];s=Math.ceil(t.hp/u),n=e.damageQuestion(u)}else{const u=ln();n=u.question,s=u.answer}if(l){const u=nn();i=u.question,c=u.answer}return{card:t,questionText:n,correctAnswer:s,isPokemon:r,secondQuestion:i,secondAnswer:c}}function rn(t,e,l){const n=e===t.correctAnswer;if(t.secondQuestion&&t.secondAnswer!==void 0){const s=l===t.secondAnswer;return n&&s}return n}const Fe=[];function Tl(t,e=Z){let l;const n=new Set;function s(c){if(_e(t,c)&&(t=c,l)){const u=!Fe.length;for(const a of n)a[1](),Fe.push(a,t);if(u){for(let a=0;a<Fe.length;a+=2)Fe[a][0](Fe[a+1]);Fe.length=0}}}function r(c){s(c(t))}function i(c,u=Z){const a=[c,u];return n.add(a),n.size===1&&(l=e(s,r)||Z),c(t),()=>{n.delete(a),n.size===0&&l&&(l(),l=null)}}return{set:s,update:r,subscribe:i}}const wt=[{id:"swsh3",name:"Sword & Shield - Darkness Ablaze"},{id:"sv05",name:"Scarlet & Violet - Temporal Forces"},{id:"sv06.5",name:"Scarlet & Violet - Shrouded Fable"}],Ll="tcg-math-settings";function on(){return{language:"en",selectedSet:"swsh3"}}function Qt(){try{const t=localStorage.getItem(Ll);if(t){const e=JSON.parse(t);return{language:e.language||"en",selectedSet:e.selectedSet||"swsh3"}}}catch(t){console.error("Error loading settings:",t)}return on()}function Dl(t){try{localStorage.setItem(Ll,JSON.stringify(t))}catch(e){console.error("Error saving settings:",e)}}const Nl=Qt(),ot=Tl(Nl.language),ct=Tl(Nl.selectedSet);ot.subscribe(t=>{const e=Qt();Dl({...e,language:t})});ct.subscribe(t=>{const e=Qt();Dl({...e,selectedSet:t})});const an={en:{appTitle:"16k Pokemon Math Challenge",quizTitle:"TCG Math Challenge",playQuiz:"Play Quiz",myCollection:"My Collection",selectSet:"Select Set",selectLanguage:"Language",setInfo:"Collecting Set",enterAnswer:"Enter your answer",submitAnswer:"Submit Answer",nextQuestion:"Next Question",correct:"Correct!",notQuite:"Not quite!",correctMessage:"Great job! The answer was",incorrectMessage:"You answered",encouragement:"Try again with the next question!",youWonThisCard:"You won this card!",cardsCollected:"Cards Collected",questionsAnswered:"Questions Answered",correctAnswers:"Correct Answers",accuracy:"Accuracy",noCardsYet:"No cards yet!",noCardsDescription:"Answer questions correctly to start building your collection.",exportBackup:"Export Backup",importBackup:"Import Backup",clearThisSet:"Clear This Set",clearCollectionTitle:"Clear Collection?",clearCollectionMessage:"Are you sure you want to clear your entire collection? This action cannot be undone.",cancel:"Cancel",clearCollection:"Clear Collection",collectionExported:"Collection exported successfully!",collectionImported:"Collection imported successfully!",collectionCleared:"Collection cleared successfully!",exportFailed:"Failed to export collection",importFailed:"Failed to import collection",clearFailed:"Failed to clear collection",hit:"hit",hits:"hits",loading:"Loading new question...",yourCollection:"Your Collection",language:"Language",damageQuestion:t=>`Your Pokémon deals ${t} damage each turn. How many turns does it take to defeat this Pokémon?`},no:{appTitle:"16k Pokémon Matteutfordring",quizTitle:"TCG Matte Utfordring",playQuiz:"Spill Quiz",myCollection:"Min Samling",selectSet:"Velg Sett",selectLanguage:"Språk",setInfo:"Samler Sett",enterAnswer:"Skriv inn svaret ditt",submitAnswer:"Send Inn Svar",nextQuestion:"Neste Spørsmål",correct:"Riktig!",notQuite:"Ikke helt!",correctMessage:"Bra jobbet! Svaret var",incorrectMessage:"Du svarte",encouragement:"Prøv igjen med neste spørsmål!",youWonThisCard:"Du vant dette kortet!",cardsCollected:"Kort Samlet",questionsAnswered:"Spørsmål Besvart",correctAnswers:"Riktige Svar",accuracy:"Nøyaktighet",noCardsYet:"Ingen kort ennå!",noCardsDescription:"Svar riktig på spørsmål for å begynne å bygge samlingen din.",exportBackup:"Eksporter Backup",importBackup:"Importer Backup",clearThisSet:"Tøm Dette Settet",clearCollectionTitle:"Tøm Samling?",clearCollectionMessage:"Er du sikker på at du vil tømme hele samlingen din? Denne handlingen kan ikke angres.",cancel:"Avbryt",clearCollection:"Tøm Samling",collectionExported:"Samling eksportert!",collectionImported:"Samling importert!",collectionCleared:"Samling tømt!",exportFailed:"Kunne ikke eksportere samling",importFailed:"Kunne ikke importere samling",clearFailed:"Kunne ikke tømme samling",hit:"treff",hits:"treff",loading:"Laster nytt spørsmål...",yourCollection:"Din Samling",language:"Språk",damageQuestion:t=>`Din Pokémon gjør ${t} skade hver runde. Hvor mange runder tar det å beseire denne Pokémonen?`}};function cn(t){return an[t]}function Wt(t,e,l){const n=t.slice();return n[4]=e[l],n}function Kt(t){let e,l,n=t[0].rarity+"",s;return{c(){e=d("div"),l=d("span"),s=w(n),f(l,"class","rarity-badge svelte-1gymiiy"),f(e,"class","card-rarity svelte-1gymiiy")},m(r,i){Q(r,e,i),o(e,l),o(l,s)},p(r,i){i&1&&n!==(n=r[0].rarity+"")&&A(s,n)},d(r){r&&E(e)}}}function Jt(t){let e,l,n,s=ue(t[0].attacks),r=[];for(let i=0;i<s.length;i+=1)r[i]=Xt(Wt(t,s,i));return{c(){e=d("div"),l=d("h4"),l.textContent="Attacks:",n=_();for(let i=0;i<r.length;i+=1)r[i].c();f(l,"class","svelte-1gymiiy"),f(e,"class","card-attacks svelte-1gymiiy")},m(i,c){Q(i,e,c),o(e,l),o(e,n);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null)},p(i,c){if(c&5){s=ue(i[0].attacks);let u;for(u=0;u<s.length;u+=1){const a=Wt(i,s,u);r[u]?r[u].p(a,c):(r[u]=Xt(a),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=s.length}},d(i){i&&E(e),je(r,i)}}}function Gt(t){let e,l=t[4].damage+"",n;return{c(){e=d("span"),n=w(l),f(e,"class","attack-damage svelte-1gymiiy")},m(s,r){Q(s,e,r),o(e,n)},p(s,r){r&1&&l!==(l=s[4].damage+"")&&A(n,l)},d(s){s&&E(e)}}}function Xt(t){let e,l,n=t[4].name+"",s,r,i,c=t[4].damage&&Gt(t);return{c(){e=d("div"),l=d("span"),s=w(n),r=_(),c&&c.c(),i=_(),f(l,"class","attack-name svelte-1gymiiy"),f(e,"class","attack svelte-1gymiiy"),X(e,"highlighted",t[2]===t[4].name)},m(u,a){Q(u,e,a),o(e,l),o(l,s),o(e,r),c&&c.m(e,null),o(e,i)},p(u,a){a&1&&n!==(n=u[4].name+"")&&A(s,n),u[4].damage?c?c.p(u,a):(c=Gt(u),c.c(),c.m(e,i)):c&&(c.d(1),c=null),a&5&&X(e,"highlighted",u[2]===u[4].name)},d(u){u&&E(e),c&&c.d()}}}function un(t){let e,l,n,s,r,i,c,u,a=t[0].name+"",v,g,p,m=t[3]&&t[0].rarity&&Kt(t),k=t[1]&&t[0].attacks&&t[0].attacks.length>0&&Jt(t);return{c(){e=d("div"),l=d("div"),n=d("img"),i=_(),c=d("div"),u=d("h3"),v=w(a),g=_(),m&&m.c(),p=_(),k&&k.c(),ve(n.src,s=t[0].image)||f(n,"src",s),f(n,"alt",r=t[0].name),f(n,"class","svelte-1gymiiy"),f(l,"class","card-image svelte-1gymiiy"),f(u,"class","card-name svelte-1gymiiy"),f(c,"class","card-info svelte-1gymiiy"),f(e,"class","pokemon-card svelte-1gymiiy")},m(h,S){Q(h,e,S),o(e,l),o(l,n),o(e,i),o(e,c),o(c,u),o(u,v),o(c,g),m&&m.m(c,null),o(c,p),k&&k.m(c,null)},p(h,[S]){S&1&&!ve(n.src,s=h[0].image)&&f(n,"src",s),S&1&&r!==(r=h[0].name)&&f(n,"alt",r),S&1&&a!==(a=h[0].name+"")&&A(v,a),h[3]&&h[0].rarity?m?m.p(h,S):(m=Kt(h),m.c(),m.m(c,p)):m&&(m.d(1),m=null),h[1]&&h[0].attacks&&h[0].attacks.length>0?k?k.p(h,S):(k=Jt(h),k.c(),k.m(c,null)):k&&(k.d(1),k=null)},i:Z,o:Z,d(h){h&&E(e),m&&m.d(),k&&k.d()}}}function fn(t,e,l){let{card:n}=e,{showAttacks:s=!1}=e,{highlightedAttack:r=null}=e,{showRarity:i=!1}=e;return t.$$set=c=>{"card"in c&&l(0,n=c.card),"showAttacks"in c&&l(1,s=c.showAttacks),"highlightedAttack"in c&&l(2,r=c.highlightedAttack),"showRarity"in c&&l(3,i=c.showRarity)},[n,s,r,i]}class dn extends Ie{constructor(e){super(),Ee(this,e,fn,un,_e,{card:0,showAttacks:1,highlightedAttack:2,showRarity:3})}}function Zt(t){let e,l,n,s,r=t[0].secondQuestion+"",i;return{c(){e=d("div"),l=d("span"),l.textContent="2.",n=_(),s=d("h3"),i=w(r),f(l,"class","question-number svelte-174fqld"),f(s,"class","question-text svelte-174fqld"),f(e,"class","question-item svelte-174fqld")},m(c,u){Q(c,e,u),o(e,l),o(e,n),o(e,s),o(s,i)},p(c,u){u&1&&r!==(r=c[0].secondQuestion+"")&&A(i,r)},d(c){c&&E(e)}}}function $t(t){let e,l,n,s,r,i,c;return{c(){e=d("div"),l=d("label"),l.textContent="Answer 2:",n=_(),s=d("input"),f(l,"class","input-label svelte-174fqld"),f(s,"type","number"),f(s,"placeholder",r=t[1].enterAnswer),f(s,"class","answer-input svelte-174fqld"),f(e,"class","input-group svelte-174fqld")},m(u,a){Q(u,e,a),o(e,l),o(e,n),o(e,s),ye(s,t[3]),i||(c=[j(s,"input",t[8]),j(s,"keypress",t[5])],i=!0)},p(u,a){a&2&&r!==(r=u[1].enterAnswer)&&f(s,"placeholder",r),a&8&&it(s.value)!==u[3]&&ye(s,u[3])},d(u){u&&E(e),i=!1,ie(c)}}}function gn(t){let e,l,n,s,r,i,c,u,a,v,g=t[0].questionText+"",p,m,k,h,S,L,q,I,T,y,C,N,H=t[1].submitAnswer+"",P,D,F,K,x;n=new dn({props:{card:t[0].card,showRarity:!0}});let Y=t[0].secondQuestion&&Zt(t),V=t[0].secondQuestion&&$t(t);return{c(){e=d("div"),l=d("div"),He(n.$$.fragment),s=_(),r=d("div"),i=d("div"),c=d("div"),u=d("span"),u.textContent="1.",a=_(),v=d("h3"),p=w(g),m=_(),Y&&Y.c(),k=_(),h=d("div"),S=d("div"),L=d("label"),L.textContent="Answer 1:",q=_(),I=d("input"),y=_(),V&&V.c(),C=_(),N=d("button"),P=w(H),f(l,"class","card-display svelte-174fqld"),f(u,"class","question-number svelte-174fqld"),f(v,"class","question-text svelte-174fqld"),f(c,"class","question-item svelte-174fqld"),f(i,"class","questions-list svelte-174fqld"),f(L,"class","input-label svelte-174fqld"),f(I,"type","number"),f(I,"placeholder",T=t[1].enterAnswer),f(I,"class","answer-input svelte-174fqld"),f(S,"class","input-group svelte-174fqld"),f(N,"class","submit-btn btn-primary svelte-174fqld"),N.disabled=D=!t[2]||t[0].secondQuestion&&!t[3],f(h,"class","answer-inputs-container svelte-174fqld"),f(r,"class","question-container svelte-174fqld"),f(e,"class","quiz-view svelte-174fqld")},m(O,W){Q(O,e,W),o(e,l),Ae(n,l,null),o(e,s),o(e,r),o(r,i),o(i,c),o(c,u),o(c,a),o(c,v),o(v,p),o(i,m),Y&&Y.m(i,null),o(r,k),o(r,h),o(h,S),o(S,L),o(S,q),o(S,I),ye(I,t[2]),o(h,y),V&&V.m(h,null),o(h,C),o(h,N),o(N,P),F=!0,K||(x=[j(I,"input",t[7]),j(I,"keypress",t[5]),j(N,"click",t[4])],K=!0)},p(O,[W]){const U={};W&1&&(U.card=O[0].card),n.$set(U),(!F||W&1)&&g!==(g=O[0].questionText+"")&&A(p,g),O[0].secondQuestion?Y?Y.p(O,W):(Y=Zt(O),Y.c(),Y.m(i,null)):Y&&(Y.d(1),Y=null),(!F||W&2&&T!==(T=O[1].enterAnswer))&&f(I,"placeholder",T),W&4&&it(I.value)!==O[2]&&ye(I,O[2]),O[0].secondQuestion?V?V.p(O,W):(V=$t(O),V.c(),V.m(h,C)):V&&(V.d(1),V=null),(!F||W&2)&&H!==(H=O[1].submitAnswer+"")&&A(P,H),(!F||W&13&&D!==(D=!O[2]||O[0].secondQuestion&&!O[3]))&&(N.disabled=D)},i(O){F||(ce(n.$$.fragment,O),F=!0)},o(O){pe(n.$$.fragment,O),F=!1},d(O){O&&E(e),qe(n),Y&&Y.d(),V&&V.d(),K=!1,ie(x)}}}function mn(t,e,l){let{question:n}=e,{t:s}=e,{currentSet:r}=e;const i=ut();let c="",u="";function a(){const m=parseInt(c,10);if(!isNaN(m))if(n.secondQuestion&&n.secondAnswer!==void 0){const k=parseInt(u,10);isNaN(k)||i("answer",{firstAnswer:m,secondAnswer:k})}else i("answer",{firstAnswer:m})}function v(m){m.key==="Enter"&&a()}function g(){c=it(this.value),l(2,c)}function p(){u=it(this.value),l(3,u)}return t.$$set=m=>{"question"in m&&l(0,n=m.question),"t"in m&&l(1,s=m.t),"currentSet"in m&&l(6,r=m.currentSet)},[n,s,c,u,a,v,r,g,p]}class vn extends Ie{constructor(e){super(),Ee(this,e,mn,gn,_e,{question:0,t:1,currentSet:6})}}function pn(t){let e,l,n,s=t[4].notQuite+"",r,i,c,u=t[4].incorrectMessage+"",a,v,g,p,m,k=t[4].correctMessage.toLowerCase()+"",h,S,L,q,I,T,y,C,N=t[4].encouragement+"",H,P=t[5]&&t[6]>0&&xt(t);return{c(){e=d("div"),e.textContent="✗",l=_(),n=d("h2"),r=w(s),i=_(),c=d("p"),a=w(u),v=_(),g=d("strong"),p=w(t[2]),m=w(", "),h=w(k),S=_(),L=d("strong"),q=w(t[1]),I=w("."),T=_(),P&&P.c(),y=_(),C=d("p"),H=w(N),f(e,"class","result-icon error svelte-1v74pgf"),f(n,"class","result-title svelte-1v74pgf"),f(g,"class","svelte-1v74pgf"),f(L,"class","svelte-1v74pgf"),f(c,"class","result-message svelte-1v74pgf"),f(C,"class","encouragement svelte-1v74pgf")},m(D,F){Q(D,e,F),Q(D,l,F),Q(D,n,F),o(n,r),Q(D,i,F),Q(D,c,F),o(c,a),o(c,v),o(c,g),o(g,p),o(c,m),o(c,h),o(c,S),o(c,L),o(L,q),o(c,I),Q(D,T,F),P&&P.m(D,F),Q(D,y,F),Q(D,C,F),o(C,H)},p(D,F){F&16&&s!==(s=D[4].notQuite+"")&&A(r,s),F&16&&u!==(u=D[4].incorrectMessage+"")&&A(a,u),F&4&&A(p,D[2]),F&16&&k!==(k=D[4].correctMessage.toLowerCase()+"")&&A(h,k),F&2&&A(q,D[1]),D[5]&&D[6]>0?P?P.p(D,F):(P=xt(D),P.c(),P.m(y.parentNode,y)):P&&(P.d(1),P=null),F&16&&N!==(N=D[4].encouragement+"")&&A(H,N)},d(D){D&&(E(e),E(l),E(n),E(i),E(c),E(T),E(y),E(C)),P&&P.d(D)}}}function hn(t){let e,l,n,s=t[4].correct+"",r,i,c,u=t[4].correctMessage+"",a,v,g,p,m,k=(t[1]===1?t[4].hit:t[4].hits)+"",h,S,L,q,I,T=t[5]&&!t[3]&&el(t),y=t[3]&&tl(t);return{c(){e=d("div"),e.textContent="✓",l=_(),n=d("h2"),r=w(s),i=_(),c=d("p"),a=w(u),v=_(),g=d("strong"),p=w(t[1]),m=_(),h=w(k),S=w("!"),L=_(),T&&T.c(),q=_(),y&&y.c(),I=It(),f(e,"class","result-icon success svelte-1v74pgf"),f(n,"class","result-title svelte-1v74pgf"),f(g,"class","svelte-1v74pgf"),f(c,"class","result-message svelte-1v74pgf")},m(C,N){Q(C,e,N),Q(C,l,N),Q(C,n,N),o(n,r),Q(C,i,N),Q(C,c,N),o(c,a),o(c,v),o(c,g),o(g,p),o(c,m),o(c,h),o(c,S),Q(C,L,N),T&&T.m(C,N),Q(C,q,N),y&&y.m(C,N),Q(C,I,N)},p(C,N){N&16&&s!==(s=C[4].correct+"")&&A(r,s),N&16&&u!==(u=C[4].correctMessage+"")&&A(a,u),N&2&&A(p,C[1]),N&18&&k!==(k=(C[1]===1?C[4].hit:C[4].hits)+"")&&A(h,k),C[5]&&!C[3]?T?T.p(C,N):(T=el(C),T.c(),T.m(q.parentNode,q)):T&&(T.d(1),T=null),C[3]?y?y.p(C,N):(y=tl(C),y.c(),y.m(I.parentNode,I)):y&&(y.d(1),y=null)},d(C){C&&(E(e),E(l),E(n),E(i),E(c),E(L),E(q),E(I)),T&&T.d(C),y&&y.d(C)}}}function xt(t){let e,l=t[4].language==="Språk"?"Streak reset! Try again.":"Rekke tilbakestilt! Prøv igjen.",n;return{c(){e=d("p"),n=w(l),f(e,"class","streak-lost svelte-1v74pgf")},m(s,r){Q(s,e,r),o(e,n)},p(s,r){r&16&&l!==(l=s[4].language==="Språk"?"Streak reset! Try again.":"Rekke tilbakestilt! Prøv igjen.")&&A(n,l)},d(s){s&&E(e)}}}function el(t){let e,l,n,s,r,i,c;function u(g,p){return g[7]===1?kn:_n}let a=u(t),v=a(t);return{c(){e=d("div"),l=d("p"),v.c(),n=_(),s=d("div"),r=d("div"),i=_(),c=d("div"),f(l,"class","streak-text svelte-1v74pgf"),f(r,"class","streak-dot svelte-1v74pgf"),X(r,"filled",t[7]>=1),f(c,"class","streak-dot svelte-1v74pgf"),X(c,"filled",t[7]>=2),f(s,"class","streak-progress svelte-1v74pgf"),f(e,"class","streak-info svelte-1v74pgf")},m(g,p){Q(g,e,p),o(e,l),v.m(l,null),o(e,n),o(e,s),o(s,r),o(s,i),o(s,c)},p(g,p){a===(a=u(g))&&v?v.p(g,p):(v.d(1),v=a(g),v&&(v.c(),v.m(l,null))),p&128&&X(r,"filled",g[7]>=1),p&128&&X(c,"filled",g[7]>=2)},d(g){g&&E(e),v.d()}}}function _n(t){let e=t[4].language==="Språk"?"Get 2 correct answers to win this rare card!":"Få 2 riktige svar for å vinne dette sjeldne kortet!",l;return{c(){l=w(e)},m(n,s){Q(n,l,s)},p(n,s){s&16&&e!==(e=n[4].language==="Språk"?"Get 2 correct answers to win this rare card!":"Få 2 riktige svar for å vinne dette sjeldne kortet!")&&A(l,e)},d(n){n&&E(l)}}}function kn(t){let e=t[4].language==="Språk"?"One more correct to win this card!":"Én til riktig for å vinne dette kortet!",l;return{c(){l=w(e)},m(n,s){Q(n,l,s)},p(n,s){s&16&&e!==(e=n[4].language==="Språk"?"One more correct to win this card!":"Én til riktig for å vinne dette kortet!")&&A(l,e)},d(n){n&&E(l)}}}function tl(t){let e,l,n=t[4].youWonThisCard+"",s,r,i,c,u,a,v,g,p,m=t[3].name+"",k;return{c(){e=d("div"),l=d("h3"),s=w(n),r=_(),i=d("div"),c=d("div"),u=d("img"),g=_(),p=d("span"),k=w(m),f(l,"class","svelte-1v74pgf"),ve(u.src,a=t[3].image)||f(u,"src",a),f(u,"alt",v=t[3].name),f(u,"class","svelte-1v74pgf"),f(p,"class","card-name svelte-1v74pgf"),f(c,"class","mini-card svelte-1v74pgf"),f(i,"class","cards-grid svelte-1v74pgf"),f(e,"class","won-cards svelte-1v74pgf")},m(h,S){Q(h,e,S),o(e,l),o(l,s),o(e,r),o(e,i),o(i,c),o(c,u),o(c,g),o(c,p),o(p,k)},p(h,S){S&16&&n!==(n=h[4].youWonThisCard+"")&&A(s,n),S&8&&!ve(u.src,a=h[3].image)&&f(u,"src",a),S&8&&v!==(v=h[3].name)&&f(u,"alt",v),S&8&&m!==(m=h[3].name+"")&&A(k,m)},d(h){h&&E(e)}}}function bn(t){let e,l,n,s,r=t[4].nextQuestion+"",i,c,u;function a(p,m){return p[0]?hn:pn}let v=a(t),g=v(t);return{c(){e=d("div"),l=d("div"),g.c(),n=_(),s=d("button"),i=w(r),f(l,"class","result-card svelte-1v74pgf"),X(l,"correct",t[0]),X(l,"incorrect",!t[0]),f(s,"class","next-btn btn-primary svelte-1v74pgf"),f(e,"class","result-view svelte-1v74pgf")},m(p,m){Q(p,e,m),o(e,l),g.m(l,null),o(e,n),o(e,s),o(s,i),c||(u=j(s,"click",t[8]),c=!0)},p(p,[m]){v===(v=a(p))&&g?g.p(p,m):(g.d(1),g=v(p),g&&(g.c(),g.m(l,null))),m&1&&X(l,"correct",p[0]),m&1&&X(l,"incorrect",!p[0]),m&16&&r!==(r=p[4].nextQuestion+"")&&A(i,r)},i:Z,o:Z,d(p){p&&E(e),g.d(),c=!1,u()}}}function wn(t,e,l){let{isCorrect:n}=e,{correctAnswer:s}=e,{userAnswer:r}=e,{wonCard:i}=e,{t:c}=e,{needsStreak:u=!1}=e,{streakProgress:a=0}=e,{currentStreak:v=0}=e;const g=ut();function p(){g("next")}return t.$$set=m=>{"isCorrect"in m&&l(0,n=m.isCorrect),"correctAnswer"in m&&l(1,s=m.correctAnswer),"userAnswer"in m&&l(2,r=m.userAnswer),"wonCard"in m&&l(3,i=m.wonCard),"t"in m&&l(4,c=m.t),"needsStreak"in m&&l(5,u=m.needsStreak),"streakProgress"in m&&l(6,a=m.streakProgress),"currentStreak"in m&&l(7,v=m.currentStreak)},[n,s,r,i,c,u,a,v,p]}class Cn extends Ie{constructor(e){super(),Ee(this,e,wn,bn,_e,{isCorrect:0,correctAnswer:1,userAnswer:2,wonCard:3,t:4,needsStreak:5,streakProgress:6,currentStreak:7})}}function Sn(){try{const t=en(),e=new Blob([t],{type:"application/json"}),l=URL.createObjectURL(e),n=document.createElement("a");n.href=l,n.download=`pokemon-collection-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(l)}catch(t){throw console.error("Error downloading backup:",t),new Error("Failed to download backup")}}function yn(t){return new Promise(e=>{const l=new FileReader;l.onload=n=>{var s;try{const r=(s=n.target)==null?void 0:s.result,i=tn(r);e(i)}catch(r){console.error("Error reading file:",r),e({success:!1,error:"Failed to read file"})}},l.onerror=()=>{e({success:!1,error:"Failed to read file"})},l.readAsText(t)})}function ll(t,e,l){const n=t.slice();return n[33]=e[l],n}function nl(t,e,l){const n=t.slice();return n[36]=e[l],n}function sl(t,e,l){const n=t.slice();return n[33]=e[l],n}function rl(t,e,l){const n=t.slice();return n[36]=e[l],n}function An(t){let e=t[1].language==="Språk"?`Defeat ${t[10]>0?t[10].toLocaleString():0} HP to unlock 5 rare cards`:`Beseir ${t[10]>0?t[10].toLocaleString():0} HP for å låse opp 5 sjeldne kort`,l;return{c(){l=w(e)},m(n,s){Q(n,l,s)},p(n,s){s[0]&1026&&e!==(e=n[1].language==="Språk"?`Defeat ${n[10]>0?n[10].toLocaleString():0} HP to unlock 5 rare cards`:`Beseir ${n[10]>0?n[10].toLocaleString():0} HP for å låse opp 5 sjeldne kort`)&&A(l,e)},d(n){n&&E(l)}}}function qn(t){let e=t[1].language==="Språk"?"Rare cards unlocked!":"Sjeldne kort låst opp!",l;return{c(){l=w(e)},m(n,s){Q(n,l,s)},p(n,s){s[0]&2&&e!==(e=n[1].language==="Språk"?"Rare cards unlocked!":"Sjeldne kort låst opp!")&&A(l,e)},d(n){n&&E(l)}}}function ol(t){let e,l;return{c(){e=d("div"),l=d("div"),f(l,"class","hp-progress-fill svelte-1c2fvge"),St(l,"width",t[8]+"%"),f(e,"class","hp-progress-bar svelte-1c2fvge")},m(n,s){Q(n,e,s),o(e,l)},p(n,s){s[0]&256&&St(l,"width",n[8]+"%")},d(n){n&&E(e)}}}function il(t){let e,l,n,s,r,i,c;function u(){return t[24](t[36])}return{c(){e=d("button"),l=d("img"),r=_(),ve(l.src,n=t[36].image)||f(l,"src",n),f(l,"alt",s=t[36].name),f(l,"class","svelte-1c2fvge"),X(l,"locked",!t[9]),f(e,"class","rare-thumbnail svelte-1c2fvge"),X(e,"unlocked",t[9])},m(a,v){Q(a,e,v),o(e,l),o(e,r),i||(c=j(e,"click",u),i=!0)},p(a,v){t=a,v[0]&16&&!ve(l.src,n=t[36].image)&&f(l,"src",n),v[0]&16&&s!==(s=t[36].name)&&f(l,"alt",s),v[0]&512&&X(l,"locked",!t[9]),v[0]&512&&X(e,"unlocked",t[9])},d(a){a&&E(e),i=!1,c()}}}function En(t){let e,l=ue(t[0].cards),n=[];for(let s=0;s<l.length;s+=1)n[s]=fl(nl(t,l,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();f(e,"class","cards-grid svelte-1c2fvge")},m(s,r){Q(s,e,r);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,r){if(r[0]&524289){l=ue(s[0].cards);let i;for(i=0;i<l.length;i+=1){const c=nl(s,l,i);n[i]?n[i].p(c,r):(n[i]=fl(c),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=l.length}},d(s){s&&E(e),je(n,s)}}}function In(t){let e,l,n,s,r=t[1].noCardsYet+"",i,c,u,a=t[1].noCardsDescription+"",v;return{c(){e=d("div"),l=d("div"),l.textContent="📦",n=_(),s=d("h3"),i=w(r),c=_(),u=d("p"),v=w(a),f(l,"class","empty-icon svelte-1c2fvge"),f(s,"class","svelte-1c2fvge"),f(u,"class","svelte-1c2fvge"),f(e,"class","empty-state svelte-1c2fvge")},m(g,p){Q(g,e,p),o(e,l),o(e,n),o(e,s),o(s,i),o(e,c),o(e,u),o(u,v)},p(g,p){p[0]&2&&r!==(r=g[1].noCardsYet+"")&&A(i,r),p[0]&2&&a!==(a=g[1].noCardsDescription+"")&&A(v,a)},d(g){g&&E(e)}}}function al(t){let e,l,n=t[36].hp+"",s;return{c(){e=d("span"),l=w("HP "),s=w(n),f(e,"class","hp svelte-1c2fvge")},m(r,i){Q(r,e,i),o(e,l),o(e,s)},p(r,i){i[0]&1&&n!==(n=r[36].hp+"")&&A(s,n)},d(r){r&&E(e)}}}function cl(t){let e,l=ue(t[36].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=ul(sl(t,l,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();f(e,"class","types svelte-1c2fvge")},m(s,r){Q(s,e,r);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,r){if(r[0]&1){l=ue(s[36].types);let i;for(i=0;i<l.length;i+=1){const c=sl(s,l,i);n[i]?n[i].p(c,r):(n[i]=ul(c),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=l.length}},d(s){s&&E(e),je(n,s)}}}function ul(t){let e,l=t[33]+"",n;return{c(){e=d("span"),n=w(l),f(e,"class","type svelte-1c2fvge")},m(s,r){Q(s,e,r),o(e,n)},p(s,r){r[0]&1&&l!==(l=s[33]+"")&&A(n,l)},d(s){s&&E(e)}}}function fl(t){let e,l,n,s,r,i,c,u=t[36].name+"",a,v,g,p,m,k,h=t[36].hp&&al(t),S=t[36].types&&t[36].types.length>0&&cl(t);function L(){return t[25](t[36])}return{c(){e=d("button"),l=d("img"),r=_(),i=d("div"),c=d("h4"),a=w(u),v=_(),h&&h.c(),g=_(),S&&S.c(),p=_(),ve(l.src,n=t[36].image)||f(l,"src",n),f(l,"alt",s=t[36].name),f(l,"class","svelte-1c2fvge"),f(c,"class","svelte-1c2fvge"),f(i,"class","card-details svelte-1c2fvge"),f(e,"class","collection-card svelte-1c2fvge")},m(q,I){Q(q,e,I),o(e,l),o(e,r),o(e,i),o(i,c),o(c,a),o(i,v),h&&h.m(i,null),o(i,g),S&&S.m(i,null),o(e,p),m||(k=j(e,"click",L),m=!0)},p(q,I){t=q,I[0]&1&&!ve(l.src,n=t[36].image)&&f(l,"src",n),I[0]&1&&s!==(s=t[36].name)&&f(l,"alt",s),I[0]&1&&u!==(u=t[36].name+"")&&A(a,u),t[36].hp?h?h.p(t,I):(h=al(t),h.c(),h.m(i,g)):h&&(h.d(1),h=null),t[36].types&&t[36].types.length>0?S?S.p(t,I):(S=cl(t),S.c(),S.m(i,null)):S&&(S.d(1),S=null)},d(q){q&&E(e),h&&h.d(),S&&S.d(),m=!1,k()}}}function dl(t){let e,l=t[6].text+"",n;return{c(){e=d("div"),n=w(l),f(e,"class","message svelte-1c2fvge"),X(e,"success",t[6].type==="success"),X(e,"error",t[6].type==="error")},m(s,r){Q(s,e,r),o(e,n)},p(s,r){r[0]&64&&l!==(l=s[6].text+"")&&A(n,l),r[0]&64&&X(e,"success",s[6].type==="success"),r[0]&64&&X(e,"error",s[6].type==="error")},d(s){s&&E(e)}}}function gl(t){let e,l,n,s,r,i,c,u,a,v,g=t[3].name+"",p,m,k,h,S,L,q=t[3].hp&&ml(t),I=t[3].types&&t[3].types.length>0&&vl(t),T=t[3].rarity&&hl(t);return{c(){e=d("div"),l=d("div"),n=d("button"),n.textContent="×",s=_(),r=d("img"),u=_(),a=d("div"),v=d("h3"),p=w(g),m=_(),q&&q.c(),k=_(),I&&I.c(),h=_(),T&&T.c(),f(n,"class","close-modal svelte-1c2fvge"),ve(r.src,i=t[3].image)||f(r,"src",i),f(r,"alt",c=t[3].name),f(r,"class","modal-card-image svelte-1c2fvge"),f(v,"class","svelte-1c2fvge"),f(a,"class","modal-card-info svelte-1c2fvge"),f(l,"class","card-modal svelte-1c2fvge"),f(l,"role","dialog"),f(e,"class","dialog-overlay svelte-1c2fvge"),f(e,"role","button"),f(e,"tabindex","-1")},m(y,C){Q(y,e,C),o(e,l),o(l,n),o(l,s),o(l,r),o(l,u),o(l,a),o(a,v),o(v,p),o(a,m),q&&q.m(a,null),o(a,k),I&&I.m(a,null),o(a,h),T&&T.m(a,null),S||(L=[j(n,"click",t[20]),j(l,"click",Cl(t[23])),j(e,"click",t[20]),j(e,"keydown",t[27])],S=!0)},p(y,C){C[0]&8&&!ve(r.src,i=y[3].image)&&f(r,"src",i),C[0]&8&&c!==(c=y[3].name)&&f(r,"alt",c),C[0]&8&&g!==(g=y[3].name+"")&&A(p,g),y[3].hp?q?q.p(y,C):(q=ml(y),q.c(),q.m(a,k)):q&&(q.d(1),q=null),y[3].types&&y[3].types.length>0?I?I.p(y,C):(I=vl(y),I.c(),I.m(a,h)):I&&(I.d(1),I=null),y[3].rarity?T?T.p(y,C):(T=hl(y),T.c(),T.m(a,null)):T&&(T.d(1),T=null)},d(y){y&&E(e),q&&q.d(),I&&I.d(),T&&T.d(),S=!1,ie(L)}}}function ml(t){let e,l,n=t[3].hp+"",s;return{c(){e=d("div"),l=w("HP: "),s=w(n),f(e,"class","modal-hp svelte-1c2fvge")},m(r,i){Q(r,e,i),o(e,l),o(e,s)},p(r,i){i[0]&8&&n!==(n=r[3].hp+"")&&A(s,n)},d(r){r&&E(e)}}}function vl(t){let e,l=ue(t[3].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=pl(ll(t,l,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();f(e,"class","modal-types svelte-1c2fvge")},m(s,r){Q(s,e,r);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,r){if(r[0]&8){l=ue(s[3].types);let i;for(i=0;i<l.length;i+=1){const c=ll(s,l,i);n[i]?n[i].p(c,r):(n[i]=pl(c),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=l.length}},d(s){s&&E(e),je(n,s)}}}function pl(t){let e,l=t[33]+"",n;return{c(){e=d("span"),n=w(l),f(e,"class","modal-type svelte-1c2fvge")},m(s,r){Q(s,e,r),o(e,n)},p(s,r){r[0]&8&&l!==(l=s[33]+"")&&A(n,l)},d(s){s&&E(e)}}}function hl(t){let e,l,n=t[3].rarity+"",s;return{c(){e=d("div"),l=w("Rarity: "),s=w(n),f(e,"class","modal-rarity svelte-1c2fvge")},m(r,i){Q(r,e,i),o(e,l),o(e,s)},p(r,i){i[0]&8&&n!==(n=r[3].rarity+"")&&A(s,n)},d(r){r&&E(e)}}}function _l(t){let e,l,n,s=t[1].clearCollectionTitle+"",r,i,c,u=t[1].clearCollectionMessage+"",a,v,g,p,m=t[1].cancel+"",k,h,S,L=t[1].clearCollection+"",q,I,T;return{c(){e=d("div"),l=d("div"),n=d("h3"),r=w(s),i=_(),c=d("p"),a=w(u),v=_(),g=d("div"),p=d("button"),k=w(m),h=_(),S=d("button"),q=w(L),f(n,"class","svelte-1c2fvge"),f(c,"class","svelte-1c2fvge"),f(p,"class","btn-secondary"),f(S,"class","btn-error"),f(g,"class","dialog-actions svelte-1c2fvge"),f(l,"class","dialog svelte-1c2fvge"),f(l,"role","dialog"),f(e,"class","dialog-overlay svelte-1c2fvge"),f(e,"role","button"),f(e,"tabindex","-1")},m(y,C){Q(y,e,C),o(e,l),o(l,n),o(n,r),o(l,i),o(l,c),o(c,a),o(l,v),o(l,g),o(g,p),o(p,k),o(g,h),o(g,S),o(S,q),I||(T=[j(p,"click",t[16]),j(S,"click",t[17]),j(l,"click",Cl(t[22])),j(l,"keydown",Qn),j(e,"click",t[16]),j(e,"keydown",t[28])],I=!0)},p(y,C){C[0]&2&&s!==(s=y[1].clearCollectionTitle+"")&&A(r,s),C[0]&2&&u!==(u=y[1].clearCollectionMessage+"")&&A(a,u),C[0]&2&&m!==(m=y[1].cancel+"")&&A(k,m),C[0]&2&&L!==(L=y[1].clearCollection+"")&&A(q,L)},d(y){y&&E(e),I=!1,ie(T)}}}function Mn(t){let e,l,n,s,r,i,c,u,a,v=t[1].yourCollection+"",g,p,m,k,h,S,L=t[0].cards.length+"",q,I,T,y=t[1].cardsCollected+"",C,N,H,P,D=t[0].stats.totalQuestions+"",F,K,x,Y=t[1].questionsAnswered+"",V,O,W,U,B=t[0].stats.correctAnswers+"",b,R,J,G=t[1].correctAnswers+"",ee,ke,oe,Me,Qe,ae,Ze,Te,Ye=t[1].accuracy+"",ft,Tt,Le,De,Ne,$e=(t[1].language||"Language")+"",dt,Lt,Dt,he,be,we,Nt,fe,Ue,xe=t[1].exportBackup+"",gt,Pt,Ve,et=t[1].importBackup+"",mt,Rt,We,tt=t[1].clearThisSet+"",vt,Ft,Ce,Ot,pt,Ke,Je,ht,Bt;function zt(M,z){return M[9]?qn:An}let lt=zt(t),de=lt(t),le=!t[9]&&ol(t),Pe=ue(t[4]),te=[];for(let M=0;M<Pe.length;M+=1)te[M]=il(rl(t,Pe,M));function jt(M,z){return M[0].cards.length===0?In:En}let nt=jt(t),ge=nt(t),ne=t[6]&&dl(t),se=t[3]&&gl(t),re=t[7]&&_l(t);return{c(){e=d("div"),l=d("div"),n=d("div"),de.c(),s=_(),le&&le.c(),r=_(),i=d("div");for(let M=0;M<te.length;M+=1)te[M].c();c=_(),u=d("div"),a=d("h2"),g=w(v),p=_(),ge.c(),m=_(),k=d("div"),h=d("div"),S=d("div"),q=w(L),I=_(),T=d("div"),C=w(y),N=_(),H=d("div"),P=d("div"),F=w(D),K=_(),x=d("div"),V=w(Y),O=_(),W=d("div"),U=d("div"),b=w(B),R=_(),J=d("div"),ee=w(G),ke=_(),oe=d("div"),Me=d("div"),Qe=w(t[11]),ae=w("%"),Ze=_(),Te=d("div"),ft=w(Ye),Tt=_(),Le=d("div"),De=d("div"),Ne=d("label"),dt=w($e),Lt=w(":"),Dt=_(),he=d("select"),be=d("option"),be.textContent="English",we=d("option"),we.textContent="Norsk",Nt=_(),fe=d("div"),Ue=d("button"),gt=w(xe),Pt=_(),Ve=d("button"),mt=w(et),Rt=_(),We=d("button"),vt=w(tt),Ft=_(),Ce=d("input"),Ot=_(),ne&&ne.c(),pt=_(),se&&se.c(),Ke=_(),re&&re.c(),Je=It(),f(n,"class","rare-section-text svelte-1c2fvge"),f(i,"class","rare-cards-thumbnails svelte-1c2fvge"),f(l,"class","rare-cards-section svelte-1c2fvge"),f(a,"class","svelte-1c2fvge"),f(u,"class","collection-header svelte-1c2fvge"),f(S,"class","stat-value svelte-1c2fvge"),f(T,"class","stat-label svelte-1c2fvge"),f(h,"class","stat-card svelte-1c2fvge"),f(P,"class","stat-value svelte-1c2fvge"),f(x,"class","stat-label svelte-1c2fvge"),f(H,"class","stat-card svelte-1c2fvge"),f(U,"class","stat-value svelte-1c2fvge"),f(J,"class","stat-label svelte-1c2fvge"),f(W,"class","stat-card svelte-1c2fvge"),f(Me,"class","stat-value svelte-1c2fvge"),f(Te,"class","stat-label svelte-1c2fvge"),f(oe,"class","stat-card svelte-1c2fvge"),f(k,"class","stats-section svelte-1c2fvge"),f(Ne,"for","language-select"),f(Ne,"class","svelte-1c2fvge"),be.__value="en",ye(be,be.__value),f(be,"class","svelte-1c2fvge"),we.__value="no",ye(we,we.__value),f(we,"class","svelte-1c2fvge"),f(he,"id","language-select"),f(he,"class","language-selector svelte-1c2fvge"),f(De,"class","language-selector-container svelte-1c2fvge"),f(Ue,"class","btn-secondary"),f(Ve,"class","btn-secondary"),f(We,"class","btn-error"),f(Ce,"type","file"),f(Ce,"accept",".json"),St(Ce,"display","none"),f(fe,"class","functions-actions svelte-1c2fvge"),f(Le,"class","functions-section svelte-1c2fvge"),f(e,"class","collection-view svelte-1c2fvge")},m(M,z){Q(M,e,z),o(e,l),o(l,n),de.m(n,null),o(l,s),le&&le.m(l,null),o(l,r),o(l,i);for(let $=0;$<te.length;$+=1)te[$]&&te[$].m(i,null);o(e,c),o(e,u),o(u,a),o(a,g),o(e,p),ge.m(e,null),o(e,m),o(e,k),o(k,h),o(h,S),o(S,q),o(h,I),o(h,T),o(T,C),o(k,N),o(k,H),o(H,P),o(P,F),o(H,K),o(H,x),o(x,V),o(k,O),o(k,W),o(W,U),o(U,b),o(W,R),o(W,J),o(J,ee),o(k,ke),o(k,oe),o(oe,Me),o(Me,Qe),o(Me,ae),o(oe,Ze),o(oe,Te),o(Te,ft),o(e,Tt),o(e,Le),o(Le,De),o(De,Ne),o(Ne,dt),o(Ne,Lt),o(De,Dt),o(De,he),o(he,be),o(he,we),at(he,t[2]),o(Le,Nt),o(Le,fe),o(fe,Ue),o(Ue,gt),o(fe,Pt),o(fe,Ve),o(Ve,mt),o(fe,Rt),o(fe,We),o(We,vt),o(fe,Ft),o(fe,Ce),t[26](Ce),o(e,Ot),ne&&ne.m(e,null),Q(M,pt,z),se&&se.m(M,z),Q(M,Ke,z),re&&re.m(M,z),Q(M,Je,z),ht||(Bt=[j(he,"change",t[18]),j(Ue,"click",t[12]),j(Ve,"click",t[13]),j(We,"click",t[15]),j(Ce,"change",t[14])],ht=!0)},p(M,z){if(lt===(lt=zt(M))&&de?de.p(M,z):(de.d(1),de=lt(M),de&&(de.c(),de.m(n,null))),M[9]?le&&(le.d(1),le=null):le?le.p(M,z):(le=ol(M),le.c(),le.m(l,r)),z[0]&524816){Pe=ue(M[4]);let $;for($=0;$<Pe.length;$+=1){const Ht=rl(M,Pe,$);te[$]?te[$].p(Ht,z):(te[$]=il(Ht),te[$].c(),te[$].m(i,null))}for(;$<te.length;$+=1)te[$].d(1);te.length=Pe.length}z[0]&2&&v!==(v=M[1].yourCollection+"")&&A(g,v),nt===(nt=jt(M))&&ge?ge.p(M,z):(ge.d(1),ge=nt(M),ge&&(ge.c(),ge.m(e,m))),z[0]&1&&L!==(L=M[0].cards.length+"")&&A(q,L),z[0]&2&&y!==(y=M[1].cardsCollected+"")&&A(C,y),z[0]&1&&D!==(D=M[0].stats.totalQuestions+"")&&A(F,D),z[0]&2&&Y!==(Y=M[1].questionsAnswered+"")&&A(V,Y),z[0]&1&&B!==(B=M[0].stats.correctAnswers+"")&&A(b,B),z[0]&2&&G!==(G=M[1].correctAnswers+"")&&A(ee,G),z[0]&2048&&A(Qe,M[11]),z[0]&2&&Ye!==(Ye=M[1].accuracy+"")&&A(ft,Ye),z[0]&2&&$e!==($e=(M[1].language||"Language")+"")&&A(dt,$e),z[0]&4&&at(he,M[2]),z[0]&2&&xe!==(xe=M[1].exportBackup+"")&&A(gt,xe),z[0]&2&&et!==(et=M[1].importBackup+"")&&A(mt,et),z[0]&2&&tt!==(tt=M[1].clearThisSet+"")&&A(vt,tt),M[6]?ne?ne.p(M,z):(ne=dl(M),ne.c(),ne.m(e,null)):ne&&(ne.d(1),ne=null),M[3]?se?se.p(M,z):(se=gl(M),se.c(),se.m(Ke.parentNode,Ke)):se&&(se.d(1),se=null),M[7]?re?re.p(M,z):(re=_l(M),re.c(),re.m(Je.parentNode,Je)):re&&(re.d(1),re=null)},i:Z,o:Z,d(M){M&&(E(e),E(pt),E(Ke),E(Je)),de.d(),le&&le.d(),je(te,M),ge.d(),t[26](null),ne&&ne.d(),se&&se.d(M),re&&re.d(M),ht=!1,ie(Bt)}}}const Qn=()=>{};function Tn(t,e,l){let n,s,r,i,c;Ct(t,ct,b=>l(21,c=b));let{collection:u}=e,{t:a}=e,{language:v}=e,g=null,p=[],m=[];yl(async()=>{await k()});async function k(){try{p=await Et(c);const b=[...p].sort((R,J)=>{const G=parseInt(R.localId||"0");return parseInt(J.localId||"0")-G});l(4,m=b.slice(0,5))}catch(b){console.error("Error loading rare cards:",b)}}const h=ut();let S,L=null,q=!1;function I(){try{Sn(),C(a.collectionExported,"success")}catch{C(a.exportFailed,"error")}}function T(){S.click()}async function y(b){var G;const R=b.target,J=(G=R.files)==null?void 0:G[0];if(J){try{const ee=await yn(J);ee.success?(C(a.collectionImported,"success"),h("refresh")):C(ee.error||a.importFailed,"error")}catch{C(a.importFailed,"error")}R.value=""}}function C(b,R){l(6,L={text:b,type:R}),setTimeout(()=>{l(6,L=null)},3e3)}function N(){l(7,q=!0)}function H(){l(7,q=!1)}function P(){try{xl(),l(7,q=!1),C(a.collectionCleared,"success"),h("refresh")}catch{C(a.clearFailed,"error")}}function D(b){const R=b.target;h("languageChange",R.value)}function F(b){l(3,g=b)}function K(){l(3,g=null)}function x(b){Ut.call(this,t,b)}function Y(b){Ut.call(this,t,b)}const V=b=>F({...b,collectedAt:new Date().toISOString()}),O=b=>F(b);function W(b){yt[b?"unshift":"push"](()=>{S=b,l(5,S)})}const U=b=>b.key==="Escape"&&K(),B=b=>b.key==="Escape"&&H();return t.$$set=b=>{"collection"in b&&l(0,u=b.collection),"t"in b&&l(1,a=b.t),"language"in b&&l(2,v=b.language)},t.$$.update=()=>{t.$$.dirty[0]&1&&l(11,n=u.stats.totalQuestions>0?Math.round(u.stats.correctAnswers/u.stats.totalQuestions*100):0),t.$$.dirty[0]&1&&l(10,s=16e3-(u.stats.totalHpDefeated||0)),t.$$.dirty[0]&2097153&&l(9,r=u.unlockedRareSets&&u.unlockedRareSets[c]||!1),t.$$.dirty[0]&1&&l(8,i=Math.min(u.stats.totalHpDefeated/16e3*100,100))},[u,a,v,g,m,S,L,q,i,r,s,n,I,T,y,N,H,P,D,F,K,c,x,Y,V,O,W,U,B]}class Ln extends Ie{constructor(e){super(),Ee(this,e,Tn,Mn,_e,{collection:0,t:1,language:2},null,[-1,-1])}}function Dn(t){let e,l,n,s,r;return{c(){e=d("div"),l=d("div"),n=_(),s=d("p"),r=w(t[0]),f(l,"class","spinner svelte-1lxornd"),f(s,"class","svelte-1lxornd"),f(e,"class","loading-view svelte-1lxornd")},m(i,c){Q(i,e,c),o(e,l),o(e,n),o(e,s),o(s,r)},p(i,[c]){c&1&&A(r,i[0])},i:Z,o:Z,d(i){i&&E(e)}}}function Nn(t,e,l){let{message:n="Loading..."}=e;return t.$$set=s=>{"message"in s&&l(0,n=s.message)},[n]}class Pn extends Ie{constructor(e){super(),Ee(this,e,Nn,Dn,_e,{message:0})}}function Rn(t){let e,l,n,s,r,i,c,u,a,v,g;return{c(){e=d("div"),l=d("div"),l.textContent="⚠️",n=_(),s=d("h2"),s.textContent="Oops!",r=_(),i=d("p"),c=w(t[0]),u=_(),a=d("button"),a.textContent="Try Again",f(l,"class","error-icon svelte-na0xmw"),f(s,"class","svelte-na0xmw"),f(i,"class","svelte-na0xmw"),f(a,"class","btn-primary"),f(e,"class","error-view svelte-na0xmw")},m(p,m){Q(p,e,m),o(e,l),o(e,n),o(e,s),o(e,r),o(e,i),o(i,c),o(e,u),o(e,a),v||(g=j(a,"click",t[1]),v=!0)},p(p,[m]){m&1&&A(c,p[0])},i:Z,o:Z,d(p){p&&E(e),v=!1,g()}}}function Fn(t,e,l){let{message:n="Something went wrong"}=e;const s=ut();function r(){s("retry")}return t.$$set=i=>{"message"in i&&l(0,n=i.message)},[n,r]}class On extends Ie{constructor(e){super(),Ee(this,e,Fn,Rn,_e,{message:0})}}function Bn(t,e,l){const n=t.slice();return n[32]=e[l],n}function zn(t){let e,l;return e=new Ln({props:{collection:t[4],t:t[14],language:t[0]}}),e.$on("refresh",t[24]),e.$on("languageChange",t[26]),{c(){He(e.$$.fragment)},m(n,s){Ae(e,n,s),l=!0},p(n,s){const r={};s[0]&16&&(r.collection=n[4]),s[0]&16384&&(r.t=n[14]),s[0]&1&&(r.language=n[0]),e.$set(r)},i(n){l||(ce(e.$$.fragment,n),l=!0)},o(n){pe(e.$$.fragment,n),l=!1},d(n){qe(e,n)}}}function jn(t){let e,l,n,s;const r=[Vn,Un,Yn,Hn],i=[];function c(u,a){return u[1]==="loading"?0:u[1]==="quiz"&&u[2]?1:u[1]==="result"&&u[2]?2:u[1]==="error"?3:-1}return~(e=c(t))&&(l=i[e]=r[e](t)),{c(){l&&l.c(),n=It()},m(u,a){~e&&i[e].m(u,a),Q(u,n,a),s=!0},p(u,a){let v=e;e=c(u),e===v?~e&&i[e].p(u,a):(l&&(ql(),pe(i[v],1,1,()=>{i[v]=null}),El()),~e?(l=i[e],l?l.p(u,a):(l=i[e]=r[e](u),l.c()),ce(l,1),l.m(n.parentNode,n)):l=null)},i(u){s||(ce(l),s=!0)},o(u){pe(l),s=!1},d(u){u&&E(n),~e&&i[e].d(u)}}}function Hn(t){let e,l;return e=new On({props:{message:t[8]}}),e.$on("retry",t[21]),{c(){He(e.$$.fragment)},m(n,s){Ae(e,n,s),l=!0},p(n,s){const r={};s[0]&256&&(r.message=n[8]),e.$set(r)},i(n){l||(ce(e.$$.fragment,n),l=!0)},o(n){pe(e.$$.fragment,n),l=!1},d(n){qe(e,n)}}}function Yn(t){let e,l;return e=new Cn({props:{isCorrect:t[5],correctAnswer:t[2].correctAnswer,userAnswer:t[6],wonCard:t[7],t:t[14],needsStreak:t[12],streakProgress:t[13],currentStreak:t[4].currentStreak||0}}),e.$on("next",t[20]),{c(){He(e.$$.fragment)},m(n,s){Ae(e,n,s),l=!0},p(n,s){const r={};s[0]&32&&(r.isCorrect=n[5]),s[0]&4&&(r.correctAnswer=n[2].correctAnswer),s[0]&64&&(r.userAnswer=n[6]),s[0]&128&&(r.wonCard=n[7]),s[0]&16384&&(r.t=n[14]),s[0]&4096&&(r.needsStreak=n[12]),s[0]&8192&&(r.streakProgress=n[13]),s[0]&16&&(r.currentStreak=n[4].currentStreak||0),e.$set(r)},i(n){l||(ce(e.$$.fragment,n),l=!0)},o(n){pe(e.$$.fragment,n),l=!1},d(n){qe(e,n)}}}function Un(t){var v;let e,l,n,s,r,i,c,u=ue(wt),a=[];for(let g=0;g<u.length;g+=1)a[g]=Wn(Bn(t,u,g));return s=new vn({props:{question:t[2],t:t[14],currentSet:((v=wt.find(t[25]))==null?void 0:v.name)||""}}),s.$on("answer",t[19]),{c(){e=d("div"),l=d("select");for(let g=0;g<a.length;g+=1)a[g].c();n=_(),He(s.$$.fragment),f(l,"class","set-selector svelte-162mefo"),f(e,"class","set-selector-container svelte-162mefo")},m(g,p){Q(g,e,p),o(e,l);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(l,null);at(l,t[15]),Q(g,n,p),Ae(s,g,p),r=!0,i||(c=j(l,"change",t[16]),i=!0)},p(g,p){var k;(!r||p[0]&32768)&&at(l,g[15]);const m={};p[0]&4&&(m.question=g[2]),p[0]&16384&&(m.t=g[14]),p[0]&2048&&(m.currentSet=((k=wt.find(g[25]))==null?void 0:k.name)||""),s.$set(m)},i(g){r||(ce(s.$$.fragment,g),r=!0)},o(g){pe(s.$$.fragment,g),r=!1},d(g){g&&(E(e),E(n)),je(a,g),qe(s,g),i=!1,c()}}}function Vn(t){let e,l;return e=new Pn({props:{message:t[14].loading}}),{c(){He(e.$$.fragment)},m(n,s){Ae(e,n,s),l=!0},p(n,s){const r={};s[0]&16384&&(r.message=n[14].loading),e.$set(r)},i(n){l||(ce(e.$$.fragment,n),l=!0)},o(n){pe(e.$$.fragment,n),l=!1},d(n){qe(e,n)}}}function Wn(t){let e;return{c(){e=d("option"),e.textContent=`${t[32].name}`,e.__value=t[32].id,ye(e,e.__value),f(e,"class","svelte-162mefo")},m(l,n){Q(l,e,n)},p:Z,d(l){l&&E(e)}}}function kl(t){let e,l,n,s=t[0]==="en"?"Choose Your Language":"Velg språk",r,i,c,u=t[0]==="en"?"You can change this anytime in My Collection":"Du kan endre dette når som helst i Min samling",a,v,g,p,m,k,h,S;return{c(){e=d("div"),l=d("div"),n=d("h2"),r=w(s),i=_(),c=d("p"),a=w(u),v=_(),g=d("div"),p=d("button"),p.innerHTML='<span class="flag svelte-162mefo">🇬🇧</span> <span>English</span>',m=_(),k=d("button"),k.innerHTML='<span class="flag svelte-162mefo">🇳🇴</span> <span>Norsk</span>',f(n,"class","svelte-162mefo"),f(c,"class","svelte-162mefo"),f(p,"class","language-btn svelte-162mefo"),f(k,"class","language-btn svelte-162mefo"),f(g,"class","language-buttons svelte-162mefo"),f(l,"class","dialog language-dialog svelte-162mefo"),f(e,"class","dialog-overlay svelte-162mefo"),f(e,"role","button"),f(e,"tabindex","-1")},m(L,q){Q(L,e,q),o(e,l),o(l,n),o(n,r),o(l,i),o(l,c),o(c,a),o(l,v),o(l,g),o(g,p),o(g,m),o(g,k),h||(S=[j(p,"click",t[27]),j(k,"click",t[28])],h=!0)},p(L,q){q[0]&1&&s!==(s=L[0]==="en"?"Choose Your Language":"Velg språk")&&A(r,s),q[0]&1&&u!==(u=L[0]==="en"?"You can change this anytime in My Collection":"Du kan endre dette når som helst i Min samling")&&A(a,u)},d(L){L&&E(e),h=!1,ie(S)}}}function Kn(t){var B;let e,l,n,s,r=t[14].appTitle+"",i,c,u,a,v=t[14].playQuiz+"",g,p,m,k=t[14].myCollection+"",h,S,L=(((B=t[4])==null?void 0:B.cards.length)||0)+"",q,I,T=t[3].length+"",y,C,N,H,P,D,F,K,x,Y;const V=[jn,zn],O=[];function W(b,R){return b[9]==="quiz"?0:1}P=W(t),D=O[P]=V[P](t);let U=t[10]&&kl(t);return{c(){e=d("div"),l=d("header"),n=d("div"),s=d("h1"),i=w(r),c=_(),u=d("nav"),a=d("button"),g=w(v),p=_(),m=d("button"),h=w(k),S=w(" ("),q=w(L),I=w("/"),y=w(T),C=w(")"),N=_(),H=d("main"),D.c(),F=_(),U&&U.c(),f(s,"class","app-title svelte-162mefo"),f(a,"class","nav-btn svelte-162mefo"),X(a,"active",t[9]==="quiz"),f(m,"class","nav-btn svelte-162mefo"),X(m,"active",t[9]==="collection"),f(u,"class","svelte-162mefo"),f(n,"class","header-content svelte-162mefo"),f(l,"class","app-header svelte-162mefo"),f(H,"class","svelte-162mefo"),f(e,"class","app svelte-162mefo")},m(b,R){Q(b,e,R),o(e,l),o(l,n),o(n,s),o(s,i),o(n,c),o(n,u),o(u,a),o(a,g),o(u,p),o(u,m),o(m,h),o(m,S),o(m,q),o(m,I),o(m,y),o(m,C),o(e,N),o(e,H),O[P].m(H,null),o(e,F),U&&U.m(e,null),K=!0,x||(Y=[j(a,"click",t[23]),j(m,"click",t[22])],x=!0)},p(b,R){var G;(!K||R[0]&16384)&&r!==(r=b[14].appTitle+"")&&A(i,r),(!K||R[0]&16384)&&v!==(v=b[14].playQuiz+"")&&A(g,v),(!K||R[0]&512)&&X(a,"active",b[9]==="quiz"),(!K||R[0]&16384)&&k!==(k=b[14].myCollection+"")&&A(h,k),(!K||R[0]&16)&&L!==(L=(((G=b[4])==null?void 0:G.cards.length)||0)+"")&&A(q,L),(!K||R[0]&8)&&T!==(T=b[3].length+"")&&A(y,T),(!K||R[0]&512)&&X(m,"active",b[9]==="collection");let J=P;P=W(b),P===J?O[P].p(b,R):(ql(),pe(O[J],1,1,()=>{O[J]=null}),El(),D=O[P],D?D.p(b,R):(D=O[P]=V[P](b),D.c()),ce(D,1),D.m(H,null)),b[10]?U?U.p(b,R):(U=kl(b),U.c(),U.m(e,null)):U&&(U.d(1),U=null)},i(b){K||(ce(D),K=!0)},o(b){pe(D),K=!1},d(b){b&&E(e),O[P].d(),U&&U.d(),x=!1,ie(Y)}}}function Jn(t,e,l){let n,s,r;Ct(t,ot,B=>l(0,s=B)),Ct(t,ct,B=>l(15,r=B));let i="loading",c=null,u=[],a,v=!1,g=0,p=0,m=null,k="",h="quiz",S=!1,L=r,q=!1,I=0;yl(()=>{l(4,a=me()),localStorage.getItem("tcg-seen-language-dialog")?N():l(10,S=!0)});function T(B){const b=B.target;ct.set(b.value),l(11,L=b.value),l(3,u=[]),N()}function y(B){ot.set(B)}function C(B){ot.set(B),localStorage.setItem("tcg-seen-language-dialog","true"),l(10,S=!1),N()}async function N(){var B;try{l(1,i="loading"),u.length===0&&l(3,u=await Et(L));const b=[...u].sort((ae,Ze)=>{const Te=parseInt(ae.localId||"0");return parseInt(Ze.localId||"0")-Te}),R=new Set(b.slice(0,5).map(ae=>ae.id)),J=new Set(a.cards.map(ae=>ae.id)),G=u.filter(ae=>!J.has(ae.id)&&!R.has(ae.id));if(G.length===0)throw new Error("Congratulations! You have collected all cards from this set!");const ee=Gl(G),ke=await Jl(ee.id,L),oe=((B=ke.rarity)==null?void 0:B.toLowerCase())||"common",Qe=sn(ke,n,oe!=="common"&&oe!=="uncommon"&&oe!=="rare"&&oe!=="double rare");if(!Qe)throw new Error("Could not generate a valid question. Please try again.");l(12,q=oe!=="common"),a.streakCard&&a.streakCard.id===ke.id?l(13,I=a.currentStreak||0):l(13,I=0),l(2,c=Qe),l(1,i="quiz")}catch(b){console.error("Error loading question:",b),l(8,k=b instanceof Error?b.message:"Failed to load question"),l(1,i="error")}}async function H(){a.unlockedRareSets||l(4,a.unlockedRareSets={},a),!a.unlockedRareSets[L]&&a.stats.totalHpDefeated>=16e3&&(u.length===0&&l(3,u=await Et(L)),[...u].sort((R,J)=>{const G=parseInt(R.localId||"0");return parseInt(J.localId||"0")-G}).slice(0,5).forEach(R=>{const J={id:R.id,name:R.name,image:R.image,hp:R.hp,types:R.types,rarity:R.rarity,collectedAt:new Date().toISOString()};a.cards.some(ee=>ee.id===R.id)||a.cards.push(J)}),l(4,a.unlockedRareSets[L]=!0,a),ze(a))}function P(B){var R,J;if(!c)return;l(6,g=B.detail.firstAnswer),p=B.detail.secondAnswer||0,l(5,v=rn(c,g,p));const b=v&&c.card.hp?c.card.hp:0;if($l(v,b),l(7,m=null),v){let G=!1;if(q&&!c.secondQuestion?(l(4,a=me()),((R=a.streakCard)==null?void 0:R.id)===c.card.id?l(4,a.currentStreak=(a.currentStreak||0)+1,a):(l(4,a.streakCard=c.card,a),l(4,a.currentStreak=1,a)),a.currentStreak>=2&&(G=!0,l(4,a.currentStreak=0,a),l(4,a.streakCard=void 0,a)),ze(a)):G=!0,G){const ee={id:c.card.id,name:c.card.name,image:c.card.image,hp:c.card.hp,types:c.card.types,rarity:c.card.rarity,collectedAt:new Date().toISOString()};Zl(ee)&&l(7,m=c.card)}}else l(4,a=me()),q&&((J=a.streakCard)==null?void 0:J.id)===c.card.id&&(l(4,a.currentStreak=0,a),l(4,a.streakCard=void 0,a),ze(a));l(4,a=me()),v&&(H(),l(4,a=me())),l(1,i="result")}function D(){N()}function F(){N()}function K(){l(9,h="collection"),l(4,a=me())}function x(){l(9,h="quiz")}function Y(){l(4,a=me())}const V=B=>B.id===L,O=B=>y(B.detail),W=()=>C("en"),U=()=>C("no");return t.$$.update=()=>{t.$$.dirty[0]&1&&l(14,n=cn(s))},[s,i,c,u,a,v,g,m,k,h,S,L,q,I,n,r,T,y,C,P,D,F,K,x,Y,V,O,W,U]}class Gn extends Ie{constructor(e){super(),Ee(this,e,Jn,Kn,_e,{},null,[-1,-1])}}new Gn({target:document.getElementById("app")});
