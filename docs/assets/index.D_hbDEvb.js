var mn=Object.defineProperty;var vn=(t,e,l)=>e in t?mn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var Kt=(t,e,l)=>vn(t,typeof e!="symbol"?e+"":e,l);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function l(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=l(s);fetch(s.href,o)}})();function x(){}function tn(t){return t()}function Cl(){return Object.create(null)}function ve(t){t.forEach(tn)}function ln(t){return typeof t=="function"}function De(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let At;function Ae(t,e){return t===e?!0:(At||(At=document.createElement("a")),At.href=e,t===At.href)}function pn(t){return Object.keys(t).length===0}function _n(t,...e){if(t==null){for(const n of e)n(void 0);return x}const l=t.subscribe(...e);return l.unsubscribe?()=>l.unsubscribe():l}function ut(t,e,l){t.$$.on_destroy.push(_n(e,l))}function r(t,e){t.appendChild(e)}function z(t,e,l){t.insertBefore(e,l||null)}function y(t){t.parentNode&&t.parentNode.removeChild(t)}function lt(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function d(t){return document.createElement(t)}function h(t){return document.createTextNode(t)}function w(){return h(" ")}function xt(){return h("")}function j(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function nn(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function c(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function Et(t){return t===""?null:+t}function hn(t){return Array.from(t.childNodes)}function S(t,e){e=""+e,t.data!==e&&(t.data=e)}function _e(t,e){t.value=e??""}function dt(t,e,l,n){l==null?t.style.removeProperty(e):t.style.setProperty(e,l,"")}function xe(t,e,l){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e){s.selected=!0;return}}t.selectedIndex=-1}function G(t,e,l){t.classList.toggle(e,!!l)}function kn(t,e,{bubbles:l=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:l,cancelable:n})}let gt;function ft(t){gt=t}function sn(){if(!gt)throw new Error("Function called outside component initialization");return gt}function rn(t){sn().$$.on_mount.push(t)}function Qt(){const t=sn();return(e,l,{cancelable:n=!1}={})=>{const s=t.$$.callbacks[e];if(s){const o=kn(e,l,{cancelable:n});return s.slice().forEach(i=>{i.call(t,o)}),!o.defaultPrevented}return!0}}function Sl(t,e){const l=t.$$.callbacks[e.type];l&&l.slice().forEach(n=>n.call(this,e))}const $e=[],Jt=[];let et=[];const yl=[],wn=Promise.resolve();let Xt=!1;function bn(){Xt||(Xt=!0,wn.then(on))}function Zt(t){et.push(t)}const Ut=new Set;let Xe=0;function on(){if(Xe!==0)return;const t=gt;do{try{for(;Xe<$e.length;){const e=$e[Xe];Xe++,ft(e),Cn(e.$$)}}catch(e){throw $e.length=0,Xe=0,e}for(ft(null),$e.length=0,Xe=0;Jt.length;)Jt.pop()();for(let e=0;e<et.length;e+=1){const l=et[e];Ut.has(l)||(Ut.add(l),l())}et.length=0}while($e.length);for(;yl.length;)yl.pop()();Xt=!1,Ut.clear(),ft(t)}function Cn(t){if(t.fragment!==null){t.update(),ve(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Zt)}}function Sn(t){const e=[],l=[];et.forEach(n=>t.indexOf(n)===-1?e.push(n):l.push(n)),l.forEach(n=>n()),et=e}const Mt=new Set;let Be;function an(){Be={r:0,c:[],p:Be}}function cn(){Be.r||ve(Be.c),Be=Be.p}function ke(t,e){t&&t.i&&(Mt.delete(t),t.i(e))}function Me(t,e,l,n){if(t&&t.o){if(Mt.has(t))return;Mt.add(t),Be.c.push(()=>{Mt.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}else n&&n()}function we(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function nt(t){t&&t.c()}function He(t,e,l){const{fragment:n,after_update:s}=t.$$;n&&n.m(e,l),Zt(()=>{const o=t.$$.on_mount.map(tn).filter(ln);t.$$.on_destroy?t.$$.on_destroy.push(...o):ve(o),t.$$.on_mount=[]}),s.forEach(Zt)}function Ve(t,e){const l=t.$$;l.fragment!==null&&(Sn(l.after_update),ve(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function yn(t,e){t.$$.dirty[0]===-1&&($e.push(t),bn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ye(t,e,l,n,s,o,i=null,u=[-1]){const f=gt;ft(t);const a=t.$$={fragment:null,ctx:[],props:o,update:x,not_equal:s,bound:Cl(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:Cl(),dirty:u,skip_bound:!1,root:e.target||f.$$.root};i&&i(a.root);let g=!1;if(a.ctx=l?l(t,e.props||{},(v,p,...m)=>{const _=m.length?m[0]:p;return a.ctx&&s(a.ctx[v],a.ctx[v]=_)&&(!a.skip_bound&&a.bound[v]&&a.bound[v](_),g&&yn(t,v)),p}):[],a.update(),g=!0,ve(a.before_update),a.fragment=n?n(a.ctx):!1,e.target){if(e.hydrate){const v=hn(e.target);a.fragment&&a.fragment.l(v),v.forEach(y)}else a.fragment&&a.fragment.c();e.intro&&ke(t.$$.fragment),He(t,e.target,e.anchor),on()}ft(f)}class Ke{constructor(){Kt(this,"$$");Kt(this,"$$set")}$destroy(){Ve(this,1),this.$destroy=x}$on(e,l){if(!ln(l))return x;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const s=n.indexOf(l);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!pn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const zn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(zn);const un="https://api.tcgdex.net/v2/en";function fn(t,e){const l=t.split("-")[1];return`https://assets.tcgdex.net/en/${An(e)}/${e}/${l}/high.webp`}function An(t){return t.startsWith("swsh")?"swsh":t.startsWith("sv")?"sv":t.startsWith("me")?"base":"swsh"}async function $t(t){try{const e=await fetch(`${un}/sets/${t}`);if(!e.ok)throw new Error("Failed to fetch cards from set");return((await e.json()).cards||[]).map(s=>({id:s.id,localId:s.localId,name:s.name,image:fn(s.id,t)}))}catch(e){throw console.error("Error fetching cards from set:",e),e}}async function Mn(t,e){try{const l=await fetch(`${un}/cards/${t}`);if(!l.ok)throw new Error("Failed to fetch card details");return{...await l.json(),image:fn(t,e)}}catch(l){throw console.error("Error fetching card details:",l),l}}function qn(t){const e=Math.floor(Math.random()*t.length);return t[e]}const el="pokemon-tcg-collection",dn="2.0";function En(){return{totalQuestions:0,correctAnswers:0,incorrectAnswers:0,totalHpDefeated:0}}function Wt(){return{cards:[],stats:En(),version:dn}}function ze(){try{const t=localStorage.getItem(el);if(!t)return Wt();const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?(console.warn("Invalid collection format, resetting..."),Wt()):(e.stats.totalHpDefeated||(e.stats.totalHpDefeated=0),e.currentStreak||(e.currentStreak=0),e.unlockedRareSets||(e.unlockedRareSets={}),e)}catch(t){return console.error("Error loading collection from local storage:",t),Wt()}}function tt(t){try{const e={...t,version:dn};localStorage.setItem(el,JSON.stringify(e))}catch(e){throw console.error("Error saving collection to local storage:",e),new Error("Failed to save collection")}}function Ln(t){try{const e=ze();return e.cards.some(n=>n.id===t.id)?!1:(e.cards.push(t),tt(e),!0)}catch(e){return console.error("Error adding card to collection:",e),!1}}function Qn(t,e){try{const l=ze();l.stats.totalQuestions++,t?(l.stats.correctAnswers++,e&&(l.stats.totalHpDefeated+=e)):l.stats.incorrectAnswers++,tt(l)}catch(l){console.error("Error updating stats:",l)}}function In(){try{localStorage.removeItem(el)}catch(t){console.error("Error clearing collection:",t)}}function Tn(){const t=ze();return JSON.stringify(t,null,2)}function Pn(t){try{const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?{success:!1,error:"Invalid collection format"}:!e.stats.totalQuestions===void 0||!e.stats.correctAnswers===void 0||!e.stats.incorrectAnswers===void 0?{success:!1,error:"Invalid stats format"}:(tt(e),{success:!0})}catch(e){return console.error("Error importing collection:",e),{success:!1,error:"Failed to parse JSON file"}}}function zl(t){const e=Math.floor(Math.random()*9)+1,l=Math.floor(Math.random()*9)+1,n=e+l;return{question:t.mathQuestion(e,l,"+"),answer:n}}function Al(t){const e=["+","-"],l=e[Math.floor(Math.random()*e.length)];let n,s;if(l==="+"){const o=Math.floor(Math.random()*50)+10,i=Math.floor(Math.random()*50)+10;n=o+i,s=t.mathQuestion(o,i,"+")}else{const o=Math.floor(Math.random()*50)+10,i=Math.floor(Math.random()*50)+10;n=o+i;const u=n;n=o,s=t.mathQuestion(u,i,"-")}return{question:s,answer:n}}function Nn(t){const e=Math.floor(Math.random()*50)+10,l=Math.floor(Math.random()*50)+10,n=["+","-"],s=n[Math.floor(Math.random()*n.length)];let o,i;if(s==="+")o=e+l,i=t.mathQuestion(e,l,"+");else{o=e+l;const u=o;o=e,i=t.mathQuestion(u,l,"-")}return{question:i,answer:o}}function Dn(t){const e=Math.floor(Math.random()*50)+10,l=Math.floor(Math.random()*50)+10,n=e+l;return{question:t.mathQuestion(e,l,"+"),answer:n}}function Rn(t,e,l=!1,n=4){if(!t)return null;let s,o,i=!1,u,f;if(n===1){const a=zl(e);s=a.question,o=a.answer}else if(n===2||n===3){const a=Al(e);s=a.question,o=a.answer}else if(t.hp&&t.hp>0){i=!0;const a=[10,20,30,40,50,60,60,80,120,300][Math.floor(Math.random()*5)];o=Math.ceil(t.hp/a),s=e.damageQuestion(a)}else{const a=Nn(e);s=a.question,o=a.answer}if(l)if(n===1){const a=zl(e);u=a.question,f=a.answer}else if(n===2||n===3){const a=Al(e);u=a.question,f=a.answer}else{const a=Dn(e);u=a.question,f=a.answer}return{card:t,questionText:s,correctAnswer:o,isPokemon:i,secondQuestion:u,secondAnswer:f}}function jn(t,e,l){const n=e===t.correctAnswer;if(t.secondQuestion&&t.secondAnswer!==void 0){const s=l===t.secondAnswer;return n&&s}return n}const Ze=[];function tl(t,e=x){let l;const n=new Set;function s(u){if(De(t,u)&&(t=u,l)){const f=!Ze.length;for(const a of n)a[1](),Ze.push(a,t);if(f){for(let a=0;a<Ze.length;a+=2)Ze[a][0](Ze[a+1]);Ze.length=0}}}function o(u){s(u(t))}function i(u,f=x){const a=[u,f];return n.add(a),n.size===1&&(l=e(s,o)||x),u(t),()=>{n.delete(a),n.size===0&&l&&(l(),l=null)}}return{set:s,update:o,subscribe:i}}const Gt=[{id:"swsh3",name:"Sword & Shield - Darkness Ablaze"},{id:"sv05",name:"Scarlet & Violet - Temporal Forces"},{id:"sv06.5",name:"Scarlet & Violet - Shrouded Fable"}],gn="tcg-math-settings";function Fn(){return{language:"en",selectedSet:"swsh3",klassetrinn:4}}function It(){try{const t=localStorage.getItem(gn);if(t){const e=JSON.parse(t);return{language:e.language||"en",selectedSet:e.selectedSet||"swsh3",klassetrinn:e.klassetrinn||4}}}catch(t){console.error("Error loading settings:",t)}return Fn()}function ll(t){try{localStorage.setItem(gn,JSON.stringify(t))}catch(e){console.error("Error saving settings:",e)}}const nl=It(),qt=tl(nl.language),Lt=tl(nl.selectedSet),mt=tl(nl.klassetrinn);qt.subscribe(t=>{const e=It();ll({...e,language:t})});Lt.subscribe(t=>{const e=It();ll({...e,selectedSet:t})});mt.subscribe(t=>{const e=It();ll({...e,klassetrinn:t})});const On={en:{appTitle:"16k Pokemon Math Challenge",quizTitle:"TCG Math Challenge",playQuiz:"Play Quiz",myCollection:"My Collection",selectSet:"Select Set",selectLanguage:"Language",setInfo:"Collecting Set",enterAnswer:"Enter your answer",submitAnswer:"Submit Answer",nextQuestion:"Next Question",correct:"Correct!",notQuite:"Not quite!",correctMessage:"Great job! The answer was",incorrectMessage:"You answered",encouragement:"Try again with the next question!",youWonThisCard:"You won this card!",cardsCollected:"Cards Collected",questionsAnswered:"Questions Answered",correctAnswers:"Correct Answers",accuracy:"Accuracy",noCardsYet:"No cards yet!",noCardsDescription:"Answer questions correctly to start building your collection.",exportBackup:"Export Backup",importBackup:"Import Backup",clearThisSet:"Clear This Set",clearCollectionTitle:"Clear Collection?",clearCollectionMessage:"Are you sure you want to clear your entire collection? This action cannot be undone.",cancel:"Cancel",clearCollection:"Clear Collection",collectionExported:"Collection exported successfully!",collectionImported:"Collection imported successfully!",collectionCleared:"Collection cleared successfully!",exportFailed:"Failed to export collection",importFailed:"Failed to import collection",clearFailed:"Failed to clear collection",hit:"hit",hits:"hits",loading:"Loading new question...",yourCollection:"Your Collection",language:"Language",gradeLevel:"Grade Level",damageQuestion:t=>`Your Pok√©mon deals ${t} damage each turn. How many turns does it take to defeat this Pok√©mon?`,mathQuestion:(t,e,l)=>`What is ${t} ${l} ${e}?`},no:{appTitle:"16k Pok√©mon Matteutfordring",quizTitle:"TCG Matte Utfordring",playQuiz:"Spill Quiz",myCollection:"Min Samling",selectSet:"Velg Sett",selectLanguage:"Spr√•k",setInfo:"Samler Sett",enterAnswer:"Skriv inn svaret ditt",submitAnswer:"Send Inn Svar",nextQuestion:"Neste Sp√∏rsm√•l",correct:"Riktig!",notQuite:"Ikke helt!",correctMessage:"Bra jobbet! Svaret var",incorrectMessage:"Du svarte",encouragement:"Pr√∏v igjen med neste sp√∏rsm√•l!",youWonThisCard:"Du vant dette kortet!",cardsCollected:"Kort Samlet",questionsAnswered:"Sp√∏rsm√•l Besvart",correctAnswers:"Riktige Svar",accuracy:"N√∏yaktighet",noCardsYet:"Ingen kort enn√•!",noCardsDescription:"Svar riktig p√• sp√∏rsm√•l for √• begynne √• bygge samlingen din.",exportBackup:"Eksporter Backup",importBackup:"Importer Backup",clearThisSet:"T√∏m Dette Settet",clearCollectionTitle:"T√∏m Samling?",clearCollectionMessage:"Er du sikker p√• at du vil t√∏mme hele samlingen din? Denne handlingen kan ikke angres.",cancel:"Avbryt",clearCollection:"T√∏m Samling",collectionExported:"Samling eksportert!",collectionImported:"Samling importert!",collectionCleared:"Samling t√∏mt!",exportFailed:"Kunne ikke eksportere samling",importFailed:"Kunne ikke importere samling",clearFailed:"Kunne ikke t√∏mme samling",hit:"treff",hits:"treff",loading:"Laster nytt sp√∏rsm√•l...",yourCollection:"Din Samling",language:"Spr√•k",gradeLevel:"Klassetrinn",damageQuestion:t=>`Din Pok√©mon gj√∏r ${t} skade hver runde. Hvor mange runder tar det √• beseire denne Pok√©monen?`,mathQuestion:(t,e,l)=>`Hva er ${t} ${l} ${e}?`}};function Bn(t){return On[t]}function Ml(t,e,l){const n=t.slice();return n[4]=e[l],n}function ql(t){let e,l,n=t[0].rarity+"",s;return{c(){e=d("div"),l=d("span"),s=h(n),c(l,"class","rarity-badge svelte-1gymiiy"),c(e,"class","card-rarity svelte-1gymiiy")},m(o,i){z(o,e,i),r(e,l),r(l,s)},p(o,i){i&1&&n!==(n=o[0].rarity+"")&&S(s,n)},d(o){o&&y(e)}}}function El(t){let e,l,n,s=we(t[0].attacks),o=[];for(let i=0;i<s.length;i+=1)o[i]=Ql(Ml(t,s,i));return{c(){e=d("div"),l=d("h4"),l.textContent="Attacks:",n=w();for(let i=0;i<o.length;i+=1)o[i].c();c(l,"class","svelte-1gymiiy"),c(e,"class","card-attacks svelte-1gymiiy")},m(i,u){z(i,e,u),r(e,l),r(e,n);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null)},p(i,u){if(u&5){s=we(i[0].attacks);let f;for(f=0;f<s.length;f+=1){const a=Ml(i,s,f);o[f]?o[f].p(a,u):(o[f]=Ql(a),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=s.length}},d(i){i&&y(e),lt(o,i)}}}function Ll(t){let e,l=t[4].damage+"",n;return{c(){e=d("span"),n=h(l),c(e,"class","attack-damage svelte-1gymiiy")},m(s,o){z(s,e,o),r(e,n)},p(s,o){o&1&&l!==(l=s[4].damage+"")&&S(n,l)},d(s){s&&y(e)}}}function Ql(t){let e,l,n=t[4].name+"",s,o,i,u=t[4].damage&&Ll(t);return{c(){e=d("div"),l=d("span"),s=h(n),o=w(),u&&u.c(),i=w(),c(l,"class","attack-name svelte-1gymiiy"),c(e,"class","attack svelte-1gymiiy"),G(e,"highlighted",t[2]===t[4].name)},m(f,a){z(f,e,a),r(e,l),r(l,s),r(e,o),u&&u.m(e,null),r(e,i)},p(f,a){a&1&&n!==(n=f[4].name+"")&&S(s,n),f[4].damage?u?u.p(f,a):(u=Ll(f),u.c(),u.m(e,i)):u&&(u.d(1),u=null),a&5&&G(e,"highlighted",f[2]===f[4].name)},d(f){f&&y(e),u&&u.d()}}}function Hn(t){let e,l,n,s,o,i,u,f,a=t[0].name+"",g,v,p,m=t[3]&&t[0].rarity&&ql(t),_=t[1]&&t[0].attacks&&t[0].attacks.length>0&&El(t);return{c(){e=d("div"),l=d("div"),n=d("img"),i=w(),u=d("div"),f=d("h3"),g=h(a),v=w(),m&&m.c(),p=w(),_&&_.c(),Ae(n.src,s=t[0].image)||c(n,"src",s),c(n,"alt",o=t[0].name),c(n,"class","svelte-1gymiiy"),c(l,"class","card-image svelte-1gymiiy"),c(f,"class","card-name svelte-1gymiiy"),c(u,"class","card-info svelte-1gymiiy"),c(e,"class","pokemon-card svelte-1gymiiy")},m(k,b){z(k,e,b),r(e,l),r(l,n),r(e,i),r(e,u),r(u,f),r(f,g),r(u,v),m&&m.m(u,null),r(u,p),_&&_.m(u,null)},p(k,[b]){b&1&&!Ae(n.src,s=k[0].image)&&c(n,"src",s),b&1&&o!==(o=k[0].name)&&c(n,"alt",o),b&1&&a!==(a=k[0].name+"")&&S(g,a),k[3]&&k[0].rarity?m?m.p(k,b):(m=ql(k),m.c(),m.m(u,p)):m&&(m.d(1),m=null),k[1]&&k[0].attacks&&k[0].attacks.length>0?_?_.p(k,b):(_=El(k),_.c(),_.m(u,null)):_&&(_.d(1),_=null)},i:x,o:x,d(k){k&&y(e),m&&m.d(),_&&_.d()}}}function Vn(t,e,l){let{card:n}=e,{showAttacks:s=!1}=e,{highlightedAttack:o=null}=e,{showRarity:i=!1}=e;return t.$$set=u=>{"card"in u&&l(0,n=u.card),"showAttacks"in u&&l(1,s=u.showAttacks),"highlightedAttack"in u&&l(2,o=u.highlightedAttack),"showRarity"in u&&l(3,i=u.showRarity)},[n,s,o,i]}class Yn extends Ke{constructor(e){super(),Ye(this,e,Vn,Hn,De,{card:0,showAttacks:1,highlightedAttack:2,showRarity:3})}}function Il(t){let e;return{c(){e=d("span"),e.textContent="1.",c(e,"class","question-number svelte-174fqld")},m(l,n){z(l,e,n)},d(l){l&&y(e)}}}function Tl(t){let e,l,n,s,o=t[0].secondQuestion+"",i,u,f,a,g,v,p;return{c(){e=d("div"),l=d("span"),l.textContent="2.",n=w(),s=d("h3"),i=h(o),u=w(),f=d("div"),a=d("input"),c(l,"class","question-number svelte-174fqld"),c(s,"class","question-text svelte-174fqld"),c(e,"class","question-item svelte-174fqld"),dt(e,"padding-top","2em"),c(a,"type","number"),c(a,"placeholder",g=t[1].enterAnswer),c(a,"class","answer-input svelte-174fqld"),c(f,"class","input-group svelte-174fqld")},m(m,_){z(m,e,_),r(e,l),r(e,n),r(e,s),r(s,i),z(m,u,_),z(m,f,_),r(f,a),_e(a,t[3]),v||(p=[j(a,"input",t[8]),j(a,"keypress",t[5])],v=!0)},p(m,_){_&1&&o!==(o=m[0].secondQuestion+"")&&S(i,o),_&2&&g!==(g=m[1].enterAnswer)&&c(a,"placeholder",g),_&8&&Et(a.value)!==m[3]&&_e(a,m[3])},d(m){m&&(y(e),y(u),y(f)),v=!1,ve(p)}}}function Kn(t){let e,l,n,s,o,i,u,f,a,g=t[0].questionText+"",v,p,m,_,k,b,N,M,I=t[1].submitAnswer+"",L,A,C,D,O;n=new Yn({props:{card:t[0].card,showRarity:!0}});let P=t[0].secondQuestion&&Il(),q=t[0].secondQuestion&&Tl(t);return{c(){e=d("div"),l=d("div"),nt(n.$$.fragment),s=w(),o=d("div"),i=d("div"),u=d("div"),P&&P.c(),f=w(),a=d("h3"),v=h(g),p=w(),m=d("div"),_=d("input"),b=w(),q&&q.c(),N=w(),M=d("button"),L=h(I),c(l,"class","card-display svelte-174fqld"),c(a,"class","question-text svelte-174fqld"),c(u,"class","question-item svelte-174fqld"),c(_,"type","number"),c(_,"placeholder",k=t[1].enterAnswer),c(_,"class","answer-input svelte-174fqld"),c(m,"class","input-group svelte-174fqld"),c(M,"class","submit-btn btn-primary svelte-174fqld"),dt(M,"margin-top","2em"),M.disabled=A=!t[2]||t[0].secondQuestion&&!t[3],c(i,"class","questions-list svelte-174fqld"),c(o,"class","question-container svelte-174fqld"),c(e,"class","quiz-view svelte-174fqld")},m(T,B){z(T,e,B),r(e,l),He(n,l,null),r(e,s),r(e,o),r(o,i),r(i,u),P&&P.m(u,null),r(u,f),r(u,a),r(a,v),r(i,p),r(i,m),r(m,_),_e(_,t[2]),r(i,b),q&&q.m(i,null),r(i,N),r(i,M),r(M,L),C=!0,D||(O=[j(_,"input",t[7]),j(_,"keypress",t[5]),j(M,"click",t[4])],D=!0)},p(T,[B]){const J={};B&1&&(J.card=T[0].card),n.$set(J),T[0].secondQuestion?P||(P=Il(),P.c(),P.m(u,f)):P&&(P.d(1),P=null),(!C||B&1)&&g!==(g=T[0].questionText+"")&&S(v,g),(!C||B&2&&k!==(k=T[1].enterAnswer))&&c(_,"placeholder",k),B&4&&Et(_.value)!==T[2]&&_e(_,T[2]),T[0].secondQuestion?q?q.p(T,B):(q=Tl(T),q.c(),q.m(i,N)):q&&(q.d(1),q=null),(!C||B&2)&&I!==(I=T[1].submitAnswer+"")&&S(L,I),(!C||B&13&&A!==(A=!T[2]||T[0].secondQuestion&&!T[3]))&&(M.disabled=A)},i(T){C||(ke(n.$$.fragment,T),C=!0)},o(T){Me(n.$$.fragment,T),C=!1},d(T){T&&y(e),Ve(n),P&&P.d(),q&&q.d(),D=!1,ve(O)}}}function Un(t,e,l){let{question:n}=e,{t:s}=e,{currentSet:o}=e;const i=Qt();let u="",f="";function a(){const m=parseInt(u,10);if(!isNaN(m))if(n.secondQuestion&&n.secondAnswer!==void 0){const _=parseInt(f,10);isNaN(_)||i("answer",{firstAnswer:m,secondAnswer:_})}else i("answer",{firstAnswer:m})}function g(m){m.key==="Enter"&&a()}function v(){u=Et(this.value),l(2,u)}function p(){f=Et(this.value),l(3,f)}return t.$$set=m=>{"question"in m&&l(0,n=m.question),"t"in m&&l(1,s=m.t),"currentSet"in m&&l(6,o=m.currentSet)},[n,s,u,f,a,g,o,v,p]}class Wn extends Ke{constructor(e){super(),Ye(this,e,Un,Kn,De,{question:0,t:1,currentSet:6})}}function Gn(t){let e,l,n,s=t[4].notQuite+"",o,i,u,f=t[4].incorrectMessage+"",a,g,v,p,m,_=t[4].correctMessage.toLowerCase()+"",k,b,N,M,I,L,A,C,D=t[4].encouragement+"",O,P=t[5]&&t[6]>0&&Pl(t);return{c(){e=d("div"),e.textContent="‚úó",l=w(),n=d("h2"),o=h(s),i=w(),u=d("p"),a=h(f),g=w(),v=d("strong"),p=h(t[2]),m=h(", "),k=h(_),b=w(),N=d("strong"),M=h(t[1]),I=h("."),L=w(),P&&P.c(),A=w(),C=d("p"),O=h(D),c(e,"class","result-icon error svelte-1v74pgf"),c(n,"class","result-title svelte-1v74pgf"),c(v,"class","svelte-1v74pgf"),c(N,"class","svelte-1v74pgf"),c(u,"class","result-message svelte-1v74pgf"),c(C,"class","encouragement svelte-1v74pgf")},m(q,T){z(q,e,T),z(q,l,T),z(q,n,T),r(n,o),z(q,i,T),z(q,u,T),r(u,a),r(u,g),r(u,v),r(v,p),r(u,m),r(u,k),r(u,b),r(u,N),r(N,M),r(u,I),z(q,L,T),P&&P.m(q,T),z(q,A,T),z(q,C,T),r(C,O)},p(q,T){T&16&&s!==(s=q[4].notQuite+"")&&S(o,s),T&16&&f!==(f=q[4].incorrectMessage+"")&&S(a,f),T&4&&S(p,q[2]),T&16&&_!==(_=q[4].correctMessage.toLowerCase()+"")&&S(k,_),T&2&&S(M,q[1]),q[5]&&q[6]>0?P?P.p(q,T):(P=Pl(q),P.c(),P.m(A.parentNode,A)):P&&(P.d(1),P=null),T&16&&D!==(D=q[4].encouragement+"")&&S(O,D)},d(q){q&&(y(e),y(l),y(n),y(i),y(u),y(L),y(A),y(C)),P&&P.d(q)}}}function Jn(t){let e,l,n,s=t[4].correct+"",o,i,u,f=t[4].correctMessage+"",a,g,v,p,m,_=(t[1]===1?t[4].hit:t[4].hits)+"",k,b,N,M,I,L=t[5]&&!t[3]&&Nl(t),A=t[3]&&Dl(t);return{c(){e=d("div"),e.textContent="‚úì",l=w(),n=d("h2"),o=h(s),i=w(),u=d("p"),a=h(f),g=w(),v=d("strong"),p=h(t[1]),m=w(),k=h(_),b=h("!"),N=w(),L&&L.c(),M=w(),A&&A.c(),I=xt(),c(e,"class","result-icon success svelte-1v74pgf"),c(n,"class","result-title svelte-1v74pgf"),c(v,"class","svelte-1v74pgf"),c(u,"class","result-message svelte-1v74pgf")},m(C,D){z(C,e,D),z(C,l,D),z(C,n,D),r(n,o),z(C,i,D),z(C,u,D),r(u,a),r(u,g),r(u,v),r(v,p),r(u,m),r(u,k),r(u,b),z(C,N,D),L&&L.m(C,D),z(C,M,D),A&&A.m(C,D),z(C,I,D)},p(C,D){D&16&&s!==(s=C[4].correct+"")&&S(o,s),D&16&&f!==(f=C[4].correctMessage+"")&&S(a,f),D&2&&S(p,C[1]),D&18&&_!==(_=(C[1]===1?C[4].hit:C[4].hits)+"")&&S(k,_),C[5]&&!C[3]?L?L.p(C,D):(L=Nl(C),L.c(),L.m(M.parentNode,M)):L&&(L.d(1),L=null),C[3]?A?A.p(C,D):(A=Dl(C),A.c(),A.m(I.parentNode,I)):A&&(A.d(1),A=null)},d(C){C&&(y(e),y(l),y(n),y(i),y(u),y(N),y(M),y(I)),L&&L.d(C),A&&A.d(C)}}}function Pl(t){let e,l=t[4].language==="Spr√•k"?"Streak reset! Try again.":"Rekke tilbakestilt! Pr√∏v igjen.",n;return{c(){e=d("p"),n=h(l),c(e,"class","streak-lost svelte-1v74pgf")},m(s,o){z(s,e,o),r(e,n)},p(s,o){o&16&&l!==(l=s[4].language==="Spr√•k"?"Streak reset! Try again.":"Rekke tilbakestilt! Pr√∏v igjen.")&&S(n,l)},d(s){s&&y(e)}}}function Nl(t){let e,l,n,s,o,i,u;function f(v,p){return v[7]===1?Zn:Xn}let a=f(t),g=a(t);return{c(){e=d("div"),l=d("p"),g.c(),n=w(),s=d("div"),o=d("div"),i=w(),u=d("div"),c(l,"class","streak-text svelte-1v74pgf"),c(o,"class","streak-dot svelte-1v74pgf"),G(o,"filled",t[7]>=1),c(u,"class","streak-dot svelte-1v74pgf"),G(u,"filled",t[7]>=2),c(s,"class","streak-progress svelte-1v74pgf"),c(e,"class","streak-info svelte-1v74pgf")},m(v,p){z(v,e,p),r(e,l),g.m(l,null),r(e,n),r(e,s),r(s,o),r(s,i),r(s,u)},p(v,p){a===(a=f(v))&&g?g.p(v,p):(g.d(1),g=a(v),g&&(g.c(),g.m(l,null))),p&128&&G(o,"filled",v[7]>=1),p&128&&G(u,"filled",v[7]>=2)},d(v){v&&y(e),g.d()}}}function Xn(t){let e=t[4].language==="Spr√•k"?"Get 2 correct answers to win this rare card!":"F√• 2 riktige svar for √• vinne dette sjeldne kortet!",l;return{c(){l=h(e)},m(n,s){z(n,l,s)},p(n,s){s&16&&e!==(e=n[4].language==="Spr√•k"?"Get 2 correct answers to win this rare card!":"F√• 2 riktige svar for √• vinne dette sjeldne kortet!")&&S(l,e)},d(n){n&&y(l)}}}function Zn(t){let e=t[4].language==="Spr√•k"?"One more correct to win this card!":"√ân til riktig for √• vinne dette kortet!",l;return{c(){l=h(e)},m(n,s){z(n,l,s)},p(n,s){s&16&&e!==(e=n[4].language==="Spr√•k"?"One more correct to win this card!":"√ân til riktig for √• vinne dette kortet!")&&S(l,e)},d(n){n&&y(l)}}}function Dl(t){let e,l,n=t[4].youWonThisCard+"",s,o,i,u,f,a,g,v,p,m=t[3].name+"",_;return{c(){e=d("div"),l=d("h3"),s=h(n),o=w(),i=d("div"),u=d("div"),f=d("img"),v=w(),p=d("span"),_=h(m),c(l,"class","svelte-1v74pgf"),Ae(f.src,a=t[3].image)||c(f,"src",a),c(f,"alt",g=t[3].name),c(f,"class","svelte-1v74pgf"),c(p,"class","card-name svelte-1v74pgf"),c(u,"class","mini-card svelte-1v74pgf"),c(i,"class","cards-grid svelte-1v74pgf"),c(e,"class","won-cards svelte-1v74pgf")},m(k,b){z(k,e,b),r(e,l),r(l,s),r(e,o),r(e,i),r(i,u),r(u,f),r(u,v),r(u,p),r(p,_)},p(k,b){b&16&&n!==(n=k[4].youWonThisCard+"")&&S(s,n),b&8&&!Ae(f.src,a=k[3].image)&&c(f,"src",a),b&8&&g!==(g=k[3].name)&&c(f,"alt",g),b&8&&m!==(m=k[3].name+"")&&S(_,m)},d(k){k&&y(e)}}}function $n(t){let e,l,n,s,o=t[4].nextQuestion+"",i,u,f;function a(p,m){return p[0]?Jn:Gn}let g=a(t),v=g(t);return{c(){e=d("div"),l=d("div"),v.c(),n=w(),s=d("button"),i=h(o),c(l,"class","result-card svelte-1v74pgf"),G(l,"correct",t[0]),G(l,"incorrect",!t[0]),c(s,"class","next-btn btn-primary svelte-1v74pgf"),c(e,"class","result-view svelte-1v74pgf")},m(p,m){z(p,e,m),r(e,l),v.m(l,null),r(e,n),r(e,s),r(s,i),u||(f=j(s,"click",t[8]),u=!0)},p(p,[m]){g===(g=a(p))&&v?v.p(p,m):(v.d(1),v=g(p),v&&(v.c(),v.m(l,null))),m&1&&G(l,"correct",p[0]),m&1&&G(l,"incorrect",!p[0]),m&16&&o!==(o=p[4].nextQuestion+"")&&S(i,o)},i:x,o:x,d(p){p&&y(e),v.d(),u=!1,f()}}}function xn(t,e,l){let{isCorrect:n}=e,{correctAnswer:s}=e,{userAnswer:o}=e,{wonCard:i}=e,{t:u}=e,{needsStreak:f=!1}=e,{streakProgress:a=0}=e,{currentStreak:g=0}=e;const v=Qt();function p(){v("next")}return t.$$set=m=>{"isCorrect"in m&&l(0,n=m.isCorrect),"correctAnswer"in m&&l(1,s=m.correctAnswer),"userAnswer"in m&&l(2,o=m.userAnswer),"wonCard"in m&&l(3,i=m.wonCard),"t"in m&&l(4,u=m.t),"needsStreak"in m&&l(5,f=m.needsStreak),"streakProgress"in m&&l(6,a=m.streakProgress),"currentStreak"in m&&l(7,g=m.currentStreak)},[n,s,o,i,u,f,a,g,p]}class es extends Ke{constructor(e){super(),Ye(this,e,xn,$n,De,{isCorrect:0,correctAnswer:1,userAnswer:2,wonCard:3,t:4,needsStreak:5,streakProgress:6,currentStreak:7})}}function ts(){try{const t=Tn(),e=new Blob([t],{type:"application/json"}),l=URL.createObjectURL(e),n=document.createElement("a");n.href=l,n.download=`pokemon-collection-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(l)}catch(t){throw console.error("Error downloading backup:",t),new Error("Failed to download backup")}}function ls(t){return new Promise(e=>{const l=new FileReader;l.onload=n=>{var s;try{const o=(s=n.target)==null?void 0:s.result,i=Pn(o);e(i)}catch(o){console.error("Error reading file:",o),e({success:!1,error:"Failed to read file"})}},l.onerror=()=>{e({success:!1,error:"Failed to read file"})},l.readAsText(t)})}function Rl(t,e,l){const n=t.slice();return n[35]=e[l],n}function jl(t,e,l){const n=t.slice();return n[38]=e[l],n}function Fl(t,e,l){const n=t.slice();return n[35]=e[l],n}function Ol(t,e,l){const n=t.slice();return n[38]=e[l],n}function ns(t){let e=t[1].language==="Spr√•k"?`Defeat ${t[10]>0?t[10].toLocaleString():0} HP to unlock 5 rare cards`:`Beseir ${t[10]>0?t[10].toLocaleString():0} HP for √• l√•se opp 5 sjeldne kort`,l;return{c(){l=h(e)},m(n,s){z(n,l,s)},p(n,s){s[0]&1026&&e!==(e=n[1].language==="Spr√•k"?`Defeat ${n[10]>0?n[10].toLocaleString():0} HP to unlock 5 rare cards`:`Beseir ${n[10]>0?n[10].toLocaleString():0} HP for √• l√•se opp 5 sjeldne kort`)&&S(l,e)},d(n){n&&y(l)}}}function ss(t){let e=t[1].language==="Spr√•k"?"Rare cards unlocked!":"Sjeldne kort l√•st opp!",l;return{c(){l=h(e)},m(n,s){z(n,l,s)},p(n,s){s[0]&2&&e!==(e=n[1].language==="Spr√•k"?"Rare cards unlocked!":"Sjeldne kort l√•st opp!")&&S(l,e)},d(n){n&&y(l)}}}function Bl(t){let e,l;return{c(){e=d("div"),l=d("div"),c(l,"class","hp-progress-fill svelte-w6e41z"),dt(l,"width",t[8]+"%"),c(e,"class","hp-progress-bar svelte-w6e41z")},m(n,s){z(n,e,s),r(e,l)},p(n,s){s[0]&256&&dt(l,"width",n[8]+"%")},d(n){n&&y(e)}}}function Hl(t){let e,l,n,s,o,i,u;function f(){return t[26](t[38])}return{c(){e=d("button"),l=d("img"),o=w(),Ae(l.src,n=t[38].image)||c(l,"src",n),c(l,"alt",s=t[38].name),c(l,"class","svelte-w6e41z"),G(l,"locked",!t[9]),c(e,"class","rare-thumbnail svelte-w6e41z"),G(e,"unlocked",t[9])},m(a,g){z(a,e,g),r(e,l),r(e,o),i||(u=j(e,"click",f),i=!0)},p(a,g){t=a,g[0]&16&&!Ae(l.src,n=t[38].image)&&c(l,"src",n),g[0]&16&&s!==(s=t[38].name)&&c(l,"alt",s),g[0]&512&&G(l,"locked",!t[9]),g[0]&512&&G(e,"unlocked",t[9])},d(a){a&&y(e),i=!1,u()}}}function rs(t){let e,l=we(t[0].cards),n=[];for(let s=0;s<l.length;s+=1)n[s]=Ul(jl(t,l,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();c(e,"class","cards-grid svelte-w6e41z")},m(s,o){z(s,e,o);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,o){if(o[0]&2097153){l=we(s[0].cards);let i;for(i=0;i<l.length;i+=1){const u=jl(s,l,i);n[i]?n[i].p(u,o):(n[i]=Ul(u),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=l.length}},d(s){s&&y(e),lt(n,s)}}}function os(t){let e,l,n,s,o=t[1].noCardsYet+"",i,u,f,a=t[1].noCardsDescription+"",g;return{c(){e=d("div"),l=d("div"),l.textContent="üì¶",n=w(),s=d("h3"),i=h(o),u=w(),f=d("p"),g=h(a),c(l,"class","empty-icon svelte-w6e41z"),c(s,"class","svelte-w6e41z"),c(f,"class","svelte-w6e41z"),c(e,"class","empty-state svelte-w6e41z")},m(v,p){z(v,e,p),r(e,l),r(e,n),r(e,s),r(s,i),r(e,u),r(e,f),r(f,g)},p(v,p){p[0]&2&&o!==(o=v[1].noCardsYet+"")&&S(i,o),p[0]&2&&a!==(a=v[1].noCardsDescription+"")&&S(g,a)},d(v){v&&y(e)}}}function Vl(t){let e,l,n=t[38].hp+"",s;return{c(){e=d("span"),l=h("HP "),s=h(n),c(e,"class","hp svelte-w6e41z")},m(o,i){z(o,e,i),r(e,l),r(e,s)},p(o,i){i[0]&1&&n!==(n=o[38].hp+"")&&S(s,n)},d(o){o&&y(e)}}}function Yl(t){let e,l=we(t[38].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=Kl(Fl(t,l,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();c(e,"class","types svelte-w6e41z")},m(s,o){z(s,e,o);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,o){if(o[0]&1){l=we(s[38].types);let i;for(i=0;i<l.length;i+=1){const u=Fl(s,l,i);n[i]?n[i].p(u,o):(n[i]=Kl(u),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=l.length}},d(s){s&&y(e),lt(n,s)}}}function Kl(t){let e,l=t[35]+"",n;return{c(){e=d("span"),n=h(l),c(e,"class","type svelte-w6e41z")},m(s,o){z(s,e,o),r(e,n)},p(s,o){o[0]&1&&l!==(l=s[35]+"")&&S(n,l)},d(s){s&&y(e)}}}function Ul(t){let e,l,n,s,o,i,u,f=t[38].name+"",a,g,v,p,m,_,k=t[38].hp&&Vl(t),b=t[38].types&&t[38].types.length>0&&Yl(t);function N(){return t[27](t[38])}return{c(){e=d("button"),l=d("img"),o=w(),i=d("div"),u=d("h4"),a=h(f),g=w(),k&&k.c(),v=w(),b&&b.c(),p=w(),Ae(l.src,n=t[38].image)||c(l,"src",n),c(l,"alt",s=t[38].name),c(l,"class","svelte-w6e41z"),c(u,"class","svelte-w6e41z"),c(i,"class","card-details svelte-w6e41z"),c(e,"class","collection-card svelte-w6e41z")},m(M,I){z(M,e,I),r(e,l),r(e,o),r(e,i),r(i,u),r(u,a),r(i,g),k&&k.m(i,null),r(i,v),b&&b.m(i,null),r(e,p),m||(_=j(e,"click",N),m=!0)},p(M,I){t=M,I[0]&1&&!Ae(l.src,n=t[38].image)&&c(l,"src",n),I[0]&1&&s!==(s=t[38].name)&&c(l,"alt",s),I[0]&1&&f!==(f=t[38].name+"")&&S(a,f),t[38].hp?k?k.p(t,I):(k=Vl(t),k.c(),k.m(i,v)):k&&(k.d(1),k=null),t[38].types&&t[38].types.length>0?b?b.p(t,I):(b=Yl(t),b.c(),b.m(i,null)):b&&(b.d(1),b=null)},d(M){M&&y(e),k&&k.d(),b&&b.d(),m=!1,_()}}}function Wl(t){let e,l=t[6].text+"",n;return{c(){e=d("div"),n=h(l),c(e,"class","message svelte-w6e41z"),G(e,"success",t[6].type==="success"),G(e,"error",t[6].type==="error")},m(s,o){z(s,e,o),r(e,n)},p(s,o){o[0]&64&&l!==(l=s[6].text+"")&&S(n,l),o[0]&64&&G(e,"success",s[6].type==="success"),o[0]&64&&G(e,"error",s[6].type==="error")},d(s){s&&y(e)}}}function Gl(t){let e,l,n,s,o,i,u,f,a,g,v=t[3].name+"",p,m,_,k,b,N,M=t[3].hp&&Jl(t),I=t[3].types&&t[3].types.length>0&&Xl(t),L=t[3].rarity&&$l(t);return{c(){e=d("div"),l=d("div"),n=d("button"),n.textContent="√ó",s=w(),o=d("img"),f=w(),a=d("div"),g=d("h3"),p=h(v),m=w(),M&&M.c(),_=w(),I&&I.c(),k=w(),L&&L.c(),c(n,"class","close-modal svelte-w6e41z"),Ae(o.src,i=t[3].image)||c(o,"src",i),c(o,"alt",u=t[3].name),c(o,"class","modal-card-image svelte-w6e41z"),c(g,"class","svelte-w6e41z"),c(a,"class","modal-card-info svelte-w6e41z"),c(l,"class","card-modal svelte-w6e41z"),c(l,"role","dialog"),c(e,"class","dialog-overlay svelte-w6e41z"),c(e,"role","button"),c(e,"tabindex","-1")},m(A,C){z(A,e,C),r(e,l),r(l,n),r(l,s),r(l,o),r(l,f),r(l,a),r(a,g),r(g,p),r(a,m),M&&M.m(a,null),r(a,_),I&&I.m(a,null),r(a,k),L&&L.m(a,null),b||(N=[j(n,"click",t[22]),j(l,"click",nn(t[25])),j(e,"click",t[22]),j(e,"keydown",t[29])],b=!0)},p(A,C){C[0]&8&&!Ae(o.src,i=A[3].image)&&c(o,"src",i),C[0]&8&&u!==(u=A[3].name)&&c(o,"alt",u),C[0]&8&&v!==(v=A[3].name+"")&&S(p,v),A[3].hp?M?M.p(A,C):(M=Jl(A),M.c(),M.m(a,_)):M&&(M.d(1),M=null),A[3].types&&A[3].types.length>0?I?I.p(A,C):(I=Xl(A),I.c(),I.m(a,k)):I&&(I.d(1),I=null),A[3].rarity?L?L.p(A,C):(L=$l(A),L.c(),L.m(a,null)):L&&(L.d(1),L=null)},d(A){A&&y(e),M&&M.d(),I&&I.d(),L&&L.d(),b=!1,ve(N)}}}function Jl(t){let e,l,n=t[3].hp+"",s;return{c(){e=d("div"),l=h("HP: "),s=h(n),c(e,"class","modal-hp svelte-w6e41z")},m(o,i){z(o,e,i),r(e,l),r(e,s)},p(o,i){i[0]&8&&n!==(n=o[3].hp+"")&&S(s,n)},d(o){o&&y(e)}}}function Xl(t){let e,l=we(t[3].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=Zl(Rl(t,l,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();c(e,"class","modal-types svelte-w6e41z")},m(s,o){z(s,e,o);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,o){if(o[0]&8){l=we(s[3].types);let i;for(i=0;i<l.length;i+=1){const u=Rl(s,l,i);n[i]?n[i].p(u,o):(n[i]=Zl(u),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=l.length}},d(s){s&&y(e),lt(n,s)}}}function Zl(t){let e,l=t[35]+"",n;return{c(){e=d("span"),n=h(l),c(e,"class","modal-type svelte-w6e41z")},m(s,o){z(s,e,o),r(e,n)},p(s,o){o[0]&8&&l!==(l=s[35]+"")&&S(n,l)},d(s){s&&y(e)}}}function $l(t){let e,l,n=t[3].rarity+"",s;return{c(){e=d("div"),l=h("Rarity: "),s=h(n),c(e,"class","modal-rarity svelte-w6e41z")},m(o,i){z(o,e,i),r(e,l),r(e,s)},p(o,i){i[0]&8&&n!==(n=o[3].rarity+"")&&S(s,n)},d(o){o&&y(e)}}}function xl(t){let e,l,n,s=t[1].clearCollectionTitle+"",o,i,u,f=t[1].clearCollectionMessage+"",a,g,v,p,m=t[1].cancel+"",_,k,b,N=t[1].clearCollection+"",M,I,L;return{c(){e=d("div"),l=d("div"),n=d("h3"),o=h(s),i=w(),u=d("p"),a=h(f),g=w(),v=d("div"),p=d("button"),_=h(m),k=w(),b=d("button"),M=h(N),c(n,"class","svelte-w6e41z"),c(u,"class","svelte-w6e41z"),c(p,"class","btn-secondary"),c(b,"class","btn-error"),c(v,"class","dialog-actions svelte-w6e41z"),c(l,"class","dialog svelte-w6e41z"),c(l,"role","dialog"),c(e,"class","dialog-overlay svelte-w6e41z"),c(e,"role","button"),c(e,"tabindex","-1")},m(A,C){z(A,e,C),r(e,l),r(l,n),r(n,o),r(l,i),r(l,u),r(u,a),r(l,g),r(l,v),r(v,p),r(p,_),r(v,k),r(v,b),r(b,M),I||(L=[j(p,"click",t[17]),j(b,"click",t[18]),j(l,"click",nn(t[24])),j(l,"keydown",as),j(e,"click",t[17]),j(e,"keydown",t[30])],I=!0)},p(A,C){C[0]&2&&s!==(s=A[1].clearCollectionTitle+"")&&S(o,s),C[0]&2&&f!==(f=A[1].clearCollectionMessage+"")&&S(a,f),C[0]&2&&m!==(m=A[1].cancel+"")&&S(_,m),C[0]&2&&N!==(N=A[1].clearCollection+"")&&S(M,N)},d(A){A&&y(e),I=!1,ve(L)}}}function is(t){let e,l,n,s,o,i,u,f,a,g=t[1].yourCollection+"",v,p,m,_,k,b,N=t[0].cards.length+"",M,I,L,A=t[1].cardsCollected+"",C,D,O,P,q=t[0].stats.totalQuestions+"",T,B,J,se=t[1].questionsAnswered+"",Z,X,le,Y,ne=t[0].stats.correctAnswers+"",F,W,Q,U=t[1].correctAnswers+"",me,ae,$,he,H,ee,V,K,ce=t[1].accuracy+"",be,Re,re,qe,Ee,oe,Ue=(t[1].language||"Language")+"",st,Tt,sl,Le,je,Fe,rl,We,Ge,vt=t[1].gradeLevel+"",Pt,ol,il,pe,Qe,pt=t[1].gradeLevel+"",Nt,al,Ie,_t=t[1].gradeLevel+"",Dt,cl,Te,ht=t[1].gradeLevel+"",Rt,ul,Pe,kt=t[1].gradeLevel+"",jt,fl,Ne,wt=t[1].gradeLevel+"",Ft,dl,gl,Ce,rt,bt=t[1].exportBackup+"",Ot,ml,ot,Ct=t[1].importBackup+"",Bt,vl,it,St=t[1].clearThisSet+"",Ht,pl,Oe,_l,Vt,at,ct,Yt,hl;function kl(E,R){return E[9]?ss:ns}let yt=kl(t),Se=yt(t),ue=!t[9]&&Bl(t),Je=we(t[4]),ie=[];for(let E=0;E<Je.length;E+=1)ie[E]=Hl(Ol(t,Je,E));function wl(E,R){return E[0].cards.length===0?os:rs}let zt=wl(t),ye=zt(t),fe=t[6]&&Wl(t),de=t[3]&&Gl(t),ge=t[7]&&xl(t);return{c(){e=d("div"),l=d("div"),n=d("div"),Se.c(),s=w(),ue&&ue.c(),o=w(),i=d("div");for(let E=0;E<ie.length;E+=1)ie[E].c();u=w(),f=d("div"),a=d("h2"),v=h(g),p=w(),ye.c(),m=w(),_=d("div"),k=d("div"),b=d("div"),M=h(N),I=w(),L=d("div"),C=h(A),D=w(),O=d("div"),P=d("div"),T=h(q),B=w(),J=d("div"),Z=h(se),X=w(),le=d("div"),Y=d("div"),F=h(ne),W=w(),Q=d("div"),me=h(U),ae=w(),$=d("div"),he=d("div"),H=h(t[11]),ee=h("%"),V=w(),K=d("div"),be=h(ce),Re=w(),re=d("div"),qe=d("div"),Ee=d("div"),oe=d("label"),st=h(Ue),Tt=h(":"),sl=w(),Le=d("select"),je=d("option"),je.textContent="English",Fe=d("option"),Fe.textContent="Norsk",rl=w(),We=d("div"),Ge=d("label"),Pt=h(vt),ol=h(":"),il=w(),pe=d("select"),Qe=d("option"),Nt=h(pt),al=h(" 1"),Ie=d("option"),Dt=h(_t),cl=h(" 2"),Te=d("option"),Rt=h(ht),ul=h(" 3"),Pe=d("option"),jt=h(kt),fl=h(" 4"),Ne=d("option"),Ft=h(wt),dl=h(" 5"),gl=w(),Ce=d("div"),rt=d("button"),Ot=h(bt),ml=w(),ot=d("button"),Bt=h(Ct),vl=w(),it=d("button"),Ht=h(St),pl=w(),Oe=d("input"),_l=w(),fe&&fe.c(),Vt=w(),de&&de.c(),at=w(),ge&&ge.c(),ct=xt(),c(n,"class","rare-section-text svelte-w6e41z"),c(i,"class","rare-cards-thumbnails svelte-w6e41z"),c(l,"class","rare-cards-section svelte-w6e41z"),c(a,"class","svelte-w6e41z"),c(f,"class","collection-header svelte-w6e41z"),c(b,"class","stat-value svelte-w6e41z"),c(L,"class","stat-label svelte-w6e41z"),c(k,"class","stat-card svelte-w6e41z"),c(P,"class","stat-value svelte-w6e41z"),c(J,"class","stat-label svelte-w6e41z"),c(O,"class","stat-card svelte-w6e41z"),c(Y,"class","stat-value svelte-w6e41z"),c(Q,"class","stat-label svelte-w6e41z"),c(le,"class","stat-card svelte-w6e41z"),c(he,"class","stat-value svelte-w6e41z"),c(K,"class","stat-label svelte-w6e41z"),c($,"class","stat-card svelte-w6e41z"),c(_,"class","stats-section svelte-w6e41z"),c(oe,"for","language-select"),c(oe,"class","svelte-w6e41z"),je.__value="en",_e(je,je.__value),c(je,"class","svelte-w6e41z"),Fe.__value="no",_e(Fe,Fe.__value),c(Fe,"class","svelte-w6e41z"),c(Le,"id","language-select"),c(Le,"class","settings-selector svelte-w6e41z"),c(Ee,"class","selector-group svelte-w6e41z"),c(Ge,"for","klassetrinn-select"),c(Ge,"class","svelte-w6e41z"),Qe.__value=1,_e(Qe,Qe.__value),c(Qe,"class","svelte-w6e41z"),Ie.__value=2,_e(Ie,Ie.__value),c(Ie,"class","svelte-w6e41z"),Te.__value=3,_e(Te,Te.__value),c(Te,"class","svelte-w6e41z"),Pe.__value=4,_e(Pe,Pe.__value),c(Pe,"class","svelte-w6e41z"),Ne.__value=5,_e(Ne,Ne.__value),c(Ne,"class","svelte-w6e41z"),c(pe,"id","klassetrinn-select"),c(pe,"class","settings-selector svelte-w6e41z"),c(We,"class","selector-group svelte-w6e41z"),c(qe,"class","settings-selectors svelte-w6e41z"),c(rt,"class","btn-secondary"),c(ot,"class","btn-secondary"),c(it,"class","btn-error"),c(Oe,"type","file"),c(Oe,"accept",".json"),dt(Oe,"display","none"),c(Ce,"class","functions-actions svelte-w6e41z"),c(re,"class","functions-section svelte-w6e41z"),c(e,"class","collection-view svelte-w6e41z")},m(E,R){z(E,e,R),r(e,l),r(l,n),Se.m(n,null),r(l,s),ue&&ue.m(l,null),r(l,o),r(l,i);for(let te=0;te<ie.length;te+=1)ie[te]&&ie[te].m(i,null);r(e,u),r(e,f),r(f,a),r(a,v),r(e,p),ye.m(e,null),r(e,m),r(e,_),r(_,k),r(k,b),r(b,M),r(k,I),r(k,L),r(L,C),r(_,D),r(_,O),r(O,P),r(P,T),r(O,B),r(O,J),r(J,Z),r(_,X),r(_,le),r(le,Y),r(Y,F),r(le,W),r(le,Q),r(Q,me),r(_,ae),r(_,$),r($,he),r(he,H),r(he,ee),r($,V),r($,K),r(K,be),r(e,Re),r(e,re),r(re,qe),r(qe,Ee),r(Ee,oe),r(oe,st),r(oe,Tt),r(Ee,sl),r(Ee,Le),r(Le,je),r(Le,Fe),xe(Le,t[2]),r(qe,rl),r(qe,We),r(We,Ge),r(Ge,Pt),r(Ge,ol),r(We,il),r(We,pe),r(pe,Qe),r(Qe,Nt),r(Qe,al),r(pe,Ie),r(Ie,Dt),r(Ie,cl),r(pe,Te),r(Te,Rt),r(Te,ul),r(pe,Pe),r(Pe,jt),r(Pe,fl),r(pe,Ne),r(Ne,Ft),r(Ne,dl),xe(pe,t[12]),r(re,gl),r(re,Ce),r(Ce,rt),r(rt,Ot),r(Ce,ml),r(Ce,ot),r(ot,Bt),r(Ce,vl),r(Ce,it),r(it,Ht),r(Ce,pl),r(Ce,Oe),t[28](Oe),r(e,_l),fe&&fe.m(e,null),z(E,Vt,R),de&&de.m(E,R),z(E,at,R),ge&&ge.m(E,R),z(E,ct,R),Yt||(hl=[j(Le,"change",t[19]),j(pe,"change",t[20]),j(rt,"click",t[13]),j(ot,"click",t[14]),j(it,"click",t[16]),j(Oe,"change",t[15])],Yt=!0)},p(E,R){if(yt===(yt=kl(E))&&Se?Se.p(E,R):(Se.d(1),Se=yt(E),Se&&(Se.c(),Se.m(n,null))),E[9]?ue&&(ue.d(1),ue=null):ue?ue.p(E,R):(ue=Bl(E),ue.c(),ue.m(l,o)),R[0]&2097680){Je=we(E[4]);let te;for(te=0;te<Je.length;te+=1){const bl=Ol(E,Je,te);ie[te]?ie[te].p(bl,R):(ie[te]=Hl(bl),ie[te].c(),ie[te].m(i,null))}for(;te<ie.length;te+=1)ie[te].d(1);ie.length=Je.length}R[0]&2&&g!==(g=E[1].yourCollection+"")&&S(v,g),zt===(zt=wl(E))&&ye?ye.p(E,R):(ye.d(1),ye=zt(E),ye&&(ye.c(),ye.m(e,m))),R[0]&1&&N!==(N=E[0].cards.length+"")&&S(M,N),R[0]&2&&A!==(A=E[1].cardsCollected+"")&&S(C,A),R[0]&1&&q!==(q=E[0].stats.totalQuestions+"")&&S(T,q),R[0]&2&&se!==(se=E[1].questionsAnswered+"")&&S(Z,se),R[0]&1&&ne!==(ne=E[0].stats.correctAnswers+"")&&S(F,ne),R[0]&2&&U!==(U=E[1].correctAnswers+"")&&S(me,U),R[0]&2048&&S(H,E[11]),R[0]&2&&ce!==(ce=E[1].accuracy+"")&&S(be,ce),R[0]&2&&Ue!==(Ue=(E[1].language||"Language")+"")&&S(st,Ue),R[0]&4&&xe(Le,E[2]),R[0]&2&&vt!==(vt=E[1].gradeLevel+"")&&S(Pt,vt),R[0]&2&&pt!==(pt=E[1].gradeLevel+"")&&S(Nt,pt),R[0]&2&&_t!==(_t=E[1].gradeLevel+"")&&S(Dt,_t),R[0]&2&&ht!==(ht=E[1].gradeLevel+"")&&S(Rt,ht),R[0]&2&&kt!==(kt=E[1].gradeLevel+"")&&S(jt,kt),R[0]&2&&wt!==(wt=E[1].gradeLevel+"")&&S(Ft,wt),R[0]&4096&&xe(pe,E[12]),R[0]&2&&bt!==(bt=E[1].exportBackup+"")&&S(Ot,bt),R[0]&2&&Ct!==(Ct=E[1].importBackup+"")&&S(Bt,Ct),R[0]&2&&St!==(St=E[1].clearThisSet+"")&&S(Ht,St),E[6]?fe?fe.p(E,R):(fe=Wl(E),fe.c(),fe.m(e,null)):fe&&(fe.d(1),fe=null),E[3]?de?de.p(E,R):(de=Gl(E),de.c(),de.m(at.parentNode,at)):de&&(de.d(1),de=null),E[7]?ge?ge.p(E,R):(ge=xl(E),ge.c(),ge.m(ct.parentNode,ct)):ge&&(ge.d(1),ge=null)},i:x,o:x,d(E){E&&(y(e),y(Vt),y(at),y(ct)),Se.d(),ue&&ue.d(),lt(ie,E),ye.d(),t[28](null),fe&&fe.d(),de&&de.d(E),ge&&ge.d(E),Yt=!1,ve(hl)}}}const as=()=>{};function cs(t,e,l){let n,s,o,i,u,f;ut(t,Lt,Q=>l(23,u=Q)),ut(t,mt,Q=>l(12,f=Q));let{collection:a}=e,{t:g}=e,{language:v}=e,p=null,m=[],_=[];rn(async()=>{await k()});async function k(){try{m=await $t(u);const Q=[...m].sort((U,me)=>{const ae=parseInt(U.localId||"0");return parseInt(me.localId||"0")-ae});l(4,_=Q.slice(0,5))}catch(Q){console.error("Error loading rare cards:",Q)}}const b=Qt();let N,M=null,I=!1;function L(){try{ts(),D(g.collectionExported,"success")}catch{D(g.exportFailed,"error")}}function A(){N.click()}async function C(Q){var ae;const U=Q.target,me=(ae=U.files)==null?void 0:ae[0];if(me){try{const $=await ls(me);$.success?(D(g.collectionImported,"success"),b("refresh")):D($.error||g.importFailed,"error")}catch{D(g.importFailed,"error")}U.value=""}}function D(Q,U){l(6,M={text:Q,type:U}),setTimeout(()=>{l(6,M=null)},3e3)}function O(){l(7,I=!0)}function P(){l(7,I=!1)}function q(){try{In(),l(7,I=!1),D(g.collectionCleared,"success"),b("refresh")}catch{D(g.clearFailed,"error")}}function T(Q){const U=Q.target;b("languageChange",U.value)}function B(Q){const U=Q.target;mt.set(Number(U.value))}function J(Q){l(3,p=Q)}function se(){l(3,p=null)}function Z(Q){Sl.call(this,t,Q)}function X(Q){Sl.call(this,t,Q)}const le=Q=>J({...Q,collectedAt:new Date().toISOString()}),Y=Q=>J(Q);function ne(Q){Jt[Q?"unshift":"push"](()=>{N=Q,l(5,N)})}const F=Q=>Q.key==="Escape"&&se(),W=Q=>Q.key==="Escape"&&P();return t.$$set=Q=>{"collection"in Q&&l(0,a=Q.collection),"t"in Q&&l(1,g=Q.t),"language"in Q&&l(2,v=Q.language)},t.$$.update=()=>{t.$$.dirty[0]&1&&l(11,n=a.stats.totalQuestions>0?Math.round(a.stats.correctAnswers/a.stats.totalQuestions*100):0),t.$$.dirty[0]&1&&l(10,s=16e3-(a.stats.totalHpDefeated||0)),t.$$.dirty[0]&8388609&&l(9,o=a.unlockedRareSets&&a.unlockedRareSets[u]||!1),t.$$.dirty[0]&1&&l(8,i=Math.min(a.stats.totalHpDefeated/16e3*100,100))},[a,g,v,p,_,N,M,I,i,o,s,n,f,L,A,C,O,P,q,T,B,J,se,u,Z,X,le,Y,ne,F,W]}class us extends Ke{constructor(e){super(),Ye(this,e,cs,is,De,{collection:0,t:1,language:2},null,[-1,-1])}}function fs(t){let e,l,n,s,o;return{c(){e=d("div"),l=d("div"),n=w(),s=d("p"),o=h(t[0]),c(l,"class","spinner svelte-1lxornd"),c(s,"class","svelte-1lxornd"),c(e,"class","loading-view svelte-1lxornd")},m(i,u){z(i,e,u),r(e,l),r(e,n),r(e,s),r(s,o)},p(i,[u]){u&1&&S(o,i[0])},i:x,o:x,d(i){i&&y(e)}}}function ds(t,e,l){let{message:n="Loading..."}=e;return t.$$set=s=>{"message"in s&&l(0,n=s.message)},[n]}class gs extends Ke{constructor(e){super(),Ye(this,e,ds,fs,De,{message:0})}}function ms(t){let e,l,n,s,o,i,u,f,a,g,v;return{c(){e=d("div"),l=d("div"),l.textContent="‚ö†Ô∏è",n=w(),s=d("h2"),s.textContent="Oops!",o=w(),i=d("p"),u=h(t[0]),f=w(),a=d("button"),a.textContent="Try Again",c(l,"class","error-icon svelte-na0xmw"),c(s,"class","svelte-na0xmw"),c(i,"class","svelte-na0xmw"),c(a,"class","btn-primary"),c(e,"class","error-view svelte-na0xmw")},m(p,m){z(p,e,m),r(e,l),r(e,n),r(e,s),r(e,o),r(e,i),r(i,u),r(e,f),r(e,a),g||(v=j(a,"click",t[1]),g=!0)},p(p,[m]){m&1&&S(u,p[0])},i:x,o:x,d(p){p&&y(e),g=!1,v()}}}function vs(t,e,l){let{message:n="Something went wrong"}=e;const s=Qt();function o(){s("retry")}return t.$$set=i=>{"message"in i&&l(0,n=i.message)},[n,o]}class ps extends Ke{constructor(e){super(),Ye(this,e,vs,ms,De,{message:0})}}function _s(t,e,l){const n=t.slice();return n[42]=e[l],n}function hs(t){let e,l;return e=new us({props:{collection:t[4],t:t[16],language:t[0]}}),e.$on("refresh",t[27]),e.$on("languageChange",t[29]),{c(){nt(e.$$.fragment)},m(n,s){He(e,n,s),l=!0},p(n,s){const o={};s[0]&16&&(o.collection=n[4]),s[0]&65536&&(o.t=n[16]),s[0]&1&&(o.language=n[0]),e.$set(o)},i(n){l||(ke(e.$$.fragment,n),l=!0)},o(n){Me(e.$$.fragment,n),l=!1},d(n){Ve(e,n)}}}function ks(t){let e,l,n,s;const o=[Ss,Cs,bs,ws],i=[];function u(f,a){return f[1]==="loading"?0:f[1]==="quiz"&&f[2]?1:f[1]==="result"&&f[2]?2:f[1]==="error"?3:-1}return~(e=u(t))&&(l=i[e]=o[e](t)),{c(){l&&l.c(),n=xt()},m(f,a){~e&&i[e].m(f,a),z(f,n,a),s=!0},p(f,a){let g=e;e=u(f),e===g?~e&&i[e].p(f,a):(l&&(an(),Me(i[g],1,1,()=>{i[g]=null}),cn()),~e?(l=i[e],l?l.p(f,a):(l=i[e]=o[e](f),l.c()),ke(l,1),l.m(n.parentNode,n)):l=null)},i(f){s||(ke(l),s=!0)},o(f){Me(l),s=!1},d(f){f&&y(n),~e&&i[e].d(f)}}}function ws(t){let e,l;return e=new ps({props:{message:t[8]}}),e.$on("retry",t[24]),{c(){nt(e.$$.fragment)},m(n,s){He(e,n,s),l=!0},p(n,s){const o={};s[0]&256&&(o.message=n[8]),e.$set(o)},i(n){l||(ke(e.$$.fragment,n),l=!0)},o(n){Me(e.$$.fragment,n),l=!1},d(n){Ve(e,n)}}}function bs(t){let e,l;return e=new es({props:{isCorrect:t[5],correctAnswer:t[2].correctAnswer,userAnswer:t[6],wonCard:t[7],t:t[16],needsStreak:t[12],streakProgress:t[13],currentStreak:t[4].currentStreak||0}}),e.$on("next",t[23]),{c(){nt(e.$$.fragment)},m(n,s){He(e,n,s),l=!0},p(n,s){const o={};s[0]&32&&(o.isCorrect=n[5]),s[0]&4&&(o.correctAnswer=n[2].correctAnswer),s[0]&64&&(o.userAnswer=n[6]),s[0]&128&&(o.wonCard=n[7]),s[0]&65536&&(o.t=n[16]),s[0]&4096&&(o.needsStreak=n[12]),s[0]&8192&&(o.streakProgress=n[13]),s[0]&16&&(o.currentStreak=n[4].currentStreak||0),e.$set(o)},i(n){l||(ke(e.$$.fragment,n),l=!0)},o(n){Me(e.$$.fragment,n),l=!1},d(n){Ve(e,n)}}}function Cs(t){var g;let e,l,n,s,o,i,u,f=we(Gt),a=[];for(let v=0;v<f.length;v+=1)a[v]=ys(_s(t,f,v));return s=new Wn({props:{question:t[2],t:t[16],currentSet:((g=Gt.find(t[28]))==null?void 0:g.name)||""}}),s.$on("answer",t[22]),{c(){e=d("div"),l=d("select");for(let v=0;v<a.length;v+=1)a[v].c();n=w(),nt(s.$$.fragment),c(l,"class","set-selector svelte-d0vuz0"),c(e,"class","set-selector-container svelte-d0vuz0")},m(v,p){z(v,e,p),r(e,l);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(l,null);xe(l,t[17]),z(v,n,p),He(s,v,p),o=!0,i||(u=j(l,"change",t[18]),i=!0)},p(v,p){var _;(!o||p[0]&131072)&&xe(l,v[17]);const m={};p[0]&4&&(m.question=v[2]),p[0]&65536&&(m.t=v[16]),p[0]&2048&&(m.currentSet=((_=Gt.find(v[28]))==null?void 0:_.name)||""),s.$set(m)},i(v){o||(ke(s.$$.fragment,v),o=!0)},o(v){Me(s.$$.fragment,v),o=!1},d(v){v&&(y(e),y(n)),lt(a,v),Ve(s,v),i=!1,u()}}}function Ss(t){let e,l;return e=new gs({props:{message:t[16].loading}}),{c(){nt(e.$$.fragment)},m(n,s){He(e,n,s),l=!0},p(n,s){const o={};s[0]&65536&&(o.message=n[16].loading),e.$set(o)},i(n){l||(ke(e.$$.fragment,n),l=!0)},o(n){Me(e.$$.fragment,n),l=!1},d(n){Ve(e,n)}}}function ys(t){let e;return{c(){e=d("option"),e.textContent=`${t[42].name}`,e.__value=t[42].id,_e(e,e.__value),c(e,"class","svelte-d0vuz0")},m(l,n){z(l,e,n)},p:x,d(l){l&&y(e)}}}function en(t){let e,l;function n(i,u){return i[15]?zs:As}let s=n(t),o=s(t);return{c(){e=d("div"),l=d("div"),o.c(),c(l,"class","dialog language-dialog svelte-d0vuz0"),c(e,"class","dialog-overlay svelte-d0vuz0"),c(e,"role","button"),c(e,"tabindex","-1")},m(i,u){z(i,e,u),r(e,l),o.m(l,null)},p(i,u){s===(s=n(i))&&o?o.p(i,u):(o.d(1),o=s(i),o&&(o.c(),o.m(l,null)))},d(i){i&&y(e),o.d()}}}function zs(t){let e,l=t[14]==="en"?"Choose Grade Level":"Velg Klassetrinn",n,s,o,i=t[14]==="en"?"Select the appropriate difficulty level. You can change this anytime in My Collection.":"Velg passende vanskelighetsniv√•. Du kan endre dette n√•r som helst i Min samling.",u,f,a,g,v,p,m,_=t[14]==="en"?"Simple addition (5 + 3)":"Enkel addisjon (5 + 3)",k,b,N,M,I,L,A=t[14]==="en"?"Addition & subtraction":"Addisjon og subtraksjon",C,D,O,P,q,T,B=t[14]==="en"?"Addition & subtraction":"Addisjon og subtraksjon",J,se,Z,X,le,Y,ne=t[14]==="en"?"With Pokemon challenges":"Med Pokemon utfordringer",F,W,Q,U,me,ae,$=t[14]==="en"?"With Pokemon challenges":"Med Pokemon utfordringer",he,H,ee;return{c(){e=d("h2"),n=h(l),s=w(),o=d("p"),u=h(i),f=w(),a=d("div"),g=d("button"),v=d("span"),v.textContent="1",p=w(),m=d("span"),k=h(_),b=w(),N=d("button"),M=d("span"),M.textContent="2",I=w(),L=d("span"),C=h(A),D=w(),O=d("button"),P=d("span"),P.textContent="3",q=w(),T=d("span"),J=h(B),se=w(),Z=d("button"),X=d("span"),X.textContent="4",le=w(),Y=d("span"),F=h(ne),W=w(),Q=d("button"),U=d("span"),U.textContent="5",me=w(),ae=d("span"),he=h($),c(e,"class","svelte-d0vuz0"),c(o,"class","svelte-d0vuz0"),c(v,"class","grade-number svelte-d0vuz0"),c(m,"class","grade-description svelte-d0vuz0"),c(g,"class","klassetrinn-btn svelte-d0vuz0"),c(M,"class","grade-number svelte-d0vuz0"),c(L,"class","grade-description svelte-d0vuz0"),c(N,"class","klassetrinn-btn svelte-d0vuz0"),c(P,"class","grade-number svelte-d0vuz0"),c(T,"class","grade-description svelte-d0vuz0"),c(O,"class","klassetrinn-btn svelte-d0vuz0"),c(X,"class","grade-number svelte-d0vuz0"),c(Y,"class","grade-description svelte-d0vuz0"),c(Z,"class","klassetrinn-btn svelte-d0vuz0"),c(U,"class","grade-number svelte-d0vuz0"),c(ae,"class","grade-description svelte-d0vuz0"),c(Q,"class","klassetrinn-btn svelte-d0vuz0"),c(a,"class","klassetrinn-buttons svelte-d0vuz0")},m(V,K){z(V,e,K),r(e,n),z(V,s,K),z(V,o,K),r(o,u),z(V,f,K),z(V,a,K),r(a,g),r(g,v),r(g,p),r(g,m),r(m,k),r(a,b),r(a,N),r(N,M),r(N,I),r(N,L),r(L,C),r(a,D),r(a,O),r(O,P),r(O,q),r(O,T),r(T,J),r(a,se),r(a,Z),r(Z,X),r(Z,le),r(Z,Y),r(Y,F),r(a,W),r(a,Q),r(Q,U),r(Q,me),r(Q,ae),r(ae,he),H||(ee=[j(g,"click",t[32]),j(N,"click",t[33]),j(O,"click",t[34]),j(Z,"click",t[35]),j(Q,"click",t[36])],H=!0)},p(V,K){K[0]&16384&&l!==(l=V[14]==="en"?"Choose Grade Level":"Velg Klassetrinn")&&S(n,l),K[0]&16384&&i!==(i=V[14]==="en"?"Select the appropriate difficulty level. You can change this anytime in My Collection.":"Velg passende vanskelighetsniv√•. Du kan endre dette n√•r som helst i Min samling.")&&S(u,i),K[0]&16384&&_!==(_=V[14]==="en"?"Simple addition (5 + 3)":"Enkel addisjon (5 + 3)")&&S(k,_),K[0]&16384&&A!==(A=V[14]==="en"?"Addition & subtraction":"Addisjon og subtraksjon")&&S(C,A),K[0]&16384&&B!==(B=V[14]==="en"?"Addition & subtraction":"Addisjon og subtraksjon")&&S(J,B),K[0]&16384&&ne!==(ne=V[14]==="en"?"With Pokemon challenges":"Med Pokemon utfordringer")&&S(F,ne),K[0]&16384&&$!==($=V[14]==="en"?"With Pokemon challenges":"Med Pokemon utfordringer")&&S(he,$)},d(V){V&&(y(e),y(s),y(o),y(f),y(a)),H=!1,ve(ee)}}}function As(t){let e,l=t[0]==="en"?"Choose Your Language":"Velg spr√•k",n,s,o,i=t[0]==="en"?"You can change this anytime in My Collection":"Du kan endre dette n√•r som helst i Min samling",u,f,a,g,v,p,m,_;return{c(){e=d("h2"),n=h(l),s=w(),o=d("p"),u=h(i),f=w(),a=d("div"),g=d("button"),g.innerHTML='<span class="flag svelte-d0vuz0">üá¨üáß</span> <span>English</span>',v=w(),p=d("button"),p.innerHTML='<span class="flag svelte-d0vuz0">üá≥üá¥</span> <span>Norsk</span>',c(e,"class","svelte-d0vuz0"),c(o,"class","svelte-d0vuz0"),c(g,"class","language-btn svelte-d0vuz0"),c(p,"class","language-btn svelte-d0vuz0"),c(a,"class","language-buttons svelte-d0vuz0")},m(k,b){z(k,e,b),r(e,n),z(k,s,b),z(k,o,b),r(o,u),z(k,f,b),z(k,a,b),r(a,g),r(a,v),r(a,p),m||(_=[j(g,"click",t[30]),j(p,"click",t[31])],m=!0)},p(k,b){b[0]&1&&l!==(l=k[0]==="en"?"Choose Your Language":"Velg spr√•k")&&S(n,l),b[0]&1&&i!==(i=k[0]==="en"?"You can change this anytime in My Collection":"Du kan endre dette n√•r som helst i Min samling")&&S(u,i)},d(k){k&&(y(e),y(s),y(o),y(f),y(a)),m=!1,ve(_)}}}function Ms(t){var ne;let e,l,n,s,o=t[16].appTitle+"",i,u,f,a,g=t[16].playQuiz+"",v,p,m,_=t[16].myCollection+"",k,b,N=(((ne=t[4])==null?void 0:ne.cards.length)||0)+"",M,I,L=t[3].length+"",A,C,D,O,P,q,T,B,J,se;const Z=[ks,hs],X=[];function le(F,W){return F[9]==="quiz"?0:1}P=le(t),q=X[P]=Z[P](t);let Y=t[10]&&en(t);return{c(){e=d("div"),l=d("header"),n=d("div"),s=d("h1"),i=h(o),u=w(),f=d("nav"),a=d("button"),v=h(g),p=w(),m=d("button"),k=h(_),b=h(" ("),M=h(N),I=h("/"),A=h(L),C=h(")"),D=w(),O=d("main"),q.c(),T=w(),Y&&Y.c(),c(s,"class","app-title svelte-d0vuz0"),c(a,"class","nav-btn svelte-d0vuz0"),G(a,"active",t[9]==="quiz"),c(m,"class","nav-btn svelte-d0vuz0"),G(m,"active",t[9]==="collection"),c(f,"class","svelte-d0vuz0"),c(n,"class","header-content svelte-d0vuz0"),c(l,"class","app-header svelte-d0vuz0"),c(O,"class","svelte-d0vuz0"),c(e,"class","app svelte-d0vuz0")},m(F,W){z(F,e,W),r(e,l),r(l,n),r(n,s),r(s,i),r(n,u),r(n,f),r(f,a),r(a,v),r(f,p),r(f,m),r(m,k),r(m,b),r(m,M),r(m,I),r(m,A),r(m,C),r(e,D),r(e,O),X[P].m(O,null),r(e,T),Y&&Y.m(e,null),B=!0,J||(se=[j(a,"click",t[26]),j(m,"click",t[25])],J=!0)},p(F,W){var U;(!B||W[0]&65536)&&o!==(o=F[16].appTitle+"")&&S(i,o),(!B||W[0]&65536)&&g!==(g=F[16].playQuiz+"")&&S(v,g),(!B||W[0]&512)&&G(a,"active",F[9]==="quiz"),(!B||W[0]&65536)&&_!==(_=F[16].myCollection+"")&&S(k,_),(!B||W[0]&16)&&N!==(N=(((U=F[4])==null?void 0:U.cards.length)||0)+"")&&S(M,N),(!B||W[0]&8)&&L!==(L=F[3].length+"")&&S(A,L),(!B||W[0]&512)&&G(m,"active",F[9]==="collection");let Q=P;P=le(F),P===Q?X[P].p(F,W):(an(),Me(X[Q],1,1,()=>{X[Q]=null}),cn(),q=X[P],q?q.p(F,W):(q=X[P]=Z[P](F),q.c()),ke(q,1),q.m(O,null)),F[10]?Y?Y.p(F,W):(Y=en(F),Y.c(),Y.m(e,null)):Y&&(Y.d(1),Y=null)},i(F){B||(ke(q),B=!0)},o(F){Me(q),B=!1},d(F){F&&y(e),X[P].d(),Y&&Y.d(),J=!1,ve(se)}}}function qs(t,e,l){let n,s,o,i;ut(t,mt,H=>l(38,s=H)),ut(t,qt,H=>l(0,o=H)),ut(t,Lt,H=>l(17,i=H));let u="loading",f=null,a=[],g,v=!1,p=0,m=0,_=null,k="",b="quiz",N=!1,M=i,I=!1,L=0;rn(()=>{l(4,g=ze()),localStorage.getItem("tcg-seen-language-dialog")?T():l(10,N=!0)});function A(H){const ee=H.target;Lt.set(ee.value),l(11,M=ee.value),l(3,a=[]),T()}function C(H){qt.set(H)}let D="en",O=!1;function P(H){l(14,D=H),l(15,O=!0)}function q(H){qt.set(D),mt.set(H),localStorage.setItem("tcg-seen-language-dialog","true"),l(10,N=!1),l(15,O=!1),T()}async function T(){var H;try{l(1,u="loading"),a.length===0&&l(3,a=await $t(M));const ee=[...a].sort((oe,Ue)=>{const st=parseInt(oe.localId||"0");return parseInt(Ue.localId||"0")-st}),V=new Set(ee.slice(0,5).map(oe=>oe.id)),K=new Set(g.cards.map(oe=>oe.id)),ce=a.filter(oe=>!K.has(oe.id)&&!V.has(oe.id));if(ce.length===0)throw new Error("Congratulations! You have collected all cards from this set!");const be=qn(ce),Re=await Mn(be.id,M),re=((H=Re.rarity)==null?void 0:H.toLowerCase())||"common",qe=re!=="common"&&re!=="uncommon"&&re!=="rare"&&re!=="double rare",Ee=Rn(Re,n,qe,s);if(!Ee)throw new Error("Could not generate a valid question. Please try again.");l(12,I=qe?!1:re!=="common"&&re!=="uncommon"&&re!=="rare"&&re!=="double rare"),g.streakCard&&g.streakCard.id===Re.id?l(13,L=g.currentStreak||0):l(13,L=0),l(2,f=Ee),l(1,u="quiz")}catch(ee){console.error("Error loading question:",ee),l(8,k=ee instanceof Error?ee.message:"Failed to load question"),l(1,u="error")}}async function B(){g.unlockedRareSets||l(4,g.unlockedRareSets={},g),!g.unlockedRareSets[M]&&g.stats.totalHpDefeated>=16e3&&(a.length===0&&l(3,a=await $t(M)),[...a].sort((V,K)=>{const ce=parseInt(V.localId||"0");return parseInt(K.localId||"0")-ce}).slice(0,5).forEach(V=>{const K={id:V.id,name:V.name,image:V.image,hp:V.hp,types:V.types,rarity:V.rarity,collectedAt:new Date().toISOString()};g.cards.some(be=>be.id===V.id)||g.cards.push(K)}),l(4,g.unlockedRareSets[M]=!0,g),tt(g))}function J(H){var V,K;if(!f)return;l(6,p=H.detail.firstAnswer),m=H.detail.secondAnswer||0,l(5,v=jn(f,p,m));const ee=v&&f.card.hp?f.card.hp:0;if(Qn(v,ee),l(7,_=null),v){let ce=!1;if(I&&!f.secondQuestion?(l(4,g=ze()),((V=g.streakCard)==null?void 0:V.id)===f.card.id?l(4,g.currentStreak=(g.currentStreak||0)+1,g):(l(4,g.streakCard=f.card,g),l(4,g.currentStreak=1,g)),g.currentStreak>=2&&(ce=!0,l(4,g.currentStreak=0,g),l(4,g.streakCard=void 0,g)),tt(g)):ce=!0,ce){const be={id:f.card.id,name:f.card.name,image:f.card.image,hp:f.card.hp,types:f.card.types,rarity:f.card.rarity,collectedAt:new Date().toISOString()};Ln(be)&&l(7,_=f.card)}}else l(4,g=ze()),I&&((K=g.streakCard)==null?void 0:K.id)===f.card.id&&(l(4,g.currentStreak=0,g),l(4,g.streakCard=void 0,g),tt(g));l(4,g=ze()),v&&(B(),l(4,g=ze())),l(1,u="result")}function se(){T()}function Z(){T()}function X(){l(9,b="collection"),l(4,g=ze())}function le(){l(9,b="quiz")}function Y(){l(4,g=ze())}const ne=H=>H.id===M,F=H=>C(H.detail),W=()=>P("en"),Q=()=>P("no"),U=()=>q(1),me=()=>q(2),ae=()=>q(3),$=()=>q(4),he=()=>q(5);return t.$$.update=()=>{t.$$.dirty[0]&1&&l(16,n=Bn(o))},[o,u,f,a,g,v,p,_,k,b,N,M,I,L,D,O,n,i,A,C,P,q,J,se,Z,X,le,Y,ne,F,W,Q,U,me,ae,$,he]}class Es extends Ke{constructor(e){super(),Ye(this,e,qs,Ms,De,{},null,[-1,-1])}}new Es({target:document.getElementById("app")});
