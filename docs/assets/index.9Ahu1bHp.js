var Rl=Object.defineProperty;var Fl=(t,e,l)=>e in t?Rl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var _t=(t,e,l)=>Fl(t,typeof e!="symbol"?e+"":e,l);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function l(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=l(s);fetch(s.href,r)}})();function J(){}function bl(t){return t()}function Ht(){return Object.create(null)}function ae(t){t.forEach(bl)}function wl(t){return typeof t=="function"}function pe(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let lt;function ge(t,e){return t===e?!0:(lt||(lt=document.createElement("a")),lt.href=e,t===lt.href)}function Ql(t){return Object.keys(t).length===0}function Ol(t,...e){if(t==null){for(const n of e)n(void 0);return J}const l=t.subscribe(...e);return l.unsubscribe?()=>l.unsubscribe():l}function wt(t,e,l){t.$$.on_destroy.push(Ol(e,l))}function i(t,e){t.appendChild(e)}function M(t,e,l){t.insertBefore(e,l||null)}function I(t){t.parentNode&&t.parentNode.removeChild(t)}function ve(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function g(t){return document.createElement(t)}function S(t){return document.createTextNode(t)}function C(){return S(" ")}function Et(){return S("")}function B(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function yl(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function u(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function Cl(t){return t===""?null:+t}function Bl(t){return Array.from(t.childNodes)}function E(t,e){e=""+e,t.data!==e&&(t.data=e)}function Be(t,e){t.value=e??""}function yt(t,e,l,n){l==null?t.style.removeProperty(e):t.style.setProperty(e,l,"")}function rt(t,e,l){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e){s.selected=!0;return}}t.selectedIndex=-1}function H(t,e,l){t.classList.toggle(e,!!l)}function jl(t,e,{bubbles:l=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:l,cancelable:n})}let je;function Oe(t){je=t}function Sl(){if(!je)throw new Error("Function called outside component initialization");return je}function zl(t){Sl().$$.on_mount.push(t)}function it(){const t=Sl();return(e,l,{cancelable:n=!1}={})=>{const s=t.$$.callbacks[e];if(s){const r=jl(e,l,{cancelable:n});return s.slice().forEach(o=>{o.call(t,r)}),!r.defaultPrevented}return!0}}function Yt(t,e){const l=t.$$.callbacks[e.type];l&&l.slice().forEach(n=>n.call(this,e))}const Le=[],Ct=[];let Me=[];const Vt=[],Hl=Promise.resolve();let St=!1;function Yl(){St||(St=!0,Hl.then(Al))}function zt(t){Me.push(t)}const vt=new Set;let Ie=0;function Al(){if(Ie!==0)return;const t=je;do{try{for(;Ie<Le.length;){const e=Le[Ie];Ie++,Oe(e),Vl(e.$$)}}catch(e){throw Le.length=0,Ie=0,e}for(Oe(null),Le.length=0,Ie=0;Ct.length;)Ct.pop()();for(let e=0;e<Me.length;e+=1){const l=Me[e];vt.has(l)||(vt.add(l),l())}Me.length=0}while(Le.length);for(;Vt.length;)Vt.pop()();St=!1,vt.clear(),Oe(t)}function Vl(t){if(t.fragment!==null){t.update(),ae(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(zt)}}function Ul(t){const e=[],l=[];Me.forEach(n=>t.indexOf(n)===-1?e.push(n):l.push(n)),l.forEach(n=>n()),Me=e}const nt=new Set;let _e;function El(){_e={r:0,c:[],p:_e}}function Il(){_e.r||ae(_e.c),_e=_e.p}function ie(t,e){t&&t.i&&(nt.delete(t),t.i(e))}function me(t,e,l,n){if(t&&t.o){if(nt.has(t))return;nt.add(t),_e.c.push(()=>{nt.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}else n&&n()}function se(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Ne(t){t&&t.c()}function ke(t,e,l){const{fragment:n,after_update:s}=t.$$;n&&n.m(e,l),zt(()=>{const r=t.$$.on_mount.map(bl).filter(wl);t.$$.on_destroy?t.$$.on_destroy.push(...r):ae(r),t.$$.on_mount=[]}),s.forEach(zt)}function be(t,e){const l=t.$$;l.fragment!==null&&(Ul(l.after_update),ae(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function Kl(t,e){t.$$.dirty[0]===-1&&(Le.push(t),Yl(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function we(t,e,l,n,s,r,o=null,c=[-1]){const f=je;Oe(t);const a=t.$$={fragment:null,ctx:[],props:r,update:J,not_equal:s,bound:Ht(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:Ht(),dirty:c,skip_bound:!1,root:e.target||f.$$.root};o&&o(a.root);let m=!1;if(a.ctx=l?l(t,e.props||{},(d,p,...h)=>{const y=h.length?h[0]:p;return a.ctx&&s(a.ctx[d],a.ctx[d]=y)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](y),m&&Kl(t,d)),p}):[],a.update(),m=!0,ae(a.before_update),a.fragment=n?n(a.ctx):!1,e.target){if(e.hydrate){const d=Bl(e.target);a.fragment&&a.fragment.l(d),d.forEach(I)}else a.fragment&&a.fragment.c();e.intro&&ie(t.$$.fragment),ke(t,e.target,e.anchor),Al()}Oe(f)}class ye{constructor(){_t(this,"$$");_t(this,"$$set")}$destroy(){be(this,1),this.$destroy=J}$on(e,l){if(!wl(l))return J;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const s=n.indexOf(l);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!Ql(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Wl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Wl);const Tl="https://api.tcgdex.net/v2/en";function Ll(t,e){const l=t.split("-")[1];return`https://assets.tcgdex.net/en/${Jl(e)}/${e}/${l}/high.webp`}function Jl(t){return t.startsWith("swsh")?"swsh":t.startsWith("sv")?"sv":t.startsWith("me")?"base":"swsh"}async function At(t){try{const e=await fetch(`${Tl}/sets/${t}`);if(!e.ok)throw new Error("Failed to fetch cards from set");return((await e.json()).cards||[]).map(s=>({id:s.id,localId:s.localId,name:s.name,image:Ll(s.id,t)}))}catch(e){throw console.error("Error fetching cards from set:",e),e}}async function Gl(t,e){try{const l=await fetch(`${Tl}/cards/${t}`);if(!l.ok)throw new Error("Failed to fetch card details");return{...await l.json(),image:Ll(t,e)}}catch(l){throw console.error("Error fetching card details:",l),l}}function Xl(t){const e=Math.floor(Math.random()*t.length);return t[e]}const It="pokemon-tcg-collection",Ml="2.0";function Zl(){return{totalQuestions:0,correctAnswers:0,incorrectAnswers:0,totalHpDefeated:0}}function kt(){return{cards:[],stats:Zl(),version:Ml}}function de(){try{const t=localStorage.getItem(It);if(!t)return kt();const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?(console.warn("Invalid collection format, resetting..."),kt()):(e.stats.totalHpDefeated||(e.stats.totalHpDefeated=0),e.currentStreak||(e.currentStreak=0),e.unlockedRareSets||(e.unlockedRareSets={}),e)}catch(t){return console.error("Error loading collection from local storage:",t),kt()}}function qe(t){try{const e={...t,version:Ml};localStorage.setItem(It,JSON.stringify(e))}catch(e){throw console.error("Error saving collection to local storage:",e),new Error("Failed to save collection")}}function $l(t){try{const e=de();return e.cards.some(n=>n.id===t.id)?!1:(e.cards.push(t),qe(e),!0)}catch(e){return console.error("Error adding card to collection:",e),!1}}function xl(t,e){try{const l=de();l.stats.totalQuestions++,t?(l.stats.correctAnswers++,e&&(l.stats.totalHpDefeated+=e)):l.stats.incorrectAnswers++,qe(l)}catch(l){console.error("Error updating stats:",l)}}function en(){try{localStorage.removeItem(It)}catch(t){console.error("Error clearing collection:",t)}}function tn(){const t=de();return JSON.stringify(t,null,2)}function ln(t){try{const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?{success:!1,error:"Invalid collection format"}:!e.stats.totalQuestions===void 0||!e.stats.correctAnswers===void 0||!e.stats.incorrectAnswers===void 0?{success:!1,error:"Invalid stats format"}:(qe(e),{success:!0})}catch(e){return console.error("Error importing collection:",e),{success:!1,error:"Failed to parse JSON file"}}}function nn(){const t=Math.floor(Math.random()*50)+10,e=Math.floor(Math.random()*50)+10,l=["+","-"],n=l[Math.floor(Math.random()*l.length)];let s,r;if(n==="+")s=t+e,r=`What is ${t} + ${e}?`;else{s=t+e;const o=s;s=t,r=`What is ${o} - ${e}?`}return{question:r,answer:s}}function sn(t){if(!t)return null;let e,l,n=!1;if(t.hp&&t.hp>0){n=!0;const s=[10,20,30,40,50,60,60,80,120,300][Math.floor(Math.random()*5)];l=Math.ceil(t.hp/s),e=`Your Pok√©mon deals ${s} damage each turn. How many turns does it take to defeat this Pok√©mon?`}else{const s=nn();e=s.question,l=s.answer}return{card:t,questionText:e,correctAnswer:l,isPokemon:n}}function rn(t,e){return e===t.correctAnswer}const Te=[];function ql(t,e=J){let l;const n=new Set;function s(c){if(pe(t,c)&&(t=c,l)){const f=!Te.length;for(const a of n)a[1](),Te.push(a,t);if(f){for(let a=0;a<Te.length;a+=2)Te[a][0](Te[a+1]);Te.length=0}}}function r(c){s(c(t))}function o(c,f=J){const a=[c,f];return n.add(a),n.size===1&&(l=e(s,r)||J),c(t),()=>{n.delete(a),n.size===0&&l&&(l(),l=null)}}return{set:s,update:r,subscribe:o}}const bt=[{id:"swsh3",name:"Sword & Shield - Darkness Ablaze"},{id:"sv05",name:"Scarlet & Violet - Temporal Forces"},{id:"sv06.5",name:"Scarlet & Violet - Shrouded Fable"}],Nl="tcg-math-settings";function on(){return{language:"en",selectedSet:"swsh3"}}function Tt(){try{const t=localStorage.getItem(Nl);if(t){const e=JSON.parse(t);return{language:e.language||"en",selectedSet:e.selectedSet||"swsh3"}}}catch(t){console.error("Error loading settings:",t)}return on()}function Dl(t){try{localStorage.setItem(Nl,JSON.stringify(t))}catch(e){console.error("Error saving settings:",e)}}const Pl=Tt(),st=ql(Pl.language),ot=ql(Pl.selectedSet);st.subscribe(t=>{const e=Tt();Dl({...e,language:t})});ot.subscribe(t=>{const e=Tt();Dl({...e,selectedSet:t})});const an={en:{appTitle:"16 K",quizTitle:"TCG Math Challenge",playQuiz:"Play Quiz",myCollection:"My Collection",selectSet:"Select Set",selectLanguage:"Language",setInfo:"Collecting Set",enterAnswer:"Enter your answer",submitAnswer:"Submit Answer",nextQuestion:"Next Question",correct:"Correct!",notQuite:"Not quite!",correctMessage:"Great job! The answer was",incorrectMessage:"You answered",encouragement:"Try again with the next question!",youWonThisCard:"You won this card!",cardsCollected:"Cards Collected",questionsAnswered:"Questions Answered",correctAnswers:"Correct Answers",accuracy:"Accuracy",noCardsYet:"No cards yet!",noCardsDescription:"Answer questions correctly to start building your collection.",exportBackup:"Export Backup",importBackup:"Import Backup",clearThisSet:"Clear This Set",clearCollectionTitle:"Clear Collection?",clearCollectionMessage:"Are you sure you want to clear your entire collection? This action cannot be undone.",cancel:"Cancel",clearCollection:"Clear Collection",collectionExported:"Collection exported successfully!",collectionImported:"Collection imported successfully!",collectionCleared:"Collection cleared successfully!",exportFailed:"Failed to export collection",importFailed:"Failed to import collection",clearFailed:"Failed to clear collection",hit:"hit",hits:"hits",loading:"Loading new question...",yourCollection:"Your Collection",language:"Language"},no:{appTitle:"16 K",quizTitle:"TCG Matte Utfordring",playQuiz:"Spill Quiz",myCollection:"Min Samling",selectSet:"Velg Sett",selectLanguage:"Spr√•k",setInfo:"Samler Sett",enterAnswer:"Skriv inn svaret ditt",submitAnswer:"Send Inn Svar",nextQuestion:"Neste Sp√∏rsm√•l",correct:"Riktig!",notQuite:"Ikke helt!",correctMessage:"Bra jobbet! Svaret var",incorrectMessage:"Du svarte",encouragement:"Pr√∏v igjen med neste sp√∏rsm√•l!",youWonThisCard:"Du vant dette kortet!",cardsCollected:"Kort Samlet",questionsAnswered:"Sp√∏rsm√•l Besvart",correctAnswers:"Riktige Svar",accuracy:"N√∏yaktighet",noCardsYet:"Ingen kort enn√•!",noCardsDescription:"Svar riktig p√• sp√∏rsm√•l for √• begynne √• bygge samlingen din.",exportBackup:"Eksporter Backup",importBackup:"Importer Backup",clearThisSet:"T√∏m Dette Settet",clearCollectionTitle:"T√∏m Samling?",clearCollectionMessage:"Er du sikker p√• at du vil t√∏mme hele samlingen din? Denne handlingen kan ikke angres.",cancel:"Avbryt",clearCollection:"T√∏m Samling",collectionExported:"Samling eksportert!",collectionImported:"Samling importert!",collectionCleared:"Samling t√∏mt!",exportFailed:"Kunne ikke eksportere samling",importFailed:"Kunne ikke importere samling",clearFailed:"Kunne ikke t√∏mme samling",hit:"treff",hits:"treff",loading:"Laster nytt sp√∏rsm√•l...",yourCollection:"Din Samling",language:"Spr√•k"}};function cn(t){return an[t]}function Ut(t,e,l){const n=t.slice();return n[3]=e[l],n}function Kt(t,e,l){const n=t.slice();return n[6]=e[l],n}function Wt(t){let e,l,n,s,r=t[0].hp+"",o;return{c(){e=g("div"),l=g("span"),l.textContent="HP",n=C(),s=g("span"),o=S(r),u(l,"class","hp-label svelte-2rdllh"),u(s,"class","hp-value svelte-2rdllh"),u(e,"class","card-hp svelte-2rdllh")},m(c,f){M(c,e,f),i(e,l),i(e,n),i(e,s),i(s,o)},p(c,f){f&1&&r!==(r=c[0].hp+"")&&E(o,r)},d(c){c&&I(e)}}}function Jt(t){let e,l=se(t[0].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=Gt(Kt(t,l,s));return{c(){e=g("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","card-types svelte-2rdllh")},m(s,r){M(s,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,r){if(r&1){l=se(s[0].types);let o;for(o=0;o<l.length;o+=1){const c=Kt(s,l,o);n[o]?n[o].p(c,r):(n[o]=Gt(c),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(s){s&&I(e),ve(n,s)}}}function Gt(t){let e,l=t[6]+"",n;return{c(){e=g("span"),n=S(l),u(e,"class","type-badge svelte-2rdllh")},m(s,r){M(s,e,r),i(e,n)},p(s,r){r&1&&l!==(l=s[6]+"")&&E(n,l)},d(s){s&&I(e)}}}function Xt(t){let e,l,n,s=se(t[0].attacks),r=[];for(let o=0;o<s.length;o+=1)r[o]=$t(Ut(t,s,o));return{c(){e=g("div"),l=g("h4"),l.textContent="Attacks:",n=C();for(let o=0;o<r.length;o+=1)r[o].c();u(l,"class","svelte-2rdllh"),u(e,"class","card-attacks svelte-2rdllh")},m(o,c){M(o,e,c),i(e,l),i(e,n);for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(e,null)},p(o,c){if(c&5){s=se(o[0].attacks);let f;for(f=0;f<s.length;f+=1){const a=Ut(o,s,f);r[f]?r[f].p(a,c):(r[f]=$t(a),r[f].c(),r[f].m(e,null))}for(;f<r.length;f+=1)r[f].d(1);r.length=s.length}},d(o){o&&I(e),ve(r,o)}}}function Zt(t){let e,l=t[3].damage+"",n;return{c(){e=g("span"),n=S(l),u(e,"class","attack-damage svelte-2rdllh")},m(s,r){M(s,e,r),i(e,n)},p(s,r){r&1&&l!==(l=s[3].damage+"")&&E(n,l)},d(s){s&&I(e)}}}function $t(t){let e,l,n=t[3].name+"",s,r,o,c=t[3].damage&&Zt(t);return{c(){e=g("div"),l=g("span"),s=S(n),r=C(),c&&c.c(),o=C(),u(l,"class","attack-name svelte-2rdllh"),u(e,"class","attack svelte-2rdllh"),H(e,"highlighted",t[2]===t[3].name)},m(f,a){M(f,e,a),i(e,l),i(l,s),i(e,r),c&&c.m(e,null),i(e,o)},p(f,a){a&1&&n!==(n=f[3].name+"")&&E(s,n),f[3].damage?c?c.p(f,a):(c=Zt(f),c.c(),c.m(e,o)):c&&(c.d(1),c=null),a&5&&H(e,"highlighted",f[2]===f[3].name)},d(f){f&&I(e),c&&c.d()}}}function un(t){let e,l,n,s,r,o,c,f,a=t[0].name+"",m,d,p,h,y=t[0].hp&&Wt(t),v=t[0].types&&t[0].types.length>0&&Jt(t),k=t[1]&&t[0].attacks&&t[0].attacks.length>0&&Xt(t);return{c(){e=g("div"),l=g("div"),n=g("img"),o=C(),c=g("div"),f=g("h3"),m=S(a),d=C(),y&&y.c(),p=C(),v&&v.c(),h=C(),k&&k.c(),ge(n.src,s=t[0].image)||u(n,"src",s),u(n,"alt",r=t[0].name),u(n,"class","svelte-2rdllh"),u(l,"class","card-image svelte-2rdllh"),u(f,"class","card-name svelte-2rdllh"),u(c,"class","card-info svelte-2rdllh"),u(e,"class","pokemon-card svelte-2rdllh")},m(A,z){M(A,e,z),i(e,l),i(l,n),i(e,o),i(e,c),i(c,f),i(f,m),i(c,d),y&&y.m(c,null),i(c,p),v&&v.m(c,null),i(c,h),k&&k.m(c,null)},p(A,[z]){z&1&&!ge(n.src,s=A[0].image)&&u(n,"src",s),z&1&&r!==(r=A[0].name)&&u(n,"alt",r),z&1&&a!==(a=A[0].name+"")&&E(m,a),A[0].hp?y?y.p(A,z):(y=Wt(A),y.c(),y.m(c,p)):y&&(y.d(1),y=null),A[0].types&&A[0].types.length>0?v?v.p(A,z):(v=Jt(A),v.c(),v.m(c,h)):v&&(v.d(1),v=null),A[1]&&A[0].attacks&&A[0].attacks.length>0?k?k.p(A,z):(k=Xt(A),k.c(),k.m(c,null)):k&&(k.d(1),k=null)},i:J,o:J,d(A){A&&I(e),y&&y.d(),v&&v.d(),k&&k.d()}}}function fn(t,e,l){let{card:n}=e,{showAttacks:s=!1}=e,{highlightedAttack:r=null}=e;return t.$$set=o=>{"card"in o&&l(0,n=o.card),"showAttacks"in o&&l(1,s=o.showAttacks),"highlightedAttack"in o&&l(2,r=o.highlightedAttack)},[n,s,r]}class dn extends ye{constructor(e){super(),we(this,e,fn,un,pe,{card:0,showAttacks:1,highlightedAttack:2})}}function gn(t){let e,l,n,s,r,o,c=t[0].questionText+"",f,a,m,d,p,h,y,v=t[1].submitAnswer+"",k,A,z,q,T;return n=new dn({props:{card:t[0].card}}),{c(){e=g("div"),l=g("div"),Ne(n.$$.fragment),s=C(),r=g("div"),o=g("h3"),f=S(c),a=C(),m=g("div"),d=g("input"),h=C(),y=g("button"),k=S(v),u(l,"class","card-display svelte-1ohble"),u(o,"class","question-text svelte-1ohble"),u(d,"type","number"),u(d,"placeholder",p=t[1].enterAnswer),u(d,"class","answer-input svelte-1ohble"),u(y,"class","submit-btn btn-primary svelte-1ohble"),y.disabled=A=!t[2],u(m,"class","answer-input-container svelte-1ohble"),u(r,"class","question-container svelte-1ohble"),u(e,"class","quiz-view svelte-1ohble")},m(b,_){M(b,e,_),i(e,l),ke(n,l,null),i(e,s),i(e,r),i(r,o),i(o,f),i(r,a),i(r,m),i(m,d),Be(d,t[2]),i(m,h),i(m,y),i(y,k),z=!0,q||(T=[B(d,"input",t[6]),B(d,"keypress",t[4]),B(y,"click",t[3])],q=!0)},p(b,[_]){const F={};_&1&&(F.card=b[0].card),n.$set(F),(!z||_&1)&&c!==(c=b[0].questionText+"")&&E(f,c),(!z||_&2&&p!==(p=b[1].enterAnswer))&&u(d,"placeholder",p),_&4&&Cl(d.value)!==b[2]&&Be(d,b[2]),(!z||_&2)&&v!==(v=b[1].submitAnswer+"")&&E(k,v),(!z||_&4&&A!==(A=!b[2]))&&(y.disabled=A)},i(b){z||(ie(n.$$.fragment,b),z=!0)},o(b){me(n.$$.fragment,b),z=!1},d(b){b&&I(e),be(n),q=!1,ae(T)}}}function mn(t,e,l){let{question:n}=e,{t:s}=e,{currentSet:r}=e;const o=it();let c="";function f(){const d=parseInt(c,10);isNaN(d)||o("answer",d)}function a(d){d.key==="Enter"&&f()}function m(){c=Cl(this.value),l(2,c)}return t.$$set=d=>{"question"in d&&l(0,n=d.question),"t"in d&&l(1,s=d.t),"currentSet"in d&&l(5,r=d.currentSet)},[n,s,c,f,a,r,m]}class hn extends ye{constructor(e){super(),we(this,e,mn,gn,pe,{question:0,t:1,currentSet:5})}}function pn(t){let e,l,n,s=t[4].notQuite+"",r,o,c,f=t[4].incorrectMessage+"",a,m,d,p,h,y=t[4].correctMessage.toLowerCase()+"",v,k,A,z,q,T,b,_,F=t[4].encouragement+"",j,R=t[5]&&t[6]>0&&xt(t);return{c(){e=g("div"),e.textContent="‚úó",l=C(),n=g("h2"),r=S(s),o=C(),c=g("p"),a=S(f),m=C(),d=g("strong"),p=S(t[2]),h=S(", "),v=S(y),k=C(),A=g("strong"),z=S(t[1]),q=S("."),T=C(),R&&R.c(),b=C(),_=g("p"),j=S(F),u(e,"class","result-icon error svelte-1v74pgf"),u(n,"class","result-title svelte-1v74pgf"),u(d,"class","svelte-1v74pgf"),u(A,"class","svelte-1v74pgf"),u(c,"class","result-message svelte-1v74pgf"),u(_,"class","encouragement svelte-1v74pgf")},m(N,O){M(N,e,O),M(N,l,O),M(N,n,O),i(n,r),M(N,o,O),M(N,c,O),i(c,a),i(c,m),i(c,d),i(d,p),i(c,h),i(c,v),i(c,k),i(c,A),i(A,z),i(c,q),M(N,T,O),R&&R.m(N,O),M(N,b,O),M(N,_,O),i(_,j)},p(N,O){O&16&&s!==(s=N[4].notQuite+"")&&E(r,s),O&16&&f!==(f=N[4].incorrectMessage+"")&&E(a,f),O&4&&E(p,N[2]),O&16&&y!==(y=N[4].correctMessage.toLowerCase()+"")&&E(v,y),O&2&&E(z,N[1]),N[5]&&N[6]>0?R?R.p(N,O):(R=xt(N),R.c(),R.m(b.parentNode,b)):R&&(R.d(1),R=null),O&16&&F!==(F=N[4].encouragement+"")&&E(j,F)},d(N){N&&(I(e),I(l),I(n),I(o),I(c),I(T),I(b),I(_)),R&&R.d(N)}}}function _n(t){let e,l,n,s=t[4].correct+"",r,o,c,f=t[4].correctMessage+"",a,m,d,p,h,y=(t[1]===1?t[4].hit:t[4].hits)+"",v,k,A,z,q,T=t[5]&&!t[3]&&el(t),b=t[3]&&tl(t);return{c(){e=g("div"),e.textContent="‚úì",l=C(),n=g("h2"),r=S(s),o=C(),c=g("p"),a=S(f),m=C(),d=g("strong"),p=S(t[1]),h=C(),v=S(y),k=S("!"),A=C(),T&&T.c(),z=C(),b&&b.c(),q=Et(),u(e,"class","result-icon success svelte-1v74pgf"),u(n,"class","result-title svelte-1v74pgf"),u(d,"class","svelte-1v74pgf"),u(c,"class","result-message svelte-1v74pgf")},m(_,F){M(_,e,F),M(_,l,F),M(_,n,F),i(n,r),M(_,o,F),M(_,c,F),i(c,a),i(c,m),i(c,d),i(d,p),i(c,h),i(c,v),i(c,k),M(_,A,F),T&&T.m(_,F),M(_,z,F),b&&b.m(_,F),M(_,q,F)},p(_,F){F&16&&s!==(s=_[4].correct+"")&&E(r,s),F&16&&f!==(f=_[4].correctMessage+"")&&E(a,f),F&2&&E(p,_[1]),F&18&&y!==(y=(_[1]===1?_[4].hit:_[4].hits)+"")&&E(v,y),_[5]&&!_[3]?T?T.p(_,F):(T=el(_),T.c(),T.m(z.parentNode,z)):T&&(T.d(1),T=null),_[3]?b?b.p(_,F):(b=tl(_),b.c(),b.m(q.parentNode,q)):b&&(b.d(1),b=null)},d(_){_&&(I(e),I(l),I(n),I(o),I(c),I(A),I(z),I(q)),T&&T.d(_),b&&b.d(_)}}}function xt(t){let e,l=t[4].language==="Spr√•k"?"Streak reset! Try again.":"Rekke tilbakestilt! Pr√∏v igjen.",n;return{c(){e=g("p"),n=S(l),u(e,"class","streak-lost svelte-1v74pgf")},m(s,r){M(s,e,r),i(e,n)},p(s,r){r&16&&l!==(l=s[4].language==="Spr√•k"?"Streak reset! Try again.":"Rekke tilbakestilt! Pr√∏v igjen.")&&E(n,l)},d(s){s&&I(e)}}}function el(t){let e,l,n,s,r,o,c;function f(d,p){return d[7]===1?kn:vn}let a=f(t),m=a(t);return{c(){e=g("div"),l=g("p"),m.c(),n=C(),s=g("div"),r=g("div"),o=C(),c=g("div"),u(l,"class","streak-text svelte-1v74pgf"),u(r,"class","streak-dot svelte-1v74pgf"),H(r,"filled",t[7]>=1),u(c,"class","streak-dot svelte-1v74pgf"),H(c,"filled",t[7]>=2),u(s,"class","streak-progress svelte-1v74pgf"),u(e,"class","streak-info svelte-1v74pgf")},m(d,p){M(d,e,p),i(e,l),m.m(l,null),i(e,n),i(e,s),i(s,r),i(s,o),i(s,c)},p(d,p){a===(a=f(d))&&m?m.p(d,p):(m.d(1),m=a(d),m&&(m.c(),m.m(l,null))),p&128&&H(r,"filled",d[7]>=1),p&128&&H(c,"filled",d[7]>=2)},d(d){d&&I(e),m.d()}}}function vn(t){let e=t[4].language==="Spr√•k"?"Get 2 correct answers to win this rare card!":"F√• 2 riktige svar for √• vinne dette sjeldne kortet!",l;return{c(){l=S(e)},m(n,s){M(n,l,s)},p(n,s){s&16&&e!==(e=n[4].language==="Spr√•k"?"Get 2 correct answers to win this rare card!":"F√• 2 riktige svar for √• vinne dette sjeldne kortet!")&&E(l,e)},d(n){n&&I(l)}}}function kn(t){let e=t[4].language==="Spr√•k"?"One more correct to win this card!":"√ân til riktig for √• vinne dette kortet!",l;return{c(){l=S(e)},m(n,s){M(n,l,s)},p(n,s){s&16&&e!==(e=n[4].language==="Spr√•k"?"One more correct to win this card!":"√ân til riktig for √• vinne dette kortet!")&&E(l,e)},d(n){n&&I(l)}}}function tl(t){let e,l,n=t[4].youWonThisCard+"",s,r,o,c,f,a,m,d,p,h=t[3].name+"",y;return{c(){e=g("div"),l=g("h3"),s=S(n),r=C(),o=g("div"),c=g("div"),f=g("img"),d=C(),p=g("span"),y=S(h),u(l,"class","svelte-1v74pgf"),ge(f.src,a=t[3].image)||u(f,"src",a),u(f,"alt",m=t[3].name),u(f,"class","svelte-1v74pgf"),u(p,"class","card-name svelte-1v74pgf"),u(c,"class","mini-card svelte-1v74pgf"),u(o,"class","cards-grid svelte-1v74pgf"),u(e,"class","won-cards svelte-1v74pgf")},m(v,k){M(v,e,k),i(e,l),i(l,s),i(e,r),i(e,o),i(o,c),i(c,f),i(c,d),i(c,p),i(p,y)},p(v,k){k&16&&n!==(n=v[4].youWonThisCard+"")&&E(s,n),k&8&&!ge(f.src,a=v[3].image)&&u(f,"src",a),k&8&&m!==(m=v[3].name)&&u(f,"alt",m),k&8&&h!==(h=v[3].name+"")&&E(y,h)},d(v){v&&I(e)}}}function bn(t){let e,l,n,s,r=t[4].nextQuestion+"",o,c,f;function a(p,h){return p[0]?_n:pn}let m=a(t),d=m(t);return{c(){e=g("div"),l=g("div"),d.c(),n=C(),s=g("button"),o=S(r),u(l,"class","result-card svelte-1v74pgf"),H(l,"correct",t[0]),H(l,"incorrect",!t[0]),u(s,"class","next-btn btn-primary svelte-1v74pgf"),u(e,"class","result-view svelte-1v74pgf")},m(p,h){M(p,e,h),i(e,l),d.m(l,null),i(e,n),i(e,s),i(s,o),c||(f=B(s,"click",t[8]),c=!0)},p(p,[h]){m===(m=a(p))&&d?d.p(p,h):(d.d(1),d=m(p),d&&(d.c(),d.m(l,null))),h&1&&H(l,"correct",p[0]),h&1&&H(l,"incorrect",!p[0]),h&16&&r!==(r=p[4].nextQuestion+"")&&E(o,r)},i:J,o:J,d(p){p&&I(e),d.d(),c=!1,f()}}}function wn(t,e,l){let{isCorrect:n}=e,{correctAnswer:s}=e,{userAnswer:r}=e,{wonCard:o}=e,{t:c}=e,{needsStreak:f=!1}=e,{streakProgress:a=0}=e,{currentStreak:m=0}=e;const d=it();function p(){d("next")}return t.$$set=h=>{"isCorrect"in h&&l(0,n=h.isCorrect),"correctAnswer"in h&&l(1,s=h.correctAnswer),"userAnswer"in h&&l(2,r=h.userAnswer),"wonCard"in h&&l(3,o=h.wonCard),"t"in h&&l(4,c=h.t),"needsStreak"in h&&l(5,f=h.needsStreak),"streakProgress"in h&&l(6,a=h.streakProgress),"currentStreak"in h&&l(7,m=h.currentStreak)},[n,s,r,o,c,f,a,m,p]}class yn extends ye{constructor(e){super(),we(this,e,wn,bn,pe,{isCorrect:0,correctAnswer:1,userAnswer:2,wonCard:3,t:4,needsStreak:5,streakProgress:6,currentStreak:7})}}function Cn(){try{const t=tn(),e=new Blob([t],{type:"application/json"}),l=URL.createObjectURL(e),n=document.createElement("a");n.href=l,n.download=`pokemon-collection-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(l)}catch(t){throw console.error("Error downloading backup:",t),new Error("Failed to download backup")}}function Sn(t){return new Promise(e=>{const l=new FileReader;l.onload=n=>{var s;try{const r=(s=n.target)==null?void 0:s.result,o=ln(r);e(o)}catch(r){console.error("Error reading file:",r),e({success:!1,error:"Failed to read file"})}},l.onerror=()=>{e({success:!1,error:"Failed to read file"})},l.readAsText(t)})}function ll(t,e,l){const n=t.slice();return n[33]=e[l],n}function nl(t,e,l){const n=t.slice();return n[36]=e[l],n}function sl(t,e,l){const n=t.slice();return n[33]=e[l],n}function rl(t,e,l){const n=t.slice();return n[36]=e[l],n}function zn(t){let e=t[1].language==="Spr√•k"?`Defeat ${t[10]>0?t[10].toLocaleString():0} HP to unlock 5 rare cards`:`Beseir ${t[10]>0?t[10].toLocaleString():0} HP for √• l√•se opp 5 sjeldne kort`,l;return{c(){l=S(e)},m(n,s){M(n,l,s)},p(n,s){s[0]&1026&&e!==(e=n[1].language==="Spr√•k"?`Defeat ${n[10]>0?n[10].toLocaleString():0} HP to unlock 5 rare cards`:`Beseir ${n[10]>0?n[10].toLocaleString():0} HP for √• l√•se opp 5 sjeldne kort`)&&E(l,e)},d(n){n&&I(l)}}}function An(t){let e=t[1].language==="Spr√•k"?"Rare cards unlocked!":"Sjeldne kort l√•st opp!",l;return{c(){l=S(e)},m(n,s){M(n,l,s)},p(n,s){s[0]&2&&e!==(e=n[1].language==="Spr√•k"?"Rare cards unlocked!":"Sjeldne kort l√•st opp!")&&E(l,e)},d(n){n&&I(l)}}}function ol(t){let e,l;return{c(){e=g("div"),l=g("div"),u(l,"class","hp-progress-fill svelte-1ykzz21"),yt(l,"width",t[8]+"%"),u(e,"class","hp-progress-bar svelte-1ykzz21")},m(n,s){M(n,e,s),i(e,l)},p(n,s){s[0]&256&&yt(l,"width",n[8]+"%")},d(n){n&&I(e)}}}function il(t){let e,l,n,s,r,o,c,f;function a(){return t[24](t[36])}return{c(){e=g("button"),l=g("img"),r=C(),ge(l.src,n=t[36].image)||u(l,"src",n),u(l,"alt",s=t[36].name),u(l,"class","svelte-1ykzz21"),H(l,"locked",!t[9]),u(e,"class","rare-thumbnail svelte-1ykzz21"),e.disabled=o=!t[9],H(e,"unlocked",t[9])},m(m,d){M(m,e,d),i(e,l),i(e,r),c||(f=B(e,"click",a),c=!0)},p(m,d){t=m,d[0]&16&&!ge(l.src,n=t[36].image)&&u(l,"src",n),d[0]&16&&s!==(s=t[36].name)&&u(l,"alt",s),d[0]&512&&H(l,"locked",!t[9]),d[0]&512&&o!==(o=!t[9])&&(e.disabled=o),d[0]&512&&H(e,"unlocked",t[9])},d(m){m&&I(e),c=!1,f()}}}function al(t){let e,l=t[6].text+"",n;return{c(){e=g("div"),n=S(l),u(e,"class","message svelte-1ykzz21"),H(e,"success",t[6].type==="success"),H(e,"error",t[6].type==="error")},m(s,r){M(s,e,r),i(e,n)},p(s,r){r[0]&64&&l!==(l=s[6].text+"")&&E(n,l),r[0]&64&&H(e,"success",s[6].type==="success"),r[0]&64&&H(e,"error",s[6].type==="error")},d(s){s&&I(e)}}}function En(t){let e,l=se(t[0].cards),n=[];for(let s=0;s<l.length;s+=1)n[s]=dl(nl(t,l,s));return{c(){e=g("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","cards-grid svelte-1ykzz21")},m(s,r){M(s,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,r){if(r[0]&524289){l=se(s[0].cards);let o;for(o=0;o<l.length;o+=1){const c=nl(s,l,o);n[o]?n[o].p(c,r):(n[o]=dl(c),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(s){s&&I(e),ve(n,s)}}}function In(t){let e,l,n,s,r=t[1].noCardsYet+"",o,c,f,a=t[1].noCardsDescription+"",m;return{c(){e=g("div"),l=g("div"),l.textContent="üì¶",n=C(),s=g("h3"),o=S(r),c=C(),f=g("p"),m=S(a),u(l,"class","empty-icon svelte-1ykzz21"),u(s,"class","svelte-1ykzz21"),u(f,"class","svelte-1ykzz21"),u(e,"class","empty-state svelte-1ykzz21")},m(d,p){M(d,e,p),i(e,l),i(e,n),i(e,s),i(s,o),i(e,c),i(e,f),i(f,m)},p(d,p){p[0]&2&&r!==(r=d[1].noCardsYet+"")&&E(o,r),p[0]&2&&a!==(a=d[1].noCardsDescription+"")&&E(m,a)},d(d){d&&I(e)}}}function cl(t){let e,l,n=t[36].hp+"",s;return{c(){e=g("span"),l=S("HP "),s=S(n),u(e,"class","hp svelte-1ykzz21")},m(r,o){M(r,e,o),i(e,l),i(e,s)},p(r,o){o[0]&1&&n!==(n=r[36].hp+"")&&E(s,n)},d(r){r&&I(e)}}}function ul(t){let e,l=se(t[36].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=fl(sl(t,l,s));return{c(){e=g("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","types svelte-1ykzz21")},m(s,r){M(s,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,r){if(r[0]&1){l=se(s[36].types);let o;for(o=0;o<l.length;o+=1){const c=sl(s,l,o);n[o]?n[o].p(c,r):(n[o]=fl(c),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(s){s&&I(e),ve(n,s)}}}function fl(t){let e,l=t[33]+"",n;return{c(){e=g("span"),n=S(l),u(e,"class","type svelte-1ykzz21")},m(s,r){M(s,e,r),i(e,n)},p(s,r){r[0]&1&&l!==(l=s[33]+"")&&E(n,l)},d(s){s&&I(e)}}}function dl(t){let e,l,n,s,r,o,c,f=t[36].name+"",a,m,d,p,h,y,v=t[36].hp&&cl(t),k=t[36].types&&t[36].types.length>0&&ul(t);function A(){return t[26](t[36])}return{c(){e=g("button"),l=g("img"),r=C(),o=g("div"),c=g("h4"),a=S(f),m=C(),v&&v.c(),d=C(),k&&k.c(),p=C(),ge(l.src,n=t[36].image)||u(l,"src",n),u(l,"alt",s=t[36].name),u(l,"class","svelte-1ykzz21"),u(c,"class","svelte-1ykzz21"),u(o,"class","card-details svelte-1ykzz21"),u(e,"class","collection-card svelte-1ykzz21")},m(z,q){M(z,e,q),i(e,l),i(e,r),i(e,o),i(o,c),i(c,a),i(o,m),v&&v.m(o,null),i(o,d),k&&k.m(o,null),i(e,p),h||(y=B(e,"click",A),h=!0)},p(z,q){t=z,q[0]&1&&!ge(l.src,n=t[36].image)&&u(l,"src",n),q[0]&1&&s!==(s=t[36].name)&&u(l,"alt",s),q[0]&1&&f!==(f=t[36].name+"")&&E(a,f),t[36].hp?v?v.p(t,q):(v=cl(t),v.c(),v.m(o,d)):v&&(v.d(1),v=null),t[36].types&&t[36].types.length>0?k?k.p(t,q):(k=ul(t),k.c(),k.m(o,null)):k&&(k.d(1),k=null)},d(z){z&&I(e),v&&v.d(),k&&k.d(),h=!1,y()}}}function gl(t){let e,l,n,s,r,o,c,f,a,m,d=t[3].name+"",p,h,y,v,k,A,z=t[3].hp&&ml(t),q=t[3].types&&t[3].types.length>0&&hl(t),T=t[3].rarity&&_l(t);return{c(){e=g("div"),l=g("div"),n=g("button"),n.textContent="√ó",s=C(),r=g("img"),f=C(),a=g("div"),m=g("h3"),p=S(d),h=C(),z&&z.c(),y=C(),q&&q.c(),v=C(),T&&T.c(),u(n,"class","close-modal svelte-1ykzz21"),ge(r.src,o=t[3].image)||u(r,"src",o),u(r,"alt",c=t[3].name),u(r,"class","modal-card-image svelte-1ykzz21"),u(m,"class","svelte-1ykzz21"),u(a,"class","modal-card-info svelte-1ykzz21"),u(l,"class","card-modal svelte-1ykzz21"),u(l,"role","dialog"),u(e,"class","dialog-overlay svelte-1ykzz21"),u(e,"role","button"),u(e,"tabindex","-1")},m(b,_){M(b,e,_),i(e,l),i(l,n),i(l,s),i(l,r),i(l,f),i(l,a),i(a,m),i(m,p),i(a,h),z&&z.m(a,null),i(a,y),q&&q.m(a,null),i(a,v),T&&T.m(a,null),k||(A=[B(n,"click",t[20]),B(l,"click",yl(t[23])),B(e,"click",t[20]),B(e,"keydown",t[27])],k=!0)},p(b,_){_[0]&8&&!ge(r.src,o=b[3].image)&&u(r,"src",o),_[0]&8&&c!==(c=b[3].name)&&u(r,"alt",c),_[0]&8&&d!==(d=b[3].name+"")&&E(p,d),b[3].hp?z?z.p(b,_):(z=ml(b),z.c(),z.m(a,y)):z&&(z.d(1),z=null),b[3].types&&b[3].types.length>0?q?q.p(b,_):(q=hl(b),q.c(),q.m(a,v)):q&&(q.d(1),q=null),b[3].rarity?T?T.p(b,_):(T=_l(b),T.c(),T.m(a,null)):T&&(T.d(1),T=null)},d(b){b&&I(e),z&&z.d(),q&&q.d(),T&&T.d(),k=!1,ae(A)}}}function ml(t){let e,l,n=t[3].hp+"",s;return{c(){e=g("div"),l=S("HP: "),s=S(n),u(e,"class","modal-hp svelte-1ykzz21")},m(r,o){M(r,e,o),i(e,l),i(e,s)},p(r,o){o[0]&8&&n!==(n=r[3].hp+"")&&E(s,n)},d(r){r&&I(e)}}}function hl(t){let e,l=se(t[3].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=pl(ll(t,l,s));return{c(){e=g("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","modal-types svelte-1ykzz21")},m(s,r){M(s,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,r){if(r[0]&8){l=se(s[3].types);let o;for(o=0;o<l.length;o+=1){const c=ll(s,l,o);n[o]?n[o].p(c,r):(n[o]=pl(c),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(s){s&&I(e),ve(n,s)}}}function pl(t){let e,l=t[33]+"",n;return{c(){e=g("span"),n=S(l),u(e,"class","modal-type svelte-1ykzz21")},m(s,r){M(s,e,r),i(e,n)},p(s,r){r[0]&8&&l!==(l=s[33]+"")&&E(n,l)},d(s){s&&I(e)}}}function _l(t){let e,l,n=t[3].rarity+"",s;return{c(){e=g("div"),l=S("Rarity: "),s=S(n),u(e,"class","modal-rarity svelte-1ykzz21")},m(r,o){M(r,e,o),i(e,l),i(e,s)},p(r,o){o[0]&8&&n!==(n=r[3].rarity+"")&&E(s,n)},d(r){r&&I(e)}}}function vl(t){let e,l,n,s=t[1].clearCollectionTitle+"",r,o,c,f=t[1].clearCollectionMessage+"",a,m,d,p,h=t[1].cancel+"",y,v,k,A=t[1].clearCollection+"",z,q,T;return{c(){e=g("div"),l=g("div"),n=g("h3"),r=S(s),o=C(),c=g("p"),a=S(f),m=C(),d=g("div"),p=g("button"),y=S(h),v=C(),k=g("button"),z=S(A),u(n,"class","svelte-1ykzz21"),u(c,"class","svelte-1ykzz21"),u(p,"class","btn-secondary"),u(k,"class","btn-error"),u(d,"class","dialog-actions svelte-1ykzz21"),u(l,"class","dialog svelte-1ykzz21"),u(l,"role","dialog"),u(e,"class","dialog-overlay svelte-1ykzz21"),u(e,"role","button"),u(e,"tabindex","-1")},m(b,_){M(b,e,_),i(e,l),i(l,n),i(n,r),i(l,o),i(l,c),i(c,a),i(l,m),i(l,d),i(d,p),i(p,y),i(d,v),i(d,k),i(k,z),q||(T=[B(p,"click",t[16]),B(k,"click",t[17]),B(l,"click",yl(t[22])),B(l,"keydown",Ln),B(e,"click",t[16]),B(e,"keydown",t[28])],q=!0)},p(b,_){_[0]&2&&s!==(s=b[1].clearCollectionTitle+"")&&E(r,s),_[0]&2&&f!==(f=b[1].clearCollectionMessage+"")&&E(a,f),_[0]&2&&h!==(h=b[1].cancel+"")&&E(y,h),_[0]&2&&A!==(A=b[1].clearCollection+"")&&E(z,A)},d(b){b&&I(e),q=!1,ae(T)}}}function Tn(t){let e,l,n,s,r,o,c,f,a,m=t[1].yourCollection+"",d,p,h,y,v,k=(t[1].language||"Language")+"",A,z,q,T,b,_,F,j,R,N=t[1].exportBackup+"",O,K,le,oe=t[1].importBackup+"",ce,X,re,D=t[1].clearThisSet+"",V,w,P,Y,W,U,he,Ce,ne=t[0].cards.length+"",De,He,Pe,Ye=t[1].cardsCollected+"",at,Lt,Se,Ve,Ue=t[0].stats.totalQuestions+"",ct,Mt,Ke,We=t[1].questionsAnswered+"",ut,qt,ze,Je,Ge=t[0].stats.correctAnswers+"",ft,Nt,Xe,Ze=t[1].correctAnswers+"",dt,Dt,Ae,Re,gt,Pt,Rt,$e,xe=t[1].accuracy+"",mt,Ft,ht,Fe,Qe,pt,Qt;function Ot(L,Q){return L[9]?An:zn}let et=Ot(t),ue=et(t),$=!t[9]&&ol(t),Ee=se(t[4]),Z=[];for(let L=0;L<Ee.length;L+=1)Z[L]=il(rl(t,Ee,L));let x=t[6]&&al(t);function Bt(L,Q){return L[0].cards.length===0?In:En}let tt=Bt(t),fe=tt(t),ee=t[3]&&gl(t),te=t[7]&&vl(t);return{c(){e=g("div"),l=g("div"),n=g("div"),ue.c(),s=C(),$&&$.c(),r=C(),o=g("div");for(let L=0;L<Z.length;L+=1)Z[L].c();c=C(),f=g("div"),a=g("h2"),d=S(m),p=C(),h=g("div"),y=g("div"),v=g("label"),A=S(k),z=S(":"),q=C(),T=g("select"),b=g("option"),b.textContent="English",_=g("option"),_.textContent="Norsk",F=C(),j=g("div"),R=g("button"),O=S(N),K=C(),le=g("button"),ce=S(oe),X=C(),re=g("button"),V=S(D),w=C(),P=g("input"),Y=C(),x&&x.c(),W=C(),U=g("div"),he=g("div"),Ce=g("div"),De=S(ne),He=C(),Pe=g("div"),at=S(Ye),Lt=C(),Se=g("div"),Ve=g("div"),ct=S(Ue),Mt=C(),Ke=g("div"),ut=S(We),qt=C(),ze=g("div"),Je=g("div"),ft=S(Ge),Nt=C(),Xe=g("div"),dt=S(Ze),Dt=C(),Ae=g("div"),Re=g("div"),gt=S(t[11]),Pt=S("%"),Rt=C(),$e=g("div"),mt=S(xe),Ft=C(),fe.c(),ht=C(),ee&&ee.c(),Fe=C(),te&&te.c(),Qe=Et(),u(n,"class","rare-section-text svelte-1ykzz21"),u(o,"class","rare-cards-thumbnails svelte-1ykzz21"),u(l,"class","rare-cards-section svelte-1ykzz21"),u(a,"class","svelte-1ykzz21"),u(v,"for","language-select"),u(v,"class","svelte-1ykzz21"),b.__value="en",Be(b,b.__value),u(b,"class","svelte-1ykzz21"),_.__value="no",Be(_,_.__value),u(_,"class","svelte-1ykzz21"),u(T,"id","language-select"),u(T,"class","language-selector svelte-1ykzz21"),u(y,"class","language-selector-container svelte-1ykzz21"),u(R,"class","btn-secondary"),u(le,"class","btn-secondary"),u(re,"class","btn-error"),u(P,"type","file"),u(P,"accept",".json"),yt(P,"display","none"),u(j,"class","header-actions svelte-1ykzz21"),u(h,"class","header-controls svelte-1ykzz21"),u(f,"class","collection-header svelte-1ykzz21"),u(Ce,"class","stat-value svelte-1ykzz21"),u(Pe,"class","stat-label svelte-1ykzz21"),u(he,"class","stat-card svelte-1ykzz21"),u(Ve,"class","stat-value svelte-1ykzz21"),u(Ke,"class","stat-label svelte-1ykzz21"),u(Se,"class","stat-card svelte-1ykzz21"),u(Je,"class","stat-value svelte-1ykzz21"),u(Xe,"class","stat-label svelte-1ykzz21"),u(ze,"class","stat-card svelte-1ykzz21"),u(Re,"class","stat-value svelte-1ykzz21"),u($e,"class","stat-label svelte-1ykzz21"),u(Ae,"class","stat-card svelte-1ykzz21"),u(U,"class","stats-section svelte-1ykzz21"),u(e,"class","collection-view svelte-1ykzz21")},m(L,Q){M(L,e,Q),i(e,l),i(l,n),ue.m(n,null),i(l,s),$&&$.m(l,null),i(l,r),i(l,o);for(let G=0;G<Z.length;G+=1)Z[G]&&Z[G].m(o,null);i(e,c),i(e,f),i(f,a),i(a,d),i(f,p),i(f,h),i(h,y),i(y,v),i(v,A),i(v,z),i(y,q),i(y,T),i(T,b),i(T,_),rt(T,t[2]),i(h,F),i(h,j),i(j,R),i(R,O),i(j,K),i(j,le),i(le,ce),i(j,X),i(j,re),i(re,V),i(j,w),i(j,P),t[25](P),i(e,Y),x&&x.m(e,null),i(e,W),i(e,U),i(U,he),i(he,Ce),i(Ce,De),i(he,He),i(he,Pe),i(Pe,at),i(U,Lt),i(U,Se),i(Se,Ve),i(Ve,ct),i(Se,Mt),i(Se,Ke),i(Ke,ut),i(U,qt),i(U,ze),i(ze,Je),i(Je,ft),i(ze,Nt),i(ze,Xe),i(Xe,dt),i(U,Dt),i(U,Ae),i(Ae,Re),i(Re,gt),i(Re,Pt),i(Ae,Rt),i(Ae,$e),i($e,mt),i(e,Ft),fe.m(e,null),M(L,ht,Q),ee&&ee.m(L,Q),M(L,Fe,Q),te&&te.m(L,Q),M(L,Qe,Q),pt||(Qt=[B(T,"change",t[18]),B(R,"click",t[12]),B(le,"click",t[13]),B(re,"click",t[15]),B(P,"change",t[14])],pt=!0)},p(L,Q){if(et===(et=Ot(L))&&ue?ue.p(L,Q):(ue.d(1),ue=et(L),ue&&(ue.c(),ue.m(n,null))),L[9]?$&&($.d(1),$=null):$?$.p(L,Q):($=ol(L),$.c(),$.m(l,r)),Q[0]&524816){Ee=se(L[4]);let G;for(G=0;G<Ee.length;G+=1){const jt=rl(L,Ee,G);Z[G]?Z[G].p(jt,Q):(Z[G]=il(jt),Z[G].c(),Z[G].m(o,null))}for(;G<Z.length;G+=1)Z[G].d(1);Z.length=Ee.length}Q[0]&2&&m!==(m=L[1].yourCollection+"")&&E(d,m),Q[0]&2&&k!==(k=(L[1].language||"Language")+"")&&E(A,k),Q[0]&4&&rt(T,L[2]),Q[0]&2&&N!==(N=L[1].exportBackup+"")&&E(O,N),Q[0]&2&&oe!==(oe=L[1].importBackup+"")&&E(ce,oe),Q[0]&2&&D!==(D=L[1].clearThisSet+"")&&E(V,D),L[6]?x?x.p(L,Q):(x=al(L),x.c(),x.m(e,W)):x&&(x.d(1),x=null),Q[0]&1&&ne!==(ne=L[0].cards.length+"")&&E(De,ne),Q[0]&2&&Ye!==(Ye=L[1].cardsCollected+"")&&E(at,Ye),Q[0]&1&&Ue!==(Ue=L[0].stats.totalQuestions+"")&&E(ct,Ue),Q[0]&2&&We!==(We=L[1].questionsAnswered+"")&&E(ut,We),Q[0]&1&&Ge!==(Ge=L[0].stats.correctAnswers+"")&&E(ft,Ge),Q[0]&2&&Ze!==(Ze=L[1].correctAnswers+"")&&E(dt,Ze),Q[0]&2048&&E(gt,L[11]),Q[0]&2&&xe!==(xe=L[1].accuracy+"")&&E(mt,xe),tt===(tt=Bt(L))&&fe?fe.p(L,Q):(fe.d(1),fe=tt(L),fe&&(fe.c(),fe.m(e,null))),L[3]?ee?ee.p(L,Q):(ee=gl(L),ee.c(),ee.m(Fe.parentNode,Fe)):ee&&(ee.d(1),ee=null),L[7]?te?te.p(L,Q):(te=vl(L),te.c(),te.m(Qe.parentNode,Qe)):te&&(te.d(1),te=null)},i:J,o:J,d(L){L&&(I(e),I(ht),I(Fe),I(Qe)),ue.d(),$&&$.d(),ve(Z,L),t[25](null),x&&x.d(),fe.d(),ee&&ee.d(L),te&&te.d(L),pt=!1,ae(Qt)}}}const Ln=()=>{};function Mn(t,e,l){let n,s,r,o,c;wt(t,ot,w=>l(21,c=w));let{collection:f}=e,{t:a}=e,{language:m}=e,d=null,p=[],h=[];zl(async()=>{await y()});async function y(){try{p=await At(c);const w=[...p].sort((P,Y)=>{const W=parseInt(P.localId||"0");return parseInt(Y.localId||"0")-W});l(4,h=w.slice(0,5))}catch(w){console.error("Error loading rare cards:",w)}}const v=it();let k,A=null,z=!1;function q(){try{Cn(),_(a.collectionExported,"success")}catch{_(a.exportFailed,"error")}}function T(){k.click()}async function b(w){var W;const P=w.target,Y=(W=P.files)==null?void 0:W[0];if(Y){try{const U=await Sn(Y);U.success?(_(a.collectionImported,"success"),v("refresh")):_(U.error||a.importFailed,"error")}catch{_(a.importFailed,"error")}P.value=""}}function _(w,P){l(6,A={text:w,type:P}),setTimeout(()=>{l(6,A=null)},3e3)}function F(){l(7,z=!0)}function j(){l(7,z=!1)}function R(){try{en(),l(7,z=!1),_(a.collectionCleared,"success"),v("refresh")}catch{_(a.clearFailed,"error")}}function N(w){const P=w.target;v("languageChange",P.value)}function O(w){l(3,d=w)}function K(){l(3,d=null)}function le(w){Yt.call(this,t,w)}function oe(w){Yt.call(this,t,w)}const ce=w=>r&&O({...w,collectedAt:new Date().toISOString()});function X(w){Ct[w?"unshift":"push"](()=>{k=w,l(5,k)})}const re=w=>O(w),D=w=>w.key==="Escape"&&K(),V=w=>w.key==="Escape"&&j();return t.$$set=w=>{"collection"in w&&l(0,f=w.collection),"t"in w&&l(1,a=w.t),"language"in w&&l(2,m=w.language)},t.$$.update=()=>{t.$$.dirty[0]&1&&l(11,n=f.stats.totalQuestions>0?Math.round(f.stats.correctAnswers/f.stats.totalQuestions*100):0),t.$$.dirty[0]&1&&l(10,s=16e3-(f.stats.totalHpDefeated||0)),t.$$.dirty[0]&2097153&&l(9,r=f.unlockedRareSets&&f.unlockedRareSets[c]||!1),t.$$.dirty[0]&1&&l(8,o=Math.min(f.stats.totalHpDefeated/16e3*100,100))},[f,a,m,d,h,k,A,z,o,r,s,n,q,T,b,F,j,R,N,O,K,c,le,oe,ce,X,re,D,V]}class qn extends ye{constructor(e){super(),we(this,e,Mn,Tn,pe,{collection:0,t:1,language:2},null,[-1,-1])}}function Nn(t){let e,l,n,s,r;return{c(){e=g("div"),l=g("div"),n=C(),s=g("p"),r=S(t[0]),u(l,"class","spinner svelte-1lxornd"),u(s,"class","svelte-1lxornd"),u(e,"class","loading-view svelte-1lxornd")},m(o,c){M(o,e,c),i(e,l),i(e,n),i(e,s),i(s,r)},p(o,[c]){c&1&&E(r,o[0])},i:J,o:J,d(o){o&&I(e)}}}function Dn(t,e,l){let{message:n="Loading..."}=e;return t.$$set=s=>{"message"in s&&l(0,n=s.message)},[n]}class Pn extends ye{constructor(e){super(),we(this,e,Dn,Nn,pe,{message:0})}}function Rn(t){let e,l,n,s,r,o,c,f,a,m,d;return{c(){e=g("div"),l=g("div"),l.textContent="‚ö†Ô∏è",n=C(),s=g("h2"),s.textContent="Oops!",r=C(),o=g("p"),c=S(t[0]),f=C(),a=g("button"),a.textContent="Try Again",u(l,"class","error-icon svelte-na0xmw"),u(s,"class","svelte-na0xmw"),u(o,"class","svelte-na0xmw"),u(a,"class","btn-primary"),u(e,"class","error-view svelte-na0xmw")},m(p,h){M(p,e,h),i(e,l),i(e,n),i(e,s),i(e,r),i(e,o),i(o,c),i(e,f),i(e,a),m||(d=B(a,"click",t[1]),m=!0)},p(p,[h]){h&1&&E(c,p[0])},i:J,o:J,d(p){p&&I(e),m=!1,d()}}}function Fn(t,e,l){let{message:n="Something went wrong"}=e;const s=it();function r(){s("retry")}return t.$$set=o=>{"message"in o&&l(0,n=o.message)},[n,r]}class Qn extends ye{constructor(e){super(),we(this,e,Fn,Rn,pe,{message:0})}}function On(t,e,l){const n=t.slice();return n[31]=e[l],n}function Bn(t){let e,l;return e=new qn({props:{collection:t[4],t:t[14],language:t[0]}}),e.$on("refresh",t[24]),e.$on("languageChange",t[26]),{c(){Ne(e.$$.fragment)},m(n,s){ke(e,n,s),l=!0},p(n,s){const r={};s[0]&16&&(r.collection=n[4]),s[0]&16384&&(r.t=n[14]),s[0]&1&&(r.language=n[0]),e.$set(r)},i(n){l||(ie(e.$$.fragment,n),l=!0)},o(n){me(e.$$.fragment,n),l=!1},d(n){be(e,n)}}}function jn(t){let e,l,n,s;const r=[Un,Vn,Yn,Hn],o=[];function c(f,a){return f[1]==="loading"?0:f[1]==="quiz"&&f[2]?1:f[1]==="result"&&f[2]?2:f[1]==="error"?3:-1}return~(e=c(t))&&(l=o[e]=r[e](t)),{c(){l&&l.c(),n=Et()},m(f,a){~e&&o[e].m(f,a),M(f,n,a),s=!0},p(f,a){let m=e;e=c(f),e===m?~e&&o[e].p(f,a):(l&&(El(),me(o[m],1,1,()=>{o[m]=null}),Il()),~e?(l=o[e],l?l.p(f,a):(l=o[e]=r[e](f),l.c()),ie(l,1),l.m(n.parentNode,n)):l=null)},i(f){s||(ie(l),s=!0)},o(f){me(l),s=!1},d(f){f&&I(n),~e&&o[e].d(f)}}}function Hn(t){let e,l;return e=new Qn({props:{message:t[8]}}),e.$on("retry",t[21]),{c(){Ne(e.$$.fragment)},m(n,s){ke(e,n,s),l=!0},p(n,s){const r={};s[0]&256&&(r.message=n[8]),e.$set(r)},i(n){l||(ie(e.$$.fragment,n),l=!0)},o(n){me(e.$$.fragment,n),l=!1},d(n){be(e,n)}}}function Yn(t){let e,l;return e=new yn({props:{isCorrect:t[5],correctAnswer:t[2].correctAnswer,userAnswer:t[6],wonCard:t[7],t:t[14],needsStreak:t[12],streakProgress:t[13],currentStreak:t[4].currentStreak||0}}),e.$on("next",t[20]),{c(){Ne(e.$$.fragment)},m(n,s){ke(e,n,s),l=!0},p(n,s){const r={};s[0]&32&&(r.isCorrect=n[5]),s[0]&4&&(r.correctAnswer=n[2].correctAnswer),s[0]&64&&(r.userAnswer=n[6]),s[0]&128&&(r.wonCard=n[7]),s[0]&16384&&(r.t=n[14]),s[0]&4096&&(r.needsStreak=n[12]),s[0]&8192&&(r.streakProgress=n[13]),s[0]&16&&(r.currentStreak=n[4].currentStreak||0),e.$set(r)},i(n){l||(ie(e.$$.fragment,n),l=!0)},o(n){me(e.$$.fragment,n),l=!1},d(n){be(e,n)}}}function Vn(t){var m;let e,l,n,s,r,o,c,f=se(bt),a=[];for(let d=0;d<f.length;d+=1)a[d]=Kn(On(t,f,d));return s=new hn({props:{question:t[2],t:t[14],currentSet:((m=bt.find(t[25]))==null?void 0:m.name)||""}}),s.$on("answer",t[19]),{c(){e=g("div"),l=g("select");for(let d=0;d<a.length;d+=1)a[d].c();n=C(),Ne(s.$$.fragment),u(l,"class","set-selector svelte-162mefo"),u(e,"class","set-selector-container svelte-162mefo")},m(d,p){M(d,e,p),i(e,l);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(l,null);rt(l,t[15]),M(d,n,p),ke(s,d,p),r=!0,o||(c=B(l,"change",t[16]),o=!0)},p(d,p){var y;(!r||p[0]&32768)&&rt(l,d[15]);const h={};p[0]&4&&(h.question=d[2]),p[0]&16384&&(h.t=d[14]),p[0]&2048&&(h.currentSet=((y=bt.find(d[25]))==null?void 0:y.name)||""),s.$set(h)},i(d){r||(ie(s.$$.fragment,d),r=!0)},o(d){me(s.$$.fragment,d),r=!1},d(d){d&&(I(e),I(n)),ve(a,d),be(s,d),o=!1,c()}}}function Un(t){let e,l;return e=new Pn({props:{message:t[14].loading}}),{c(){Ne(e.$$.fragment)},m(n,s){ke(e,n,s),l=!0},p(n,s){const r={};s[0]&16384&&(r.message=n[14].loading),e.$set(r)},i(n){l||(ie(e.$$.fragment,n),l=!0)},o(n){me(e.$$.fragment,n),l=!1},d(n){be(e,n)}}}function Kn(t){let e;return{c(){e=g("option"),e.textContent=`${t[31].name}`,e.__value=t[31].id,Be(e,e.__value),u(e,"class","svelte-162mefo")},m(l,n){M(l,e,n)},p:J,d(l){l&&I(e)}}}function kl(t){let e,l,n,s=t[0]==="en"?"Choose Your Language":"Velg spr√•k",r,o,c,f=t[0]==="en"?"You can change this anytime in My Collection":"Du kan endre dette n√•r som helst i Min samling",a,m,d,p,h,y,v,k;return{c(){e=g("div"),l=g("div"),n=g("h2"),r=S(s),o=C(),c=g("p"),a=S(f),m=C(),d=g("div"),p=g("button"),p.innerHTML='<span class="flag svelte-162mefo">üá¨üáß</span> <span>English</span>',h=C(),y=g("button"),y.innerHTML='<span class="flag svelte-162mefo">üá≥üá¥</span> <span>Norsk</span>',u(n,"class","svelte-162mefo"),u(c,"class","svelte-162mefo"),u(p,"class","language-btn svelte-162mefo"),u(y,"class","language-btn svelte-162mefo"),u(d,"class","language-buttons svelte-162mefo"),u(l,"class","dialog language-dialog svelte-162mefo"),u(e,"class","dialog-overlay svelte-162mefo"),u(e,"role","button"),u(e,"tabindex","-1")},m(A,z){M(A,e,z),i(e,l),i(l,n),i(n,r),i(l,o),i(l,c),i(c,a),i(l,m),i(l,d),i(d,p),i(d,h),i(d,y),v||(k=[B(p,"click",t[27]),B(y,"click",t[28])],v=!0)},p(A,z){z[0]&1&&s!==(s=A[0]==="en"?"Choose Your Language":"Velg spr√•k")&&E(r,s),z[0]&1&&f!==(f=A[0]==="en"?"You can change this anytime in My Collection":"Du kan endre dette n√•r som helst i Min samling")&&E(a,f)},d(A){A&&I(e),v=!1,ae(k)}}}function Wn(t){var V;let e,l,n,s,r=t[14].appTitle+"",o,c,f,a,m=t[14].playQuiz+"",d,p,h,y=t[14].myCollection+"",v,k,A=(((V=t[4])==null?void 0:V.cards.length)||0)+"",z,q,T=t[3].length+"",b,_,F,j,R,N,O,K,le,oe;const ce=[jn,Bn],X=[];function re(w,P){return w[9]==="quiz"?0:1}R=re(t),N=X[R]=ce[R](t);let D=t[10]&&kl(t);return{c(){e=g("div"),l=g("header"),n=g("div"),s=g("h1"),o=S(r),c=C(),f=g("nav"),a=g("button"),d=S(m),p=C(),h=g("button"),v=S(y),k=S(" ("),z=S(A),q=S("/"),b=S(T),_=S(")"),F=C(),j=g("main"),N.c(),O=C(),D&&D.c(),u(s,"class","app-title svelte-162mefo"),u(a,"class","nav-btn svelte-162mefo"),H(a,"active",t[9]==="quiz"),u(h,"class","nav-btn svelte-162mefo"),H(h,"active",t[9]==="collection"),u(f,"class","svelte-162mefo"),u(n,"class","header-content svelte-162mefo"),u(l,"class","app-header svelte-162mefo"),u(j,"class","svelte-162mefo"),u(e,"class","app svelte-162mefo")},m(w,P){M(w,e,P),i(e,l),i(l,n),i(n,s),i(s,o),i(n,c),i(n,f),i(f,a),i(a,d),i(f,p),i(f,h),i(h,v),i(h,k),i(h,z),i(h,q),i(h,b),i(h,_),i(e,F),i(e,j),X[R].m(j,null),i(e,O),D&&D.m(e,null),K=!0,le||(oe=[B(a,"click",t[23]),B(h,"click",t[22])],le=!0)},p(w,P){var W;(!K||P[0]&16384)&&r!==(r=w[14].appTitle+"")&&E(o,r),(!K||P[0]&16384)&&m!==(m=w[14].playQuiz+"")&&E(d,m),(!K||P[0]&512)&&H(a,"active",w[9]==="quiz"),(!K||P[0]&16384)&&y!==(y=w[14].myCollection+"")&&E(v,y),(!K||P[0]&16)&&A!==(A=(((W=w[4])==null?void 0:W.cards.length)||0)+"")&&E(z,A),(!K||P[0]&8)&&T!==(T=w[3].length+"")&&E(b,T),(!K||P[0]&512)&&H(h,"active",w[9]==="collection");let Y=R;R=re(w),R===Y?X[R].p(w,P):(El(),me(X[Y],1,1,()=>{X[Y]=null}),Il(),N=X[R],N?N.p(w,P):(N=X[R]=ce[R](w),N.c()),ie(N,1),N.m(j,null)),w[10]?D?D.p(w,P):(D=kl(w),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},i(w){K||(ie(N),K=!0)},o(w){me(N),K=!1},d(w){w&&I(e),X[R].d(),D&&D.d(),le=!1,ae(oe)}}}function Jn(t,e,l){let n,s,r;wt(t,st,D=>l(0,s=D)),wt(t,ot,D=>l(15,r=D));let o="loading",c=null,f=[],a,m=!1,d=0,p=null,h="",y="quiz",v=!1,k=r,A=!1,z=0;zl(()=>{l(4,a=de()),localStorage.getItem("tcg-seen-language-dialog")?_():l(10,v=!0)});function q(D){const V=D.target;ot.set(V.value),l(11,k=V.value),l(3,f=[]),_()}function T(D){st.set(D)}function b(D){st.set(D),localStorage.setItem("tcg-seen-language-dialog","true"),l(10,v=!1),_()}async function _(){var D;try{l(1,o="loading"),f.length===0&&l(3,f=await At(k));const V=[...f].sort((ne,De)=>{const He=parseInt(ne.localId||"0");return parseInt(De.localId||"0")-He}),w=new Set(V.slice(0,5).map(ne=>ne.id)),P=new Set(a.cards.map(ne=>ne.id)),Y=f.filter(ne=>!P.has(ne.id)&&!w.has(ne.id));if(Y.length===0)throw new Error("Congratulations! You have collected all cards from this set!");const W=Xl(Y),U=await Gl(W.id,k),he=sn(U);if(!he)throw new Error("Could not generate a valid question. Please try again.");const Ce=((D=U.rarity)==null?void 0:D.toLowerCase())||"common";l(12,A=Ce!=="common"),a.streakCard&&a.streakCard.id===U.id?l(13,z=a.currentStreak||0):l(13,z=0),l(2,c=he),l(1,o="quiz")}catch(V){console.error("Error loading question:",V),l(8,h=V instanceof Error?V.message:"Failed to load question"),l(1,o="error")}}async function F(){a.unlockedRareSets||l(4,a.unlockedRareSets={},a),!a.unlockedRareSets[k]&&a.stats.totalHpDefeated>=16e3&&(f.length===0&&l(3,f=await At(k)),[...f].sort((w,P)=>{const Y=parseInt(w.localId||"0");return parseInt(P.localId||"0")-Y}).slice(0,5).forEach(w=>{const P={id:w.id,name:w.name,image:w.image,hp:w.hp,types:w.types,rarity:w.rarity,collectedAt:new Date().toISOString()};a.cards.some(W=>W.id===w.id)||a.cards.push(P)}),l(4,a.unlockedRareSets[k]=!0,a),qe(a))}function j(D){var w,P;if(!c)return;l(6,d=D.detail),l(5,m=rn(c,d));const V=m&&c.card.hp?c.card.hp:0;if(xl(m,V),l(7,p=null),m){let Y=!1;if(A?(l(4,a=de()),((w=a.streakCard)==null?void 0:w.id)===c.card.id?l(4,a.currentStreak=(a.currentStreak||0)+1,a):(l(4,a.streakCard=c.card,a),l(4,a.currentStreak=1,a)),a.currentStreak>=2&&(Y=!0,l(4,a.currentStreak=0,a),l(4,a.streakCard=void 0,a)),qe(a)):Y=!0,Y){const W={id:c.card.id,name:c.card.name,image:c.card.image,hp:c.card.hp,types:c.card.types,rarity:c.card.rarity,collectedAt:new Date().toISOString()};$l(W)&&l(7,p=c.card)}}else l(4,a=de()),A&&((P=a.streakCard)==null?void 0:P.id)===c.card.id&&(l(4,a.currentStreak=0,a),l(4,a.streakCard=void 0,a),qe(a));l(4,a=de()),m&&(F(),l(4,a=de())),l(1,o="result")}function R(){_()}function N(){_()}function O(){l(9,y="collection"),l(4,a=de())}function K(){l(9,y="quiz")}function le(){l(4,a=de())}const oe=D=>D.id===k,ce=D=>T(D.detail),X=()=>b("en"),re=()=>b("no");return t.$$.update=()=>{t.$$.dirty[0]&1&&l(14,n=cn(s))},[s,o,c,f,a,m,d,p,h,y,v,k,A,z,n,r,q,T,b,j,R,N,O,K,le,oe,ce,X,re]}class Gn extends ye{constructor(e){super(),we(this,e,Jn,Wn,pe,{},null,[-1,-1])}}new Gn({target:document.getElementById("app")});
