var bt=Object.defineProperty;var kt=(t,e,l)=>e in t?bt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var $e=(t,e,l)=>kt(t,typeof e!="symbol"?e+"":e,l);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function l(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=l(s);fetch(s.href,r)}})();function I(){}function at(t){return t()}function Ue(){return Object.create(null)}function J(t){t.forEach(at)}function ut(t){return typeof t=="function"}function X(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let we;function ce(t,e){return t===e?!0:(we||(we=document.createElement("a")),we.href=e,t===we.href)}function yt(t){return Object.keys(t).length===0}function i(t,e){t.appendChild(e)}function A(t,e,l){t.insertBefore(e,l||null)}function C(t){t.parentNode&&t.parentNode.removeChild(t)}function ke(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function d(t){return document.createElement(t)}function E(t){return document.createTextNode(t)}function k(){return E(" ")}function Me(){return E("")}function M(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function Ct(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function u(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function ft(t){return t===""?null:+t}function At(t){return Array.from(t.childNodes)}function T(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ve(t,e){t.value=e??""}function qt(t,e,l,n){t.style.setProperty(e,l,"")}function R(t,e,l){t.classList.toggle(e,!!l)}function Et(t,e,{bubbles:l=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:l,cancelable:n})}let he;function de(t){he=t}function dt(){if(!he)throw new Error("Function called outside component initialization");return he}function $t(t){dt().$$.on_mount.push(t)}function ye(){const t=dt();return(e,l,{cancelable:n=!1}={})=>{const s=t.$$.callbacks[e];if(s){const r=Et(e,l,{cancelable:n});return s.slice().forEach(o=>{o.call(t,r)}),!r.defaultPrevented}return!0}}function St(t,e){const l=t.$$.callbacks[e.type];l&&l.slice().forEach(n=>n.call(this,e))}const oe=[],Te=[];let ie=[];const He=[],Nt=Promise.resolve();let Oe=!1;function Tt(){Oe||(Oe=!0,Nt.then(ht))}function Le(t){ie.push(t)}const Se=new Set;let re=0;function ht(){if(re!==0)return;const t=he;do{try{for(;re<oe.length;){const e=oe[re];re++,de(e),Ot(e.$$)}}catch(e){throw oe.length=0,re=0,e}for(de(null),oe.length=0,re=0;Te.length;)Te.pop()();for(let e=0;e<ie.length;e+=1){const l=ie[e];Se.has(l)||(Se.add(l),l())}ie.length=0}while(oe.length);for(;He.length;)He.pop()();Oe=!1,Se.clear(),de(t)}function Ot(t){if(t.fragment!==null){t.update(),J(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Le)}}function Lt(t){const e=[],l=[];ie.forEach(n=>t.indexOf(n)===-1?e.push(n):l.push(n)),l.forEach(n=>n()),ie=e}const be=new Set;let K;function mt(){K={r:0,c:[],p:K}}function pt(){K.r||J(K.c),K=K.p}function B(t,e){t&&t.i&&(be.delete(t),t.i(e))}function V(t,e,l,n){if(t&&t.o){if(be.has(t))return;be.add(t),K.c.push(()=>{be.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}else n&&n()}function Y(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ae(t){t&&t.c()}function Z(t,e,l){const{fragment:n,after_update:s}=t.$$;n&&n.m(e,l),Le(()=>{const r=t.$$.on_mount.map(at).filter(ut);t.$$.on_destroy?t.$$.on_destroy.push(...r):J(r),t.$$.on_mount=[]}),s.forEach(Le)}function x(t,e){const l=t.$$;l.fragment!==null&&(Lt(l.after_update),J(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function Mt(t,e){t.$$.dirty[0]===-1&&(oe.push(t),Tt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ee(t,e,l,n,s,r,o=null,a=[-1]){const c=he;de(t);const f=t.$$={fragment:null,ctx:[],props:r,update:I,not_equal:s,bound:Ue(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Ue(),dirty:a,skip_bound:!1,root:e.target||c.$$.root};o&&o(f.root);let m=!1;if(f.ctx=l?l(t,e.props||{},(_,w,...p)=>{const v=p.length?p[0]:w;return f.ctx&&s(f.ctx[_],f.ctx[_]=v)&&(!f.skip_bound&&f.bound[_]&&f.bound[_](v),m&&Mt(t,_)),w}):[],f.update(),m=!0,J(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){const _=At(e.target);f.fragment&&f.fragment.l(_),_.forEach(C)}else f.fragment&&f.fragment.c();e.intro&&B(t.$$.fragment),Z(t,e.target,e.anchor),ht()}de(c)}class te{constructor(){$e(this,"$$");$e(this,"$$set")}$destroy(){x(this,1),this.$destroy=I}$on(e,l){if(!ut(l))return I;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const s=n.indexOf(l);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!yt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const It="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(It);const vt="https://api.tcgdex.net/v2/en",gt="swsh3";function _t(t){return`https://assets.tcgdex.net/en/swsh/${gt}/${t.split("-")[1]}/high.webp`}async function Pt(){try{const t=await fetch(`${vt}/sets/${gt}`);if(!t.ok)throw new Error("Failed to fetch cards from set");return((await t.json()).cards||[]).map(n=>({id:n.id,localId:n.localId,name:n.name,image:_t(n.id)}))}catch(t){throw console.error("Error fetching cards from set:",t),t}}async function zt(t){try{const e=await fetch(`${vt}/cards/${t}`);if(!e.ok)throw new Error("Failed to fetch card details");return{...await e.json(),image:_t(t)}}catch(e){throw console.error("Error fetching card details:",e),e}}function Qt(t){const e=Math.floor(Math.random()*t.length);return t[e]}const Ie="pokemon-tcg-collection",wt="1.0";function Ft(){return{totalQuestions:0,correctAnswers:0,incorrectAnswers:0}}function Ne(){return{cards:[],stats:Ft(),version:wt}}function W(){try{const t=localStorage.getItem(Ie);if(!t)return Ne();const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?(console.warn("Invalid collection format, resetting..."),Ne()):e}catch(t){return console.error("Error loading collection from local storage:",t),Ne()}}function Pe(t){try{const e={...t,version:wt};localStorage.setItem(Ie,JSON.stringify(e))}catch(e){throw console.error("Error saving collection to local storage:",e),new Error("Failed to save collection")}}function Rt(t){try{const e=W();return e.cards.some(n=>n.id===t.id)?!1:(e.cards.push(t),Pe(e),!0)}catch(e){return console.error("Error adding card to collection:",e),!1}}function jt(t){try{const e=W();e.stats.totalQuestions++,t?e.stats.correctAnswers++:e.stats.incorrectAnswers++,Pe(e)}catch(e){console.error("Error updating stats:",e)}}function Dt(){try{localStorage.removeItem(Ie)}catch(t){console.error("Error clearing collection:",t)}}function Bt(){const t=W();return JSON.stringify(t,null,2)}function Ut(t){try{const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?{success:!1,error:"Invalid collection format"}:!e.stats.totalQuestions===void 0||!e.stats.correctAnswers===void 0||!e.stats.incorrectAnswers===void 0?{success:!1,error:"Invalid stats format"}:(Pe(e),{success:!0})}catch(e){return console.error("Error importing collection:",e),{success:!1,error:"Failed to parse JSON file"}}}function Vt(){const t=Math.floor(Math.random()*50)+10,e=Math.floor(Math.random()*50)+10,l=["+","-"],n=l[Math.floor(Math.random()*l.length)];let s,r;if(n==="+")s=t+e,r=`What is ${t} + ${e}?`;else{s=t+e;const o=s;s=t,r=`What is ${o} - ${e}?`}return{question:r,answer:s}}function Ht(t){if(!t)return null;let e,l,n=!1;if(t.hp&&t.hp>0){n=!0;const s=[10,20,30,40,50][Math.floor(Math.random()*5)];l=Math.ceil(t.hp/s),e=`Your Pokémon deals ${s} damage each turn. How many turns does it take to defeat this Pokémon?`}else{const s=Vt();e=s.question,l=s.answer}return{card:t,questionText:e,correctAnswer:l,isPokemon:n}}function Jt(t,e){return e===t.correctAnswer}function Je(t,e,l){const n=t.slice();return n[3]=e[l],n}function Ye(t,e,l){const n=t.slice();return n[6]=e[l],n}function Ge(t){let e,l,n,s,r=t[0].hp+"",o;return{c(){e=d("div"),l=d("span"),l.textContent="HP",n=k(),s=d("span"),o=E(r),u(l,"class","hp-label svelte-2rdllh"),u(s,"class","hp-value svelte-2rdllh"),u(e,"class","card-hp svelte-2rdllh")},m(a,c){A(a,e,c),i(e,l),i(e,n),i(e,s),i(s,o)},p(a,c){c&1&&r!==(r=a[0].hp+"")&&T(o,r)},d(a){a&&C(e)}}}function Ke(t){let e,l=Y(t[0].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=We(Ye(t,l,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","card-types svelte-2rdllh")},m(s,r){A(s,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,r){if(r&1){l=Y(s[0].types);let o;for(o=0;o<l.length;o+=1){const a=Ye(s,l,o);n[o]?n[o].p(a,r):(n[o]=We(a),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(s){s&&C(e),ke(n,s)}}}function We(t){let e,l=t[6]+"",n;return{c(){e=d("span"),n=E(l),u(e,"class","type-badge svelte-2rdllh")},m(s,r){A(s,e,r),i(e,n)},p(s,r){r&1&&l!==(l=s[6]+"")&&T(n,l)},d(s){s&&C(e)}}}function Xe(t){let e,l,n,s=Y(t[0].attacks),r=[];for(let o=0;o<s.length;o+=1)r[o]=xe(Je(t,s,o));return{c(){e=d("div"),l=d("h4"),l.textContent="Attacks:",n=k();for(let o=0;o<r.length;o+=1)r[o].c();u(l,"class","svelte-2rdllh"),u(e,"class","card-attacks svelte-2rdllh")},m(o,a){A(o,e,a),i(e,l),i(e,n);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(e,null)},p(o,a){if(a&5){s=Y(o[0].attacks);let c;for(c=0;c<s.length;c+=1){const f=Je(o,s,c);r[c]?r[c].p(f,a):(r[c]=xe(f),r[c].c(),r[c].m(e,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=s.length}},d(o){o&&C(e),ke(r,o)}}}function Ze(t){let e,l=t[3].damage+"",n;return{c(){e=d("span"),n=E(l),u(e,"class","attack-damage svelte-2rdllh")},m(s,r){A(s,e,r),i(e,n)},p(s,r){r&1&&l!==(l=s[3].damage+"")&&T(n,l)},d(s){s&&C(e)}}}function xe(t){let e,l,n=t[3].name+"",s,r,o,a=t[3].damage&&Ze(t);return{c(){e=d("div"),l=d("span"),s=E(n),r=k(),a&&a.c(),o=k(),u(l,"class","attack-name svelte-2rdllh"),u(e,"class","attack svelte-2rdllh"),R(e,"highlighted",t[2]===t[3].name)},m(c,f){A(c,e,f),i(e,l),i(l,s),i(e,r),a&&a.m(e,null),i(e,o)},p(c,f){f&1&&n!==(n=c[3].name+"")&&T(s,n),c[3].damage?a?a.p(c,f):(a=Ze(c),a.c(),a.m(e,o)):a&&(a.d(1),a=null),f&5&&R(e,"highlighted",c[2]===c[3].name)},d(c){c&&C(e),a&&a.d()}}}function Yt(t){let e,l,n,s,r,o,a,c,f=t[0].name+"",m,_,w,p,v=t[0].hp&&Ge(t),h=t[0].types&&t[0].types.length>0&&Ke(t),g=t[1]&&t[0].attacks&&t[0].attacks.length>0&&Xe(t);return{c(){e=d("div"),l=d("div"),n=d("img"),o=k(),a=d("div"),c=d("h3"),m=E(f),_=k(),v&&v.c(),w=k(),h&&h.c(),p=k(),g&&g.c(),ce(n.src,s=t[0].image)||u(n,"src",s),u(n,"alt",r=t[0].name),u(n,"class","svelte-2rdllh"),u(l,"class","card-image svelte-2rdllh"),u(c,"class","card-name svelte-2rdllh"),u(a,"class","card-info svelte-2rdllh"),u(e,"class","pokemon-card svelte-2rdllh")},m(b,q){A(b,e,q),i(e,l),i(l,n),i(e,o),i(e,a),i(a,c),i(c,m),i(a,_),v&&v.m(a,null),i(a,w),h&&h.m(a,null),i(a,p),g&&g.m(a,null)},p(b,[q]){q&1&&!ce(n.src,s=b[0].image)&&u(n,"src",s),q&1&&r!==(r=b[0].name)&&u(n,"alt",r),q&1&&f!==(f=b[0].name+"")&&T(m,f),b[0].hp?v?v.p(b,q):(v=Ge(b),v.c(),v.m(a,w)):v&&(v.d(1),v=null),b[0].types&&b[0].types.length>0?h?h.p(b,q):(h=Ke(b),h.c(),h.m(a,p)):h&&(h.d(1),h=null),b[1]&&b[0].attacks&&b[0].attacks.length>0?g?g.p(b,q):(g=Xe(b),g.c(),g.m(a,null)):g&&(g.d(1),g=null)},i:I,o:I,d(b){b&&C(e),v&&v.d(),h&&h.d(),g&&g.d()}}}function Gt(t,e,l){let{card:n}=e,{showAttacks:s=!1}=e,{highlightedAttack:r=null}=e;return t.$$set=o=>{"card"in o&&l(0,n=o.card),"showAttacks"in o&&l(1,s=o.showAttacks),"highlightedAttack"in o&&l(2,r=o.highlightedAttack)},[n,s,r]}class Kt extends te{constructor(e){super(),ee(this,e,Gt,Yt,X,{card:0,showAttacks:1,highlightedAttack:2})}}function Wt(t){let e,l,n,s,r,o,a,c,f=t[0].questionText+"",m,_,w,p,v,h,g,b,q,y,S;return r=new Kt({props:{card:t[0].card}}),{c(){e=d("div"),l=d("div"),l.innerHTML='<h2 class="quiz-title svelte-1ohble">TCG Math Challenge</h2> <p class="set-info svelte-1ohble">Collecting Set: Sword &amp; Shield - Darkness Ablaze (swsh3)</p>',n=k(),s=d("div"),ae(r.$$.fragment),o=k(),a=d("div"),c=d("h3"),m=E(f),_=k(),w=d("div"),p=d("input"),v=k(),h=d("button"),g=E("Submit Answer"),u(l,"class","quiz-header svelte-1ohble"),u(s,"class","card-display svelte-1ohble"),u(c,"class","question-text svelte-1ohble"),u(p,"type","number"),u(p,"placeholder","Enter your answer"),u(p,"class","answer-input svelte-1ohble"),u(h,"class","submit-btn btn-primary svelte-1ohble"),h.disabled=b=!t[1],u(w,"class","answer-input-container svelte-1ohble"),u(a,"class","question-container svelte-1ohble"),u(e,"class","quiz-view svelte-1ohble")},m($,P){A($,e,P),i(e,l),i(e,n),i(e,s),Z(r,s,null),i(e,o),i(e,a),i(a,c),i(c,m),i(a,_),i(a,w),i(w,p),Ve(p,t[1]),i(w,v),i(w,h),i(h,g),q=!0,y||(S=[M(p,"input",t[4]),M(p,"keypress",t[3]),M(h,"click",t[2])],y=!0)},p($,[P]){const L={};P&1&&(L.card=$[0].card),r.$set(L),(!q||P&1)&&f!==(f=$[0].questionText+"")&&T(m,f),P&2&&ft(p.value)!==$[1]&&Ve(p,$[1]),(!q||P&2&&b!==(b=!$[1]))&&(h.disabled=b)},i($){q||(B(r.$$.fragment,$),q=!0)},o($){V(r.$$.fragment,$),q=!1},d($){$&&C(e),x(r),y=!1,J(S)}}}function Xt(t,e,l){let{question:n}=e;const s=ye();let r="";function o(){const f=parseInt(r,10);isNaN(f)||s("answer",f)}function a(f){f.key==="Enter"&&o()}function c(){r=ft(this.value),l(1,r)}return t.$$set=f=>{"question"in f&&l(0,n=f.question)},[n,r,o,a,c]}class Zt extends te{constructor(e){super(),ee(this,e,Xt,Wt,X,{question:0})}}function xt(t){let e,l,n,s,r,o,a,c,f,m,_,w,p,v;return{c(){e=d("div"),e.textContent="✗",l=k(),n=d("h2"),n.textContent="Not quite!",s=k(),r=d("p"),o=E("You answered "),a=d("strong"),c=E(t[2]),f=E(", but the correct answer was "),m=d("strong"),_=E(t[1]),w=E("."),p=k(),v=d("p"),v.textContent="Try again with the next question!",u(e,"class","result-icon error svelte-tq4u2e"),u(n,"class","result-title svelte-tq4u2e"),u(a,"class","svelte-tq4u2e"),u(m,"class","svelte-tq4u2e"),u(r,"class","result-message svelte-tq4u2e"),u(v,"class","encouragement svelte-tq4u2e")},m(h,g){A(h,e,g),A(h,l,g),A(h,n,g),A(h,s,g),A(h,r,g),i(r,o),i(r,a),i(a,c),i(r,f),i(r,m),i(m,_),i(r,w),A(h,p,g),A(h,v,g)},p(h,g){g&4&&T(c,h[2]),g&2&&T(_,h[1])},d(h){h&&(C(e),C(l),C(n),C(s),C(r),C(p),C(v))}}}function el(t){let e,l,n,s,r,o,a,c,f,m=t[1]===1?"hit":"hits",_,w,p,v,h=t[3]&&et(t);return{c(){e=d("div"),e.textContent="✓",l=k(),n=d("h2"),n.textContent="Correct!",s=k(),r=d("p"),o=E("Great job! The answer was "),a=d("strong"),c=E(t[1]),f=k(),_=E(m),w=E("!"),p=k(),h&&h.c(),v=Me(),u(e,"class","result-icon success svelte-tq4u2e"),u(n,"class","result-title svelte-tq4u2e"),u(a,"class","svelte-tq4u2e"),u(r,"class","result-message svelte-tq4u2e")},m(g,b){A(g,e,b),A(g,l,b),A(g,n,b),A(g,s,b),A(g,r,b),i(r,o),i(r,a),i(a,c),i(r,f),i(r,_),i(r,w),A(g,p,b),h&&h.m(g,b),A(g,v,b)},p(g,b){b&2&&T(c,g[1]),b&2&&m!==(m=g[1]===1?"hit":"hits")&&T(_,m),g[3]?h?h.p(g,b):(h=et(g),h.c(),h.m(v.parentNode,v)):h&&(h.d(1),h=null)},d(g){g&&(C(e),C(l),C(n),C(s),C(r),C(p),C(v)),h&&h.d(g)}}}function et(t){let e,l,n,s,r,o,a,c,f,m,_=t[3].name+"",w;return{c(){e=d("div"),l=d("h3"),l.textContent="You won this card!",n=k(),s=d("div"),r=d("div"),o=d("img"),f=k(),m=d("span"),w=E(_),u(l,"class","svelte-tq4u2e"),ce(o.src,a=t[3].image)||u(o,"src",a),u(o,"alt",c=t[3].name),u(o,"class","svelte-tq4u2e"),u(m,"class","card-name svelte-tq4u2e"),u(r,"class","mini-card svelte-tq4u2e"),u(s,"class","cards-grid svelte-tq4u2e"),u(e,"class","won-cards svelte-tq4u2e")},m(p,v){A(p,e,v),i(e,l),i(e,n),i(e,s),i(s,r),i(r,o),i(r,f),i(r,m),i(m,w)},p(p,v){v&8&&!ce(o.src,a=p[3].image)&&u(o,"src",a),v&8&&c!==(c=p[3].name)&&u(o,"alt",c),v&8&&_!==(_=p[3].name+"")&&T(w,_)},d(p){p&&C(e)}}}function tl(t){let e,l,n,s,r,o;function a(m,_){return m[0]?el:xt}let c=a(t),f=c(t);return{c(){e=d("div"),l=d("div"),f.c(),n=k(),s=d("button"),s.textContent="Next Question",u(l,"class","result-card svelte-tq4u2e"),R(l,"correct",t[0]),R(l,"incorrect",!t[0]),u(s,"class","next-btn btn-primary svelte-tq4u2e"),u(e,"class","result-view svelte-tq4u2e")},m(m,_){A(m,e,_),i(e,l),f.m(l,null),i(e,n),i(e,s),r||(o=M(s,"click",t[4]),r=!0)},p(m,[_]){c===(c=a(m))&&f?f.p(m,_):(f.d(1),f=c(m),f&&(f.c(),f.m(l,null))),_&1&&R(l,"correct",m[0]),_&1&&R(l,"incorrect",!m[0])},i:I,o:I,d(m){m&&C(e),f.d(),r=!1,o()}}}function ll(t,e,l){let{isCorrect:n}=e,{correctAnswer:s}=e,{userAnswer:r}=e,{wonCard:o}=e;const a=ye();function c(){a("next")}return t.$$set=f=>{"isCorrect"in f&&l(0,n=f.isCorrect),"correctAnswer"in f&&l(1,s=f.correctAnswer),"userAnswer"in f&&l(2,r=f.userAnswer),"wonCard"in f&&l(3,o=f.wonCard)},[n,s,r,o,c]}class nl extends te{constructor(e){super(),ee(this,e,ll,tl,X,{isCorrect:0,correctAnswer:1,userAnswer:2,wonCard:3})}}function sl(){try{const t=Bt(),e=new Blob([t],{type:"application/json"}),l=URL.createObjectURL(e),n=document.createElement("a");n.href=l,n.download=`pokemon-collection-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(l)}catch(t){throw console.error("Error downloading backup:",t),new Error("Failed to download backup")}}function rl(t){return new Promise(e=>{const l=new FileReader;l.onload=n=>{var s;try{const r=(s=n.target)==null?void 0:s.result,o=Ut(r);e(o)}catch(r){console.error("Error reading file:",r),e({success:!1,error:"Failed to read file"})}},l.onerror=()=>{e({success:!1,error:"Failed to read file"})},l.readAsText(t)})}function tt(t,e,l){const n=t.slice();return n[16]=e[l],n}function lt(t,e,l){const n=t.slice();return n[19]=e[l],n}function nt(t){let e,l=t[2].text+"",n;return{c(){e=d("div"),n=E(l),u(e,"class","message svelte-tdwh"),R(e,"success",t[2].type==="success"),R(e,"error",t[2].type==="error")},m(s,r){A(s,e,r),i(e,n)},p(s,r){r&4&&l!==(l=s[2].text+"")&&T(n,l),r&4&&R(e,"success",s[2].type==="success"),r&4&&R(e,"error",s[2].type==="error")},d(s){s&&C(e)}}}function ol(t){let e,l=Y(t[0].cards),n=[];for(let s=0;s<l.length;s+=1)n[s]=it(tt(t,l,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","cards-grid svelte-tdwh")},m(s,r){A(s,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,r){if(r&1){l=Y(s[0].cards);let o;for(o=0;o<l.length;o+=1){const a=tt(s,l,o);n[o]?n[o].p(a,r):(n[o]=it(a),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(s){s&&C(e),ke(n,s)}}}function il(t){let e;return{c(){e=d("div"),e.innerHTML='<div class="empty-icon svelte-tdwh">📦</div> <h3 class="svelte-tdwh">No cards yet!</h3> <p class="svelte-tdwh">Answer questions correctly to start building your collection.</p>',u(e,"class","empty-state svelte-tdwh")},m(l,n){A(l,e,n)},p:I,d(l){l&&C(e)}}}function st(t){let e,l,n=t[16].hp+"",s;return{c(){e=d("span"),l=E("HP "),s=E(n),u(e,"class","hp svelte-tdwh")},m(r,o){A(r,e,o),i(e,l),i(e,s)},p(r,o){o&1&&n!==(n=r[16].hp+"")&&T(s,n)},d(r){r&&C(e)}}}function rt(t){let e,l=Y(t[16].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=ot(lt(t,l,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","types svelte-tdwh")},m(s,r){A(s,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,r){if(r&1){l=Y(s[16].types);let o;for(o=0;o<l.length;o+=1){const a=lt(s,l,o);n[o]?n[o].p(a,r):(n[o]=ot(a),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(s){s&&C(e),ke(n,s)}}}function ot(t){let e,l=t[19]+"",n;return{c(){e=d("span"),n=E(l),u(e,"class","type svelte-tdwh")},m(s,r){A(s,e,r),i(e,n)},p(s,r){r&1&&l!==(l=s[19]+"")&&T(n,l)},d(s){s&&C(e)}}}function it(t){let e,l,n,s,r,o,a,c=t[16].name+"",f,m,_,w,p=t[16].hp&&st(t),v=t[16].types&&t[16].types.length>0&&rt(t);return{c(){e=d("div"),l=d("img"),r=k(),o=d("div"),a=d("h4"),f=E(c),m=k(),p&&p.c(),_=k(),v&&v.c(),w=k(),ce(l.src,n=t[16].image)||u(l,"src",n),u(l,"alt",s=t[16].name),u(l,"class","svelte-tdwh"),u(a,"class","svelte-tdwh"),u(o,"class","card-details svelte-tdwh"),u(e,"class","collection-card svelte-tdwh")},m(h,g){A(h,e,g),i(e,l),i(e,r),i(e,o),i(o,a),i(a,f),i(o,m),p&&p.m(o,null),i(o,_),v&&v.m(o,null),i(e,w)},p(h,g){g&1&&!ce(l.src,n=h[16].image)&&u(l,"src",n),g&1&&s!==(s=h[16].name)&&u(l,"alt",s),g&1&&c!==(c=h[16].name+"")&&T(f,c),h[16].hp?p?p.p(h,g):(p=st(h),p.c(),p.m(o,_)):p&&(p.d(1),p=null),h[16].types&&h[16].types.length>0?v?v.p(h,g):(v=rt(h),v.c(),v.m(o,null)):v&&(v.d(1),v=null)},d(h){h&&C(e),p&&p.d(),v&&v.d()}}}function ct(t){let e,l,n,s,r,o,a,c,f,m,_,w;return{c(){e=d("div"),l=d("div"),n=d("h3"),n.textContent="Clear Collection?",s=k(),r=d("p"),r.textContent="Are you sure you want to clear your entire collection? This action cannot be undone.",o=k(),a=d("div"),c=d("button"),c.textContent="Cancel",f=k(),m=d("button"),m.textContent="Clear Collection",u(n,"class","svelte-tdwh"),u(r,"class","svelte-tdwh"),u(c,"class","btn-secondary"),u(m,"class","btn-error"),u(a,"class","dialog-actions svelte-tdwh"),u(l,"class","dialog svelte-tdwh"),u(l,"role","dialog"),u(e,"class","dialog-overlay svelte-tdwh"),u(e,"role","button"),u(e,"tabindex","-1")},m(p,v){A(p,e,v),i(e,l),i(l,n),i(l,s),i(l,r),i(l,o),i(l,a),i(a,c),i(a,f),i(a,m),_||(w=[M(c,"click",t[9]),M(m,"click",t[10]),M(l,"click",Ct(t[11])),M(e,"click",t[9]),M(e,"keydown",t[13])],_=!0)},p:I,d(p){p&&C(e),_=!1,J(w)}}}function cl(t){let e,l,n,s,r,o,a,c,f,m,_,w,p,v,h,g,b,q=t[0].cards.length+"",y,S,$,P,L,j,G=t[0].stats.totalQuestions+"",le,O,z,ne,H,me,pe=t[0].stats.correctAnswers+"",Ce,ze,ve,Qe,se,ue,Ae,Fe,Re,ge,je,qe,fe,Ee,De,Q=t[2]&&nt(t);function Be(N,D){return N[0].cards.length===0?il:ol}let _e=Be(t),U=_e(t),F=t[3]&&ct(t);return{c(){e=d("div"),l=d("div"),n=d("h2"),n.textContent="Your Collection",s=k(),r=d("div"),o=d("button"),o.textContent="Export Backup",a=k(),c=d("button"),c.textContent="Import Backup",f=k(),m=d("button"),m.textContent="Clear This Set",_=k(),w=d("input"),p=k(),Q&&Q.c(),v=k(),h=d("div"),g=d("div"),b=d("div"),y=E(q),S=k(),$=d("div"),$.textContent="Cards Collected",P=k(),L=d("div"),j=d("div"),le=E(G),O=k(),z=d("div"),z.textContent="Questions Answered",ne=k(),H=d("div"),me=d("div"),Ce=E(pe),ze=k(),ve=d("div"),ve.textContent="Correct Answers",Qe=k(),se=d("div"),ue=d("div"),Ae=E(t[4]),Fe=E("%"),Re=k(),ge=d("div"),ge.textContent="Accuracy",je=k(),U.c(),qe=k(),F&&F.c(),fe=Me(),u(n,"class","svelte-tdwh"),u(o,"class","btn-secondary"),u(c,"class","btn-secondary"),u(m,"class","btn-error"),u(w,"type","file"),u(w,"accept",".json"),qt(w,"display","none"),u(r,"class","header-actions svelte-tdwh"),u(l,"class","collection-header svelte-tdwh"),u(b,"class","stat-value svelte-tdwh"),u($,"class","stat-label svelte-tdwh"),u(g,"class","stat-card svelte-tdwh"),u(j,"class","stat-value svelte-tdwh"),u(z,"class","stat-label svelte-tdwh"),u(L,"class","stat-card svelte-tdwh"),u(me,"class","stat-value svelte-tdwh"),u(ve,"class","stat-label svelte-tdwh"),u(H,"class","stat-card svelte-tdwh"),u(ue,"class","stat-value svelte-tdwh"),u(ge,"class","stat-label svelte-tdwh"),u(se,"class","stat-card svelte-tdwh"),u(h,"class","stats-section svelte-tdwh"),u(e,"class","collection-view svelte-tdwh")},m(N,D){A(N,e,D),i(e,l),i(l,n),i(l,s),i(l,r),i(r,o),i(r,a),i(r,c),i(r,f),i(r,m),i(r,_),i(r,w),t[12](w),i(e,p),Q&&Q.m(e,null),i(e,v),i(e,h),i(h,g),i(g,b),i(b,y),i(g,S),i(g,$),i(h,P),i(h,L),i(L,j),i(j,le),i(L,O),i(L,z),i(h,ne),i(h,H),i(H,me),i(me,Ce),i(H,ze),i(H,ve),i(h,Qe),i(h,se),i(se,ue),i(ue,Ae),i(ue,Fe),i(se,Re),i(se,ge),i(e,je),U.m(e,null),A(N,qe,D),F&&F.m(N,D),A(N,fe,D),Ee||(De=[M(o,"click",t[5]),M(c,"click",t[6]),M(m,"click",t[8]),M(w,"change",t[7])],Ee=!0)},p(N,[D]){N[2]?Q?Q.p(N,D):(Q=nt(N),Q.c(),Q.m(e,v)):Q&&(Q.d(1),Q=null),D&1&&q!==(q=N[0].cards.length+"")&&T(y,q),D&1&&G!==(G=N[0].stats.totalQuestions+"")&&T(le,G),D&1&&pe!==(pe=N[0].stats.correctAnswers+"")&&T(Ce,pe),D&16&&T(Ae,N[4]),_e===(_e=Be(N))&&U?U.p(N,D):(U.d(1),U=_e(N),U&&(U.c(),U.m(e,null))),N[3]?F?F.p(N,D):(F=ct(N),F.c(),F.m(fe.parentNode,fe)):F&&(F.d(1),F=null)},i:I,o:I,d(N){N&&(C(e),C(qe),C(fe)),t[12](null),Q&&Q.d(),U.d(),F&&F.d(N),Ee=!1,J(De)}}}function al(t,e,l){let n,{collection:s}=e;const r=ye();let o,a=null,c=!1;function f(){try{sl(),w("Collection exported successfully!","success")}catch{w("Failed to export collection","error")}}function m(){o.click()}async function _(y){var P;const S=y.target,$=(P=S.files)==null?void 0:P[0];if($){try{const L=await rl($);L.success?(w("Collection imported successfully!","success"),r("refresh")):w(L.error||"Failed to import collection","error")}catch{w("Failed to import collection","error")}S.value=""}}function w(y,S){l(2,a={text:y,type:S}),setTimeout(()=>{l(2,a=null)},3e3)}function p(){l(3,c=!0)}function v(){l(3,c=!1)}function h(){try{Dt(),l(3,c=!1),w("Collection cleared successfully!","success"),r("refresh")}catch{w("Failed to clear collection","error")}}function g(y){St.call(this,t,y)}function b(y){Te[y?"unshift":"push"](()=>{o=y,l(1,o)})}const q=y=>y.key==="Escape"&&v();return t.$$set=y=>{"collection"in y&&l(0,s=y.collection)},t.$$.update=()=>{t.$$.dirty&1&&l(4,n=s.stats.totalQuestions>0?Math.round(s.stats.correctAnswers/s.stats.totalQuestions*100):0)},[s,o,a,c,n,f,m,_,p,v,h,g,b,q]}class ul extends te{constructor(e){super(),ee(this,e,al,cl,X,{collection:0})}}function fl(t){let e,l,n,s,r;return{c(){e=d("div"),l=d("div"),n=k(),s=d("p"),r=E(t[0]),u(l,"class","spinner svelte-1lxornd"),u(s,"class","svelte-1lxornd"),u(e,"class","loading-view svelte-1lxornd")},m(o,a){A(o,e,a),i(e,l),i(e,n),i(e,s),i(s,r)},p(o,[a]){a&1&&T(r,o[0])},i:I,o:I,d(o){o&&C(e)}}}function dl(t,e,l){let{message:n="Loading..."}=e;return t.$$set=s=>{"message"in s&&l(0,n=s.message)},[n]}class hl extends te{constructor(e){super(),ee(this,e,dl,fl,X,{message:0})}}function ml(t){let e,l,n,s,r,o,a,c,f,m,_;return{c(){e=d("div"),l=d("div"),l.textContent="⚠️",n=k(),s=d("h2"),s.textContent="Oops!",r=k(),o=d("p"),a=E(t[0]),c=k(),f=d("button"),f.textContent="Try Again",u(l,"class","error-icon svelte-na0xmw"),u(s,"class","svelte-na0xmw"),u(o,"class","svelte-na0xmw"),u(f,"class","btn-primary"),u(e,"class","error-view svelte-na0xmw")},m(w,p){A(w,e,p),i(e,l),i(e,n),i(e,s),i(e,r),i(e,o),i(o,a),i(e,c),i(e,f),m||(_=M(f,"click",t[1]),m=!0)},p(w,[p]){p&1&&T(a,w[0])},i:I,o:I,d(w){w&&C(e),m=!1,_()}}}function pl(t,e,l){let{message:n="Something went wrong"}=e;const s=ye();function r(){s("retry")}return t.$$set=o=>{"message"in o&&l(0,n=o.message)},[n,r]}class vl extends te{constructor(e){super(),ee(this,e,pl,ml,X,{message:0})}}function gl(t){let e,l;return e=new ul({props:{collection:t[3]}}),e.$on("refresh",t[14]),{c(){ae(e.$$.fragment)},m(n,s){Z(e,n,s),l=!0},p(n,s){const r={};s&8&&(r.collection=n[3]),e.$set(r)},i(n){l||(B(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){x(e,n)}}}function _l(t){let e,l,n,s;const r=[yl,kl,bl,wl],o=[];function a(c,f){return c[0]==="loading"?0:c[0]==="quiz"&&c[1]?1:c[0]==="result"&&c[1]?2:c[0]==="error"?3:-1}return~(e=a(t))&&(l=o[e]=r[e](t)),{c(){l&&l.c(),n=Me()},m(c,f){~e&&o[e].m(c,f),A(c,n,f),s=!0},p(c,f){let m=e;e=a(c),e===m?~e&&o[e].p(c,f):(l&&(mt(),V(o[m],1,1,()=>{o[m]=null}),pt()),~e?(l=o[e],l?l.p(c,f):(l=o[e]=r[e](c),l.c()),B(l,1),l.m(n.parentNode,n)):l=null)},i(c){s||(B(l),s=!0)},o(c){V(l),s=!1},d(c){c&&C(n),~e&&o[e].d(c)}}}function wl(t){let e,l;return e=new vl({props:{message:t[7]}}),e.$on("retry",t[11]),{c(){ae(e.$$.fragment)},m(n,s){Z(e,n,s),l=!0},p(n,s){const r={};s&128&&(r.message=n[7]),e.$set(r)},i(n){l||(B(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){x(e,n)}}}function bl(t){let e,l;return e=new nl({props:{isCorrect:t[4],correctAnswer:t[1].correctAnswer,userAnswer:t[5],wonCard:t[6]}}),e.$on("next",t[10]),{c(){ae(e.$$.fragment)},m(n,s){Z(e,n,s),l=!0},p(n,s){const r={};s&16&&(r.isCorrect=n[4]),s&2&&(r.correctAnswer=n[1].correctAnswer),s&32&&(r.userAnswer=n[5]),s&64&&(r.wonCard=n[6]),e.$set(r)},i(n){l||(B(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){x(e,n)}}}function kl(t){let e,l;return e=new Zt({props:{question:t[1]}}),e.$on("answer",t[9]),{c(){ae(e.$$.fragment)},m(n,s){Z(e,n,s),l=!0},p(n,s){const r={};s&2&&(r.question=n[1]),e.$set(r)},i(n){l||(B(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){x(e,n)}}}function yl(t){let e,l;return e=new hl({props:{message:"Loading new question..."}}),{c(){ae(e.$$.fragment)},m(n,s){Z(e,n,s),l=!0},p:I,i(n){l||(B(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){x(e,n)}}}function Cl(t){var le;let e,l,n,s,r,o,a,c,f,m=(((le=t[3])==null?void 0:le.cards.length)||0)+"",_,w,p=t[2].length+"",v,h,g,b,q,y,S,$,P;const L=[_l,gl],j=[];function G(O,z){return O[8]==="quiz"?0:1}return q=G(t),y=j[q]=L[q](t),{c(){e=d("div"),l=d("header"),n=d("h1"),n.textContent="TCG Math",s=k(),r=d("nav"),o=d("button"),o.textContent="Play Quiz",a=k(),c=d("button"),f=E("My Collection ("),_=E(m),w=E("/"),v=E(p),h=E(")"),g=k(),b=d("main"),y.c(),u(n,"class","app-title svelte-12g82ky"),u(o,"class","nav-btn svelte-12g82ky"),R(o,"active",t[8]==="quiz"),u(c,"class","nav-btn svelte-12g82ky"),R(c,"active",t[8]==="collection"),u(r,"class","svelte-12g82ky"),u(l,"class","app-header svelte-12g82ky"),u(b,"class","svelte-12g82ky"),u(e,"class","app svelte-12g82ky")},m(O,z){A(O,e,z),i(e,l),i(l,n),i(l,s),i(l,r),i(r,o),i(r,a),i(r,c),i(c,f),i(c,_),i(c,w),i(c,v),i(c,h),i(e,g),i(e,b),j[q].m(b,null),S=!0,$||(P=[M(o,"click",t[13]),M(c,"click",t[12])],$=!0)},p(O,[z]){var H;(!S||z&256)&&R(o,"active",O[8]==="quiz"),(!S||z&8)&&m!==(m=(((H=O[3])==null?void 0:H.cards.length)||0)+"")&&T(_,m),(!S||z&4)&&p!==(p=O[2].length+"")&&T(v,p),(!S||z&256)&&R(c,"active",O[8]==="collection");let ne=q;q=G(O),q===ne?j[q].p(O,z):(mt(),V(j[ne],1,1,()=>{j[ne]=null}),pt(),y=j[q],y?y.p(O,z):(y=j[q]=L[q](O),y.c()),B(y,1),y.m(b,null))},i(O){S||(B(y),S=!0)},o(O){V(y),S=!1},d(O){O&&C(e),j[q].d(),$=!1,J(P)}}}function Al(t,e,l){let n="loading",s=null,r=[],o,a=!1,c=0,f=null,m="",_="quiz";$t(()=>{l(3,o=W()),w()});async function w(){try{l(0,n="loading"),r.length===0&&l(2,r=await Pt());const y=Qt(r),S=await zt(y.id),$=Ht(S);if(!$)throw new Error("Could not generate a valid question. Please try again.");l(1,s=$),l(0,n="quiz")}catch(y){console.error("Error loading question:",y),l(7,m=y instanceof Error?y.message:"Failed to load question"),l(0,n="error")}}function p(y){if(s){if(l(5,c=y.detail),l(4,a=Jt(s,c)),jt(a),l(6,f=null),a){const S={id:s.card.id,name:s.card.name,image:s.card.image,hp:s.card.hp,types:s.card.types,rarity:s.card.rarity,collectedAt:new Date().toISOString()};Rt(S)&&l(6,f=s.card)}l(3,o=W()),l(0,n="result")}}function v(){w()}function h(){w()}function g(){l(8,_="collection"),l(3,o=W())}function b(){l(8,_="quiz")}function q(){l(3,o=W())}return[n,s,r,o,a,c,f,m,_,p,v,h,g,b,q]}class ql extends te{constructor(e){super(),ee(this,e,Al,Cl,X,{})}}new ql({target:document.getElementById("app")});
