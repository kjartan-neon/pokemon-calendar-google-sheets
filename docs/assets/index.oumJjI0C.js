var Ol=Object.defineProperty;var Bl=(t,e,l)=>e in t?Ol(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var Ct=(t,e,l)=>Bl(t,typeof e!="symbol"?e+"":e,l);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function l(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=l(s);fetch(s.href,r)}})();function Z(){}function ql(t){return t()}function Wt(){return Object.create(null)}function ae(t){t.forEach(ql)}function Ml(t){return typeof t=="function"}function Ce(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let ot;function _e(t,e){return t===e?!0:(ot||(ot=document.createElement("a")),ot.href=e,t===ot.href)}function zl(t){return Object.keys(t).length===0}function jl(t,...e){if(t==null){for(const n of e)n(void 0);return Z}const l=t.subscribe(...e);return l.unsubscribe?()=>l.unsubscribe():l}function it(t,e,l){t.$$.on_destroy.push(jl(e,l))}function o(t,e){t.appendChild(e)}function L(t,e,l){t.insertBefore(e,l||null)}function E(t){t.parentNode&&t.parentNode.removeChild(t)}function He(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function d(t){return document.createElement(t)}function k(t){return document.createTextNode(t)}function w(){return k(" ")}function It(){return k("")}function H(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function Ql(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function u(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function ut(t){return t===""?null:+t}function Hl(t){return Array.from(t.childNodes)}function M(t,e){e=""+e,t.data!==e&&(t.data=e)}function ue(t,e){t.value=e??""}function $e(t,e,l,n){l==null?t.style.removeProperty(e):t.style.setProperty(e,l,"")}function Be(t,e,l){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e){s.selected=!0;return}}t.selectedIndex=-1}function K(t,e,l){t.classList.toggle(e,!!l)}function Yl(t,e,{bubbles:l=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:l,cancelable:n})}let xe;function Ze(t){xe=t}function El(){if(!xe)throw new Error("Function called outside component initialization");return xe}function Ll(t){El().$$.on_mount.push(t)}function dt(){const t=El();return(e,l,{cancelable:n=!1}={})=>{const s=t.$$.callbacks[e];if(s){const r=Yl(e,l,{cancelable:n});return s.slice().forEach(i=>{i.call(t,r)}),!r.defaultPrevented}return!0}}function Gt(t,e){const l=t.$$.callbacks[e.type];l&&l.slice().forEach(n=>n.call(this,e))}const Oe=[],qt=[];let ze=[];const Jt=[],Ul=Promise.resolve();let Mt=!1;function Vl(){Mt||(Mt=!0,Ul.then(Il))}function Qt(t){ze.push(t)}const St=new Set;let Re=0;function Il(){if(Re!==0)return;const t=xe;do{try{for(;Re<Oe.length;){const e=Oe[Re];Re++,Ze(e),Kl(e.$$)}}catch(e){throw Oe.length=0,Re=0,e}for(Ze(null),Oe.length=0,Re=0;qt.length;)qt.pop()();for(let e=0;e<ze.length;e+=1){const l=ze[e];St.has(l)||(St.add(l),l())}ze.length=0}while(Oe.length);for(;Jt.length;)Jt.pop()();Mt=!1,St.clear(),Ze(t)}function Kl(t){if(t.fragment!==null){t.update(),ae(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Qt)}}function Wl(t){const e=[],l=[];ze.forEach(n=>t.indexOf(n)===-1?e.push(n):l.push(n)),l.forEach(n=>n()),ze=e}const at=new Set;let qe;function Tl(){qe={r:0,c:[],p:qe}}function Nl(){qe.r||ae(qe.c),qe=qe.p}function fe(t,e){t&&t.i&&(at.delete(t),t.i(e))}function ke(t,e,l,n){if(t&&t.o){if(at.has(t))return;at.add(t),qe.c.push(()=>{at.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}else n&&n()}function de(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Ye(t){t&&t.c()}function Me(t,e,l){const{fragment:n,after_update:s}=t.$$;n&&n.m(e,l),Qt(()=>{const r=t.$$.on_mount.map(ql).filter(Ml);t.$$.on_destroy?t.$$.on_destroy.push(...r):ae(r),t.$$.on_mount=[]}),s.forEach(Qt)}function Qe(t,e){const l=t.$$;l.fragment!==null&&(Wl(l.after_update),ae(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function Gl(t,e){t.$$.dirty[0]===-1&&(Oe.push(t),Vl(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ee(t,e,l,n,s,r,i=null,c=[-1]){const f=xe;Ze(t);const a=t.$$={fragment:null,ctx:[],props:r,update:Z,not_equal:s,bound:Wt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:Wt(),dirty:c,skip_bound:!1,root:e.target||f.$$.root};i&&i(a.root);let g=!1;if(a.ctx=l?l(t,e.props||{},(v,h,...m)=>{const p=m.length?m[0]:h;return a.ctx&&s(a.ctx[v],a.ctx[v]=p)&&(!a.skip_bound&&a.bound[v]&&a.bound[v](p),g&&Gl(t,v)),h}):[],a.update(),g=!0,ae(a.before_update),a.fragment=n?n(a.ctx):!1,e.target){if(e.hydrate){const v=Hl(e.target);a.fragment&&a.fragment.l(v),v.forEach(E)}else a.fragment&&a.fragment.c();e.intro&&fe(t.$$.fragment),Me(t,e.target,e.anchor),Il()}Ze(f)}class Le{constructor(){Ct(this,"$$");Ct(this,"$$set")}$destroy(){Qe(this,1),this.$destroy=Z}$on(e,l){if(!Ml(l))return Z;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const s=n.indexOf(l);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!zl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Jl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Jl);const Dl="https://api.tcgdex.net/v2/en";function Pl(t,e){const l=t.split("-")[1];return`https://assets.tcgdex.net/en/${Xl(e)}/${e}/${l}/high.webp`}function Xl(t){return t.startsWith("swsh")?"swsh":t.startsWith("sv")?"sv":t.startsWith("me")?"base":"swsh"}async function Et(t){try{const e=await fetch(`${Dl}/sets/${t}`);if(!e.ok)throw new Error("Failed to fetch cards from set");return((await e.json()).cards||[]).map(s=>({id:s.id,localId:s.localId,name:s.name,image:Pl(s.id,t)}))}catch(e){throw console.error("Error fetching cards from set:",e),e}}async function Zl(t,e){try{const l=await fetch(`${Dl}/cards/${t}`);if(!l.ok)throw new Error("Failed to fetch card details");return{...await l.json(),image:Pl(t,e)}}catch(l){throw console.error("Error fetching card details:",l),l}}function $l(t){const e=Math.floor(Math.random()*t.length);return t[e]}const Tt="pokemon-tcg-collection",Rl="2.0";function xl(){return{totalQuestions:0,correctAnswers:0,incorrectAnswers:0,totalHpDefeated:0}}function yt(){return{cards:[],stats:xl(),version:Rl}}function he(){try{const t=localStorage.getItem(Tt);if(!t)return yt();const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?(console.warn("Invalid collection format, resetting..."),yt()):(e.stats.totalHpDefeated||(e.stats.totalHpDefeated=0),e.currentStreak||(e.currentStreak=0),e.unlockedRareSets||(e.unlockedRareSets={}),e)}catch(t){return console.error("Error loading collection from local storage:",t),yt()}}function je(t){try{const e={...t,version:Rl};localStorage.setItem(Tt,JSON.stringify(e))}catch(e){throw console.error("Error saving collection to local storage:",e),new Error("Failed to save collection")}}function en(t){try{const e=he();return e.cards.some(n=>n.id===t.id)?!1:(e.cards.push(t),je(e),!0)}catch(e){return console.error("Error adding card to collection:",e),!1}}function tn(t,e){try{const l=he();l.stats.totalQuestions++,t?(l.stats.correctAnswers++,e&&(l.stats.totalHpDefeated+=e)):l.stats.incorrectAnswers++,je(l)}catch(l){console.error("Error updating stats:",l)}}function ln(){try{localStorage.removeItem(Tt)}catch(t){console.error("Error clearing collection:",t)}}function nn(){const t=he();return JSON.stringify(t,null,2)}function sn(t){try{const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?{success:!1,error:"Invalid collection format"}:!e.stats.totalQuestions===void 0||!e.stats.correctAnswers===void 0||!e.stats.incorrectAnswers===void 0?{success:!1,error:"Invalid stats format"}:(je(e),{success:!0})}catch(e){return console.error("Error importing collection:",e),{success:!1,error:"Failed to parse JSON file"}}}function Xt(t){const e=Math.floor(Math.random()*9)+1,l=Math.floor(Math.random()*9)+1,n=e+l;return{question:t.mathQuestion(e,l,"+"),answer:n}}function Zt(t){const e=["+","-"],l=e[Math.floor(Math.random()*e.length)];let n,s;if(l==="+"){const r=Math.floor(Math.random()*50)+10,i=Math.floor(Math.random()*50)+10;n=r+i,s=t.mathQuestion(r,i,"+")}else{const r=Math.floor(Math.random()*50)+10,i=Math.floor(Math.random()*50)+10;n=r+i;const c=n;n=r,s=t.mathQuestion(c,i,"-")}return{question:s,answer:n}}function rn(t){const e=Math.floor(Math.random()*50)+10,l=Math.floor(Math.random()*50)+10,n=["+","-"],s=n[Math.floor(Math.random()*n.length)];let r,i;if(s==="+")r=e+l,i=t.mathQuestion(e,l,"+");else{r=e+l;const c=r;r=e,i=t.mathQuestion(c,l,"-")}return{question:i,answer:r}}function on(t){const e=Math.floor(Math.random()*50)+10,l=Math.floor(Math.random()*50)+10,n=e+l;return{question:t.mathQuestion(e,l,"+"),answer:n}}function an(t,e,l=!1,n=4){if(!t)return null;let s,r,i=!1,c,f;if(n===1){const a=Xt(e);s=a.question,r=a.answer}else if(n===2||n===3){const a=Zt(e);s=a.question,r=a.answer}else if(t.hp&&t.hp>0){i=!0;const a=[10,20,30,40,50,60,60,80,120,300][Math.floor(Math.random()*5)];r=Math.ceil(t.hp/a),s=e.damageQuestion(a)}else{const a=rn(e);s=a.question,r=a.answer}if(l)if(n===1){const a=Xt(e);c=a.question,f=a.answer}else if(n===2||n===3){const a=Zt(e);c=a.question,f=a.answer}else{const a=on(e);c=a.question,f=a.answer}return{card:t,questionText:s,correctAnswer:r,isPokemon:i,secondQuestion:c,secondAnswer:f}}function cn(t,e,l){const n=e===t.correctAnswer;if(t.secondQuestion&&t.secondAnswer!==void 0){const s=l===t.secondAnswer;return n&&s}return n}const Fe=[];function Nt(t,e=Z){let l;const n=new Set;function s(c){if(Ce(t,c)&&(t=c,l)){const f=!Fe.length;for(const a of n)a[1](),Fe.push(a,t);if(f){for(let a=0;a<Fe.length;a+=2)Fe[a][0](Fe[a+1]);Fe.length=0}}}function r(c){s(c(t))}function i(c,f=Z){const a=[c,f];return n.add(a),n.size===1&&(l=e(s,r)||Z),c(t),()=>{n.delete(a),n.size===0&&l&&(l(),l=null)}}return{set:s,update:r,subscribe:i}}const At=[{id:"swsh3",name:"Sword & Shield - Darkness Ablaze"},{id:"sv05",name:"Scarlet & Violet - Temporal Forces"},{id:"sv06.5",name:"Scarlet & Violet - Shrouded Fable"}],Fl="tcg-math-settings";function un(){return{language:"en",selectedSet:"swsh3",klassetrinn:4}}function gt(){try{const t=localStorage.getItem(Fl);if(t){const e=JSON.parse(t);return{language:e.language||"en",selectedSet:e.selectedSet||"swsh3",klassetrinn:e.klassetrinn||4}}}catch(t){console.error("Error loading settings:",t)}return un()}function Dt(t){try{localStorage.setItem(Fl,JSON.stringify(t))}catch(e){console.error("Error saving settings:",e)}}const Pt=gt(),ct=Nt(Pt.language),ft=Nt(Pt.selectedSet),Lt=Nt(Pt.klassetrinn);ct.subscribe(t=>{const e=gt();Dt({...e,language:t})});ft.subscribe(t=>{const e=gt();Dt({...e,selectedSet:t})});Lt.subscribe(t=>{const e=gt();Dt({...e,klassetrinn:t})});const fn={en:{appTitle:"16k Pokemon Math Challenge",quizTitle:"TCG Math Challenge",playQuiz:"Play Quiz",myCollection:"My Collection",selectSet:"Select Set",selectLanguage:"Language",setInfo:"Collecting Set",enterAnswer:"Enter your answer",submitAnswer:"Submit Answer",nextQuestion:"Next Question",correct:"Correct!",notQuite:"Not quite!",correctMessage:"Great job! The answer was",incorrectMessage:"You answered",encouragement:"Try again with the next question!",youWonThisCard:"You won this card!",cardsCollected:"Cards Collected",questionsAnswered:"Questions Answered",correctAnswers:"Correct Answers",accuracy:"Accuracy",noCardsYet:"No cards yet!",noCardsDescription:"Answer questions correctly to start building your collection.",exportBackup:"Export Backup",importBackup:"Import Backup",clearThisSet:"Clear This Set",clearCollectionTitle:"Clear Collection?",clearCollectionMessage:"Are you sure you want to clear your entire collection? This action cannot be undone.",cancel:"Cancel",clearCollection:"Clear Collection",collectionExported:"Collection exported successfully!",collectionImported:"Collection imported successfully!",collectionCleared:"Collection cleared successfully!",exportFailed:"Failed to export collection",importFailed:"Failed to import collection",clearFailed:"Failed to clear collection",hit:"hit",hits:"hits",loading:"Loading new question...",yourCollection:"Your Collection",language:"Language",gradeLevel:"Grade Level",damageQuestion:t=>`Your Pokémon deals ${t} damage each turn. How many turns does it take to defeat this Pokémon?`,mathQuestion:(t,e,l)=>`What is ${t} ${l} ${e}?`},no:{appTitle:"16k Pokémon Matteutfordring",quizTitle:"TCG Matte Utfordring",playQuiz:"Spill Quiz",myCollection:"Min Samling",selectSet:"Velg Sett",selectLanguage:"Språk",setInfo:"Samler Sett",enterAnswer:"Skriv inn svaret ditt",submitAnswer:"Send Inn Svar",nextQuestion:"Neste Spørsmål",correct:"Riktig!",notQuite:"Ikke helt!",correctMessage:"Bra jobbet! Svaret var",incorrectMessage:"Du svarte",encouragement:"Prøv igjen med neste spørsmål!",youWonThisCard:"Du vant dette kortet!",cardsCollected:"Kort Samlet",questionsAnswered:"Spørsmål Besvart",correctAnswers:"Riktige Svar",accuracy:"Nøyaktighet",noCardsYet:"Ingen kort ennå!",noCardsDescription:"Svar riktig på spørsmål for å begynne å bygge samlingen din.",exportBackup:"Eksporter Backup",importBackup:"Importer Backup",clearThisSet:"Tøm Dette Settet",clearCollectionTitle:"Tøm Samling?",clearCollectionMessage:"Er du sikker på at du vil tømme hele samlingen din? Denne handlingen kan ikke angres.",cancel:"Avbryt",clearCollection:"Tøm Samling",collectionExported:"Samling eksportert!",collectionImported:"Samling importert!",collectionCleared:"Samling tømt!",exportFailed:"Kunne ikke eksportere samling",importFailed:"Kunne ikke importere samling",clearFailed:"Kunne ikke tømme samling",hit:"treff",hits:"treff",loading:"Laster nytt spørsmål...",yourCollection:"Din Samling",language:"Språk",gradeLevel:"Klassetrinn",damageQuestion:t=>`Din Pokémon gjør ${t} skade hver runde. Hvor mange runder tar det å beseire denne Pokémonen?`,mathQuestion:(t,e,l)=>`Hva er ${t} ${l} ${e}?`}};function dn(t){return fn[t]}function $t(t,e,l){const n=t.slice();return n[4]=e[l],n}function xt(t){let e,l,n=t[0].rarity+"",s;return{c(){e=d("div"),l=d("span"),s=k(n),u(l,"class","rarity-badge svelte-1gymiiy"),u(e,"class","card-rarity svelte-1gymiiy")},m(r,i){L(r,e,i),o(e,l),o(l,s)},p(r,i){i&1&&n!==(n=r[0].rarity+"")&&M(s,n)},d(r){r&&E(e)}}}function el(t){let e,l,n,s=de(t[0].attacks),r=[];for(let i=0;i<s.length;i+=1)r[i]=ll($t(t,s,i));return{c(){e=d("div"),l=d("h4"),l.textContent="Attacks:",n=w();for(let i=0;i<r.length;i+=1)r[i].c();u(l,"class","svelte-1gymiiy"),u(e,"class","card-attacks svelte-1gymiiy")},m(i,c){L(i,e,c),o(e,l),o(e,n);for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(e,null)},p(i,c){if(c&5){s=de(i[0].attacks);let f;for(f=0;f<s.length;f+=1){const a=$t(i,s,f);r[f]?r[f].p(a,c):(r[f]=ll(a),r[f].c(),r[f].m(e,null))}for(;f<r.length;f+=1)r[f].d(1);r.length=s.length}},d(i){i&&E(e),He(r,i)}}}function tl(t){let e,l=t[4].damage+"",n;return{c(){e=d("span"),n=k(l),u(e,"class","attack-damage svelte-1gymiiy")},m(s,r){L(s,e,r),o(e,n)},p(s,r){r&1&&l!==(l=s[4].damage+"")&&M(n,l)},d(s){s&&E(e)}}}function ll(t){let e,l,n=t[4].name+"",s,r,i,c=t[4].damage&&tl(t);return{c(){e=d("div"),l=d("span"),s=k(n),r=w(),c&&c.c(),i=w(),u(l,"class","attack-name svelte-1gymiiy"),u(e,"class","attack svelte-1gymiiy"),K(e,"highlighted",t[2]===t[4].name)},m(f,a){L(f,e,a),o(e,l),o(l,s),o(e,r),c&&c.m(e,null),o(e,i)},p(f,a){a&1&&n!==(n=f[4].name+"")&&M(s,n),f[4].damage?c?c.p(f,a):(c=tl(f),c.c(),c.m(e,i)):c&&(c.d(1),c=null),a&5&&K(e,"highlighted",f[2]===f[4].name)},d(f){f&&E(e),c&&c.d()}}}function gn(t){let e,l,n,s,r,i,c,f,a=t[0].name+"",g,v,h,m=t[3]&&t[0].rarity&&xt(t),p=t[1]&&t[0].attacks&&t[0].attacks.length>0&&el(t);return{c(){e=d("div"),l=d("div"),n=d("img"),i=w(),c=d("div"),f=d("h3"),g=k(a),v=w(),m&&m.c(),h=w(),p&&p.c(),_e(n.src,s=t[0].image)||u(n,"src",s),u(n,"alt",r=t[0].name),u(n,"class","svelte-1gymiiy"),u(l,"class","card-image svelte-1gymiiy"),u(f,"class","card-name svelte-1gymiiy"),u(c,"class","card-info svelte-1gymiiy"),u(e,"class","pokemon-card svelte-1gymiiy")},m(_,y){L(_,e,y),o(e,l),o(l,n),o(e,i),o(e,c),o(c,f),o(f,g),o(c,v),m&&m.m(c,null),o(c,h),p&&p.m(c,null)},p(_,[y]){y&1&&!_e(n.src,s=_[0].image)&&u(n,"src",s),y&1&&r!==(r=_[0].name)&&u(n,"alt",r),y&1&&a!==(a=_[0].name+"")&&M(g,a),_[3]&&_[0].rarity?m?m.p(_,y):(m=xt(_),m.c(),m.m(c,h)):m&&(m.d(1),m=null),_[1]&&_[0].attacks&&_[0].attacks.length>0?p?p.p(_,y):(p=el(_),p.c(),p.m(c,null)):p&&(p.d(1),p=null)},i:Z,o:Z,d(_){_&&E(e),m&&m.d(),p&&p.d()}}}function mn(t,e,l){let{card:n}=e,{showAttacks:s=!1}=e,{highlightedAttack:r=null}=e,{showRarity:i=!1}=e;return t.$$set=c=>{"card"in c&&l(0,n=c.card),"showAttacks"in c&&l(1,s=c.showAttacks),"highlightedAttack"in c&&l(2,r=c.highlightedAttack),"showRarity"in c&&l(3,i=c.showRarity)},[n,s,r,i]}class vn extends Le{constructor(e){super(),Ee(this,e,mn,gn,Ce,{card:0,showAttacks:1,highlightedAttack:2,showRarity:3})}}function nl(t){let e;return{c(){e=d("span"),e.textContent="1.",u(e,"class","question-number svelte-174fqld")},m(l,n){L(l,e,n)},d(l){l&&E(e)}}}function sl(t){let e,l,n,s,r=t[0].secondQuestion+"",i,c,f,a,g,v,h;return{c(){e=d("div"),l=d("span"),l.textContent="2.",n=w(),s=d("h3"),i=k(r),c=w(),f=d("div"),a=d("input"),u(l,"class","question-number svelte-174fqld"),u(s,"class","question-text svelte-174fqld"),u(e,"class","question-item svelte-174fqld"),$e(e,"padding-top","2em"),u(a,"type","number"),u(a,"placeholder",g=t[1].enterAnswer),u(a,"class","answer-input svelte-174fqld"),u(f,"class","input-group svelte-174fqld")},m(m,p){L(m,e,p),o(e,l),o(e,n),o(e,s),o(s,i),L(m,c,p),L(m,f,p),o(f,a),ue(a,t[3]),v||(h=[H(a,"input",t[8]),H(a,"keypress",t[5])],v=!0)},p(m,p){p&1&&r!==(r=m[0].secondQuestion+"")&&M(i,r),p&2&&g!==(g=m[1].enterAnswer)&&u(a,"placeholder",g),p&8&&ut(a.value)!==m[3]&&ue(a,m[3])},d(m){m&&(E(e),E(c),E(f)),v=!1,ae(h)}}}function pn(t){let e,l,n,s,r,i,c,f,a,g=t[0].questionText+"",v,h,m,p,_,y,P,C,D=t[1].submitAnswer+"",I,S,b,O,Y;n=new vn({props:{card:t[0].card,showRarity:!0}});let T=t[0].secondQuestion&&nl(),q=t[0].secondQuestion&&sl(t);return{c(){e=d("div"),l=d("div"),Ye(n.$$.fragment),s=w(),r=d("div"),i=d("div"),c=d("div"),T&&T.c(),f=w(),a=d("h3"),v=k(g),h=w(),m=d("div"),p=d("input"),y=w(),q&&q.c(),P=w(),C=d("button"),I=k(D),u(l,"class","card-display svelte-174fqld"),u(a,"class","question-text svelte-174fqld"),u(c,"class","question-item svelte-174fqld"),u(p,"type","number"),u(p,"placeholder",_=t[1].enterAnswer),u(p,"class","answer-input svelte-174fqld"),u(m,"class","input-group svelte-174fqld"),u(C,"class","submit-btn btn-primary svelte-174fqld"),$e(C,"margin-top","2em"),C.disabled=S=!t[2]||t[0].secondQuestion&&!t[3],u(i,"class","questions-list svelte-174fqld"),u(r,"class","question-container svelte-174fqld"),u(e,"class","quiz-view svelte-174fqld")},m(Q,z){L(Q,e,z),o(e,l),Me(n,l,null),o(e,s),o(e,r),o(r,i),o(i,c),T&&T.m(c,null),o(c,f),o(c,a),o(a,v),o(i,h),o(i,m),o(m,p),ue(p,t[2]),o(i,y),q&&q.m(i,null),o(i,P),o(i,C),o(C,I),b=!0,O||(Y=[H(p,"input",t[7]),H(p,"keypress",t[5]),H(C,"click",t[4])],O=!0)},p(Q,[z]){const G={};z&1&&(G.card=Q[0].card),n.$set(G),Q[0].secondQuestion?T||(T=nl(),T.c(),T.m(c,f)):T&&(T.d(1),T=null),(!b||z&1)&&g!==(g=Q[0].questionText+"")&&M(v,g),(!b||z&2&&_!==(_=Q[1].enterAnswer))&&u(p,"placeholder",_),z&4&&ut(p.value)!==Q[2]&&ue(p,Q[2]),Q[0].secondQuestion?q?q.p(Q,z):(q=sl(Q),q.c(),q.m(i,P)):q&&(q.d(1),q=null),(!b||z&2)&&D!==(D=Q[1].submitAnswer+"")&&M(I,D),(!b||z&13&&S!==(S=!Q[2]||Q[0].secondQuestion&&!Q[3]))&&(C.disabled=S)},i(Q){b||(fe(n.$$.fragment,Q),b=!0)},o(Q){ke(n.$$.fragment,Q),b=!1},d(Q){Q&&E(e),Qe(n),T&&T.d(),q&&q.d(),O=!1,ae(Y)}}}function hn(t,e,l){let{question:n}=e,{t:s}=e,{currentSet:r}=e;const i=dt();let c="",f="";function a(){const m=parseInt(c,10);if(!isNaN(m))if(n.secondQuestion&&n.secondAnswer!==void 0){const p=parseInt(f,10);isNaN(p)||i("answer",{firstAnswer:m,secondAnswer:p})}else i("answer",{firstAnswer:m})}function g(m){m.key==="Enter"&&a()}function v(){c=ut(this.value),l(2,c)}function h(){f=ut(this.value),l(3,f)}return t.$$set=m=>{"question"in m&&l(0,n=m.question),"t"in m&&l(1,s=m.t),"currentSet"in m&&l(6,r=m.currentSet)},[n,s,c,f,a,g,r,v,h]}class _n extends Le{constructor(e){super(),Ee(this,e,hn,pn,Ce,{question:0,t:1,currentSet:6})}}function kn(t){let e,l,n,s=t[4].notQuite+"",r,i,c,f=t[4].incorrectMessage+"",a,g,v,h,m,p=t[4].correctMessage.toLowerCase()+"",_,y,P,C,D,I,S,b,O=t[4].encouragement+"",Y,T=t[5]&&t[6]>0&&rl(t);return{c(){e=d("div"),e.textContent="✗",l=w(),n=d("h2"),r=k(s),i=w(),c=d("p"),a=k(f),g=w(),v=d("strong"),h=k(t[2]),m=k(", "),_=k(p),y=w(),P=d("strong"),C=k(t[1]),D=k("."),I=w(),T&&T.c(),S=w(),b=d("p"),Y=k(O),u(e,"class","result-icon error svelte-1v74pgf"),u(n,"class","result-title svelte-1v74pgf"),u(v,"class","svelte-1v74pgf"),u(P,"class","svelte-1v74pgf"),u(c,"class","result-message svelte-1v74pgf"),u(b,"class","encouragement svelte-1v74pgf")},m(q,Q){L(q,e,Q),L(q,l,Q),L(q,n,Q),o(n,r),L(q,i,Q),L(q,c,Q),o(c,a),o(c,g),o(c,v),o(v,h),o(c,m),o(c,_),o(c,y),o(c,P),o(P,C),o(c,D),L(q,I,Q),T&&T.m(q,Q),L(q,S,Q),L(q,b,Q),o(b,Y)},p(q,Q){Q&16&&s!==(s=q[4].notQuite+"")&&M(r,s),Q&16&&f!==(f=q[4].incorrectMessage+"")&&M(a,f),Q&4&&M(h,q[2]),Q&16&&p!==(p=q[4].correctMessage.toLowerCase()+"")&&M(_,p),Q&2&&M(C,q[1]),q[5]&&q[6]>0?T?T.p(q,Q):(T=rl(q),T.c(),T.m(S.parentNode,S)):T&&(T.d(1),T=null),Q&16&&O!==(O=q[4].encouragement+"")&&M(Y,O)},d(q){q&&(E(e),E(l),E(n),E(i),E(c),E(I),E(S),E(b)),T&&T.d(q)}}}function bn(t){let e,l,n,s=t[4].correct+"",r,i,c,f=t[4].correctMessage+"",a,g,v,h,m,p=(t[1]===1?t[4].hit:t[4].hits)+"",_,y,P,C,D,I=t[5]&&!t[3]&&ol(t),S=t[3]&&il(t);return{c(){e=d("div"),e.textContent="✓",l=w(),n=d("h2"),r=k(s),i=w(),c=d("p"),a=k(f),g=w(),v=d("strong"),h=k(t[1]),m=w(),_=k(p),y=k("!"),P=w(),I&&I.c(),C=w(),S&&S.c(),D=It(),u(e,"class","result-icon success svelte-1v74pgf"),u(n,"class","result-title svelte-1v74pgf"),u(v,"class","svelte-1v74pgf"),u(c,"class","result-message svelte-1v74pgf")},m(b,O){L(b,e,O),L(b,l,O),L(b,n,O),o(n,r),L(b,i,O),L(b,c,O),o(c,a),o(c,g),o(c,v),o(v,h),o(c,m),o(c,_),o(c,y),L(b,P,O),I&&I.m(b,O),L(b,C,O),S&&S.m(b,O),L(b,D,O)},p(b,O){O&16&&s!==(s=b[4].correct+"")&&M(r,s),O&16&&f!==(f=b[4].correctMessage+"")&&M(a,f),O&2&&M(h,b[1]),O&18&&p!==(p=(b[1]===1?b[4].hit:b[4].hits)+"")&&M(_,p),b[5]&&!b[3]?I?I.p(b,O):(I=ol(b),I.c(),I.m(C.parentNode,C)):I&&(I.d(1),I=null),b[3]?S?S.p(b,O):(S=il(b),S.c(),S.m(D.parentNode,D)):S&&(S.d(1),S=null)},d(b){b&&(E(e),E(l),E(n),E(i),E(c),E(P),E(C),E(D)),I&&I.d(b),S&&S.d(b)}}}function rl(t){let e,l=t[4].language==="Språk"?"Streak reset! Try again.":"Rekke tilbakestilt! Prøv igjen.",n;return{c(){e=d("p"),n=k(l),u(e,"class","streak-lost svelte-1v74pgf")},m(s,r){L(s,e,r),o(e,n)},p(s,r){r&16&&l!==(l=s[4].language==="Språk"?"Streak reset! Try again.":"Rekke tilbakestilt! Prøv igjen.")&&M(n,l)},d(s){s&&E(e)}}}function ol(t){let e,l,n,s,r,i,c;function f(v,h){return v[7]===1?Cn:wn}let a=f(t),g=a(t);return{c(){e=d("div"),l=d("p"),g.c(),n=w(),s=d("div"),r=d("div"),i=w(),c=d("div"),u(l,"class","streak-text svelte-1v74pgf"),u(r,"class","streak-dot svelte-1v74pgf"),K(r,"filled",t[7]>=1),u(c,"class","streak-dot svelte-1v74pgf"),K(c,"filled",t[7]>=2),u(s,"class","streak-progress svelte-1v74pgf"),u(e,"class","streak-info svelte-1v74pgf")},m(v,h){L(v,e,h),o(e,l),g.m(l,null),o(e,n),o(e,s),o(s,r),o(s,i),o(s,c)},p(v,h){a===(a=f(v))&&g?g.p(v,h):(g.d(1),g=a(v),g&&(g.c(),g.m(l,null))),h&128&&K(r,"filled",v[7]>=1),h&128&&K(c,"filled",v[7]>=2)},d(v){v&&E(e),g.d()}}}function wn(t){let e=t[4].language==="Språk"?"Get 2 correct answers to win this rare card!":"Få 2 riktige svar for å vinne dette sjeldne kortet!",l;return{c(){l=k(e)},m(n,s){L(n,l,s)},p(n,s){s&16&&e!==(e=n[4].language==="Språk"?"Get 2 correct answers to win this rare card!":"Få 2 riktige svar for å vinne dette sjeldne kortet!")&&M(l,e)},d(n){n&&E(l)}}}function Cn(t){let e=t[4].language==="Språk"?"One more correct to win this card!":"Én til riktig for å vinne dette kortet!",l;return{c(){l=k(e)},m(n,s){L(n,l,s)},p(n,s){s&16&&e!==(e=n[4].language==="Språk"?"One more correct to win this card!":"Én til riktig for å vinne dette kortet!")&&M(l,e)},d(n){n&&E(l)}}}function il(t){let e,l,n=t[4].youWonThisCard+"",s,r,i,c,f,a,g,v,h,m=t[3].name+"",p;return{c(){e=d("div"),l=d("h3"),s=k(n),r=w(),i=d("div"),c=d("div"),f=d("img"),v=w(),h=d("span"),p=k(m),u(l,"class","svelte-1v74pgf"),_e(f.src,a=t[3].image)||u(f,"src",a),u(f,"alt",g=t[3].name),u(f,"class","svelte-1v74pgf"),u(h,"class","card-name svelte-1v74pgf"),u(c,"class","mini-card svelte-1v74pgf"),u(i,"class","cards-grid svelte-1v74pgf"),u(e,"class","won-cards svelte-1v74pgf")},m(_,y){L(_,e,y),o(e,l),o(l,s),o(e,r),o(e,i),o(i,c),o(c,f),o(c,v),o(c,h),o(h,p)},p(_,y){y&16&&n!==(n=_[4].youWonThisCard+"")&&M(s,n),y&8&&!_e(f.src,a=_[3].image)&&u(f,"src",a),y&8&&g!==(g=_[3].name)&&u(f,"alt",g),y&8&&m!==(m=_[3].name+"")&&M(p,m)},d(_){_&&E(e)}}}function Sn(t){let e,l,n,s,r=t[4].nextQuestion+"",i,c,f;function a(h,m){return h[0]?bn:kn}let g=a(t),v=g(t);return{c(){e=d("div"),l=d("div"),v.c(),n=w(),s=d("button"),i=k(r),u(l,"class","result-card svelte-1v74pgf"),K(l,"correct",t[0]),K(l,"incorrect",!t[0]),u(s,"class","next-btn btn-primary svelte-1v74pgf"),u(e,"class","result-view svelte-1v74pgf")},m(h,m){L(h,e,m),o(e,l),v.m(l,null),o(e,n),o(e,s),o(s,i),c||(f=H(s,"click",t[8]),c=!0)},p(h,[m]){g===(g=a(h))&&v?v.p(h,m):(v.d(1),v=g(h),v&&(v.c(),v.m(l,null))),m&1&&K(l,"correct",h[0]),m&1&&K(l,"incorrect",!h[0]),m&16&&r!==(r=h[4].nextQuestion+"")&&M(i,r)},i:Z,o:Z,d(h){h&&E(e),v.d(),c=!1,f()}}}function yn(t,e,l){let{isCorrect:n}=e,{correctAnswer:s}=e,{userAnswer:r}=e,{wonCard:i}=e,{t:c}=e,{needsStreak:f=!1}=e,{streakProgress:a=0}=e,{currentStreak:g=0}=e;const v=dt();function h(){v("next")}return t.$$set=m=>{"isCorrect"in m&&l(0,n=m.isCorrect),"correctAnswer"in m&&l(1,s=m.correctAnswer),"userAnswer"in m&&l(2,r=m.userAnswer),"wonCard"in m&&l(3,i=m.wonCard),"t"in m&&l(4,c=m.t),"needsStreak"in m&&l(5,f=m.needsStreak),"streakProgress"in m&&l(6,a=m.streakProgress),"currentStreak"in m&&l(7,g=m.currentStreak)},[n,s,r,i,c,f,a,g,h]}class An extends Le{constructor(e){super(),Ee(this,e,yn,Sn,Ce,{isCorrect:0,correctAnswer:1,userAnswer:2,wonCard:3,t:4,needsStreak:5,streakProgress:6,currentStreak:7})}}function qn(){try{const t=nn(),e=new Blob([t],{type:"application/json"}),l=URL.createObjectURL(e),n=document.createElement("a");n.href=l,n.download=`pokemon-collection-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(l)}catch(t){throw console.error("Error downloading backup:",t),new Error("Failed to download backup")}}function Mn(t){return new Promise(e=>{const l=new FileReader;l.onload=n=>{var s;try{const r=(s=n.target)==null?void 0:s.result,i=sn(r);e(i)}catch(r){console.error("Error reading file:",r),e({success:!1,error:"Failed to read file"})}},l.onerror=()=>{e({success:!1,error:"Failed to read file"})},l.readAsText(t)})}function al(t,e,l){const n=t.slice();return n[33]=e[l],n}function cl(t,e,l){const n=t.slice();return n[36]=e[l],n}function ul(t,e,l){const n=t.slice();return n[33]=e[l],n}function fl(t,e,l){const n=t.slice();return n[36]=e[l],n}function Qn(t){let e=t[1].language==="Språk"?`Defeat ${t[10]>0?t[10].toLocaleString():0} HP to unlock 5 rare cards`:`Beseir ${t[10]>0?t[10].toLocaleString():0} HP for å låse opp 5 sjeldne kort`,l;return{c(){l=k(e)},m(n,s){L(n,l,s)},p(n,s){s[0]&1026&&e!==(e=n[1].language==="Språk"?`Defeat ${n[10]>0?n[10].toLocaleString():0} HP to unlock 5 rare cards`:`Beseir ${n[10]>0?n[10].toLocaleString():0} HP for å låse opp 5 sjeldne kort`)&&M(l,e)},d(n){n&&E(l)}}}function En(t){let e=t[1].language==="Språk"?"Rare cards unlocked!":"Sjeldne kort låst opp!",l;return{c(){l=k(e)},m(n,s){L(n,l,s)},p(n,s){s[0]&2&&e!==(e=n[1].language==="Språk"?"Rare cards unlocked!":"Sjeldne kort låst opp!")&&M(l,e)},d(n){n&&E(l)}}}function dl(t){let e,l;return{c(){e=d("div"),l=d("div"),u(l,"class","hp-progress-fill svelte-1c2fvge"),$e(l,"width",t[8]+"%"),u(e,"class","hp-progress-bar svelte-1c2fvge")},m(n,s){L(n,e,s),o(e,l)},p(n,s){s[0]&256&&$e(l,"width",n[8]+"%")},d(n){n&&E(e)}}}function gl(t){let e,l,n,s,r,i,c;function f(){return t[24](t[36])}return{c(){e=d("button"),l=d("img"),r=w(),_e(l.src,n=t[36].image)||u(l,"src",n),u(l,"alt",s=t[36].name),u(l,"class","svelte-1c2fvge"),K(l,"locked",!t[9]),u(e,"class","rare-thumbnail svelte-1c2fvge"),K(e,"unlocked",t[9])},m(a,g){L(a,e,g),o(e,l),o(e,r),i||(c=H(e,"click",f),i=!0)},p(a,g){t=a,g[0]&16&&!_e(l.src,n=t[36].image)&&u(l,"src",n),g[0]&16&&s!==(s=t[36].name)&&u(l,"alt",s),g[0]&512&&K(l,"locked",!t[9]),g[0]&512&&K(e,"unlocked",t[9])},d(a){a&&E(e),i=!1,c()}}}function Ln(t){let e,l=de(t[0].cards),n=[];for(let s=0;s<l.length;s+=1)n[s]=hl(cl(t,l,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","cards-grid svelte-1c2fvge")},m(s,r){L(s,e,r);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,r){if(r[0]&524289){l=de(s[0].cards);let i;for(i=0;i<l.length;i+=1){const c=cl(s,l,i);n[i]?n[i].p(c,r):(n[i]=hl(c),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=l.length}},d(s){s&&E(e),He(n,s)}}}function In(t){let e,l,n,s,r=t[1].noCardsYet+"",i,c,f,a=t[1].noCardsDescription+"",g;return{c(){e=d("div"),l=d("div"),l.textContent="📦",n=w(),s=d("h3"),i=k(r),c=w(),f=d("p"),g=k(a),u(l,"class","empty-icon svelte-1c2fvge"),u(s,"class","svelte-1c2fvge"),u(f,"class","svelte-1c2fvge"),u(e,"class","empty-state svelte-1c2fvge")},m(v,h){L(v,e,h),o(e,l),o(e,n),o(e,s),o(s,i),o(e,c),o(e,f),o(f,g)},p(v,h){h[0]&2&&r!==(r=v[1].noCardsYet+"")&&M(i,r),h[0]&2&&a!==(a=v[1].noCardsDescription+"")&&M(g,a)},d(v){v&&E(e)}}}function ml(t){let e,l,n=t[36].hp+"",s;return{c(){e=d("span"),l=k("HP "),s=k(n),u(e,"class","hp svelte-1c2fvge")},m(r,i){L(r,e,i),o(e,l),o(e,s)},p(r,i){i[0]&1&&n!==(n=r[36].hp+"")&&M(s,n)},d(r){r&&E(e)}}}function vl(t){let e,l=de(t[36].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=pl(ul(t,l,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","types svelte-1c2fvge")},m(s,r){L(s,e,r);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,r){if(r[0]&1){l=de(s[36].types);let i;for(i=0;i<l.length;i+=1){const c=ul(s,l,i);n[i]?n[i].p(c,r):(n[i]=pl(c),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=l.length}},d(s){s&&E(e),He(n,s)}}}function pl(t){let e,l=t[33]+"",n;return{c(){e=d("span"),n=k(l),u(e,"class","type svelte-1c2fvge")},m(s,r){L(s,e,r),o(e,n)},p(s,r){r[0]&1&&l!==(l=s[33]+"")&&M(n,l)},d(s){s&&E(e)}}}function hl(t){let e,l,n,s,r,i,c,f=t[36].name+"",a,g,v,h,m,p,_=t[36].hp&&ml(t),y=t[36].types&&t[36].types.length>0&&vl(t);function P(){return t[25](t[36])}return{c(){e=d("button"),l=d("img"),r=w(),i=d("div"),c=d("h4"),a=k(f),g=w(),_&&_.c(),v=w(),y&&y.c(),h=w(),_e(l.src,n=t[36].image)||u(l,"src",n),u(l,"alt",s=t[36].name),u(l,"class","svelte-1c2fvge"),u(c,"class","svelte-1c2fvge"),u(i,"class","card-details svelte-1c2fvge"),u(e,"class","collection-card svelte-1c2fvge")},m(C,D){L(C,e,D),o(e,l),o(e,r),o(e,i),o(i,c),o(c,a),o(i,g),_&&_.m(i,null),o(i,v),y&&y.m(i,null),o(e,h),m||(p=H(e,"click",P),m=!0)},p(C,D){t=C,D[0]&1&&!_e(l.src,n=t[36].image)&&u(l,"src",n),D[0]&1&&s!==(s=t[36].name)&&u(l,"alt",s),D[0]&1&&f!==(f=t[36].name+"")&&M(a,f),t[36].hp?_?_.p(t,D):(_=ml(t),_.c(),_.m(i,v)):_&&(_.d(1),_=null),t[36].types&&t[36].types.length>0?y?y.p(t,D):(y=vl(t),y.c(),y.m(i,null)):y&&(y.d(1),y=null)},d(C){C&&E(e),_&&_.d(),y&&y.d(),m=!1,p()}}}function _l(t){let e,l=t[6].text+"",n;return{c(){e=d("div"),n=k(l),u(e,"class","message svelte-1c2fvge"),K(e,"success",t[6].type==="success"),K(e,"error",t[6].type==="error")},m(s,r){L(s,e,r),o(e,n)},p(s,r){r[0]&64&&l!==(l=s[6].text+"")&&M(n,l),r[0]&64&&K(e,"success",s[6].type==="success"),r[0]&64&&K(e,"error",s[6].type==="error")},d(s){s&&E(e)}}}function kl(t){let e,l,n,s,r,i,c,f,a,g,v=t[3].name+"",h,m,p,_,y,P,C=t[3].hp&&bl(t),D=t[3].types&&t[3].types.length>0&&wl(t),I=t[3].rarity&&Sl(t);return{c(){e=d("div"),l=d("div"),n=d("button"),n.textContent="×",s=w(),r=d("img"),f=w(),a=d("div"),g=d("h3"),h=k(v),m=w(),C&&C.c(),p=w(),D&&D.c(),_=w(),I&&I.c(),u(n,"class","close-modal svelte-1c2fvge"),_e(r.src,i=t[3].image)||u(r,"src",i),u(r,"alt",c=t[3].name),u(r,"class","modal-card-image svelte-1c2fvge"),u(g,"class","svelte-1c2fvge"),u(a,"class","modal-card-info svelte-1c2fvge"),u(l,"class","card-modal svelte-1c2fvge"),u(l,"role","dialog"),u(e,"class","dialog-overlay svelte-1c2fvge"),u(e,"role","button"),u(e,"tabindex","-1")},m(S,b){L(S,e,b),o(e,l),o(l,n),o(l,s),o(l,r),o(l,f),o(l,a),o(a,g),o(g,h),o(a,m),C&&C.m(a,null),o(a,p),D&&D.m(a,null),o(a,_),I&&I.m(a,null),y||(P=[H(n,"click",t[20]),H(l,"click",Ql(t[23])),H(e,"click",t[20]),H(e,"keydown",t[27])],y=!0)},p(S,b){b[0]&8&&!_e(r.src,i=S[3].image)&&u(r,"src",i),b[0]&8&&c!==(c=S[3].name)&&u(r,"alt",c),b[0]&8&&v!==(v=S[3].name+"")&&M(h,v),S[3].hp?C?C.p(S,b):(C=bl(S),C.c(),C.m(a,p)):C&&(C.d(1),C=null),S[3].types&&S[3].types.length>0?D?D.p(S,b):(D=wl(S),D.c(),D.m(a,_)):D&&(D.d(1),D=null),S[3].rarity?I?I.p(S,b):(I=Sl(S),I.c(),I.m(a,null)):I&&(I.d(1),I=null)},d(S){S&&E(e),C&&C.d(),D&&D.d(),I&&I.d(),y=!1,ae(P)}}}function bl(t){let e,l,n=t[3].hp+"",s;return{c(){e=d("div"),l=k("HP: "),s=k(n),u(e,"class","modal-hp svelte-1c2fvge")},m(r,i){L(r,e,i),o(e,l),o(e,s)},p(r,i){i[0]&8&&n!==(n=r[3].hp+"")&&M(s,n)},d(r){r&&E(e)}}}function wl(t){let e,l=de(t[3].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=Cl(al(t,l,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","modal-types svelte-1c2fvge")},m(s,r){L(s,e,r);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,r){if(r[0]&8){l=de(s[3].types);let i;for(i=0;i<l.length;i+=1){const c=al(s,l,i);n[i]?n[i].p(c,r):(n[i]=Cl(c),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=l.length}},d(s){s&&E(e),He(n,s)}}}function Cl(t){let e,l=t[33]+"",n;return{c(){e=d("span"),n=k(l),u(e,"class","modal-type svelte-1c2fvge")},m(s,r){L(s,e,r),o(e,n)},p(s,r){r[0]&8&&l!==(l=s[33]+"")&&M(n,l)},d(s){s&&E(e)}}}function Sl(t){let e,l,n=t[3].rarity+"",s;return{c(){e=d("div"),l=k("Rarity: "),s=k(n),u(e,"class","modal-rarity svelte-1c2fvge")},m(r,i){L(r,e,i),o(e,l),o(e,s)},p(r,i){i[0]&8&&n!==(n=r[3].rarity+"")&&M(s,n)},d(r){r&&E(e)}}}function yl(t){let e,l,n,s=t[1].clearCollectionTitle+"",r,i,c,f=t[1].clearCollectionMessage+"",a,g,v,h,m=t[1].cancel+"",p,_,y,P=t[1].clearCollection+"",C,D,I;return{c(){e=d("div"),l=d("div"),n=d("h3"),r=k(s),i=w(),c=d("p"),a=k(f),g=w(),v=d("div"),h=d("button"),p=k(m),_=w(),y=d("button"),C=k(P),u(n,"class","svelte-1c2fvge"),u(c,"class","svelte-1c2fvge"),u(h,"class","btn-secondary"),u(y,"class","btn-error"),u(v,"class","dialog-actions svelte-1c2fvge"),u(l,"class","dialog svelte-1c2fvge"),u(l,"role","dialog"),u(e,"class","dialog-overlay svelte-1c2fvge"),u(e,"role","button"),u(e,"tabindex","-1")},m(S,b){L(S,e,b),o(e,l),o(l,n),o(n,r),o(l,i),o(l,c),o(c,a),o(l,g),o(l,v),o(v,h),o(h,p),o(v,_),o(v,y),o(y,C),D||(I=[H(h,"click",t[16]),H(y,"click",t[17]),H(l,"click",Ql(t[22])),H(l,"keydown",Nn),H(e,"click",t[16]),H(e,"keydown",t[28])],D=!0)},p(S,b){b[0]&2&&s!==(s=S[1].clearCollectionTitle+"")&&M(r,s),b[0]&2&&f!==(f=S[1].clearCollectionMessage+"")&&M(a,f),b[0]&2&&m!==(m=S[1].cancel+"")&&M(p,m),b[0]&2&&P!==(P=S[1].clearCollection+"")&&M(C,P)},d(S){S&&E(e),D=!1,ae(I)}}}function Tn(t){let e,l,n,s,r,i,c,f,a,g=t[1].yourCollection+"",v,h,m,p,_,y,P=t[0].cards.length+"",C,D,I,S=t[1].cardsCollected+"",b,O,Y,T,q=t[0].stats.totalQuestions+"",Q,z,G,te=t[1].questionsAnswered+"",J,X,F,B,W=t[0].stats.correctAnswers+"",A,R,U,V=t[1].correctAnswers+"",$,ce,oe,ge,be,mt,Ue,ie,Ie=t[1].accuracy+"",Ve,vt,Te,Ne,De,et=(t[1].language||"Language")+"",pt,Rt,Ft,we,Se,ye,Ot,me,Ke,tt=t[1].exportBackup+"",ht,Bt,We,lt=t[1].importBackup+"",_t,zt,Ge,nt=t[1].clearThisSet+"",kt,jt,Ae,Ht,bt,Je,Xe,wt,Yt;function Ut(N,j){return N[9]?En:Qn}let st=Ut(t),ve=st(t),le=!t[9]&&dl(t),Pe=de(t[4]),ee=[];for(let N=0;N<Pe.length;N+=1)ee[N]=gl(fl(t,Pe,N));function Vt(N,j){return N[0].cards.length===0?In:Ln}let rt=Vt(t),pe=rt(t),ne=t[6]&&_l(t),se=t[3]&&kl(t),re=t[7]&&yl(t);return{c(){e=d("div"),l=d("div"),n=d("div"),ve.c(),s=w(),le&&le.c(),r=w(),i=d("div");for(let N=0;N<ee.length;N+=1)ee[N].c();c=w(),f=d("div"),a=d("h2"),v=k(g),h=w(),pe.c(),m=w(),p=d("div"),_=d("div"),y=d("div"),C=k(P),D=w(),I=d("div"),b=k(S),O=w(),Y=d("div"),T=d("div"),Q=k(q),z=w(),G=d("div"),J=k(te),X=w(),F=d("div"),B=d("div"),A=k(W),R=w(),U=d("div"),$=k(V),ce=w(),oe=d("div"),ge=d("div"),be=k(t[11]),mt=k("%"),Ue=w(),ie=d("div"),Ve=k(Ie),vt=w(),Te=d("div"),Ne=d("div"),De=d("label"),pt=k(et),Rt=k(":"),Ft=w(),we=d("select"),Se=d("option"),Se.textContent="English",ye=d("option"),ye.textContent="Norsk",Ot=w(),me=d("div"),Ke=d("button"),ht=k(tt),Bt=w(),We=d("button"),_t=k(lt),zt=w(),Ge=d("button"),kt=k(nt),jt=w(),Ae=d("input"),Ht=w(),ne&&ne.c(),bt=w(),se&&se.c(),Je=w(),re&&re.c(),Xe=It(),u(n,"class","rare-section-text svelte-1c2fvge"),u(i,"class","rare-cards-thumbnails svelte-1c2fvge"),u(l,"class","rare-cards-section svelte-1c2fvge"),u(a,"class","svelte-1c2fvge"),u(f,"class","collection-header svelte-1c2fvge"),u(y,"class","stat-value svelte-1c2fvge"),u(I,"class","stat-label svelte-1c2fvge"),u(_,"class","stat-card svelte-1c2fvge"),u(T,"class","stat-value svelte-1c2fvge"),u(G,"class","stat-label svelte-1c2fvge"),u(Y,"class","stat-card svelte-1c2fvge"),u(B,"class","stat-value svelte-1c2fvge"),u(U,"class","stat-label svelte-1c2fvge"),u(F,"class","stat-card svelte-1c2fvge"),u(ge,"class","stat-value svelte-1c2fvge"),u(ie,"class","stat-label svelte-1c2fvge"),u(oe,"class","stat-card svelte-1c2fvge"),u(p,"class","stats-section svelte-1c2fvge"),u(De,"for","language-select"),u(De,"class","svelte-1c2fvge"),Se.__value="en",ue(Se,Se.__value),u(Se,"class","svelte-1c2fvge"),ye.__value="no",ue(ye,ye.__value),u(ye,"class","svelte-1c2fvge"),u(we,"id","language-select"),u(we,"class","language-selector svelte-1c2fvge"),u(Ne,"class","language-selector-container svelte-1c2fvge"),u(Ke,"class","btn-secondary"),u(We,"class","btn-secondary"),u(Ge,"class","btn-error"),u(Ae,"type","file"),u(Ae,"accept",".json"),$e(Ae,"display","none"),u(me,"class","functions-actions svelte-1c2fvge"),u(Te,"class","functions-section svelte-1c2fvge"),u(e,"class","collection-view svelte-1c2fvge")},m(N,j){L(N,e,j),o(e,l),o(l,n),ve.m(n,null),o(l,s),le&&le.m(l,null),o(l,r),o(l,i);for(let x=0;x<ee.length;x+=1)ee[x]&&ee[x].m(i,null);o(e,c),o(e,f),o(f,a),o(a,v),o(e,h),pe.m(e,null),o(e,m),o(e,p),o(p,_),o(_,y),o(y,C),o(_,D),o(_,I),o(I,b),o(p,O),o(p,Y),o(Y,T),o(T,Q),o(Y,z),o(Y,G),o(G,J),o(p,X),o(p,F),o(F,B),o(B,A),o(F,R),o(F,U),o(U,$),o(p,ce),o(p,oe),o(oe,ge),o(ge,be),o(ge,mt),o(oe,Ue),o(oe,ie),o(ie,Ve),o(e,vt),o(e,Te),o(Te,Ne),o(Ne,De),o(De,pt),o(De,Rt),o(Ne,Ft),o(Ne,we),o(we,Se),o(we,ye),Be(we,t[2]),o(Te,Ot),o(Te,me),o(me,Ke),o(Ke,ht),o(me,Bt),o(me,We),o(We,_t),o(me,zt),o(me,Ge),o(Ge,kt),o(me,jt),o(me,Ae),t[26](Ae),o(e,Ht),ne&&ne.m(e,null),L(N,bt,j),se&&se.m(N,j),L(N,Je,j),re&&re.m(N,j),L(N,Xe,j),wt||(Yt=[H(we,"change",t[18]),H(Ke,"click",t[12]),H(We,"click",t[13]),H(Ge,"click",t[15]),H(Ae,"change",t[14])],wt=!0)},p(N,j){if(st===(st=Ut(N))&&ve?ve.p(N,j):(ve.d(1),ve=st(N),ve&&(ve.c(),ve.m(n,null))),N[9]?le&&(le.d(1),le=null):le?le.p(N,j):(le=dl(N),le.c(),le.m(l,r)),j[0]&524816){Pe=de(N[4]);let x;for(x=0;x<Pe.length;x+=1){const Kt=fl(N,Pe,x);ee[x]?ee[x].p(Kt,j):(ee[x]=gl(Kt),ee[x].c(),ee[x].m(i,null))}for(;x<ee.length;x+=1)ee[x].d(1);ee.length=Pe.length}j[0]&2&&g!==(g=N[1].yourCollection+"")&&M(v,g),rt===(rt=Vt(N))&&pe?pe.p(N,j):(pe.d(1),pe=rt(N),pe&&(pe.c(),pe.m(e,m))),j[0]&1&&P!==(P=N[0].cards.length+"")&&M(C,P),j[0]&2&&S!==(S=N[1].cardsCollected+"")&&M(b,S),j[0]&1&&q!==(q=N[0].stats.totalQuestions+"")&&M(Q,q),j[0]&2&&te!==(te=N[1].questionsAnswered+"")&&M(J,te),j[0]&1&&W!==(W=N[0].stats.correctAnswers+"")&&M(A,W),j[0]&2&&V!==(V=N[1].correctAnswers+"")&&M($,V),j[0]&2048&&M(be,N[11]),j[0]&2&&Ie!==(Ie=N[1].accuracy+"")&&M(Ve,Ie),j[0]&2&&et!==(et=(N[1].language||"Language")+"")&&M(pt,et),j[0]&4&&Be(we,N[2]),j[0]&2&&tt!==(tt=N[1].exportBackup+"")&&M(ht,tt),j[0]&2&&lt!==(lt=N[1].importBackup+"")&&M(_t,lt),j[0]&2&&nt!==(nt=N[1].clearThisSet+"")&&M(kt,nt),N[6]?ne?ne.p(N,j):(ne=_l(N),ne.c(),ne.m(e,null)):ne&&(ne.d(1),ne=null),N[3]?se?se.p(N,j):(se=kl(N),se.c(),se.m(Je.parentNode,Je)):se&&(se.d(1),se=null),N[7]?re?re.p(N,j):(re=yl(N),re.c(),re.m(Xe.parentNode,Xe)):re&&(re.d(1),re=null)},i:Z,o:Z,d(N){N&&(E(e),E(bt),E(Je),E(Xe)),ve.d(),le&&le.d(),He(ee,N),pe.d(),t[26](null),ne&&ne.d(),se&&se.d(N),re&&re.d(N),wt=!1,ae(Yt)}}}const Nn=()=>{};function Dn(t,e,l){let n,s,r,i,c;it(t,ft,A=>l(21,c=A));let{collection:f}=e,{t:a}=e,{language:g}=e,v=null,h=[],m=[];Ll(async()=>{await p()});async function p(){try{h=await Et(c);const A=[...h].sort((R,U)=>{const V=parseInt(R.localId||"0");return parseInt(U.localId||"0")-V});l(4,m=A.slice(0,5))}catch(A){console.error("Error loading rare cards:",A)}}const _=dt();let y,P=null,C=!1;function D(){try{qn(),b(a.collectionExported,"success")}catch{b(a.exportFailed,"error")}}function I(){y.click()}async function S(A){var V;const R=A.target,U=(V=R.files)==null?void 0:V[0];if(U){try{const $=await Mn(U);$.success?(b(a.collectionImported,"success"),_("refresh")):b($.error||a.importFailed,"error")}catch{b(a.importFailed,"error")}R.value=""}}function b(A,R){l(6,P={text:A,type:R}),setTimeout(()=>{l(6,P=null)},3e3)}function O(){l(7,C=!0)}function Y(){l(7,C=!1)}function T(){try{ln(),l(7,C=!1),b(a.collectionCleared,"success"),_("refresh")}catch{b(a.clearFailed,"error")}}function q(A){const R=A.target;_("languageChange",R.value)}function Q(A){l(3,v=A)}function z(){l(3,v=null)}function G(A){Gt.call(this,t,A)}function te(A){Gt.call(this,t,A)}const J=A=>Q({...A,collectedAt:new Date().toISOString()}),X=A=>Q(A);function F(A){qt[A?"unshift":"push"](()=>{y=A,l(5,y)})}const B=A=>A.key==="Escape"&&z(),W=A=>A.key==="Escape"&&Y();return t.$$set=A=>{"collection"in A&&l(0,f=A.collection),"t"in A&&l(1,a=A.t),"language"in A&&l(2,g=A.language)},t.$$.update=()=>{t.$$.dirty[0]&1&&l(11,n=f.stats.totalQuestions>0?Math.round(f.stats.correctAnswers/f.stats.totalQuestions*100):0),t.$$.dirty[0]&1&&l(10,s=16e3-(f.stats.totalHpDefeated||0)),t.$$.dirty[0]&2097153&&l(9,r=f.unlockedRareSets&&f.unlockedRareSets[c]||!1),t.$$.dirty[0]&1&&l(8,i=Math.min(f.stats.totalHpDefeated/16e3*100,100))},[f,a,g,v,m,y,P,C,i,r,s,n,D,I,S,O,Y,T,q,Q,z,c,G,te,J,X,F,B,W]}class Pn extends Le{constructor(e){super(),Ee(this,e,Dn,Tn,Ce,{collection:0,t:1,language:2},null,[-1,-1])}}function Rn(t){let e,l,n,s,r;return{c(){e=d("div"),l=d("div"),n=w(),s=d("p"),r=k(t[0]),u(l,"class","spinner svelte-1lxornd"),u(s,"class","svelte-1lxornd"),u(e,"class","loading-view svelte-1lxornd")},m(i,c){L(i,e,c),o(e,l),o(e,n),o(e,s),o(s,r)},p(i,[c]){c&1&&M(r,i[0])},i:Z,o:Z,d(i){i&&E(e)}}}function Fn(t,e,l){let{message:n="Loading..."}=e;return t.$$set=s=>{"message"in s&&l(0,n=s.message)},[n]}class On extends Le{constructor(e){super(),Ee(this,e,Fn,Rn,Ce,{message:0})}}function Bn(t){let e,l,n,s,r,i,c,f,a,g,v;return{c(){e=d("div"),l=d("div"),l.textContent="⚠️",n=w(),s=d("h2"),s.textContent="Oops!",r=w(),i=d("p"),c=k(t[0]),f=w(),a=d("button"),a.textContent="Try Again",u(l,"class","error-icon svelte-na0xmw"),u(s,"class","svelte-na0xmw"),u(i,"class","svelte-na0xmw"),u(a,"class","btn-primary"),u(e,"class","error-view svelte-na0xmw")},m(h,m){L(h,e,m),o(e,l),o(e,n),o(e,s),o(e,r),o(e,i),o(i,c),o(e,f),o(e,a),g||(v=H(a,"click",t[1]),g=!0)},p(h,[m]){m&1&&M(c,h[0])},i:Z,o:Z,d(h){h&&E(e),g=!1,v()}}}function zn(t,e,l){let{message:n="Something went wrong"}=e;const s=dt();function r(){s("retry")}return t.$$set=i=>{"message"in i&&l(0,n=i.message)},[n,r]}class jn extends Le{constructor(e){super(),Ee(this,e,zn,Bn,Ce,{message:0})}}function Hn(t,e,l){const n=t.slice();return n[34]=e[l],n}function Yn(t){let e,l;return e=new Pn({props:{collection:t[4],t:t[14],language:t[0]}}),e.$on("refresh",t[26]),e.$on("languageChange",t[28]),{c(){Ye(e.$$.fragment)},m(n,s){Me(e,n,s),l=!0},p(n,s){const r={};s[0]&16&&(r.collection=n[4]),s[0]&16384&&(r.t=n[14]),s[0]&1&&(r.language=n[0]),e.$set(r)},i(n){l||(fe(e.$$.fragment,n),l=!0)},o(n){ke(e.$$.fragment,n),l=!1},d(n){Qe(e,n)}}}function Un(t){let e,l,n,s;const r=[Gn,Wn,Kn,Vn],i=[];function c(f,a){return f[1]==="loading"?0:f[1]==="quiz"&&f[2]?1:f[1]==="result"&&f[2]?2:f[1]==="error"?3:-1}return~(e=c(t))&&(l=i[e]=r[e](t)),{c(){l&&l.c(),n=It()},m(f,a){~e&&i[e].m(f,a),L(f,n,a),s=!0},p(f,a){let g=e;e=c(f),e===g?~e&&i[e].p(f,a):(l&&(Tl(),ke(i[g],1,1,()=>{i[g]=null}),Nl()),~e?(l=i[e],l?l.p(f,a):(l=i[e]=r[e](f),l.c()),fe(l,1),l.m(n.parentNode,n)):l=null)},i(f){s||(fe(l),s=!0)},o(f){ke(l),s=!1},d(f){f&&E(n),~e&&i[e].d(f)}}}function Vn(t){let e,l;return e=new jn({props:{message:t[8]}}),e.$on("retry",t[23]),{c(){Ye(e.$$.fragment)},m(n,s){Me(e,n,s),l=!0},p(n,s){const r={};s[0]&256&&(r.message=n[8]),e.$set(r)},i(n){l||(fe(e.$$.fragment,n),l=!0)},o(n){ke(e.$$.fragment,n),l=!1},d(n){Qe(e,n)}}}function Kn(t){let e,l;return e=new An({props:{isCorrect:t[5],correctAnswer:t[2].correctAnswer,userAnswer:t[6],wonCard:t[7],t:t[14],needsStreak:t[12],streakProgress:t[13],currentStreak:t[4].currentStreak||0}}),e.$on("next",t[22]),{c(){Ye(e.$$.fragment)},m(n,s){Me(e,n,s),l=!0},p(n,s){const r={};s[0]&32&&(r.isCorrect=n[5]),s[0]&4&&(r.correctAnswer=n[2].correctAnswer),s[0]&64&&(r.userAnswer=n[6]),s[0]&128&&(r.wonCard=n[7]),s[0]&16384&&(r.t=n[14]),s[0]&4096&&(r.needsStreak=n[12]),s[0]&8192&&(r.streakProgress=n[13]),s[0]&16&&(r.currentStreak=n[4].currentStreak||0),e.$set(r)},i(n){l||(fe(e.$$.fragment,n),l=!0)},o(n){ke(e.$$.fragment,n),l=!1},d(n){Qe(e,n)}}}function Wn(t){var X;let e,l,n,s,r,i=t[14].gradeLevel+"",c,f,a,g=t[14].gradeLevel+"",v,h,m,p=t[14].gradeLevel+"",_,y,P,C=t[14].gradeLevel+"",D,I,S,b=t[14].gradeLevel+"",O,Y,T,q,Q,z,G,te=de(At),J=[];for(let F=0;F<te.length;F+=1)J[F]=Jn(Hn(t,te,F));return q=new _n({props:{question:t[2],t:t[14],currentSet:((X=At.find(t[27]))==null?void 0:X.name)||""}}),q.$on("answer",t[21]),{c(){e=d("div"),l=d("select");for(let F=0;F<J.length;F+=1)J[F].c();n=w(),s=d("select"),r=d("option"),c=k(i),f=k(" 1"),a=d("option"),v=k(g),h=k(" 2"),m=d("option"),_=k(p),y=k(" 3"),P=d("option"),D=k(C),I=k(" 4"),S=d("option"),O=k(b),Y=k(" 5"),T=w(),Ye(q.$$.fragment),u(l,"class","set-selector svelte-1ob364q"),r.__value=1,ue(r,r.__value),u(r,"class","svelte-1ob364q"),a.__value=2,ue(a,a.__value),u(a,"class","svelte-1ob364q"),m.__value=3,ue(m,m.__value),u(m,"class","svelte-1ob364q"),P.__value=4,ue(P,P.__value),u(P,"class","svelte-1ob364q"),S.__value=5,ue(S,S.__value),u(S,"class","svelte-1ob364q"),u(s,"class","klassetrinn-selector svelte-1ob364q"),u(e,"class","settings-container svelte-1ob364q")},m(F,B){L(F,e,B),o(e,l);for(let W=0;W<J.length;W+=1)J[W]&&J[W].m(l,null);Be(l,t[16]),o(e,n),o(e,s),o(s,r),o(r,c),o(r,f),o(s,a),o(a,v),o(a,h),o(s,m),o(m,_),o(m,y),o(s,P),o(P,D),o(P,I),o(s,S),o(S,O),o(S,Y),Be(s,t[15]),L(F,T,B),Me(q,F,B),Q=!0,z||(G=[H(l,"change",t[17]),H(s,"change",t[18])],z=!0)},p(F,B){var A;(!Q||B[0]&65536)&&Be(l,F[16]),(!Q||B[0]&16384)&&i!==(i=F[14].gradeLevel+"")&&M(c,i),(!Q||B[0]&16384)&&g!==(g=F[14].gradeLevel+"")&&M(v,g),(!Q||B[0]&16384)&&p!==(p=F[14].gradeLevel+"")&&M(_,p),(!Q||B[0]&16384)&&C!==(C=F[14].gradeLevel+"")&&M(D,C),(!Q||B[0]&16384)&&b!==(b=F[14].gradeLevel+"")&&M(O,b),(!Q||B[0]&32768)&&Be(s,F[15]);const W={};B[0]&4&&(W.question=F[2]),B[0]&16384&&(W.t=F[14]),B[0]&2048&&(W.currentSet=((A=At.find(F[27]))==null?void 0:A.name)||""),q.$set(W)},i(F){Q||(fe(q.$$.fragment,F),Q=!0)},o(F){ke(q.$$.fragment,F),Q=!1},d(F){F&&(E(e),E(T)),He(J,F),Qe(q,F),z=!1,ae(G)}}}function Gn(t){let e,l;return e=new On({props:{message:t[14].loading}}),{c(){Ye(e.$$.fragment)},m(n,s){Me(e,n,s),l=!0},p(n,s){const r={};s[0]&16384&&(r.message=n[14].loading),e.$set(r)},i(n){l||(fe(e.$$.fragment,n),l=!0)},o(n){ke(e.$$.fragment,n),l=!1},d(n){Qe(e,n)}}}function Jn(t){let e;return{c(){e=d("option"),e.textContent=`${t[34].name}`,e.__value=t[34].id,ue(e,e.__value),u(e,"class","svelte-1ob364q")},m(l,n){L(l,e,n)},p:Z,d(l){l&&E(e)}}}function Al(t){let e,l,n,s=t[0]==="en"?"Choose Your Language":"Velg språk",r,i,c,f=t[0]==="en"?"You can change this anytime in My Collection":"Du kan endre dette når som helst i Min samling",a,g,v,h,m,p,_,y;return{c(){e=d("div"),l=d("div"),n=d("h2"),r=k(s),i=w(),c=d("p"),a=k(f),g=w(),v=d("div"),h=d("button"),h.innerHTML='<span class="flag svelte-1ob364q">🇬🇧</span> <span>English</span>',m=w(),p=d("button"),p.innerHTML='<span class="flag svelte-1ob364q">🇳🇴</span> <span>Norsk</span>',u(n,"class","svelte-1ob364q"),u(c,"class","svelte-1ob364q"),u(h,"class","language-btn svelte-1ob364q"),u(p,"class","language-btn svelte-1ob364q"),u(v,"class","language-buttons svelte-1ob364q"),u(l,"class","dialog language-dialog svelte-1ob364q"),u(e,"class","dialog-overlay svelte-1ob364q"),u(e,"role","button"),u(e,"tabindex","-1")},m(P,C){L(P,e,C),o(e,l),o(l,n),o(n,r),o(l,i),o(l,c),o(c,a),o(l,g),o(l,v),o(v,h),o(v,m),o(v,p),_||(y=[H(h,"click",t[29]),H(p,"click",t[30])],_=!0)},p(P,C){C[0]&1&&s!==(s=P[0]==="en"?"Choose Your Language":"Velg språk")&&M(r,s),C[0]&1&&f!==(f=P[0]==="en"?"You can change this anytime in My Collection":"Du kan endre dette når som helst i Min samling")&&M(a,f)},d(P){P&&E(e),_=!1,ae(y)}}}function Xn(t){var W;let e,l,n,s,r=t[14].appTitle+"",i,c,f,a,g=t[14].playQuiz+"",v,h,m,p=t[14].myCollection+"",_,y,P=(((W=t[4])==null?void 0:W.cards.length)||0)+"",C,D,I=t[3].length+"",S,b,O,Y,T,q,Q,z,G,te;const J=[Un,Yn],X=[];function F(A,R){return A[9]==="quiz"?0:1}T=F(t),q=X[T]=J[T](t);let B=t[10]&&Al(t);return{c(){e=d("div"),l=d("header"),n=d("div"),s=d("h1"),i=k(r),c=w(),f=d("nav"),a=d("button"),v=k(g),h=w(),m=d("button"),_=k(p),y=k(" ("),C=k(P),D=k("/"),S=k(I),b=k(")"),O=w(),Y=d("main"),q.c(),Q=w(),B&&B.c(),u(s,"class","app-title svelte-1ob364q"),u(a,"class","nav-btn svelte-1ob364q"),K(a,"active",t[9]==="quiz"),u(m,"class","nav-btn svelte-1ob364q"),K(m,"active",t[9]==="collection"),u(f,"class","svelte-1ob364q"),u(n,"class","header-content svelte-1ob364q"),u(l,"class","app-header svelte-1ob364q"),u(Y,"class","svelte-1ob364q"),u(e,"class","app svelte-1ob364q")},m(A,R){L(A,e,R),o(e,l),o(l,n),o(n,s),o(s,i),o(n,c),o(n,f),o(f,a),o(a,v),o(f,h),o(f,m),o(m,_),o(m,y),o(m,C),o(m,D),o(m,S),o(m,b),o(e,O),o(e,Y),X[T].m(Y,null),o(e,Q),B&&B.m(e,null),z=!0,G||(te=[H(a,"click",t[25]),H(m,"click",t[24])],G=!0)},p(A,R){var V;(!z||R[0]&16384)&&r!==(r=A[14].appTitle+"")&&M(i,r),(!z||R[0]&16384)&&g!==(g=A[14].playQuiz+"")&&M(v,g),(!z||R[0]&512)&&K(a,"active",A[9]==="quiz"),(!z||R[0]&16384)&&p!==(p=A[14].myCollection+"")&&M(_,p),(!z||R[0]&16)&&P!==(P=(((V=A[4])==null?void 0:V.cards.length)||0)+"")&&M(C,P),(!z||R[0]&8)&&I!==(I=A[3].length+"")&&M(S,I),(!z||R[0]&512)&&K(m,"active",A[9]==="collection");let U=T;T=F(A),T===U?X[T].p(A,R):(Tl(),ke(X[U],1,1,()=>{X[U]=null}),Nl(),q=X[T],q?q.p(A,R):(q=X[T]=J[T](A),q.c()),fe(q,1),q.m(Y,null)),A[10]?B?B.p(A,R):(B=Al(A),B.c(),B.m(e,null)):B&&(B.d(1),B=null)},i(A){z||(fe(q),z=!0)},o(A){ke(q),z=!1},d(A){A&&E(e),X[T].d(),B&&B.d(),G=!1,ae(te)}}}function Zn(t,e,l){let n,s,r,i;it(t,Lt,R=>l(15,s=R)),it(t,ct,R=>l(0,r=R)),it(t,ft,R=>l(16,i=R));let c="loading",f=null,a=[],g,v=!1,h=0,m=0,p=null,_="",y="quiz",P=!1,C=i,D=!1,I=0;Ll(()=>{l(4,g=he()),localStorage.getItem("tcg-seen-language-dialog")?T():l(10,P=!0)});function S(R){const U=R.target;ft.set(U.value),l(11,C=U.value),l(3,a=[]),T()}function b(R){const U=R.target;Lt.set(Number(U.value)),T()}function O(R){ct.set(R)}function Y(R){ct.set(R),localStorage.setItem("tcg-seen-language-dialog","true"),l(10,P=!1),T()}async function T(){var R;try{l(1,c="loading"),a.length===0&&l(3,a=await Et(C));const U=[...a].sort((ie,Ie)=>{const Ve=parseInt(ie.localId||"0");return parseInt(Ie.localId||"0")-Ve}),V=new Set(U.slice(0,5).map(ie=>ie.id)),$=new Set(g.cards.map(ie=>ie.id)),ce=a.filter(ie=>!$.has(ie.id)&&!V.has(ie.id));if(ce.length===0)throw new Error("Congratulations! You have collected all cards from this set!");const oe=$l(ce),ge=await Zl(oe.id,C),be=((R=ge.rarity)==null?void 0:R.toLowerCase())||"common",Ue=an(ge,n,be!=="common"&&be!=="uncommon"&&be!=="rare"&&be!=="double rare",s);if(!Ue)throw new Error("Could not generate a valid question. Please try again.");l(12,D=be!=="common"),g.streakCard&&g.streakCard.id===ge.id?l(13,I=g.currentStreak||0):l(13,I=0),l(2,f=Ue),l(1,c="quiz")}catch(U){console.error("Error loading question:",U),l(8,_=U instanceof Error?U.message:"Failed to load question"),l(1,c="error")}}async function q(){g.unlockedRareSets||l(4,g.unlockedRareSets={},g),!g.unlockedRareSets[C]&&g.stats.totalHpDefeated>=16e3&&(a.length===0&&l(3,a=await Et(C)),[...a].sort((V,$)=>{const ce=parseInt(V.localId||"0");return parseInt($.localId||"0")-ce}).slice(0,5).forEach(V=>{const $={id:V.id,name:V.name,image:V.image,hp:V.hp,types:V.types,rarity:V.rarity,collectedAt:new Date().toISOString()};g.cards.some(oe=>oe.id===V.id)||g.cards.push($)}),l(4,g.unlockedRareSets[C]=!0,g),je(g))}function Q(R){var V,$;if(!f)return;l(6,h=R.detail.firstAnswer),m=R.detail.secondAnswer||0,l(5,v=cn(f,h,m));const U=v&&f.card.hp?f.card.hp:0;if(tn(v,U),l(7,p=null),v){let ce=!1;if(D&&!f.secondQuestion?(l(4,g=he()),((V=g.streakCard)==null?void 0:V.id)===f.card.id?l(4,g.currentStreak=(g.currentStreak||0)+1,g):(l(4,g.streakCard=f.card,g),l(4,g.currentStreak=1,g)),g.currentStreak>=2&&(ce=!0,l(4,g.currentStreak=0,g),l(4,g.streakCard=void 0,g)),je(g)):ce=!0,ce){const oe={id:f.card.id,name:f.card.name,image:f.card.image,hp:f.card.hp,types:f.card.types,rarity:f.card.rarity,collectedAt:new Date().toISOString()};en(oe)&&l(7,p=f.card)}}else l(4,g=he()),D&&(($=g.streakCard)==null?void 0:$.id)===f.card.id&&(l(4,g.currentStreak=0,g),l(4,g.streakCard=void 0,g),je(g));l(4,g=he()),v&&(q(),l(4,g=he())),l(1,c="result")}function z(){T()}function G(){T()}function te(){l(9,y="collection"),l(4,g=he())}function J(){l(9,y="quiz")}function X(){l(4,g=he())}const F=R=>R.id===C,B=R=>O(R.detail),W=()=>Y("en"),A=()=>Y("no");return t.$$.update=()=>{t.$$.dirty[0]&1&&l(14,n=dn(r))},[r,c,f,a,g,v,h,p,_,y,P,C,D,I,n,s,i,S,b,O,Y,Q,z,G,te,J,X,F,B,W,A]}class $n extends Le{constructor(e){super(),Ee(this,e,Zn,Xn,Ce,{},null,[-1,-1])}}new $n({target:document.getElementById("app")});
