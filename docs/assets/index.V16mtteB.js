var Pl=Object.defineProperty;var Rl=(t,e,l)=>e in t?Pl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var kt=(t,e,l)=>Rl(t,typeof e!="symbol"?e+"":e,l);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function l(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=l(s);fetch(s.href,r)}})();function W(){}function bl(t){return t()}function Yt(){return Object.create(null)}function re(t){t.forEach(bl)}function wl(t){return typeof t=="function"}function _e(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let rt;function ve(t,e){return t===e?!0:(rt||(rt=document.createElement("a")),rt.href=e,t===rt.href)}function Fl(t){return Object.keys(t).length===0}function Ol(t,...e){if(t==null){for(const n of e)n(void 0);return W}const l=t.subscribe(...e);return l.unsubscribe?()=>l.unsubscribe():l}function St(t,e,l){t.$$.on_destroy.push(Ol(e,l))}function i(t,e){t.appendChild(e)}function Q(t,e,l){t.insertBefore(e,l||null)}function q(t){t.parentNode&&t.parentNode.removeChild(t)}function je(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function d(t){return document.createElement(t)}function C(t){return document.createTextNode(t)}function b(){return C(" ")}function Qt(){return C("")}function j(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function Cl(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function f(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function at(t){return t===""?null:+t}function Bl(t){return Array.from(t.childNodes)}function E(t,e){e=""+e,t.data!==e&&(t.data=e)}function ye(t,e){t.value=e??""}function Xe(t,e,l,n){l==null?t.style.removeProperty(e):t.style.setProperty(e,l,"")}function ct(t,e,l){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e){s.selected=!0;return}}t.selectedIndex=-1}function K(t,e,l){t.classList.toggle(e,!!l)}function zl(t,e,{bubbles:l=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:l,cancelable:n})}let Ze;function Ge(t){Ze=t}function Sl(){if(!Ze)throw new Error("Function called outside component initialization");return Ze}function yl(t){Sl().$$.on_mount.push(t)}function ft(){const t=Sl();return(e,l,{cancelable:n=!1}={})=>{const s=t.$$.callbacks[e];if(s){const r=zl(e,l,{cancelable:n});return s.slice().forEach(o=>{o.call(t,r)}),!r.defaultPrevented}return!0}}function Ut(t,e){const l=t.$$.callbacks[e.type];l&&l.slice().forEach(n=>n.call(this,e))}const Oe=[],yt=[];let Be=[];const Vt=[],jl=Promise.resolve();let At=!1;function Hl(){At||(At=!0,jl.then(Al))}function qt(t){Be.push(t)}const bt=new Set;let Re=0;function Al(){if(Re!==0)return;const t=Ze;do{try{for(;Re<Oe.length;){const e=Oe[Re];Re++,Ge(e),Yl(e.$$)}}catch(e){throw Oe.length=0,Re=0,e}for(Ge(null),Oe.length=0,Re=0;yt.length;)yt.pop()();for(let e=0;e<Be.length;e+=1){const l=Be[e];bt.has(l)||(bt.add(l),l())}Be.length=0}while(Oe.length);for(;Vt.length;)Vt.pop()();At=!1,bt.clear(),Ge(t)}function Yl(t){if(t.fragment!==null){t.update(),re(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(qt)}}function Ul(t){const e=[],l=[];Be.forEach(n=>t.indexOf(n)===-1?e.push(n):l.push(n)),l.forEach(n=>n()),Be=e}const ot=new Set;let Se;function ql(){Se={r:0,c:[],p:Se}}function El(){Se.r||re(Se.c),Se=Se.p}function ae(t,e){t&&t.i&&(ot.delete(t),t.i(e))}function pe(t,e,l,n){if(t&&t.o){if(ot.has(t))return;ot.add(t),Se.c.push(()=>{ot.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}else n&&n()}function ce(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function He(t){t&&t.c()}function Ae(t,e,l){const{fragment:n,after_update:s}=t.$$;n&&n.m(e,l),qt(()=>{const r=t.$$.on_mount.map(bl).filter(wl);t.$$.on_destroy?t.$$.on_destroy.push(...r):re(r),t.$$.on_mount=[]}),s.forEach(qt)}function qe(t,e){const l=t.$$;l.fragment!==null&&(Ul(l.after_update),re(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function Vl(t,e){t.$$.dirty[0]===-1&&(Oe.push(t),Hl(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ee(t,e,l,n,s,r,o=null,c=[-1]){const u=Ze;Ge(t);const a=t.$$={fragment:null,ctx:[],props:r,update:W,not_equal:s,bound:Yt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Yt(),dirty:c,skip_bound:!1,root:e.target||u.$$.root};o&&o(a.root);let v=!1;if(a.ctx=l?l(t,e.props||{},(m,p,...g)=>{const h=g.length?g[0]:p;return a.ctx&&s(a.ctx[m],a.ctx[m]=h)&&(!a.skip_bound&&a.bound[m]&&a.bound[m](h),v&&Vl(t,m)),p}):[],a.update(),v=!0,re(a.before_update),a.fragment=n?n(a.ctx):!1,e.target){if(e.hydrate){const m=Bl(e.target);a.fragment&&a.fragment.l(m),m.forEach(q)}else a.fragment&&a.fragment.c();e.intro&&ae(t.$$.fragment),Ae(t,e.target,e.anchor),Al()}Ge(u)}class Qe{constructor(){kt(this,"$$");kt(this,"$$set")}$destroy(){qe(this,1),this.$destroy=W}$on(e,l){if(!wl(l))return W;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const s=n.indexOf(l);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!Fl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Kl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Kl);const Ql="https://api.tcgdex.net/v2/en";function Il(t,e){const l=t.split("-")[1];return`https://assets.tcgdex.net/en/${Wl(e)}/${e}/${l}/high.webp`}function Wl(t){return t.startsWith("swsh")?"swsh":t.startsWith("sv")?"sv":t.startsWith("me")?"base":"swsh"}async function Et(t){try{const e=await fetch(`${Ql}/sets/${t}`);if(!e.ok)throw new Error("Failed to fetch cards from set");return((await e.json()).cards||[]).map(s=>({id:s.id,localId:s.localId,name:s.name,image:Il(s.id,t)}))}catch(e){throw console.error("Error fetching cards from set:",e),e}}async function Jl(t,e){try{const l=await fetch(`${Ql}/cards/${t}`);if(!l.ok)throw new Error("Failed to fetch card details");return{...await l.json(),image:Il(t,e)}}catch(l){throw console.error("Error fetching card details:",l),l}}function Gl(t){const e=Math.floor(Math.random()*t.length);return t[e]}const It="pokemon-tcg-collection",Ml="2.0";function Xl(){return{totalQuestions:0,correctAnswers:0,incorrectAnswers:0,totalHpDefeated:0}}function wt(){return{cards:[],stats:Xl(),version:Ml}}function me(){try{const t=localStorage.getItem(It);if(!t)return wt();const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?(console.warn("Invalid collection format, resetting..."),wt()):(e.stats.totalHpDefeated||(e.stats.totalHpDefeated=0),e.currentStreak||(e.currentStreak=0),e.unlockedRareSets||(e.unlockedRareSets={}),e)}catch(t){return console.error("Error loading collection from local storage:",t),wt()}}function ze(t){try{const e={...t,version:Ml};localStorage.setItem(It,JSON.stringify(e))}catch(e){throw console.error("Error saving collection to local storage:",e),new Error("Failed to save collection")}}function Zl(t){try{const e=me();return e.cards.some(n=>n.id===t.id)?!1:(e.cards.push(t),ze(e),!0)}catch(e){return console.error("Error adding card to collection:",e),!1}}function $l(t,e){try{const l=me();l.stats.totalQuestions++,t?(l.stats.correctAnswers++,e&&(l.stats.totalHpDefeated+=e)):l.stats.incorrectAnswers++,ze(l)}catch(l){console.error("Error updating stats:",l)}}function xl(){try{localStorage.removeItem(It)}catch(t){console.error("Error clearing collection:",t)}}function en(){const t=me();return JSON.stringify(t,null,2)}function tn(t){try{const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?{success:!1,error:"Invalid collection format"}:!e.stats.totalQuestions===void 0||!e.stats.correctAnswers===void 0||!e.stats.incorrectAnswers===void 0?{success:!1,error:"Invalid stats format"}:(ze(e),{success:!0})}catch(e){return console.error("Error importing collection:",e),{success:!1,error:"Failed to parse JSON file"}}}function ln(t){const e=Math.floor(Math.random()*50)+10,l=Math.floor(Math.random()*50)+10,n=["+","-"],s=n[Math.floor(Math.random()*n.length)];let r,o;if(s==="+")r=e+l,o=t.mathQuestion(e,l,"+");else{r=e+l;const c=r;r=e,o=t.mathQuestion(c,l,"-")}return{question:o,answer:r}}function nn(t){const e=Math.floor(Math.random()*50)+10,l=Math.floor(Math.random()*50)+10,n=e+l;return{question:t.mathQuestion(e,l,"+"),answer:n}}function sn(t,e,l=!1){if(!t)return null;let n,s,r=!1,o,c;if(t.hp&&t.hp>0){r=!0;const u=[10,20,30,40,50,60,60,80,120,300][Math.floor(Math.random()*5)];s=Math.ceil(t.hp/u),n=e.damageQuestion(u)}else{const u=ln(e);n=u.question,s=u.answer}if(l){const u=nn(e);o=u.question,c=u.answer}return{card:t,questionText:n,correctAnswer:s,isPokemon:r,secondQuestion:o,secondAnswer:c}}function rn(t,e,l){const n=e===t.correctAnswer;if(t.secondQuestion&&t.secondAnswer!==void 0){const s=l===t.secondAnswer;return n&&s}return n}const Fe=[];function Tl(t,e=W){let l;const n=new Set;function s(c){if(_e(t,c)&&(t=c,l)){const u=!Fe.length;for(const a of n)a[1](),Fe.push(a,t);if(u){for(let a=0;a<Fe.length;a+=2)Fe[a][0](Fe[a+1]);Fe.length=0}}}function r(c){s(c(t))}function o(c,u=W){const a=[c,u];return n.add(a),n.size===1&&(l=e(s,r)||W),c(t),()=>{n.delete(a),n.size===0&&l&&(l(),l=null)}}return{set:s,update:r,subscribe:o}}const Ct=[{id:"swsh3",name:"Sword & Shield - Darkness Ablaze"},{id:"sv05",name:"Scarlet & Violet - Temporal Forces"},{id:"sv06.5",name:"Scarlet & Violet - Shrouded Fable"}],Ll="tcg-math-settings";function on(){return{language:"en",selectedSet:"swsh3"}}function Mt(){try{const t=localStorage.getItem(Ll);if(t){const e=JSON.parse(t);return{language:e.language||"en",selectedSet:e.selectedSet||"swsh3"}}}catch(t){console.error("Error loading settings:",t)}return on()}function Dl(t){try{localStorage.setItem(Ll,JSON.stringify(t))}catch(e){console.error("Error saving settings:",e)}}const Nl=Mt(),it=Tl(Nl.language),ut=Tl(Nl.selectedSet);it.subscribe(t=>{const e=Mt();Dl({...e,language:t})});ut.subscribe(t=>{const e=Mt();Dl({...e,selectedSet:t})});const an={en:{appTitle:"16k Pokemon Math Challenge",quizTitle:"TCG Math Challenge",playQuiz:"Play Quiz",myCollection:"My Collection",selectSet:"Select Set",selectLanguage:"Language",setInfo:"Collecting Set",enterAnswer:"Enter your answer",submitAnswer:"Submit Answer",nextQuestion:"Next Question",correct:"Correct!",notQuite:"Not quite!",correctMessage:"Great job! The answer was",incorrectMessage:"You answered",encouragement:"Try again with the next question!",youWonThisCard:"You won this card!",cardsCollected:"Cards Collected",questionsAnswered:"Questions Answered",correctAnswers:"Correct Answers",accuracy:"Accuracy",noCardsYet:"No cards yet!",noCardsDescription:"Answer questions correctly to start building your collection.",exportBackup:"Export Backup",importBackup:"Import Backup",clearThisSet:"Clear This Set",clearCollectionTitle:"Clear Collection?",clearCollectionMessage:"Are you sure you want to clear your entire collection? This action cannot be undone.",cancel:"Cancel",clearCollection:"Clear Collection",collectionExported:"Collection exported successfully!",collectionImported:"Collection imported successfully!",collectionCleared:"Collection cleared successfully!",exportFailed:"Failed to export collection",importFailed:"Failed to import collection",clearFailed:"Failed to clear collection",hit:"hit",hits:"hits",loading:"Loading new question...",yourCollection:"Your Collection",language:"Language",damageQuestion:t=>`Your PokÃ©mon deals ${t} damage each turn. How many turns does it take to defeat this PokÃ©mon?`,mathQuestion:(t,e,l)=>`What is ${t} ${l} ${e}?`},no:{appTitle:"16k PokÃ©mon Matteutfordring",quizTitle:"TCG Matte Utfordring",playQuiz:"Spill Quiz",myCollection:"Min Samling",selectSet:"Velg Sett",selectLanguage:"SprÃ¥k",setInfo:"Samler Sett",enterAnswer:"Skriv inn svaret ditt",submitAnswer:"Send Inn Svar",nextQuestion:"Neste SpÃ¸rsmÃ¥l",correct:"Riktig!",notQuite:"Ikke helt!",correctMessage:"Bra jobbet! Svaret var",incorrectMessage:"Du svarte",encouragement:"PrÃ¸v igjen med neste spÃ¸rsmÃ¥l!",youWonThisCard:"Du vant dette kortet!",cardsCollected:"Kort Samlet",questionsAnswered:"SpÃ¸rsmÃ¥l Besvart",correctAnswers:"Riktige Svar",accuracy:"NÃ¸yaktighet",noCardsYet:"Ingen kort ennÃ¥!",noCardsDescription:"Svar riktig pÃ¥ spÃ¸rsmÃ¥l for Ã¥ begynne Ã¥ bygge samlingen din.",exportBackup:"Eksporter Backup",importBackup:"Importer Backup",clearThisSet:"TÃ¸m Dette Settet",clearCollectionTitle:"TÃ¸m Samling?",clearCollectionMessage:"Er du sikker pÃ¥ at du vil tÃ¸mme hele samlingen din? Denne handlingen kan ikke angres.",cancel:"Avbryt",clearCollection:"TÃ¸m Samling",collectionExported:"Samling eksportert!",collectionImported:"Samling importert!",collectionCleared:"Samling tÃ¸mt!",exportFailed:"Kunne ikke eksportere samling",importFailed:"Kunne ikke importere samling",clearFailed:"Kunne ikke tÃ¸mme samling",hit:"treff",hits:"treff",loading:"Laster nytt spÃ¸rsmÃ¥l...",yourCollection:"Din Samling",language:"SprÃ¥k",damageQuestion:t=>`Din PokÃ©mon gjÃ¸r ${t} skade hver runde. Hvor mange runder tar det Ã¥ beseire denne PokÃ©monen?`,mathQuestion:(t,e,l)=>`Hva er ${t} ${l} ${e}?`}};function cn(t){return an[t]}function Kt(t,e,l){const n=t.slice();return n[4]=e[l],n}function Wt(t){let e,l,n=t[0].rarity+"",s;return{c(){e=d("div"),l=d("span"),s=C(n),f(l,"class","rarity-badge svelte-1gymiiy"),f(e,"class","card-rarity svelte-1gymiiy")},m(r,o){Q(r,e,o),i(e,l),i(l,s)},p(r,o){o&1&&n!==(n=r[0].rarity+"")&&E(s,n)},d(r){r&&q(e)}}}function Jt(t){let e,l,n,s=ce(t[0].attacks),r=[];for(let o=0;o<s.length;o+=1)r[o]=Xt(Kt(t,s,o));return{c(){e=d("div"),l=d("h4"),l.textContent="Attacks:",n=b();for(let o=0;o<r.length;o+=1)r[o].c();f(l,"class","svelte-1gymiiy"),f(e,"class","card-attacks svelte-1gymiiy")},m(o,c){Q(o,e,c),i(e,l),i(e,n);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null)},p(o,c){if(c&5){s=ce(o[0].attacks);let u;for(u=0;u<s.length;u+=1){const a=Kt(o,s,u);r[u]?r[u].p(a,c):(r[u]=Xt(a),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=s.length}},d(o){o&&q(e),je(r,o)}}}function Gt(t){let e,l=t[4].damage+"",n;return{c(){e=d("span"),n=C(l),f(e,"class","attack-damage svelte-1gymiiy")},m(s,r){Q(s,e,r),i(e,n)},p(s,r){r&1&&l!==(l=s[4].damage+"")&&E(n,l)},d(s){s&&q(e)}}}function Xt(t){let e,l,n=t[4].name+"",s,r,o,c=t[4].damage&&Gt(t);return{c(){e=d("div"),l=d("span"),s=C(n),r=b(),c&&c.c(),o=b(),f(l,"class","attack-name svelte-1gymiiy"),f(e,"class","attack svelte-1gymiiy"),K(e,"highlighted",t[2]===t[4].name)},m(u,a){Q(u,e,a),i(e,l),i(l,s),i(e,r),c&&c.m(e,null),i(e,o)},p(u,a){a&1&&n!==(n=u[4].name+"")&&E(s,n),u[4].damage?c?c.p(u,a):(c=Gt(u),c.c(),c.m(e,o)):c&&(c.d(1),c=null),a&5&&K(e,"highlighted",u[2]===u[4].name)},d(u){u&&q(e),c&&c.d()}}}function un(t){let e,l,n,s,r,o,c,u,a=t[0].name+"",v,m,p,g=t[3]&&t[0].rarity&&Wt(t),h=t[1]&&t[0].attacks&&t[0].attacks.length>0&&Jt(t);return{c(){e=d("div"),l=d("div"),n=d("img"),o=b(),c=d("div"),u=d("h3"),v=C(a),m=b(),g&&g.c(),p=b(),h&&h.c(),ve(n.src,s=t[0].image)||f(n,"src",s),f(n,"alt",r=t[0].name),f(n,"class","svelte-1gymiiy"),f(l,"class","card-image svelte-1gymiiy"),f(u,"class","card-name svelte-1gymiiy"),f(c,"class","card-info svelte-1gymiiy"),f(e,"class","pokemon-card svelte-1gymiiy")},m(_,S){Q(_,e,S),i(e,l),i(l,n),i(e,o),i(e,c),i(c,u),i(u,v),i(c,m),g&&g.m(c,null),i(c,p),h&&h.m(c,null)},p(_,[S]){S&1&&!ve(n.src,s=_[0].image)&&f(n,"src",s),S&1&&r!==(r=_[0].name)&&f(n,"alt",r),S&1&&a!==(a=_[0].name+"")&&E(v,a),_[3]&&_[0].rarity?g?g.p(_,S):(g=Wt(_),g.c(),g.m(c,p)):g&&(g.d(1),g=null),_[1]&&_[0].attacks&&_[0].attacks.length>0?h?h.p(_,S):(h=Jt(_),h.c(),h.m(c,null)):h&&(h.d(1),h=null)},i:W,o:W,d(_){_&&q(e),g&&g.d(),h&&h.d()}}}function fn(t,e,l){let{card:n}=e,{showAttacks:s=!1}=e,{highlightedAttack:r=null}=e,{showRarity:o=!1}=e;return t.$$set=c=>{"card"in c&&l(0,n=c.card),"showAttacks"in c&&l(1,s=c.showAttacks),"highlightedAttack"in c&&l(2,r=c.highlightedAttack),"showRarity"in c&&l(3,o=c.showRarity)},[n,s,r,o]}class dn extends Qe{constructor(e){super(),Ee(this,e,fn,un,_e,{card:0,showAttacks:1,highlightedAttack:2,showRarity:3})}}function Zt(t){let e;return{c(){e=d("span"),e.textContent="1.",f(e,"class","question-number svelte-174fqld")},m(l,n){Q(l,e,n)},d(l){l&&q(e)}}}function $t(t){let e,l,n,s,r=t[0].secondQuestion+"",o,c,u,a,v,m,p;return{c(){e=d("div"),l=d("span"),l.textContent="2.",n=b(),s=d("h3"),o=C(r),c=b(),u=d("div"),a=d("input"),f(l,"class","question-number svelte-174fqld"),f(s,"class","question-text svelte-174fqld"),f(e,"class","question-item svelte-174fqld"),Xe(e,"padding-top","2em"),f(a,"type","number"),f(a,"placeholder",v=t[1].enterAnswer),f(a,"class","answer-input svelte-174fqld"),f(u,"class","input-group svelte-174fqld")},m(g,h){Q(g,e,h),i(e,l),i(e,n),i(e,s),i(s,o),Q(g,c,h),Q(g,u,h),i(u,a),ye(a,t[3]),m||(p=[j(a,"input",t[8]),j(a,"keypress",t[5])],m=!0)},p(g,h){h&1&&r!==(r=g[0].secondQuestion+"")&&E(o,r),h&2&&v!==(v=g[1].enterAnswer)&&f(a,"placeholder",v),h&8&&at(a.value)!==g[3]&&ye(a,g[3])},d(g){g&&(q(e),q(c),q(u)),m=!1,re(p)}}}function gn(t){let e,l,n,s,r,o,c,u,a,v=t[0].questionText+"",m,p,g,h,_,S,L,y,D=t[1].submitAnswer+"",T,A,k,R,H;n=new dn({props:{card:t[0].card,showRarity:!0}});let P=t[0].secondQuestion&&Zt(),I=t[0].secondQuestion&&$t(t);return{c(){e=d("div"),l=d("div"),He(n.$$.fragment),s=b(),r=d("div"),o=d("div"),c=d("div"),P&&P.c(),u=b(),a=d("h3"),m=C(v),p=b(),g=d("div"),h=d("input"),S=b(),I&&I.c(),L=b(),y=d("button"),T=C(D),f(l,"class","card-display svelte-174fqld"),f(a,"class","question-text svelte-174fqld"),f(c,"class","question-item svelte-174fqld"),f(h,"type","number"),f(h,"placeholder",_=t[1].enterAnswer),f(h,"class","answer-input svelte-174fqld"),f(g,"class","input-group svelte-174fqld"),f(y,"class","submit-btn btn-primary svelte-174fqld"),Xe(y,"margin-top","2em"),y.disabled=A=!t[2]||t[0].secondQuestion&&!t[3],f(o,"class","questions-list svelte-174fqld"),f(r,"class","question-container svelte-174fqld"),f(e,"class","quiz-view svelte-174fqld")},m(N,z){Q(N,e,z),i(e,l),Ae(n,l,null),i(e,s),i(e,r),i(r,o),i(o,c),P&&P.m(c,null),i(c,u),i(c,a),i(a,m),i(o,p),i(o,g),i(g,h),ye(h,t[2]),i(o,S),I&&I.m(o,null),i(o,L),i(o,y),i(y,T),k=!0,R||(H=[j(h,"input",t[7]),j(h,"keypress",t[5]),j(y,"click",t[4])],R=!0)},p(N,[z]){const G={};z&1&&(G.card=N[0].card),n.$set(G),N[0].secondQuestion?P||(P=Zt(),P.c(),P.m(c,u)):P&&(P.d(1),P=null),(!k||z&1)&&v!==(v=N[0].questionText+"")&&E(m,v),(!k||z&2&&_!==(_=N[1].enterAnswer))&&f(h,"placeholder",_),z&4&&at(h.value)!==N[2]&&ye(h,N[2]),N[0].secondQuestion?I?I.p(N,z):(I=$t(N),I.c(),I.m(o,L)):I&&(I.d(1),I=null),(!k||z&2)&&D!==(D=N[1].submitAnswer+"")&&E(T,D),(!k||z&13&&A!==(A=!N[2]||N[0].secondQuestion&&!N[3]))&&(y.disabled=A)},i(N){k||(ae(n.$$.fragment,N),k=!0)},o(N){pe(n.$$.fragment,N),k=!1},d(N){N&&q(e),qe(n),P&&P.d(),I&&I.d(),R=!1,re(H)}}}function mn(t,e,l){let{question:n}=e,{t:s}=e,{currentSet:r}=e;const o=ft();let c="",u="";function a(){const g=parseInt(c,10);if(!isNaN(g))if(n.secondQuestion&&n.secondAnswer!==void 0){const h=parseInt(u,10);isNaN(h)||o("answer",{firstAnswer:g,secondAnswer:h})}else o("answer",{firstAnswer:g})}function v(g){g.key==="Enter"&&a()}function m(){c=at(this.value),l(2,c)}function p(){u=at(this.value),l(3,u)}return t.$$set=g=>{"question"in g&&l(0,n=g.question),"t"in g&&l(1,s=g.t),"currentSet"in g&&l(6,r=g.currentSet)},[n,s,c,u,a,v,r,m,p]}class vn extends Qe{constructor(e){super(),Ee(this,e,mn,gn,_e,{question:0,t:1,currentSet:6})}}function pn(t){let e,l,n,s=t[4].notQuite+"",r,o,c,u=t[4].incorrectMessage+"",a,v,m,p,g,h=t[4].correctMessage.toLowerCase()+"",_,S,L,y,D,T,A,k,R=t[4].encouragement+"",H,P=t[5]&&t[6]>0&&xt(t);return{c(){e=d("div"),e.textContent="âœ—",l=b(),n=d("h2"),r=C(s),o=b(),c=d("p"),a=C(u),v=b(),m=d("strong"),p=C(t[2]),g=C(", "),_=C(h),S=b(),L=d("strong"),y=C(t[1]),D=C("."),T=b(),P&&P.c(),A=b(),k=d("p"),H=C(R),f(e,"class","result-icon error svelte-1v74pgf"),f(n,"class","result-title svelte-1v74pgf"),f(m,"class","svelte-1v74pgf"),f(L,"class","svelte-1v74pgf"),f(c,"class","result-message svelte-1v74pgf"),f(k,"class","encouragement svelte-1v74pgf")},m(I,N){Q(I,e,N),Q(I,l,N),Q(I,n,N),i(n,r),Q(I,o,N),Q(I,c,N),i(c,a),i(c,v),i(c,m),i(m,p),i(c,g),i(c,_),i(c,S),i(c,L),i(L,y),i(c,D),Q(I,T,N),P&&P.m(I,N),Q(I,A,N),Q(I,k,N),i(k,H)},p(I,N){N&16&&s!==(s=I[4].notQuite+"")&&E(r,s),N&16&&u!==(u=I[4].incorrectMessage+"")&&E(a,u),N&4&&E(p,I[2]),N&16&&h!==(h=I[4].correctMessage.toLowerCase()+"")&&E(_,h),N&2&&E(y,I[1]),I[5]&&I[6]>0?P?P.p(I,N):(P=xt(I),P.c(),P.m(A.parentNode,A)):P&&(P.d(1),P=null),N&16&&R!==(R=I[4].encouragement+"")&&E(H,R)},d(I){I&&(q(e),q(l),q(n),q(o),q(c),q(T),q(A),q(k)),P&&P.d(I)}}}function hn(t){let e,l,n,s=t[4].correct+"",r,o,c,u=t[4].correctMessage+"",a,v,m,p,g,h=(t[1]===1?t[4].hit:t[4].hits)+"",_,S,L,y,D,T=t[5]&&!t[3]&&el(t),A=t[3]&&tl(t);return{c(){e=d("div"),e.textContent="âœ“",l=b(),n=d("h2"),r=C(s),o=b(),c=d("p"),a=C(u),v=b(),m=d("strong"),p=C(t[1]),g=b(),_=C(h),S=C("!"),L=b(),T&&T.c(),y=b(),A&&A.c(),D=Qt(),f(e,"class","result-icon success svelte-1v74pgf"),f(n,"class","result-title svelte-1v74pgf"),f(m,"class","svelte-1v74pgf"),f(c,"class","result-message svelte-1v74pgf")},m(k,R){Q(k,e,R),Q(k,l,R),Q(k,n,R),i(n,r),Q(k,o,R),Q(k,c,R),i(c,a),i(c,v),i(c,m),i(m,p),i(c,g),i(c,_),i(c,S),Q(k,L,R),T&&T.m(k,R),Q(k,y,R),A&&A.m(k,R),Q(k,D,R)},p(k,R){R&16&&s!==(s=k[4].correct+"")&&E(r,s),R&16&&u!==(u=k[4].correctMessage+"")&&E(a,u),R&2&&E(p,k[1]),R&18&&h!==(h=(k[1]===1?k[4].hit:k[4].hits)+"")&&E(_,h),k[5]&&!k[3]?T?T.p(k,R):(T=el(k),T.c(),T.m(y.parentNode,y)):T&&(T.d(1),T=null),k[3]?A?A.p(k,R):(A=tl(k),A.c(),A.m(D.parentNode,D)):A&&(A.d(1),A=null)},d(k){k&&(q(e),q(l),q(n),q(o),q(c),q(L),q(y),q(D)),T&&T.d(k),A&&A.d(k)}}}function xt(t){let e,l=t[4].language==="SprÃ¥k"?"Streak reset! Try again.":"Rekke tilbakestilt! PrÃ¸v igjen.",n;return{c(){e=d("p"),n=C(l),f(e,"class","streak-lost svelte-1v74pgf")},m(s,r){Q(s,e,r),i(e,n)},p(s,r){r&16&&l!==(l=s[4].language==="SprÃ¥k"?"Streak reset! Try again.":"Rekke tilbakestilt! PrÃ¸v igjen.")&&E(n,l)},d(s){s&&q(e)}}}function el(t){let e,l,n,s,r,o,c;function u(m,p){return m[7]===1?kn:_n}let a=u(t),v=a(t);return{c(){e=d("div"),l=d("p"),v.c(),n=b(),s=d("div"),r=d("div"),o=b(),c=d("div"),f(l,"class","streak-text svelte-1v74pgf"),f(r,"class","streak-dot svelte-1v74pgf"),K(r,"filled",t[7]>=1),f(c,"class","streak-dot svelte-1v74pgf"),K(c,"filled",t[7]>=2),f(s,"class","streak-progress svelte-1v74pgf"),f(e,"class","streak-info svelte-1v74pgf")},m(m,p){Q(m,e,p),i(e,l),v.m(l,null),i(e,n),i(e,s),i(s,r),i(s,o),i(s,c)},p(m,p){a===(a=u(m))&&v?v.p(m,p):(v.d(1),v=a(m),v&&(v.c(),v.m(l,null))),p&128&&K(r,"filled",m[7]>=1),p&128&&K(c,"filled",m[7]>=2)},d(m){m&&q(e),v.d()}}}function _n(t){let e=t[4].language==="SprÃ¥k"?"Get 2 correct answers to win this rare card!":"FÃ¥ 2 riktige svar for Ã¥ vinne dette sjeldne kortet!",l;return{c(){l=C(e)},m(n,s){Q(n,l,s)},p(n,s){s&16&&e!==(e=n[4].language==="SprÃ¥k"?"Get 2 correct answers to win this rare card!":"FÃ¥ 2 riktige svar for Ã¥ vinne dette sjeldne kortet!")&&E(l,e)},d(n){n&&q(l)}}}function kn(t){let e=t[4].language==="SprÃ¥k"?"One more correct to win this card!":"Ã‰n til riktig for Ã¥ vinne dette kortet!",l;return{c(){l=C(e)},m(n,s){Q(n,l,s)},p(n,s){s&16&&e!==(e=n[4].language==="SprÃ¥k"?"One more correct to win this card!":"Ã‰n til riktig for Ã¥ vinne dette kortet!")&&E(l,e)},d(n){n&&q(l)}}}function tl(t){let e,l,n=t[4].youWonThisCard+"",s,r,o,c,u,a,v,m,p,g=t[3].name+"",h;return{c(){e=d("div"),l=d("h3"),s=C(n),r=b(),o=d("div"),c=d("div"),u=d("img"),m=b(),p=d("span"),h=C(g),f(l,"class","svelte-1v74pgf"),ve(u.src,a=t[3].image)||f(u,"src",a),f(u,"alt",v=t[3].name),f(u,"class","svelte-1v74pgf"),f(p,"class","card-name svelte-1v74pgf"),f(c,"class","mini-card svelte-1v74pgf"),f(o,"class","cards-grid svelte-1v74pgf"),f(e,"class","won-cards svelte-1v74pgf")},m(_,S){Q(_,e,S),i(e,l),i(l,s),i(e,r),i(e,o),i(o,c),i(c,u),i(c,m),i(c,p),i(p,h)},p(_,S){S&16&&n!==(n=_[4].youWonThisCard+"")&&E(s,n),S&8&&!ve(u.src,a=_[3].image)&&f(u,"src",a),S&8&&v!==(v=_[3].name)&&f(u,"alt",v),S&8&&g!==(g=_[3].name+"")&&E(h,g)},d(_){_&&q(e)}}}function bn(t){let e,l,n,s,r=t[4].nextQuestion+"",o,c,u;function a(p,g){return p[0]?hn:pn}let v=a(t),m=v(t);return{c(){e=d("div"),l=d("div"),m.c(),n=b(),s=d("button"),o=C(r),f(l,"class","result-card svelte-1v74pgf"),K(l,"correct",t[0]),K(l,"incorrect",!t[0]),f(s,"class","next-btn btn-primary svelte-1v74pgf"),f(e,"class","result-view svelte-1v74pgf")},m(p,g){Q(p,e,g),i(e,l),m.m(l,null),i(e,n),i(e,s),i(s,o),c||(u=j(s,"click",t[8]),c=!0)},p(p,[g]){v===(v=a(p))&&m?m.p(p,g):(m.d(1),m=v(p),m&&(m.c(),m.m(l,null))),g&1&&K(l,"correct",p[0]),g&1&&K(l,"incorrect",!p[0]),g&16&&r!==(r=p[4].nextQuestion+"")&&E(o,r)},i:W,o:W,d(p){p&&q(e),m.d(),c=!1,u()}}}function wn(t,e,l){let{isCorrect:n}=e,{correctAnswer:s}=e,{userAnswer:r}=e,{wonCard:o}=e,{t:c}=e,{needsStreak:u=!1}=e,{streakProgress:a=0}=e,{currentStreak:v=0}=e;const m=ft();function p(){m("next")}return t.$$set=g=>{"isCorrect"in g&&l(0,n=g.isCorrect),"correctAnswer"in g&&l(1,s=g.correctAnswer),"userAnswer"in g&&l(2,r=g.userAnswer),"wonCard"in g&&l(3,o=g.wonCard),"t"in g&&l(4,c=g.t),"needsStreak"in g&&l(5,u=g.needsStreak),"streakProgress"in g&&l(6,a=g.streakProgress),"currentStreak"in g&&l(7,v=g.currentStreak)},[n,s,r,o,c,u,a,v,p]}class Cn extends Qe{constructor(e){super(),Ee(this,e,wn,bn,_e,{isCorrect:0,correctAnswer:1,userAnswer:2,wonCard:3,t:4,needsStreak:5,streakProgress:6,currentStreak:7})}}function Sn(){try{const t=en(),e=new Blob([t],{type:"application/json"}),l=URL.createObjectURL(e),n=document.createElement("a");n.href=l,n.download=`pokemon-collection-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(l)}catch(t){throw console.error("Error downloading backup:",t),new Error("Failed to download backup")}}function yn(t){return new Promise(e=>{const l=new FileReader;l.onload=n=>{var s;try{const r=(s=n.target)==null?void 0:s.result,o=tn(r);e(o)}catch(r){console.error("Error reading file:",r),e({success:!1,error:"Failed to read file"})}},l.onerror=()=>{e({success:!1,error:"Failed to read file"})},l.readAsText(t)})}function ll(t,e,l){const n=t.slice();return n[33]=e[l],n}function nl(t,e,l){const n=t.slice();return n[36]=e[l],n}function sl(t,e,l){const n=t.slice();return n[33]=e[l],n}function rl(t,e,l){const n=t.slice();return n[36]=e[l],n}function An(t){let e=t[1].language==="SprÃ¥k"?`Defeat ${t[10]>0?t[10].toLocaleString():0} HP to unlock 5 rare cards`:`Beseir ${t[10]>0?t[10].toLocaleString():0} HP for Ã¥ lÃ¥se opp 5 sjeldne kort`,l;return{c(){l=C(e)},m(n,s){Q(n,l,s)},p(n,s){s[0]&1026&&e!==(e=n[1].language==="SprÃ¥k"?`Defeat ${n[10]>0?n[10].toLocaleString():0} HP to unlock 5 rare cards`:`Beseir ${n[10]>0?n[10].toLocaleString():0} HP for Ã¥ lÃ¥se opp 5 sjeldne kort`)&&E(l,e)},d(n){n&&q(l)}}}function qn(t){let e=t[1].language==="SprÃ¥k"?"Rare cards unlocked!":"Sjeldne kort lÃ¥st opp!",l;return{c(){l=C(e)},m(n,s){Q(n,l,s)},p(n,s){s[0]&2&&e!==(e=n[1].language==="SprÃ¥k"?"Rare cards unlocked!":"Sjeldne kort lÃ¥st opp!")&&E(l,e)},d(n){n&&q(l)}}}function ol(t){let e,l;return{c(){e=d("div"),l=d("div"),f(l,"class","hp-progress-fill svelte-1c2fvge"),Xe(l,"width",t[8]+"%"),f(e,"class","hp-progress-bar svelte-1c2fvge")},m(n,s){Q(n,e,s),i(e,l)},p(n,s){s[0]&256&&Xe(l,"width",n[8]+"%")},d(n){n&&q(e)}}}function il(t){let e,l,n,s,r,o,c;function u(){return t[24](t[36])}return{c(){e=d("button"),l=d("img"),r=b(),ve(l.src,n=t[36].image)||f(l,"src",n),f(l,"alt",s=t[36].name),f(l,"class","svelte-1c2fvge"),K(l,"locked",!t[9]),f(e,"class","rare-thumbnail svelte-1c2fvge"),K(e,"unlocked",t[9])},m(a,v){Q(a,e,v),i(e,l),i(e,r),o||(c=j(e,"click",u),o=!0)},p(a,v){t=a,v[0]&16&&!ve(l.src,n=t[36].image)&&f(l,"src",n),v[0]&16&&s!==(s=t[36].name)&&f(l,"alt",s),v[0]&512&&K(l,"locked",!t[9]),v[0]&512&&K(e,"unlocked",t[9])},d(a){a&&q(e),o=!1,c()}}}function En(t){let e,l=ce(t[0].cards),n=[];for(let s=0;s<l.length;s+=1)n[s]=fl(nl(t,l,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();f(e,"class","cards-grid svelte-1c2fvge")},m(s,r){Q(s,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,r){if(r[0]&524289){l=ce(s[0].cards);let o;for(o=0;o<l.length;o+=1){const c=nl(s,l,o);n[o]?n[o].p(c,r):(n[o]=fl(c),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(s){s&&q(e),je(n,s)}}}function Qn(t){let e,l,n,s,r=t[1].noCardsYet+"",o,c,u,a=t[1].noCardsDescription+"",v;return{c(){e=d("div"),l=d("div"),l.textContent="ðŸ“¦",n=b(),s=d("h3"),o=C(r),c=b(),u=d("p"),v=C(a),f(l,"class","empty-icon svelte-1c2fvge"),f(s,"class","svelte-1c2fvge"),f(u,"class","svelte-1c2fvge"),f(e,"class","empty-state svelte-1c2fvge")},m(m,p){Q(m,e,p),i(e,l),i(e,n),i(e,s),i(s,o),i(e,c),i(e,u),i(u,v)},p(m,p){p[0]&2&&r!==(r=m[1].noCardsYet+"")&&E(o,r),p[0]&2&&a!==(a=m[1].noCardsDescription+"")&&E(v,a)},d(m){m&&q(e)}}}function al(t){let e,l,n=t[36].hp+"",s;return{c(){e=d("span"),l=C("HP "),s=C(n),f(e,"class","hp svelte-1c2fvge")},m(r,o){Q(r,e,o),i(e,l),i(e,s)},p(r,o){o[0]&1&&n!==(n=r[36].hp+"")&&E(s,n)},d(r){r&&q(e)}}}function cl(t){let e,l=ce(t[36].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=ul(sl(t,l,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();f(e,"class","types svelte-1c2fvge")},m(s,r){Q(s,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,r){if(r[0]&1){l=ce(s[36].types);let o;for(o=0;o<l.length;o+=1){const c=sl(s,l,o);n[o]?n[o].p(c,r):(n[o]=ul(c),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(s){s&&q(e),je(n,s)}}}function ul(t){let e,l=t[33]+"",n;return{c(){e=d("span"),n=C(l),f(e,"class","type svelte-1c2fvge")},m(s,r){Q(s,e,r),i(e,n)},p(s,r){r[0]&1&&l!==(l=s[33]+"")&&E(n,l)},d(s){s&&q(e)}}}function fl(t){let e,l,n,s,r,o,c,u=t[36].name+"",a,v,m,p,g,h,_=t[36].hp&&al(t),S=t[36].types&&t[36].types.length>0&&cl(t);function L(){return t[25](t[36])}return{c(){e=d("button"),l=d("img"),r=b(),o=d("div"),c=d("h4"),a=C(u),v=b(),_&&_.c(),m=b(),S&&S.c(),p=b(),ve(l.src,n=t[36].image)||f(l,"src",n),f(l,"alt",s=t[36].name),f(l,"class","svelte-1c2fvge"),f(c,"class","svelte-1c2fvge"),f(o,"class","card-details svelte-1c2fvge"),f(e,"class","collection-card svelte-1c2fvge")},m(y,D){Q(y,e,D),i(e,l),i(e,r),i(e,o),i(o,c),i(c,a),i(o,v),_&&_.m(o,null),i(o,m),S&&S.m(o,null),i(e,p),g||(h=j(e,"click",L),g=!0)},p(y,D){t=y,D[0]&1&&!ve(l.src,n=t[36].image)&&f(l,"src",n),D[0]&1&&s!==(s=t[36].name)&&f(l,"alt",s),D[0]&1&&u!==(u=t[36].name+"")&&E(a,u),t[36].hp?_?_.p(t,D):(_=al(t),_.c(),_.m(o,m)):_&&(_.d(1),_=null),t[36].types&&t[36].types.length>0?S?S.p(t,D):(S=cl(t),S.c(),S.m(o,null)):S&&(S.d(1),S=null)},d(y){y&&q(e),_&&_.d(),S&&S.d(),g=!1,h()}}}function dl(t){let e,l=t[6].text+"",n;return{c(){e=d("div"),n=C(l),f(e,"class","message svelte-1c2fvge"),K(e,"success",t[6].type==="success"),K(e,"error",t[6].type==="error")},m(s,r){Q(s,e,r),i(e,n)},p(s,r){r[0]&64&&l!==(l=s[6].text+"")&&E(n,l),r[0]&64&&K(e,"success",s[6].type==="success"),r[0]&64&&K(e,"error",s[6].type==="error")},d(s){s&&q(e)}}}function gl(t){let e,l,n,s,r,o,c,u,a,v,m=t[3].name+"",p,g,h,_,S,L,y=t[3].hp&&ml(t),D=t[3].types&&t[3].types.length>0&&vl(t),T=t[3].rarity&&hl(t);return{c(){e=d("div"),l=d("div"),n=d("button"),n.textContent="Ã—",s=b(),r=d("img"),u=b(),a=d("div"),v=d("h3"),p=C(m),g=b(),y&&y.c(),h=b(),D&&D.c(),_=b(),T&&T.c(),f(n,"class","close-modal svelte-1c2fvge"),ve(r.src,o=t[3].image)||f(r,"src",o),f(r,"alt",c=t[3].name),f(r,"class","modal-card-image svelte-1c2fvge"),f(v,"class","svelte-1c2fvge"),f(a,"class","modal-card-info svelte-1c2fvge"),f(l,"class","card-modal svelte-1c2fvge"),f(l,"role","dialog"),f(e,"class","dialog-overlay svelte-1c2fvge"),f(e,"role","button"),f(e,"tabindex","-1")},m(A,k){Q(A,e,k),i(e,l),i(l,n),i(l,s),i(l,r),i(l,u),i(l,a),i(a,v),i(v,p),i(a,g),y&&y.m(a,null),i(a,h),D&&D.m(a,null),i(a,_),T&&T.m(a,null),S||(L=[j(n,"click",t[20]),j(l,"click",Cl(t[23])),j(e,"click",t[20]),j(e,"keydown",t[27])],S=!0)},p(A,k){k[0]&8&&!ve(r.src,o=A[3].image)&&f(r,"src",o),k[0]&8&&c!==(c=A[3].name)&&f(r,"alt",c),k[0]&8&&m!==(m=A[3].name+"")&&E(p,m),A[3].hp?y?y.p(A,k):(y=ml(A),y.c(),y.m(a,h)):y&&(y.d(1),y=null),A[3].types&&A[3].types.length>0?D?D.p(A,k):(D=vl(A),D.c(),D.m(a,_)):D&&(D.d(1),D=null),A[3].rarity?T?T.p(A,k):(T=hl(A),T.c(),T.m(a,null)):T&&(T.d(1),T=null)},d(A){A&&q(e),y&&y.d(),D&&D.d(),T&&T.d(),S=!1,re(L)}}}function ml(t){let e,l,n=t[3].hp+"",s;return{c(){e=d("div"),l=C("HP: "),s=C(n),f(e,"class","modal-hp svelte-1c2fvge")},m(r,o){Q(r,e,o),i(e,l),i(e,s)},p(r,o){o[0]&8&&n!==(n=r[3].hp+"")&&E(s,n)},d(r){r&&q(e)}}}function vl(t){let e,l=ce(t[3].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=pl(ll(t,l,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();f(e,"class","modal-types svelte-1c2fvge")},m(s,r){Q(s,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,r){if(r[0]&8){l=ce(s[3].types);let o;for(o=0;o<l.length;o+=1){const c=ll(s,l,o);n[o]?n[o].p(c,r):(n[o]=pl(c),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(s){s&&q(e),je(n,s)}}}function pl(t){let e,l=t[33]+"",n;return{c(){e=d("span"),n=C(l),f(e,"class","modal-type svelte-1c2fvge")},m(s,r){Q(s,e,r),i(e,n)},p(s,r){r[0]&8&&l!==(l=s[33]+"")&&E(n,l)},d(s){s&&q(e)}}}function hl(t){let e,l,n=t[3].rarity+"",s;return{c(){e=d("div"),l=C("Rarity: "),s=C(n),f(e,"class","modal-rarity svelte-1c2fvge")},m(r,o){Q(r,e,o),i(e,l),i(e,s)},p(r,o){o[0]&8&&n!==(n=r[3].rarity+"")&&E(s,n)},d(r){r&&q(e)}}}function _l(t){let e,l,n,s=t[1].clearCollectionTitle+"",r,o,c,u=t[1].clearCollectionMessage+"",a,v,m,p,g=t[1].cancel+"",h,_,S,L=t[1].clearCollection+"",y,D,T;return{c(){e=d("div"),l=d("div"),n=d("h3"),r=C(s),o=b(),c=d("p"),a=C(u),v=b(),m=d("div"),p=d("button"),h=C(g),_=b(),S=d("button"),y=C(L),f(n,"class","svelte-1c2fvge"),f(c,"class","svelte-1c2fvge"),f(p,"class","btn-secondary"),f(S,"class","btn-error"),f(m,"class","dialog-actions svelte-1c2fvge"),f(l,"class","dialog svelte-1c2fvge"),f(l,"role","dialog"),f(e,"class","dialog-overlay svelte-1c2fvge"),f(e,"role","button"),f(e,"tabindex","-1")},m(A,k){Q(A,e,k),i(e,l),i(l,n),i(n,r),i(l,o),i(l,c),i(c,a),i(l,v),i(l,m),i(m,p),i(p,h),i(m,_),i(m,S),i(S,y),D||(T=[j(p,"click",t[16]),j(S,"click",t[17]),j(l,"click",Cl(t[22])),j(l,"keydown",Mn),j(e,"click",t[16]),j(e,"keydown",t[28])],D=!0)},p(A,k){k[0]&2&&s!==(s=A[1].clearCollectionTitle+"")&&E(r,s),k[0]&2&&u!==(u=A[1].clearCollectionMessage+"")&&E(a,u),k[0]&2&&g!==(g=A[1].cancel+"")&&E(h,g),k[0]&2&&L!==(L=A[1].clearCollection+"")&&E(y,L)},d(A){A&&q(e),D=!1,re(T)}}}function In(t){let e,l,n,s,r,o,c,u,a,v=t[1].yourCollection+"",m,p,g,h,_,S,L=t[0].cards.length+"",y,D,T,A=t[1].cardsCollected+"",k,R,H,P,I=t[0].stats.totalQuestions+"",N,z,G,oe=t[1].questionsAnswered+"",ue,X,ne,Y,O=t[0].stats.correctAnswers+"",w,F,U,V=t[1].correctAnswers+"",Z,ke,se,Ie,Me,ie,$e,Te,Ye=t[1].accuracy+"",dt,Tt,Le,De,Ne,xe=(t[1].language||"Language")+"",gt,Lt,Dt,he,be,we,Nt,fe,Ue,et=t[1].exportBackup+"",mt,Pt,Ve,tt=t[1].importBackup+"",vt,Rt,Ke,lt=t[1].clearThisSet+"",pt,Ft,Ce,Ot,ht,We,Je,_t,Bt;function zt(M,B){return M[9]?qn:An}let nt=zt(t),de=nt(t),x=!t[9]&&ol(t),Pe=ce(t[4]),$=[];for(let M=0;M<Pe.length;M+=1)$[M]=il(rl(t,Pe,M));function jt(M,B){return M[0].cards.length===0?Qn:En}let st=jt(t),ge=st(t),ee=t[6]&&dl(t),te=t[3]&&gl(t),le=t[7]&&_l(t);return{c(){e=d("div"),l=d("div"),n=d("div"),de.c(),s=b(),x&&x.c(),r=b(),o=d("div");for(let M=0;M<$.length;M+=1)$[M].c();c=b(),u=d("div"),a=d("h2"),m=C(v),p=b(),ge.c(),g=b(),h=d("div"),_=d("div"),S=d("div"),y=C(L),D=b(),T=d("div"),k=C(A),R=b(),H=d("div"),P=d("div"),N=C(I),z=b(),G=d("div"),ue=C(oe),X=b(),ne=d("div"),Y=d("div"),w=C(O),F=b(),U=d("div"),Z=C(V),ke=b(),se=d("div"),Ie=d("div"),Me=C(t[11]),ie=C("%"),$e=b(),Te=d("div"),dt=C(Ye),Tt=b(),Le=d("div"),De=d("div"),Ne=d("label"),gt=C(xe),Lt=C(":"),Dt=b(),he=d("select"),be=d("option"),be.textContent="English",we=d("option"),we.textContent="Norsk",Nt=b(),fe=d("div"),Ue=d("button"),mt=C(et),Pt=b(),Ve=d("button"),vt=C(tt),Rt=b(),Ke=d("button"),pt=C(lt),Ft=b(),Ce=d("input"),Ot=b(),ee&&ee.c(),ht=b(),te&&te.c(),We=b(),le&&le.c(),Je=Qt(),f(n,"class","rare-section-text svelte-1c2fvge"),f(o,"class","rare-cards-thumbnails svelte-1c2fvge"),f(l,"class","rare-cards-section svelte-1c2fvge"),f(a,"class","svelte-1c2fvge"),f(u,"class","collection-header svelte-1c2fvge"),f(S,"class","stat-value svelte-1c2fvge"),f(T,"class","stat-label svelte-1c2fvge"),f(_,"class","stat-card svelte-1c2fvge"),f(P,"class","stat-value svelte-1c2fvge"),f(G,"class","stat-label svelte-1c2fvge"),f(H,"class","stat-card svelte-1c2fvge"),f(Y,"class","stat-value svelte-1c2fvge"),f(U,"class","stat-label svelte-1c2fvge"),f(ne,"class","stat-card svelte-1c2fvge"),f(Ie,"class","stat-value svelte-1c2fvge"),f(Te,"class","stat-label svelte-1c2fvge"),f(se,"class","stat-card svelte-1c2fvge"),f(h,"class","stats-section svelte-1c2fvge"),f(Ne,"for","language-select"),f(Ne,"class","svelte-1c2fvge"),be.__value="en",ye(be,be.__value),f(be,"class","svelte-1c2fvge"),we.__value="no",ye(we,we.__value),f(we,"class","svelte-1c2fvge"),f(he,"id","language-select"),f(he,"class","language-selector svelte-1c2fvge"),f(De,"class","language-selector-container svelte-1c2fvge"),f(Ue,"class","btn-secondary"),f(Ve,"class","btn-secondary"),f(Ke,"class","btn-error"),f(Ce,"type","file"),f(Ce,"accept",".json"),Xe(Ce,"display","none"),f(fe,"class","functions-actions svelte-1c2fvge"),f(Le,"class","functions-section svelte-1c2fvge"),f(e,"class","collection-view svelte-1c2fvge")},m(M,B){Q(M,e,B),i(e,l),i(l,n),de.m(n,null),i(l,s),x&&x.m(l,null),i(l,r),i(l,o);for(let J=0;J<$.length;J+=1)$[J]&&$[J].m(o,null);i(e,c),i(e,u),i(u,a),i(a,m),i(e,p),ge.m(e,null),i(e,g),i(e,h),i(h,_),i(_,S),i(S,y),i(_,D),i(_,T),i(T,k),i(h,R),i(h,H),i(H,P),i(P,N),i(H,z),i(H,G),i(G,ue),i(h,X),i(h,ne),i(ne,Y),i(Y,w),i(ne,F),i(ne,U),i(U,Z),i(h,ke),i(h,se),i(se,Ie),i(Ie,Me),i(Ie,ie),i(se,$e),i(se,Te),i(Te,dt),i(e,Tt),i(e,Le),i(Le,De),i(De,Ne),i(Ne,gt),i(Ne,Lt),i(De,Dt),i(De,he),i(he,be),i(he,we),ct(he,t[2]),i(Le,Nt),i(Le,fe),i(fe,Ue),i(Ue,mt),i(fe,Pt),i(fe,Ve),i(Ve,vt),i(fe,Rt),i(fe,Ke),i(Ke,pt),i(fe,Ft),i(fe,Ce),t[26](Ce),i(e,Ot),ee&&ee.m(e,null),Q(M,ht,B),te&&te.m(M,B),Q(M,We,B),le&&le.m(M,B),Q(M,Je,B),_t||(Bt=[j(he,"change",t[18]),j(Ue,"click",t[12]),j(Ve,"click",t[13]),j(Ke,"click",t[15]),j(Ce,"change",t[14])],_t=!0)},p(M,B){if(nt===(nt=zt(M))&&de?de.p(M,B):(de.d(1),de=nt(M),de&&(de.c(),de.m(n,null))),M[9]?x&&(x.d(1),x=null):x?x.p(M,B):(x=ol(M),x.c(),x.m(l,r)),B[0]&524816){Pe=ce(M[4]);let J;for(J=0;J<Pe.length;J+=1){const Ht=rl(M,Pe,J);$[J]?$[J].p(Ht,B):($[J]=il(Ht),$[J].c(),$[J].m(o,null))}for(;J<$.length;J+=1)$[J].d(1);$.length=Pe.length}B[0]&2&&v!==(v=M[1].yourCollection+"")&&E(m,v),st===(st=jt(M))&&ge?ge.p(M,B):(ge.d(1),ge=st(M),ge&&(ge.c(),ge.m(e,g))),B[0]&1&&L!==(L=M[0].cards.length+"")&&E(y,L),B[0]&2&&A!==(A=M[1].cardsCollected+"")&&E(k,A),B[0]&1&&I!==(I=M[0].stats.totalQuestions+"")&&E(N,I),B[0]&2&&oe!==(oe=M[1].questionsAnswered+"")&&E(ue,oe),B[0]&1&&O!==(O=M[0].stats.correctAnswers+"")&&E(w,O),B[0]&2&&V!==(V=M[1].correctAnswers+"")&&E(Z,V),B[0]&2048&&E(Me,M[11]),B[0]&2&&Ye!==(Ye=M[1].accuracy+"")&&E(dt,Ye),B[0]&2&&xe!==(xe=(M[1].language||"Language")+"")&&E(gt,xe),B[0]&4&&ct(he,M[2]),B[0]&2&&et!==(et=M[1].exportBackup+"")&&E(mt,et),B[0]&2&&tt!==(tt=M[1].importBackup+"")&&E(vt,tt),B[0]&2&&lt!==(lt=M[1].clearThisSet+"")&&E(pt,lt),M[6]?ee?ee.p(M,B):(ee=dl(M),ee.c(),ee.m(e,null)):ee&&(ee.d(1),ee=null),M[3]?te?te.p(M,B):(te=gl(M),te.c(),te.m(We.parentNode,We)):te&&(te.d(1),te=null),M[7]?le?le.p(M,B):(le=_l(M),le.c(),le.m(Je.parentNode,Je)):le&&(le.d(1),le=null)},i:W,o:W,d(M){M&&(q(e),q(ht),q(We),q(Je)),de.d(),x&&x.d(),je($,M),ge.d(),t[26](null),ee&&ee.d(),te&&te.d(M),le&&le.d(M),_t=!1,re(Bt)}}}const Mn=()=>{};function Tn(t,e,l){let n,s,r,o,c;St(t,ut,w=>l(21,c=w));let{collection:u}=e,{t:a}=e,{language:v}=e,m=null,p=[],g=[];yl(async()=>{await h()});async function h(){try{p=await Et(c);const w=[...p].sort((F,U)=>{const V=parseInt(F.localId||"0");return parseInt(U.localId||"0")-V});l(4,g=w.slice(0,5))}catch(w){console.error("Error loading rare cards:",w)}}const _=ft();let S,L=null,y=!1;function D(){try{Sn(),k(a.collectionExported,"success")}catch{k(a.exportFailed,"error")}}function T(){S.click()}async function A(w){var V;const F=w.target,U=(V=F.files)==null?void 0:V[0];if(U){try{const Z=await yn(U);Z.success?(k(a.collectionImported,"success"),_("refresh")):k(Z.error||a.importFailed,"error")}catch{k(a.importFailed,"error")}F.value=""}}function k(w,F){l(6,L={text:w,type:F}),setTimeout(()=>{l(6,L=null)},3e3)}function R(){l(7,y=!0)}function H(){l(7,y=!1)}function P(){try{xl(),l(7,y=!1),k(a.collectionCleared,"success"),_("refresh")}catch{k(a.clearFailed,"error")}}function I(w){const F=w.target;_("languageChange",F.value)}function N(w){l(3,m=w)}function z(){l(3,m=null)}function G(w){Ut.call(this,t,w)}function oe(w){Ut.call(this,t,w)}const ue=w=>N({...w,collectedAt:new Date().toISOString()}),X=w=>N(w);function ne(w){yt[w?"unshift":"push"](()=>{S=w,l(5,S)})}const Y=w=>w.key==="Escape"&&z(),O=w=>w.key==="Escape"&&H();return t.$$set=w=>{"collection"in w&&l(0,u=w.collection),"t"in w&&l(1,a=w.t),"language"in w&&l(2,v=w.language)},t.$$.update=()=>{t.$$.dirty[0]&1&&l(11,n=u.stats.totalQuestions>0?Math.round(u.stats.correctAnswers/u.stats.totalQuestions*100):0),t.$$.dirty[0]&1&&l(10,s=16e3-(u.stats.totalHpDefeated||0)),t.$$.dirty[0]&2097153&&l(9,r=u.unlockedRareSets&&u.unlockedRareSets[c]||!1),t.$$.dirty[0]&1&&l(8,o=Math.min(u.stats.totalHpDefeated/16e3*100,100))},[u,a,v,m,g,S,L,y,o,r,s,n,D,T,A,R,H,P,I,N,z,c,G,oe,ue,X,ne,Y,O]}class Ln extends Qe{constructor(e){super(),Ee(this,e,Tn,In,_e,{collection:0,t:1,language:2},null,[-1,-1])}}function Dn(t){let e,l,n,s,r;return{c(){e=d("div"),l=d("div"),n=b(),s=d("p"),r=C(t[0]),f(l,"class","spinner svelte-1lxornd"),f(s,"class","svelte-1lxornd"),f(e,"class","loading-view svelte-1lxornd")},m(o,c){Q(o,e,c),i(e,l),i(e,n),i(e,s),i(s,r)},p(o,[c]){c&1&&E(r,o[0])},i:W,o:W,d(o){o&&q(e)}}}function Nn(t,e,l){let{message:n="Loading..."}=e;return t.$$set=s=>{"message"in s&&l(0,n=s.message)},[n]}class Pn extends Qe{constructor(e){super(),Ee(this,e,Nn,Dn,_e,{message:0})}}function Rn(t){let e,l,n,s,r,o,c,u,a,v,m;return{c(){e=d("div"),l=d("div"),l.textContent="âš ï¸",n=b(),s=d("h2"),s.textContent="Oops!",r=b(),o=d("p"),c=C(t[0]),u=b(),a=d("button"),a.textContent="Try Again",f(l,"class","error-icon svelte-na0xmw"),f(s,"class","svelte-na0xmw"),f(o,"class","svelte-na0xmw"),f(a,"class","btn-primary"),f(e,"class","error-view svelte-na0xmw")},m(p,g){Q(p,e,g),i(e,l),i(e,n),i(e,s),i(e,r),i(e,o),i(o,c),i(e,u),i(e,a),v||(m=j(a,"click",t[1]),v=!0)},p(p,[g]){g&1&&E(c,p[0])},i:W,o:W,d(p){p&&q(e),v=!1,m()}}}function Fn(t,e,l){let{message:n="Something went wrong"}=e;const s=ft();function r(){s("retry")}return t.$$set=o=>{"message"in o&&l(0,n=o.message)},[n,r]}class On extends Qe{constructor(e){super(),Ee(this,e,Fn,Rn,_e,{message:0})}}function Bn(t,e,l){const n=t.slice();return n[32]=e[l],n}function zn(t){let e,l;return e=new Ln({props:{collection:t[4],t:t[14],language:t[0]}}),e.$on("refresh",t[24]),e.$on("languageChange",t[26]),{c(){He(e.$$.fragment)},m(n,s){Ae(e,n,s),l=!0},p(n,s){const r={};s[0]&16&&(r.collection=n[4]),s[0]&16384&&(r.t=n[14]),s[0]&1&&(r.language=n[0]),e.$set(r)},i(n){l||(ae(e.$$.fragment,n),l=!0)},o(n){pe(e.$$.fragment,n),l=!1},d(n){qe(e,n)}}}function jn(t){let e,l,n,s;const r=[Vn,Un,Yn,Hn],o=[];function c(u,a){return u[1]==="loading"?0:u[1]==="quiz"&&u[2]?1:u[1]==="result"&&u[2]?2:u[1]==="error"?3:-1}return~(e=c(t))&&(l=o[e]=r[e](t)),{c(){l&&l.c(),n=Qt()},m(u,a){~e&&o[e].m(u,a),Q(u,n,a),s=!0},p(u,a){let v=e;e=c(u),e===v?~e&&o[e].p(u,a):(l&&(ql(),pe(o[v],1,1,()=>{o[v]=null}),El()),~e?(l=o[e],l?l.p(u,a):(l=o[e]=r[e](u),l.c()),ae(l,1),l.m(n.parentNode,n)):l=null)},i(u){s||(ae(l),s=!0)},o(u){pe(l),s=!1},d(u){u&&q(n),~e&&o[e].d(u)}}}function Hn(t){let e,l;return e=new On({props:{message:t[8]}}),e.$on("retry",t[21]),{c(){He(e.$$.fragment)},m(n,s){Ae(e,n,s),l=!0},p(n,s){const r={};s[0]&256&&(r.message=n[8]),e.$set(r)},i(n){l||(ae(e.$$.fragment,n),l=!0)},o(n){pe(e.$$.fragment,n),l=!1},d(n){qe(e,n)}}}function Yn(t){let e,l;return e=new Cn({props:{isCorrect:t[5],correctAnswer:t[2].correctAnswer,userAnswer:t[6],wonCard:t[7],t:t[14],needsStreak:t[12],streakProgress:t[13],currentStreak:t[4].currentStreak||0}}),e.$on("next",t[20]),{c(){He(e.$$.fragment)},m(n,s){Ae(e,n,s),l=!0},p(n,s){const r={};s[0]&32&&(r.isCorrect=n[5]),s[0]&4&&(r.correctAnswer=n[2].correctAnswer),s[0]&64&&(r.userAnswer=n[6]),s[0]&128&&(r.wonCard=n[7]),s[0]&16384&&(r.t=n[14]),s[0]&4096&&(r.needsStreak=n[12]),s[0]&8192&&(r.streakProgress=n[13]),s[0]&16&&(r.currentStreak=n[4].currentStreak||0),e.$set(r)},i(n){l||(ae(e.$$.fragment,n),l=!0)},o(n){pe(e.$$.fragment,n),l=!1},d(n){qe(e,n)}}}function Un(t){var v;let e,l,n,s,r,o,c,u=ce(Ct),a=[];for(let m=0;m<u.length;m+=1)a[m]=Kn(Bn(t,u,m));return s=new vn({props:{question:t[2],t:t[14],currentSet:((v=Ct.find(t[25]))==null?void 0:v.name)||""}}),s.$on("answer",t[19]),{c(){e=d("div"),l=d("select");for(let m=0;m<a.length;m+=1)a[m].c();n=b(),He(s.$$.fragment),f(l,"class","set-selector svelte-162mefo"),f(e,"class","set-selector-container svelte-162mefo")},m(m,p){Q(m,e,p),i(e,l);for(let g=0;g<a.length;g+=1)a[g]&&a[g].m(l,null);ct(l,t[15]),Q(m,n,p),Ae(s,m,p),r=!0,o||(c=j(l,"change",t[16]),o=!0)},p(m,p){var h;(!r||p[0]&32768)&&ct(l,m[15]);const g={};p[0]&4&&(g.question=m[2]),p[0]&16384&&(g.t=m[14]),p[0]&2048&&(g.currentSet=((h=Ct.find(m[25]))==null?void 0:h.name)||""),s.$set(g)},i(m){r||(ae(s.$$.fragment,m),r=!0)},o(m){pe(s.$$.fragment,m),r=!1},d(m){m&&(q(e),q(n)),je(a,m),qe(s,m),o=!1,c()}}}function Vn(t){let e,l;return e=new Pn({props:{message:t[14].loading}}),{c(){He(e.$$.fragment)},m(n,s){Ae(e,n,s),l=!0},p(n,s){const r={};s[0]&16384&&(r.message=n[14].loading),e.$set(r)},i(n){l||(ae(e.$$.fragment,n),l=!0)},o(n){pe(e.$$.fragment,n),l=!1},d(n){qe(e,n)}}}function Kn(t){let e;return{c(){e=d("option"),e.textContent=`${t[32].name}`,e.__value=t[32].id,ye(e,e.__value),f(e,"class","svelte-162mefo")},m(l,n){Q(l,e,n)},p:W,d(l){l&&q(e)}}}function kl(t){let e,l,n,s=t[0]==="en"?"Choose Your Language":"Velg sprÃ¥k",r,o,c,u=t[0]==="en"?"You can change this anytime in My Collection":"Du kan endre dette nÃ¥r som helst i Min samling",a,v,m,p,g,h,_,S;return{c(){e=d("div"),l=d("div"),n=d("h2"),r=C(s),o=b(),c=d("p"),a=C(u),v=b(),m=d("div"),p=d("button"),p.innerHTML='<span class="flag svelte-162mefo">ðŸ‡¬ðŸ‡§</span> <span>English</span>',g=b(),h=d("button"),h.innerHTML='<span class="flag svelte-162mefo">ðŸ‡³ðŸ‡´</span> <span>Norsk</span>',f(n,"class","svelte-162mefo"),f(c,"class","svelte-162mefo"),f(p,"class","language-btn svelte-162mefo"),f(h,"class","language-btn svelte-162mefo"),f(m,"class","language-buttons svelte-162mefo"),f(l,"class","dialog language-dialog svelte-162mefo"),f(e,"class","dialog-overlay svelte-162mefo"),f(e,"role","button"),f(e,"tabindex","-1")},m(L,y){Q(L,e,y),i(e,l),i(l,n),i(n,r),i(l,o),i(l,c),i(c,a),i(l,v),i(l,m),i(m,p),i(m,g),i(m,h),_||(S=[j(p,"click",t[27]),j(h,"click",t[28])],_=!0)},p(L,y){y[0]&1&&s!==(s=L[0]==="en"?"Choose Your Language":"Velg sprÃ¥k")&&E(r,s),y[0]&1&&u!==(u=L[0]==="en"?"You can change this anytime in My Collection":"Du kan endre dette nÃ¥r som helst i Min samling")&&E(a,u)},d(L){L&&q(e),_=!1,re(S)}}}function Wn(t){var O;let e,l,n,s,r=t[14].appTitle+"",o,c,u,a,v=t[14].playQuiz+"",m,p,g,h=t[14].myCollection+"",_,S,L=(((O=t[4])==null?void 0:O.cards.length)||0)+"",y,D,T=t[3].length+"",A,k,R,H,P,I,N,z,G,oe;const ue=[jn,zn],X=[];function ne(w,F){return w[9]==="quiz"?0:1}P=ne(t),I=X[P]=ue[P](t);let Y=t[10]&&kl(t);return{c(){e=d("div"),l=d("header"),n=d("div"),s=d("h1"),o=C(r),c=b(),u=d("nav"),a=d("button"),m=C(v),p=b(),g=d("button"),_=C(h),S=C(" ("),y=C(L),D=C("/"),A=C(T),k=C(")"),R=b(),H=d("main"),I.c(),N=b(),Y&&Y.c(),f(s,"class","app-title svelte-162mefo"),f(a,"class","nav-btn svelte-162mefo"),K(a,"active",t[9]==="quiz"),f(g,"class","nav-btn svelte-162mefo"),K(g,"active",t[9]==="collection"),f(u,"class","svelte-162mefo"),f(n,"class","header-content svelte-162mefo"),f(l,"class","app-header svelte-162mefo"),f(H,"class","svelte-162mefo"),f(e,"class","app svelte-162mefo")},m(w,F){Q(w,e,F),i(e,l),i(l,n),i(n,s),i(s,o),i(n,c),i(n,u),i(u,a),i(a,m),i(u,p),i(u,g),i(g,_),i(g,S),i(g,y),i(g,D),i(g,A),i(g,k),i(e,R),i(e,H),X[P].m(H,null),i(e,N),Y&&Y.m(e,null),z=!0,G||(oe=[j(a,"click",t[23]),j(g,"click",t[22])],G=!0)},p(w,F){var V;(!z||F[0]&16384)&&r!==(r=w[14].appTitle+"")&&E(o,r),(!z||F[0]&16384)&&v!==(v=w[14].playQuiz+"")&&E(m,v),(!z||F[0]&512)&&K(a,"active",w[9]==="quiz"),(!z||F[0]&16384)&&h!==(h=w[14].myCollection+"")&&E(_,h),(!z||F[0]&16)&&L!==(L=(((V=w[4])==null?void 0:V.cards.length)||0)+"")&&E(y,L),(!z||F[0]&8)&&T!==(T=w[3].length+"")&&E(A,T),(!z||F[0]&512)&&K(g,"active",w[9]==="collection");let U=P;P=ne(w),P===U?X[P].p(w,F):(ql(),pe(X[U],1,1,()=>{X[U]=null}),El(),I=X[P],I?I.p(w,F):(I=X[P]=ue[P](w),I.c()),ae(I,1),I.m(H,null)),w[10]?Y?Y.p(w,F):(Y=kl(w),Y.c(),Y.m(e,null)):Y&&(Y.d(1),Y=null)},i(w){z||(ae(I),z=!0)},o(w){pe(I),z=!1},d(w){w&&q(e),X[P].d(),Y&&Y.d(),G=!1,re(oe)}}}function Jn(t,e,l){let n,s,r;St(t,it,O=>l(0,s=O)),St(t,ut,O=>l(15,r=O));let o="loading",c=null,u=[],a,v=!1,m=0,p=0,g=null,h="",_="quiz",S=!1,L=r,y=!1,D=0;yl(()=>{l(4,a=me()),localStorage.getItem("tcg-seen-language-dialog")?R():l(10,S=!0)});function T(O){const w=O.target;ut.set(w.value),l(11,L=w.value),l(3,u=[]),R()}function A(O){it.set(O)}function k(O){it.set(O),localStorage.setItem("tcg-seen-language-dialog","true"),l(10,S=!1),R()}async function R(){var O;try{l(1,o="loading"),u.length===0&&l(3,u=await Et(L));const w=[...u].sort((ie,$e)=>{const Te=parseInt(ie.localId||"0");return parseInt($e.localId||"0")-Te}),F=new Set(w.slice(0,5).map(ie=>ie.id)),U=new Set(a.cards.map(ie=>ie.id)),V=u.filter(ie=>!U.has(ie.id)&&!F.has(ie.id));if(V.length===0)throw new Error("Congratulations! You have collected all cards from this set!");const Z=Gl(V),ke=await Jl(Z.id,L),se=((O=ke.rarity)==null?void 0:O.toLowerCase())||"common",Me=sn(ke,n,se!=="common"&&se!=="uncommon"&&se!=="rare"&&se!=="double rare");if(!Me)throw new Error("Could not generate a valid question. Please try again.");l(12,y=se!=="common"),a.streakCard&&a.streakCard.id===ke.id?l(13,D=a.currentStreak||0):l(13,D=0),l(2,c=Me),l(1,o="quiz")}catch(w){console.error("Error loading question:",w),l(8,h=w instanceof Error?w.message:"Failed to load question"),l(1,o="error")}}async function H(){a.unlockedRareSets||l(4,a.unlockedRareSets={},a),!a.unlockedRareSets[L]&&a.stats.totalHpDefeated>=16e3&&(u.length===0&&l(3,u=await Et(L)),[...u].sort((F,U)=>{const V=parseInt(F.localId||"0");return parseInt(U.localId||"0")-V}).slice(0,5).forEach(F=>{const U={id:F.id,name:F.name,image:F.image,hp:F.hp,types:F.types,rarity:F.rarity,collectedAt:new Date().toISOString()};a.cards.some(Z=>Z.id===F.id)||a.cards.push(U)}),l(4,a.unlockedRareSets[L]=!0,a),ze(a))}function P(O){var F,U;if(!c)return;l(6,m=O.detail.firstAnswer),p=O.detail.secondAnswer||0,l(5,v=rn(c,m,p));const w=v&&c.card.hp?c.card.hp:0;if($l(v,w),l(7,g=null),v){let V=!1;if(y&&!c.secondQuestion?(l(4,a=me()),((F=a.streakCard)==null?void 0:F.id)===c.card.id?l(4,a.currentStreak=(a.currentStreak||0)+1,a):(l(4,a.streakCard=c.card,a),l(4,a.currentStreak=1,a)),a.currentStreak>=2&&(V=!0,l(4,a.currentStreak=0,a),l(4,a.streakCard=void 0,a)),ze(a)):V=!0,V){const Z={id:c.card.id,name:c.card.name,image:c.card.image,hp:c.card.hp,types:c.card.types,rarity:c.card.rarity,collectedAt:new Date().toISOString()};Zl(Z)&&l(7,g=c.card)}}else l(4,a=me()),y&&((U=a.streakCard)==null?void 0:U.id)===c.card.id&&(l(4,a.currentStreak=0,a),l(4,a.streakCard=void 0,a),ze(a));l(4,a=me()),v&&(H(),l(4,a=me())),l(1,o="result")}function I(){R()}function N(){R()}function z(){l(9,_="collection"),l(4,a=me())}function G(){l(9,_="quiz")}function oe(){l(4,a=me())}const ue=O=>O.id===L,X=O=>A(O.detail),ne=()=>k("en"),Y=()=>k("no");return t.$$.update=()=>{t.$$.dirty[0]&1&&l(14,n=cn(s))},[s,o,c,u,a,v,m,g,h,_,S,L,y,D,n,r,T,A,k,P,I,N,z,G,oe,ue,X,ne,Y]}class Gn extends Qe{constructor(e){super(),Ee(this,e,Jn,Wn,_e,{},null,[-1,-1])}}new Gn({target:document.getElementById("app")});
