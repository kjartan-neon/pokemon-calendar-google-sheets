var vt=Object.defineProperty;var gt=(t,e,n)=>e in t?vt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Oe=(t,e,n)=>gt(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function T(){}function ct(t){return t()}function Pe(){return Object.create(null)}function me(t){t.forEach(ct)}function ot(t){return typeof t=="function"}function ve(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Ee;function ke(t,e){return t===e?!0:(Ee||(Ee=document.createElement("a")),Ee.href=e,t===Ee.href)}function pt(t){return Object.keys(t).length===0}function o(t,e){t.appendChild(e)}function S(t,e,n){t.insertBefore(e,n||null)}function E(t){t.parentNode&&t.parentNode.removeChild(t)}function be(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function C(t){return document.createTextNode(t)}function y(){return C(" ")}function _t(){return C("")}function re(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function u(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function yt(t){return Array.from(t.childNodes)}function L(t,e){e=""+e,t.data!==e&&(t.data=e)}function wt(t,e,n,l){t.style.setProperty(e,n,"")}function R(t,e,n){t.classList.toggle(e,!!n)}function kt(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}let $e;function Ae(t){$e=t}function it(){if(!$e)throw new Error("Function called outside component initialization");return $e}function bt(t){it().$$.on_mount.push(t)}function qe(){const t=it();return(e,n,{cancelable:l=!1}={})=>{const r=t.$$.callbacks[e];if(r){const s=kt(e,n,{cancelable:l});return r.slice().forEach(c=>{c.call(t,s)}),!s.defaultPrevented}return!0}}const ye=[],ze=[];let we=[];const Qe=[],Ct=Promise.resolve();let Ie=!1;function At(){Ie||(Ie=!0,Ct.then(at))}function Me(t){we.push(t)}const Ne=new Set;let _e=0;function at(){if(_e!==0)return;const t=$e;do{try{for(;_e<ye.length;){const e=ye[_e];_e++,Ae(e),$t(e.$$)}}catch(e){throw ye.length=0,_e=0,e}for(Ae(null),ye.length=0,_e=0;ze.length;)ze.pop()();for(let e=0;e<we.length;e+=1){const n=we[e];Ne.has(n)||(Ne.add(n),n())}we.length=0}while(ye.length);for(;Qe.length;)Qe.pop()();Ie=!1,Ne.clear(),Ae(t)}function $t(t){if(t.fragment!==null){t.update(),me(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Me)}}function Et(t){const e=[],n=[];we.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),we=e}const Se=new Set;let fe;function ut(){fe={r:0,c:[],p:fe}}function ft(){fe.r||me(fe.c),fe=fe.p}function H(t,e){t&&t.i&&(Se.delete(t),t.i(e))}function G(t,e,n,l){if(t&&t.o){if(Se.has(t))return;Se.add(t),fe.c.push(()=>{Se.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function U(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function he(t){t&&t.c()}function se(t,e,n){const{fragment:l,after_update:r}=t.$$;l&&l.m(e,n),Me(()=>{const s=t.$$.on_mount.map(ct).filter(ot);t.$$.on_destroy?t.$$.on_destroy.push(...s):me(s),t.$$.on_mount=[]}),r.forEach(Me)}function ce(t,e){const n=t.$$;n.fragment!==null&&(Et(n.after_update),me(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function St(t,e){t.$$.dirty[0]===-1&&(ye.push(t),At(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ge(t,e,n,l,r,s,c=null,a=[-1]){const i=$e;Ae(t);const f=t.$$={fragment:null,ctx:[],props:s,update:T,not_equal:r,bound:Pe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(i?i.$$.context:[])),callbacks:Pe(),dirty:a,skip_bound:!1,root:e.target||i.$$.root};c&&c(f.root);let h=!1;if(f.ctx=n?n(t,e.props||{},(p,b,...m)=>{const v=m.length?m[0]:b;return f.ctx&&r(f.ctx[p],f.ctx[p]=v)&&(!f.skip_bound&&f.bound[p]&&f.bound[p](v),h&&St(t,p)),b}):[],f.update(),h=!0,me(f.before_update),f.fragment=l?l(f.ctx):!1,e.target){if(e.hydrate){const p=yt(e.target);f.fragment&&f.fragment.l(p),p.forEach(E)}else f.fragment&&f.fragment.c();e.intro&&H(t.$$.fragment),se(t,e.target,e.anchor),at()}Ae(i)}class pe{constructor(){Oe(this,"$$");Oe(this,"$$set")}$destroy(){ce(this,1),this.$destroy=T}$on(e,n){if(!ot(n))return T;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(e){this.$$set&&!pt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const qt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(qt);const De="https://api.tcgdex.net/v2/en";async function Ot(){try{const t=await fetch(`${De}/sets`);if(!t.ok)throw new Error("Failed to fetch sets");return(await t.json()).filter(l=>l.cardCount&&l.cardCount.total>20).sort((l,r)=>new Date(r.releaseDate).getTime()-new Date(l.releaseDate).getTime())[0]}catch(t){throw console.error("Error fetching latest set:",t),t}}async function Nt(t){try{const e=await fetch(`${De}/sets/${t}`);if(!e.ok)throw new Error("Failed to fetch cards from set");const l=(await e.json()).cards||[],r=[];for(let s=0;s<Math.min(l.length,20);s++)try{const c=await Lt(l[s].id);if(c.attacks&&c.attacks.length>0&&c.hp&&c.hp>0&&r.push(c),r.length>=10)break}catch(c){console.error(`Failed to fetch card ${l[s].id}:`,c)}return r}catch(e){throw console.error("Error fetching cards from set:",e),e}}async function Lt(t){try{const e=await fetch(`${De}/cards/${t}`);if(!e.ok)throw new Error("Failed to fetch card details");return await e.json()}catch(e){throw console.error("Error fetching card details:",e),e}}function zt(t,e){const n=t.filter(r=>r.attacks&&r.attacks.length>0&&r.hp&&r.hp>0);if(n.length<e)throw new Error("Not enough valid cards in the set");return[...n].sort(()=>Math.random()-.5).slice(0,e)}const dt="pokemon-tcg-collection",ht="1.0";function It(){return{totalQuestions:0,correctAnswers:0,incorrectAnswers:0}}function Le(){return{cards:[],stats:It(),version:ht}}function de(){try{const t=localStorage.getItem(dt);if(!t)return Le();const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?(console.warn("Invalid collection format, resetting..."),Le()):e}catch(t){return console.error("Error loading collection from local storage:",t),Le()}}function Fe(t){try{const e={...t,version:ht};localStorage.setItem(dt,JSON.stringify(e))}catch(e){throw console.error("Error saving collection to local storage:",e),new Error("Failed to save collection")}}function Te(t){try{const e=de();return e.cards.some(l=>l.id===t.id)?!1:(e.cards.push(t),Fe(e),!0)}catch(e){return console.error("Error adding card to collection:",e),!1}}function Mt(t){try{const e=de();e.stats.totalQuestions++,t?e.stats.correctAnswers++:e.stats.incorrectAnswers++,Fe(e)}catch(e){console.error("Error updating stats:",e)}}function Dt(){const t=de();return JSON.stringify(t,null,2)}function Ft(t){try{const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?{success:!1,error:"Invalid collection format"}:!e.stats.totalQuestions===void 0||!e.stats.correctAnswers===void 0||!e.stats.incorrectAnswers===void 0?{success:!1,error:"Invalid stats format"}:(Fe(e),{success:!0})}catch(e){return console.error("Error importing collection:",e),{success:!1,error:"Failed to parse JSON file"}}}function mt(t){if(!t)return 0;const e=t.match(/(\d+)/);return e?parseInt(e[1],10):0}function Pt(t){if(!t.attacks||t.attacks.length===0)return null;const e=t.attacks.filter(l=>mt(l.damage)>0);if(e.length===0)return null;const n=Math.floor(Math.random()*e.length);return e[n]}function Qt(t,e){return Math.ceil(e/t)}function Tt(t){const e=new Set([t]);for(;e.size<4;){const n=Math.floor(Math.random()*3)+1;if(Math.random()>.5)e.add(t+n);else{const r=t-n;r>0&&e.add(r)}}return Array.from(e).sort((n,l)=>n-l)}function Rt(t){if(t.length<2)return null;const[e,n]=t,l=Pt(e);if(!l||!n.hp||n.hp<=0)return null;const r=mt(l.damage);if(r<=0)return null;const s=Qt(r,n.hp),c=Tt(s);return{attackerCard:e,defenderCard:n,selectedAttack:l,correctAnswer:s,options:c}}function jt(t,e){return e===t.correctAnswer}function Re(t,e,n){const l=t.slice();return l[3]=e[n],l}function je(t,e,n){const l=t.slice();return l[6]=e[n],l}function Ve(t){let e,n,l,r,s=t[0].hp+"",c;return{c(){e=d("div"),n=d("span"),n.textContent="HP",l=y(),r=d("span"),c=C(s),u(n,"class","hp-label svelte-1c2yytc"),u(r,"class","hp-value svelte-1c2yytc"),u(e,"class","card-hp svelte-1c2yytc")},m(a,i){S(a,e,i),o(e,n),o(e,l),o(e,r),o(r,c)},p(a,i){i&1&&s!==(s=a[0].hp+"")&&L(c,s)},d(a){a&&E(e)}}}function Be(t){let e,n=U(t[0].types),l=[];for(let r=0;r<n.length;r+=1)l[r]=He(je(t,n,r));return{c(){e=d("div");for(let r=0;r<l.length;r+=1)l[r].c();u(e,"class","card-types svelte-1c2yytc")},m(r,s){S(r,e,s);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null)},p(r,s){if(s&1){n=U(r[0].types);let c;for(c=0;c<n.length;c+=1){const a=je(r,n,c);l[c]?l[c].p(a,s):(l[c]=He(a),l[c].c(),l[c].m(e,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=n.length}},d(r){r&&E(e),be(l,r)}}}function He(t){let e,n=t[6]+"",l;return{c(){e=d("span"),l=C(n),u(e,"class","type-badge svelte-1c2yytc")},m(r,s){S(r,e,s),o(e,l)},p(r,s){s&1&&n!==(n=r[6]+"")&&L(l,n)},d(r){r&&E(e)}}}function Ue(t){let e,n,l,r=U(t[0].attacks),s=[];for(let c=0;c<r.length;c+=1)s[c]=Ye(Re(t,r,c));return{c(){e=d("div"),n=d("h4"),n.textContent="Attacks:",l=y();for(let c=0;c<s.length;c+=1)s[c].c();u(n,"class","svelte-1c2yytc"),u(e,"class","card-attacks svelte-1c2yytc")},m(c,a){S(c,e,a),o(e,n),o(e,l);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null)},p(c,a){if(a&5){r=U(c[0].attacks);let i;for(i=0;i<r.length;i+=1){const f=Re(c,r,i);s[i]?s[i].p(f,a):(s[i]=Ye(f),s[i].c(),s[i].m(e,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=r.length}},d(c){c&&E(e),be(s,c)}}}function Je(t){let e,n=t[3].damage+"",l;return{c(){e=d("span"),l=C(n),u(e,"class","attack-damage svelte-1c2yytc")},m(r,s){S(r,e,s),o(e,l)},p(r,s){s&1&&n!==(n=r[3].damage+"")&&L(l,n)},d(r){r&&E(e)}}}function Ye(t){let e,n,l=t[3].name+"",r,s,c,a=t[3].damage&&Je(t);return{c(){e=d("div"),n=d("span"),r=C(l),s=y(),a&&a.c(),c=y(),u(n,"class","attack-name svelte-1c2yytc"),u(e,"class","attack svelte-1c2yytc"),R(e,"highlighted",t[2]===t[3].name)},m(i,f){S(i,e,f),o(e,n),o(n,r),o(e,s),a&&a.m(e,null),o(e,c)},p(i,f){f&1&&l!==(l=i[3].name+"")&&L(r,l),i[3].damage?a?a.p(i,f):(a=Je(i),a.c(),a.m(e,c)):a&&(a.d(1),a=null),f&5&&R(e,"highlighted",i[2]===i[3].name)},d(i){i&&E(e),a&&a.d()}}}function Vt(t){let e,n,l,r,s,c,a,i,f=t[0].name+"",h,p,b,m,v=t[0].hp&&Ve(t),g=t[0].types&&t[0].types.length>0&&Be(t),_=t[1]&&t[0].attacks&&t[0].attacks.length>0&&Ue(t);return{c(){e=d("div"),n=d("div"),l=d("img"),c=y(),a=d("div"),i=d("h3"),h=C(f),p=y(),v&&v.c(),b=y(),g&&g.c(),m=y(),_&&_.c(),ke(l.src,r=t[0].image)||u(l,"src",r),u(l,"alt",s=t[0].name),u(l,"class","svelte-1c2yytc"),u(n,"class","card-image svelte-1c2yytc"),u(i,"class","card-name svelte-1c2yytc"),u(a,"class","card-info svelte-1c2yytc"),u(e,"class","pokemon-card svelte-1c2yytc")},m(w,A){S(w,e,A),o(e,n),o(n,l),o(e,c),o(e,a),o(a,i),o(i,h),o(a,p),v&&v.m(a,null),o(a,b),g&&g.m(a,null),o(a,m),_&&_.m(a,null)},p(w,[A]){A&1&&!ke(l.src,r=w[0].image)&&u(l,"src",r),A&1&&s!==(s=w[0].name)&&u(l,"alt",s),A&1&&f!==(f=w[0].name+"")&&L(h,f),w[0].hp?v?v.p(w,A):(v=Ve(w),v.c(),v.m(a,b)):v&&(v.d(1),v=null),w[0].types&&w[0].types.length>0?g?g.p(w,A):(g=Be(w),g.c(),g.m(a,m)):g&&(g.d(1),g=null),w[1]&&w[0].attacks&&w[0].attacks.length>0?_?_.p(w,A):(_=Ue(w),_.c(),_.m(a,null)):_&&(_.d(1),_=null)},i:T,o:T,d(w){w&&E(e),v&&v.d(),g&&g.d(),_&&_.d()}}}function Bt(t,e,n){let{card:l}=e,{showAttacks:r=!1}=e,{highlightedAttack:s=null}=e;return t.$$set=c=>{"card"in c&&n(0,l=c.card),"showAttacks"in c&&n(1,r=c.showAttacks),"highlightedAttack"in c&&n(2,s=c.highlightedAttack)},[l,r,s]}class Ge extends pe{constructor(e){super(),ge(this,e,Bt,Vt,ve,{card:0,showAttacks:1,highlightedAttack:2})}}function Ke(t,e,n){const l=t.slice();return l[5]=e[n],l}function We(t){let e,n=t[5]+"",l,r,s=t[5]===1?"hit":"hits",c,a,i,f,h;function p(){return t[3](t[5])}return{c(){e=d("button"),l=C(n),r=y(),c=C(s),a=y(),u(e,"class","answer-btn btn-primary svelte-19eymr8"),e.disabled=i=t[1]!==null},m(b,m){S(b,e,m),o(e,l),o(e,r),o(e,c),o(e,a),f||(h=re(e,"click",p),f=!0)},p(b,m){t=b,m&1&&n!==(n=t[5]+"")&&L(l,n),m&1&&s!==(s=t[5]===1?"hit":"hits")&&L(c,s),m&2&&i!==(i=t[1]!==null)&&(e.disabled=i)},d(b){b&&E(e),f=!1,h()}}}function Ht(t){let e,n,l,r,s,c,a,i=t[0].attackerCard.name+"",f,h,p,b=t[0].selectedAttack.name+"",m,v,g=t[0].selectedAttack.damage+"",_,w,A,k=t[0].defenderCard.name+"",$,q,N,D,z,Q,J,j,X,Z,oe,K,ie,ae,W,x,B,ne,Ce,le,V;j=new Ge({props:{card:t[0].attackerCard,showAttacks:!0,highlightedAttack:t[0].selectedAttack.name}}),W=new Ge({props:{card:t[0].defenderCard}});let ee=U(t[0].options),F=[];for(let O=0;O<ee.length;O+=1)F[O]=We(Ke(t,ee,O));return{c(){e=d("div"),n=d("div"),l=d("h2"),l.textContent="Pokemon Math Challenge!",r=y(),s=d("p"),c=C("How many times does "),a=d("strong"),f=C(i),h=C(` need to use
      `),p=d("strong"),m=C(b),v=C(`
      (`),_=C(g),w=C(` damage)
      to knock out `),A=d("strong"),$=C(k),q=C("?"),N=y(),D=d("div"),z=d("div"),Q=d("div"),Q.textContent="Attacker",J=y(),he(j.$$.fragment),X=y(),Z=d("div"),Z.innerHTML='<span class="svelte-19eymr8">VS</span>',oe=y(),K=d("div"),ie=d("div"),ie.textContent="Defender",ae=y(),he(W.$$.fragment),x=y(),B=d("div"),ne=d("h3"),ne.textContent="Choose your answer:",Ce=y(),le=d("div");for(let O=0;O<F.length;O+=1)F[O].c();u(l,"class","svelte-19eymr8"),u(a,"class","svelte-19eymr8"),u(p,"class","svelte-19eymr8"),u(A,"class","svelte-19eymr8"),u(s,"class","quiz-question svelte-19eymr8"),u(n,"class","quiz-header svelte-19eymr8"),u(Q,"class","card-label svelte-19eymr8"),u(z,"class","card-wrapper svelte-19eymr8"),u(Z,"class","vs-divider svelte-19eymr8"),u(ie,"class","card-label svelte-19eymr8"),u(K,"class","card-wrapper svelte-19eymr8"),u(D,"class","cards-container svelte-19eymr8"),u(ne,"class","svelte-19eymr8"),u(le,"class","answer-buttons svelte-19eymr8"),u(B,"class","answers-container svelte-19eymr8"),u(e,"class","quiz-view svelte-19eymr8")},m(O,I){S(O,e,I),o(e,n),o(n,l),o(n,r),o(n,s),o(s,c),o(s,a),o(a,f),o(s,h),o(s,p),o(p,m),o(s,v),o(s,_),o(s,w),o(s,A),o(A,$),o(s,q),o(e,N),o(e,D),o(D,z),o(z,Q),o(z,J),se(j,z,null),o(D,X),o(D,Z),o(D,oe),o(D,K),o(K,ie),o(K,ae),se(W,K,null),o(e,x),o(e,B),o(B,ne),o(B,Ce),o(B,le);for(let Y=0;Y<F.length;Y+=1)F[Y]&&F[Y].m(le,null);V=!0},p(O,[I]){(!V||I&1)&&i!==(i=O[0].attackerCard.name+"")&&L(f,i),(!V||I&1)&&b!==(b=O[0].selectedAttack.name+"")&&L(m,b),(!V||I&1)&&g!==(g=O[0].selectedAttack.damage+"")&&L(_,g),(!V||I&1)&&k!==(k=O[0].defenderCard.name+"")&&L($,k);const Y={};I&1&&(Y.card=O[0].attackerCard),I&1&&(Y.highlightedAttack=O[0].selectedAttack.name),j.$set(Y);const ue={};if(I&1&&(ue.card=O[0].defenderCard),W.$set(ue),I&7){ee=U(O[0].options);let M;for(M=0;M<ee.length;M+=1){const P=Ke(O,ee,M);F[M]?F[M].p(P,I):(F[M]=We(P),F[M].c(),F[M].m(le,null))}for(;M<F.length;M+=1)F[M].d(1);F.length=ee.length}},i(O){V||(H(j.$$.fragment,O),H(W.$$.fragment,O),V=!0)},o(O){G(j.$$.fragment,O),G(W.$$.fragment,O),V=!1},d(O){O&&E(e),ce(j),ce(W),be(F,O)}}}function Ut(t,e,n){let{question:l}=e;const r=qe();let s=null;function c(i){n(1,s=i),r("answer",i)}const a=i=>c(i);return t.$$set=i=>{"question"in i&&n(0,l=i.question)},[l,s,c,a]}class Jt extends pe{constructor(e){super(),ge(this,e,Ut,Ht,ve,{question:0})}}function Xe(t,e,n){const l=t.slice();return l[6]=e[n],l}function Yt(t){let e,n,l,r,s,c,a,i,f,h,p,b,m=t[1]===1?"hit":"hits",v,g,_,w;return{c(){e=d("div"),e.textContent="âœ—",n=y(),l=d("h2"),l.textContent="Not quite!",r=y(),s=d("p"),c=C("You answered "),a=d("strong"),i=C(t[2]),f=C(", but the correct answer was "),h=d("strong"),p=C(t[1]),b=y(),v=C(m),g=C("."),_=y(),w=d("p"),w.textContent="Try again with the next question!",u(e,"class","result-icon error svelte-1ryvcfy"),u(l,"class","result-title svelte-1ryvcfy"),u(a,"class","svelte-1ryvcfy"),u(h,"class","svelte-1ryvcfy"),u(s,"class","result-message svelte-1ryvcfy"),u(w,"class","encouragement svelte-1ryvcfy")},m(A,k){S(A,e,k),S(A,n,k),S(A,l,k),S(A,r,k),S(A,s,k),o(s,c),o(s,a),o(a,i),o(s,f),o(s,h),o(h,p),o(s,b),o(s,v),o(s,g),S(A,_,k),S(A,w,k)},p(A,k){k&4&&L(i,A[2]),k&2&&L(p,A[1]),k&2&&m!==(m=A[1]===1?"hit":"hits")&&L(v,m)},d(A){A&&(E(e),E(n),E(l),E(r),E(s),E(_),E(w))}}}function Gt(t){let e,n,l,r,s,c,a,i,f,h=t[1]===1?"hit":"hits",p,b,m,v,g,_,w,A=U(t[3]),k=[];for(let $=0;$<A.length;$+=1)k[$]=Ze(Xe(t,A,$));return{c(){e=d("div"),e.textContent="âœ“",n=y(),l=d("h2"),l.textContent="Correct!",r=y(),s=d("p"),c=C("Great job! The answer was "),a=d("strong"),i=C(t[1]),f=y(),p=C(h),b=C("!"),m=y(),v=d("div"),g=d("h3"),g.textContent="You won these cards!",_=y(),w=d("div");for(let $=0;$<k.length;$+=1)k[$].c();u(e,"class","result-icon success svelte-1ryvcfy"),u(l,"class","result-title svelte-1ryvcfy"),u(a,"class","svelte-1ryvcfy"),u(s,"class","result-message svelte-1ryvcfy"),u(g,"class","svelte-1ryvcfy"),u(w,"class","cards-grid svelte-1ryvcfy"),u(v,"class","won-cards svelte-1ryvcfy")},m($,q){S($,e,q),S($,n,q),S($,l,q),S($,r,q),S($,s,q),o(s,c),o(s,a),o(a,i),o(s,f),o(s,p),o(s,b),S($,m,q),S($,v,q),o(v,g),o(v,_),o(v,w);for(let N=0;N<k.length;N+=1)k[N]&&k[N].m(w,null)},p($,q){if(q&2&&L(i,$[1]),q&2&&h!==(h=$[1]===1?"hit":"hits")&&L(p,h),q&8){A=U($[3]);let N;for(N=0;N<A.length;N+=1){const D=Xe($,A,N);k[N]?k[N].p(D,q):(k[N]=Ze(D),k[N].c(),k[N].m(w,null))}for(;N<k.length;N+=1)k[N].d(1);k.length=A.length}},d($){$&&(E(e),E(n),E(l),E(r),E(s),E(m),E(v)),be(k,$)}}}function Ze(t){let e,n,l,r,s,c,a=t[6].name+"",i,f;return{c(){e=d("div"),n=d("img"),s=y(),c=d("span"),i=C(a),f=y(),ke(n.src,l=t[6].image)||u(n,"src",l),u(n,"alt",r=t[6].name),u(n,"class","svelte-1ryvcfy"),u(c,"class","card-name svelte-1ryvcfy"),u(e,"class","mini-card svelte-1ryvcfy")},m(h,p){S(h,e,p),o(e,n),o(e,s),o(e,c),o(c,i),o(e,f)},p(h,p){p&8&&!ke(n.src,l=h[6].image)&&u(n,"src",l),p&8&&r!==(r=h[6].name)&&u(n,"alt",r),p&8&&a!==(a=h[6].name+"")&&L(i,a)},d(h){h&&E(e)}}}function Kt(t){let e,n,l,r,s,c;function a(h,p){return h[0]?Gt:Yt}let i=a(t),f=i(t);return{c(){e=d("div"),n=d("div"),f.c(),l=y(),r=d("button"),r.textContent="Next Question",u(n,"class","result-card svelte-1ryvcfy"),R(n,"correct",t[0]),R(n,"incorrect",!t[0]),u(r,"class","next-btn btn-primary svelte-1ryvcfy"),u(e,"class","result-view svelte-1ryvcfy")},m(h,p){S(h,e,p),o(e,n),f.m(n,null),o(e,l),o(e,r),s||(c=re(r,"click",t[4]),s=!0)},p(h,[p]){i===(i=a(h))&&f?f.p(h,p):(f.d(1),f=i(h),f&&(f.c(),f.m(n,null))),p&1&&R(n,"correct",h[0]),p&1&&R(n,"incorrect",!h[0])},i:T,o:T,d(h){h&&E(e),f.d(),s=!1,c()}}}function Wt(t,e,n){let{isCorrect:l}=e,{correctAnswer:r}=e,{userAnswer:s}=e,{wonCards:c}=e;const a=qe();function i(){a("next")}return t.$$set=f=>{"isCorrect"in f&&n(0,l=f.isCorrect),"correctAnswer"in f&&n(1,r=f.correctAnswer),"userAnswer"in f&&n(2,s=f.userAnswer),"wonCards"in f&&n(3,c=f.wonCards)},[l,r,s,c,i]}class Xt extends pe{constructor(e){super(),ge(this,e,Wt,Kt,ve,{isCorrect:0,correctAnswer:1,userAnswer:2,wonCards:3})}}function Zt(){try{const t=Dt(),e=new Blob([t],{type:"application/json"}),n=URL.createObjectURL(e),l=document.createElement("a");l.href=n,l.download=`pokemon-collection-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(n)}catch(t){throw console.error("Error downloading backup:",t),new Error("Failed to download backup")}}function xt(t){return new Promise(e=>{const n=new FileReader;n.onload=l=>{var r;try{const s=(r=l.target)==null?void 0:r.result,c=Ft(s);e(c)}catch(s){console.error("Error reading file:",s),e({success:!1,error:"Failed to read file"})}},n.onerror=()=>{e({success:!1,error:"Failed to read file"})},n.readAsText(t)})}function xe(t,e,n){const l=t.slice();return l[10]=e[n],l}function et(t,e,n){const l=t.slice();return l[13]=e[n],l}function tt(t){let e,n=t[2].text+"",l;return{c(){e=d("div"),l=C(n),u(e,"class","message svelte-10ttrmt"),R(e,"success",t[2].type==="success"),R(e,"error",t[2].type==="error")},m(r,s){S(r,e,s),o(e,l)},p(r,s){s&4&&n!==(n=r[2].text+"")&&L(l,n),s&4&&R(e,"success",r[2].type==="success"),s&4&&R(e,"error",r[2].type==="error")},d(r){r&&E(e)}}}function en(t){let e,n=U(t[0].cards),l=[];for(let r=0;r<n.length;r+=1)l[r]=st(xe(t,n,r));return{c(){e=d("div");for(let r=0;r<l.length;r+=1)l[r].c();u(e,"class","cards-grid svelte-10ttrmt")},m(r,s){S(r,e,s);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null)},p(r,s){if(s&1){n=U(r[0].cards);let c;for(c=0;c<n.length;c+=1){const a=xe(r,n,c);l[c]?l[c].p(a,s):(l[c]=st(a),l[c].c(),l[c].m(e,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=n.length}},d(r){r&&E(e),be(l,r)}}}function tn(t){let e;return{c(){e=d("div"),e.innerHTML='<div class="empty-icon svelte-10ttrmt">ðŸ“¦</div> <h3 class="svelte-10ttrmt">No cards yet!</h3> <p class="svelte-10ttrmt">Answer questions correctly to start building your collection.</p>',u(e,"class","empty-state svelte-10ttrmt")},m(n,l){S(n,e,l)},p:T,d(n){n&&E(e)}}}function nt(t){let e,n,l=t[10].hp+"",r;return{c(){e=d("span"),n=C("HP "),r=C(l),u(e,"class","hp svelte-10ttrmt")},m(s,c){S(s,e,c),o(e,n),o(e,r)},p(s,c){c&1&&l!==(l=s[10].hp+"")&&L(r,l)},d(s){s&&E(e)}}}function lt(t){let e,n=U(t[10].types),l=[];for(let r=0;r<n.length;r+=1)l[r]=rt(et(t,n,r));return{c(){e=d("div");for(let r=0;r<l.length;r+=1)l[r].c();u(e,"class","types svelte-10ttrmt")},m(r,s){S(r,e,s);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null)},p(r,s){if(s&1){n=U(r[10].types);let c;for(c=0;c<n.length;c+=1){const a=et(r,n,c);l[c]?l[c].p(a,s):(l[c]=rt(a),l[c].c(),l[c].m(e,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=n.length}},d(r){r&&E(e),be(l,r)}}}function rt(t){let e,n=t[13]+"",l;return{c(){e=d("span"),l=C(n),u(e,"class","type svelte-10ttrmt")},m(r,s){S(r,e,s),o(e,l)},p(r,s){s&1&&n!==(n=r[13]+"")&&L(l,n)},d(r){r&&E(e)}}}function st(t){let e,n,l,r,s,c,a,i=t[10].name+"",f,h,p,b,m=t[10].hp&&nt(t),v=t[10].types&&t[10].types.length>0&&lt(t);return{c(){e=d("div"),n=d("img"),s=y(),c=d("div"),a=d("h4"),f=C(i),h=y(),m&&m.c(),p=y(),v&&v.c(),b=y(),ke(n.src,l=t[10].image)||u(n,"src",l),u(n,"alt",r=t[10].name),u(n,"class","svelte-10ttrmt"),u(a,"class","svelte-10ttrmt"),u(c,"class","card-details svelte-10ttrmt"),u(e,"class","collection-card svelte-10ttrmt")},m(g,_){S(g,e,_),o(e,n),o(e,s),o(e,c),o(c,a),o(a,f),o(c,h),m&&m.m(c,null),o(c,p),v&&v.m(c,null),o(e,b)},p(g,_){_&1&&!ke(n.src,l=g[10].image)&&u(n,"src",l),_&1&&r!==(r=g[10].name)&&u(n,"alt",r),_&1&&i!==(i=g[10].name+"")&&L(f,i),g[10].hp?m?m.p(g,_):(m=nt(g),m.c(),m.m(c,p)):m&&(m.d(1),m=null),g[10].types&&g[10].types.length>0?v?v.p(g,_):(v=lt(g),v.c(),v.m(c,null)):v&&(v.d(1),v=null)},d(g){g&&E(e),m&&m.d(),v&&v.d()}}}function nn(t){let e,n,l,r,s,c,a,i,f,h,p,b,m,v,g,_=t[0].cards.length+"",w,A,k,$,q,N,D=t[0].stats.totalQuestions+"",z,Q,J,j,X,Z,oe=t[0].stats.correctAnswers+"",K,ie,ae,W,x,B,ne,Ce,le,V,ee,F,O,I=t[2]&&tt(t);function Y(P,te){return P[0].cards.length===0?tn:en}let ue=Y(t),M=ue(t);return{c(){e=d("div"),n=d("div"),l=d("h2"),l.textContent="Your Collection",r=y(),s=d("div"),c=d("button"),c.textContent="Export Backup",a=y(),i=d("button"),i.textContent="Import Backup",f=y(),h=d("input"),p=y(),I&&I.c(),b=y(),m=d("div"),v=d("div"),g=d("div"),w=C(_),A=y(),k=d("div"),k.textContent="Cards Collected",$=y(),q=d("div"),N=d("div"),z=C(D),Q=y(),J=d("div"),J.textContent="Questions Answered",j=y(),X=d("div"),Z=d("div"),K=C(oe),ie=y(),ae=d("div"),ae.textContent="Correct Answers",W=y(),x=d("div"),B=d("div"),ne=C(t[3]),Ce=C("%"),le=y(),V=d("div"),V.textContent="Accuracy",ee=y(),M.c(),u(l,"class","svelte-10ttrmt"),u(c,"class","btn-secondary"),u(i,"class","btn-secondary"),u(h,"type","file"),u(h,"accept",".json"),wt(h,"display","none"),u(s,"class","header-actions svelte-10ttrmt"),u(n,"class","collection-header svelte-10ttrmt"),u(g,"class","stat-value svelte-10ttrmt"),u(k,"class","stat-label svelte-10ttrmt"),u(v,"class","stat-card svelte-10ttrmt"),u(N,"class","stat-value svelte-10ttrmt"),u(J,"class","stat-label svelte-10ttrmt"),u(q,"class","stat-card svelte-10ttrmt"),u(Z,"class","stat-value svelte-10ttrmt"),u(ae,"class","stat-label svelte-10ttrmt"),u(X,"class","stat-card svelte-10ttrmt"),u(B,"class","stat-value svelte-10ttrmt"),u(V,"class","stat-label svelte-10ttrmt"),u(x,"class","stat-card svelte-10ttrmt"),u(m,"class","stats-section svelte-10ttrmt"),u(e,"class","collection-view svelte-10ttrmt")},m(P,te){S(P,e,te),o(e,n),o(n,l),o(n,r),o(n,s),o(s,c),o(s,a),o(s,i),o(s,f),o(s,h),t[7](h),o(e,p),I&&I.m(e,null),o(e,b),o(e,m),o(m,v),o(v,g),o(g,w),o(v,A),o(v,k),o(m,$),o(m,q),o(q,N),o(N,z),o(q,Q),o(q,J),o(m,j),o(m,X),o(X,Z),o(Z,K),o(X,ie),o(X,ae),o(m,W),o(m,x),o(x,B),o(B,ne),o(B,Ce),o(x,le),o(x,V),o(e,ee),M.m(e,null),F||(O=[re(c,"click",t[4]),re(i,"click",t[5]),re(h,"change",t[6])],F=!0)},p(P,[te]){P[2]?I?I.p(P,te):(I=tt(P),I.c(),I.m(e,b)):I&&(I.d(1),I=null),te&1&&_!==(_=P[0].cards.length+"")&&L(w,_),te&1&&D!==(D=P[0].stats.totalQuestions+"")&&L(z,D),te&1&&oe!==(oe=P[0].stats.correctAnswers+"")&&L(K,oe),te&8&&L(ne,P[3]),ue===(ue=Y(P))&&M?M.p(P,te):(M.d(1),M=ue(P),M&&(M.c(),M.m(e,null)))},i:T,o:T,d(P){P&&E(e),t[7](null),I&&I.d(),M.d(),F=!1,me(O)}}}function ln(t,e,n){let l,{collection:r}=e;const s=qe();let c,a=null;function i(){try{Zt(),p("Collection exported successfully!","success")}catch{p("Failed to export collection","error")}}function f(){c.click()}async function h(m){var _;const v=m.target,g=(_=v.files)==null?void 0:_[0];if(g){try{const w=await xt(g);w.success?(p("Collection imported successfully!","success"),s("refresh")):p(w.error||"Failed to import collection","error")}catch{p("Failed to import collection","error")}v.value=""}}function p(m,v){n(2,a={text:m,type:v}),setTimeout(()=>{n(2,a=null)},3e3)}function b(m){ze[m?"unshift":"push"](()=>{c=m,n(1,c)})}return t.$$set=m=>{"collection"in m&&n(0,r=m.collection)},t.$$.update=()=>{t.$$.dirty&1&&n(3,l=r.stats.totalQuestions>0?Math.round(r.stats.correctAnswers/r.stats.totalQuestions*100):0)},[r,c,a,l,i,f,h,b]}class rn extends pe{constructor(e){super(),ge(this,e,ln,nn,ve,{collection:0})}}function sn(t){let e,n,l,r,s;return{c(){e=d("div"),n=d("div"),l=y(),r=d("p"),s=C(t[0]),u(n,"class","spinner svelte-1lxornd"),u(r,"class","svelte-1lxornd"),u(e,"class","loading-view svelte-1lxornd")},m(c,a){S(c,e,a),o(e,n),o(e,l),o(e,r),o(r,s)},p(c,[a]){a&1&&L(s,c[0])},i:T,o:T,d(c){c&&E(e)}}}function cn(t,e,n){let{message:l="Loading..."}=e;return t.$$set=r=>{"message"in r&&n(0,l=r.message)},[l]}class on extends pe{constructor(e){super(),ge(this,e,cn,sn,ve,{message:0})}}function an(t){let e,n,l,r,s,c,a,i,f,h,p;return{c(){e=d("div"),n=d("div"),n.textContent="âš ï¸",l=y(),r=d("h2"),r.textContent="Oops!",s=y(),c=d("p"),a=C(t[0]),i=y(),f=d("button"),f.textContent="Try Again",u(n,"class","error-icon svelte-na0xmw"),u(r,"class","svelte-na0xmw"),u(c,"class","svelte-na0xmw"),u(f,"class","btn-primary"),u(e,"class","error-view svelte-na0xmw")},m(b,m){S(b,e,m),o(e,n),o(e,l),o(e,r),o(e,s),o(e,c),o(c,a),o(e,i),o(e,f),h||(p=re(f,"click",t[1]),h=!0)},p(b,[m]){m&1&&L(a,b[0])},i:T,o:T,d(b){b&&E(e),h=!1,p()}}}function un(t,e,n){let{message:l="Something went wrong"}=e;const r=qe();function s(){r("retry")}return t.$$set=c=>{"message"in c&&n(0,l=c.message)},[l,s]}class fn extends pe{constructor(e){super(),ge(this,e,un,an,ve,{message:0})}}function dn(t){let e,n;return e=new rn({props:{collection:t[2]}}),e.$on("refresh",t[13]),{c(){he(e.$$.fragment)},m(l,r){se(e,l,r),n=!0},p(l,r){const s={};r&4&&(s.collection=l[2]),e.$set(s)},i(l){n||(H(e.$$.fragment,l),n=!0)},o(l){G(e.$$.fragment,l),n=!1},d(l){ce(e,l)}}}function hn(t){let e,n,l,r;const s=[pn,gn,vn,mn],c=[];function a(i,f){return i[0]==="loading"?0:i[0]==="quiz"&&i[1]?1:i[0]==="result"&&i[1]?2:i[0]==="error"?3:-1}return~(e=a(t))&&(n=c[e]=s[e](t)),{c(){n&&n.c(),l=_t()},m(i,f){~e&&c[e].m(i,f),S(i,l,f),r=!0},p(i,f){let h=e;e=a(i),e===h?~e&&c[e].p(i,f):(n&&(ut(),G(c[h],1,1,()=>{c[h]=null}),ft()),~e?(n=c[e],n?n.p(i,f):(n=c[e]=s[e](i),n.c()),H(n,1),n.m(l.parentNode,l)):n=null)},i(i){r||(H(n),r=!0)},o(i){G(n),r=!1},d(i){i&&E(l),~e&&c[e].d(i)}}}function mn(t){let e,n;return e=new fn({props:{message:t[6]}}),e.$on("retry",t[10]),{c(){he(e.$$.fragment)},m(l,r){se(e,l,r),n=!0},p(l,r){const s={};r&64&&(s.message=l[6]),e.$set(s)},i(l){n||(H(e.$$.fragment,l),n=!0)},o(l){G(e.$$.fragment,l),n=!1},d(l){ce(e,l)}}}function vn(t){let e,n;return e=new Xt({props:{isCorrect:t[3],correctAnswer:t[1].correctAnswer,userAnswer:t[4],wonCards:t[5]}}),e.$on("next",t[9]),{c(){he(e.$$.fragment)},m(l,r){se(e,l,r),n=!0},p(l,r){const s={};r&8&&(s.isCorrect=l[3]),r&2&&(s.correctAnswer=l[1].correctAnswer),r&16&&(s.userAnswer=l[4]),r&32&&(s.wonCards=l[5]),e.$set(s)},i(l){n||(H(e.$$.fragment,l),n=!0)},o(l){G(e.$$.fragment,l),n=!1},d(l){ce(e,l)}}}function gn(t){let e,n;return e=new Jt({props:{question:t[1]}}),e.$on("answer",t[8]),{c(){he(e.$$.fragment)},m(l,r){se(e,l,r),n=!0},p(l,r){const s={};r&2&&(s.question=l[1]),e.$set(s)},i(l){n||(H(e.$$.fragment,l),n=!0)},o(l){G(e.$$.fragment,l),n=!1},d(l){ce(e,l)}}}function pn(t){let e,n;return e=new on({props:{message:"Loading new question..."}}),{c(){he(e.$$.fragment)},m(l,r){se(e,l,r),n=!0},p:T,i(l){n||(H(e.$$.fragment,l),n=!0)},o(l){G(e.$$.fragment,l),n=!1},d(l){ce(e,l)}}}function _n(t){var D;let e,n,l,r,s,c,a,i,f,h=(((D=t[2])==null?void 0:D.cards.length)||0)+"",p,b,m,v,g,_,w,A,k;const $=[hn,dn],q=[];function N(z,Q){return z[7]==="quiz"?0:1}return g=N(t),_=q[g]=$[g](t),{c(){e=d("div"),n=d("header"),l=d("h1"),l.textContent="Pokemon TCG Math Quiz",r=y(),s=d("nav"),c=d("button"),c.textContent="Play Quiz",a=y(),i=d("button"),f=C("My Collection ("),p=C(h),b=C(")"),m=y(),v=d("main"),_.c(),u(l,"class","svelte-cy1rwm"),u(c,"class","nav-btn svelte-cy1rwm"),R(c,"active",t[7]==="quiz"),u(i,"class","nav-btn svelte-cy1rwm"),R(i,"active",t[7]==="collection"),u(s,"class","svelte-cy1rwm"),u(n,"class","app-header svelte-cy1rwm"),u(v,"class","svelte-cy1rwm"),u(e,"class","app svelte-cy1rwm")},m(z,Q){S(z,e,Q),o(e,n),o(n,l),o(n,r),o(n,s),o(s,c),o(s,a),o(s,i),o(i,f),o(i,p),o(i,b),o(e,m),o(e,v),q[g].m(v,null),w=!0,A||(k=[re(c,"click",t[12]),re(i,"click",t[11])],A=!0)},p(z,[Q]){var j;(!w||Q&128)&&R(c,"active",z[7]==="quiz"),(!w||Q&4)&&h!==(h=(((j=z[2])==null?void 0:j.cards.length)||0)+"")&&L(p,h),(!w||Q&128)&&R(i,"active",z[7]==="collection");let J=g;g=N(z),g===J?q[g].p(z,Q):(ut(),G(q[J],1,1,()=>{q[J]=null}),ft(),_=q[g],_?_.p(z,Q):(_=q[g]=$[g](z),_.c()),H(_,1),_.m(v,null))},i(z){w||(H(_),w=!0)},o(z){G(_),w=!1},d(z){z&&E(e),q[g].d(),A=!1,me(k)}}}function yn(t,e,n){let l="loading",r=null,s=[],c,a=!1,i=0,f=[],h="",p="quiz";bt(()=>{n(2,c=de()),b()});async function b(){try{if(n(0,l="loading"),s.length<2){const q=await Ot();s=await Nt(q.id)}const k=zt(s,2),$=Rt(k);if(!$)throw new Error("Could not generate a valid question. Please try again.");n(1,r=$),n(0,l="quiz")}catch(k){console.error("Error loading question:",k),n(6,h=k instanceof Error?k.message:"Failed to load question"),n(0,l="error")}}function m(k){if(r){if(n(4,i=k.detail),n(3,a=jt(r,i)),Mt(a),n(5,f=[]),a){const $={id:r.attackerCard.id,name:r.attackerCard.name,image:r.attackerCard.image,hp:r.attackerCard.hp,types:r.attackerCard.types,rarity:r.attackerCard.rarity,collectedAt:new Date().toISOString()};Te($)&&f.push(r.attackerCard);const N={id:r.defenderCard.id,name:r.defenderCard.name,image:r.defenderCard.image,hp:r.defenderCard.hp,types:r.defenderCard.types,rarity:r.defenderCard.rarity,collectedAt:new Date().toISOString()};Te(N)&&f.push(r.defenderCard)}n(2,c=de()),n(0,l="result")}}function v(){b()}function g(){b()}function _(){n(7,p="collection"),n(2,c=de())}function w(){n(7,p="quiz")}function A(){n(2,c=de())}return[l,r,c,a,i,f,h,p,m,v,g,_,w,A]}class wn extends pe{constructor(e){super(),ge(this,e,yn,_n,ve,{})}}new wn({target:document.getElementById("app")});
