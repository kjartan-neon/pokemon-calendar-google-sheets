var Yl=Object.defineProperty;var Vl=(t,e,l)=>e in t?Yl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var St=(t,e,l)=>Vl(t,typeof e!="symbol"?e+"":e,l);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function l(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=l(s);fetch(s.href,o)}})();function G(){}function Ll(t){return t()}function Xt(){return Object.create(null)}function se(t){t.forEach(Ll)}function ql(t){return typeof t=="function"}function ge(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let rt;function fe(t,e){return t===e?!0:(rt||(rt=document.createElement("a")),rt.href=e,t===rt.href)}function Kl(t){return Object.keys(t).length===0}function Wl(t,...e){if(t==null){for(const n of e)n(void 0);return G}const l=t.subscribe(...e);return l.unsubscribe?()=>l.unsubscribe():l}function Zt(t,e,l){t.$$.on_destroy.push(Wl(e,l))}function i(t,e){t.appendChild(e)}function M(t,e,l){t.insertBefore(e,l||null)}function T(t){t.parentNode&&t.parentNode.removeChild(t)}function he(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function g(t){return document.createElement(t)}function k(t){return document.createTextNode(t)}function _(){return k(" ")}function Nt(){return k("")}function H(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function Il(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function u(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function Nl(t){return t===""?null:+t}function Jl(t){return Array.from(t.childNodes)}function E(t,e){e=""+e,t.data!==e&&(t.data=e)}function Qe(t,e){t.value=e??""}function yt(t,e,l,n){l==null?t.style.removeProperty(e):t.style.setProperty(e,l,"")}function at(t,e,l){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e){s.selected=!0;return}}t.selectedIndex=-1}function J(t,e,l){t.classList.toggle(e,!!l)}function Gl(t,e,{bubbles:l=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:l,cancelable:n})}let je;function Oe(t){je=t}function Pl(){if(!je)throw new Error("Function called outside component initialization");return je}function Xl(t){Pl().$$.on_mount.push(t)}function ct(){const t=Pl();return(e,l,{cancelable:n=!1}={})=>{const s=t.$$.callbacks[e];if(s){const o=Gl(e,l,{cancelable:n});return s.slice().forEach(r=>{r.call(t,o)}),!o.defaultPrevented}return!0}}function $t(t,e){const l=t.$$.callbacks[e.type];l&&l.slice().forEach(n=>n.call(this,e))}const Le=[],Mt=[];let qe=[];const xt=[],Zl=Promise.resolve();let Lt=!1;function $l(){Lt||(Lt=!0,Zl.then(Dl))}function qt(t){qe.push(t)}const At=new Set;let Te=0;function Dl(){if(Te!==0)return;const t=je;do{try{for(;Te<Le.length;){const e=Le[Te];Te++,Oe(e),xl(e.$$)}}catch(e){throw Le.length=0,Te=0,e}for(Oe(null),Le.length=0,Te=0;Mt.length;)Mt.pop()();for(let e=0;e<qe.length;e+=1){const l=qe[e];At.has(l)||(At.add(l),l())}qe.length=0}while(Le.length);for(;xt.length;)xt.pop()();Lt=!1,At.clear(),Oe(t)}function xl(t){if(t.fragment!==null){t.update(),se(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(qt)}}function en(t){const e=[],l=[];qe.forEach(n=>t.indexOf(n)===-1?e.push(n):l.push(n)),l.forEach(n=>n()),qe=e}const ot=new Set;let me;function Rl(){me={r:0,c:[],p:me}}function Fl(){me.r||se(me.c),me=me.p}function ne(t,e){t&&t.i&&(ot.delete(t),t.i(e))}function de(t,e,l,n){if(t&&t.o){if(ot.has(t))return;ot.add(t),me.c.push(()=>{ot.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}else n&&n()}function le(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Ne(t){t&&t.c()}function _e(t,e,l){const{fragment:n,after_update:s}=t.$$;n&&n.m(e,l),qt(()=>{const o=t.$$.on_mount.map(Ll).filter(ql);t.$$.on_destroy?t.$$.on_destroy.push(...o):se(o),t.$$.on_mount=[]}),s.forEach(qt)}function ke(t,e){const l=t.$$;l.fragment!==null&&(en(l.after_update),se(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function tn(t,e){t.$$.dirty[0]===-1&&(Le.push(t),$l(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function be(t,e,l,n,s,o,r=null,a=[-1]){const f=je;Oe(t);const c=t.$$={fragment:null,ctx:[],props:o,update:G,not_equal:s,bound:Xt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:Xt(),dirty:a,skip_bound:!1,root:e.target||f.$$.root};r&&r(c.root);let m=!1;if(c.ctx=l?l(t,e.props||{},(d,v,...p)=>{const h=p.length?p[0]:v;return c.ctx&&s(c.ctx[d],c.ctx[d]=h)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](h),m&&tn(t,d)),v}):[],c.update(),m=!0,se(c.before_update),c.fragment=n?n(c.ctx):!1,e.target){if(e.hydrate){const d=Jl(e.target);c.fragment&&c.fragment.l(d),d.forEach(T)}else c.fragment&&c.fragment.c();e.intro&&ne(t.$$.fragment),_e(t,e.target,e.anchor),Dl()}Oe(f)}class we{constructor(){St(this,"$$");St(this,"$$set")}$destroy(){ke(this,1),this.$destroy=G}$on(e,l){if(!ql(l))return G;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const s=n.indexOf(l);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!Kl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ln="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ln);const Ol="https://api.tcgdex.net/v2/en";function Ql(t,e){const l=t.split("-")[1];return`https://assets.tcgdex.net/en/${nn(e)}/${e}/${l}/high.webp`}function nn(t){return t.startsWith("swsh")?"swsh":t.startsWith("sv")?"sv":t.startsWith("me")?"base":"swsh"}async function el(t){try{const e=await fetch(`${Ol}/sets/${t}`);if(!e.ok)throw new Error("Failed to fetch cards from set");return((await e.json()).cards||[]).map(s=>({id:s.id,localId:s.localId,name:s.name,image:Ql(s.id,t)}))}catch(e){throw console.error("Error fetching cards from set:",e),e}}async function sn(t,e){try{const l=await fetch(`${Ol}/cards/${t}`);if(!l.ok)throw new Error("Failed to fetch card details");return{...await l.json(),image:Ql(t,e)}}catch(l){throw console.error("Error fetching card details:",l),l}}function rn(t){const e=Math.floor(Math.random()*t.length);return t[e]}const Pt="pokemon-tcg-collection",jl="2.0";function on(){return{totalQuestions:0,correctAnswers:0,incorrectAnswers:0,totalHpDefeated:0}}function Et(){return{cards:[],stats:on(),version:jl}}function ue(){try{const t=localStorage.getItem(Pt);if(!t)return Et();const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?(console.warn("Invalid collection format, resetting..."),Et()):(e.stats.totalHpDefeated||(e.stats.totalHpDefeated=0),e.currentStreak||(e.currentStreak=0),e.unlockedRareCards||(e.unlockedRareCards=[]),e)}catch(t){return console.error("Error loading collection from local storage:",t),Et()}}function Ie(t){try{const e={...t,version:jl};localStorage.setItem(Pt,JSON.stringify(e))}catch(e){throw console.error("Error saving collection to local storage:",e),new Error("Failed to save collection")}}function an(t){try{const e=ue();return e.cards.some(n=>n.id===t.id)?!1:(e.cards.push(t),Ie(e),!0)}catch(e){return console.error("Error adding card to collection:",e),!1}}function cn(t,e){try{const l=ue();l.stats.totalQuestions++,t?(l.stats.correctAnswers++,e&&(l.stats.totalHpDefeated+=e)):l.stats.incorrectAnswers++,Ie(l)}catch(l){console.error("Error updating stats:",l)}}function un(){try{localStorage.removeItem(Pt)}catch(t){console.error("Error clearing collection:",t)}}function fn(){const t=ue();return JSON.stringify(t,null,2)}function dn(t){try{const e=JSON.parse(t);return!e.version||!Array.isArray(e.cards)||!e.stats?{success:!1,error:"Invalid collection format"}:!e.stats.totalQuestions===void 0||!e.stats.correctAnswers===void 0||!e.stats.incorrectAnswers===void 0?{success:!1,error:"Invalid stats format"}:(Ie(e),{success:!0})}catch(e){return console.error("Error importing collection:",e),{success:!1,error:"Failed to parse JSON file"}}}function gn(){const t=Math.floor(Math.random()*50)+10,e=Math.floor(Math.random()*50)+10,l=["+","-"],n=l[Math.floor(Math.random()*l.length)];let s,o;if(n==="+")s=t+e,o=`What is ${t} + ${e}?`;else{s=t+e;const r=s;s=t,o=`What is ${r} - ${e}?`}return{question:o,answer:s}}function pn(t){if(!t)return null;let e,l,n=!1;if(t.hp&&t.hp>0){n=!0;const s=[10,20,30,40,50,60,60,80,120,300][Math.floor(Math.random()*5)];l=Math.ceil(t.hp/s),e=`Your Pokémon deals ${s} damage each turn. How many turns does it take to defeat this Pokémon?`}else{const s=gn();e=s.question,l=s.answer}return{card:t,questionText:e,correctAnswer:l,isPokemon:n}}function vn(t,e){return e===t.correctAnswer}const Me=[];function zl(t,e=G){let l;const n=new Set;function s(a){if(ge(t,a)&&(t=a,l)){const f=!Me.length;for(const c of n)c[1](),Me.push(c,t);if(f){for(let c=0;c<Me.length;c+=2)Me[c][0](Me[c+1]);Me.length=0}}}function o(a){s(a(t))}function r(a,f=G){const c=[a,f];return n.add(c),n.size===1&&(l=e(s,o)||G),a(t),()=>{n.delete(c),n.size===0&&l&&(l(),l=null)}}return{set:s,update:o,subscribe:r}}const Tt=[{id:"swsh3",name:"Sword & Shield - Darkness Ablaze"},{id:"sv05",name:"Scarlet & Violet - Temporal Forces"},{id:"sv06.5",name:"Scarlet & Violet - Shrouded Fable"}],Bl="tcg-math-settings";function mn(){return{language:"en",selectedSet:"swsh3"}}function Dt(){try{const t=localStorage.getItem(Bl);if(t){const e=JSON.parse(t);return{language:e.language||"en",selectedSet:e.selectedSet||"swsh3"}}}catch(t){console.error("Error loading settings:",t)}return mn()}function Hl(t){try{localStorage.setItem(Bl,JSON.stringify(t))}catch(e){console.error("Error saving settings:",e)}}const Ul=Dt(),it=zl(Ul.language),It=zl(Ul.selectedSet);it.subscribe(t=>{const e=Dt();Hl({...e,language:t})});It.subscribe(t=>{const e=Dt();Hl({...e,selectedSet:t})});const hn={en:{appTitle:"16 K",quizTitle:"TCG Math Challenge",playQuiz:"Play Quiz",myCollection:"My Collection",selectSet:"Select Set",selectLanguage:"Language",setInfo:"Collecting Set",enterAnswer:"Enter your answer",submitAnswer:"Submit Answer",nextQuestion:"Next Question",correct:"Correct!",notQuite:"Not quite!",correctMessage:"Great job! The answer was",incorrectMessage:"You answered",encouragement:"Try again with the next question!",youWonThisCard:"You won this card!",cardsCollected:"Cards Collected",questionsAnswered:"Questions Answered",correctAnswers:"Correct Answers",accuracy:"Accuracy",noCardsYet:"No cards yet!",noCardsDescription:"Answer questions correctly to start building your collection.",exportBackup:"Export Backup",importBackup:"Import Backup",clearThisSet:"Clear This Set",clearCollectionTitle:"Clear Collection?",clearCollectionMessage:"Are you sure you want to clear your entire collection? This action cannot be undone.",cancel:"Cancel",clearCollection:"Clear Collection",collectionExported:"Collection exported successfully!",collectionImported:"Collection imported successfully!",collectionCleared:"Collection cleared successfully!",exportFailed:"Failed to export collection",importFailed:"Failed to import collection",clearFailed:"Failed to clear collection",hit:"hit",hits:"hits",loading:"Loading new question...",yourCollection:"Your Collection",language:"Language"},no:{appTitle:"16 K",quizTitle:"TCG Matte Utfordring",playQuiz:"Spill Quiz",myCollection:"Min Samling",selectSet:"Velg Sett",selectLanguage:"Språk",setInfo:"Samler Sett",enterAnswer:"Skriv inn svaret ditt",submitAnswer:"Send Inn Svar",nextQuestion:"Neste Spørsmål",correct:"Riktig!",notQuite:"Ikke helt!",correctMessage:"Bra jobbet! Svaret var",incorrectMessage:"Du svarte",encouragement:"Prøv igjen med neste spørsmål!",youWonThisCard:"Du vant dette kortet!",cardsCollected:"Kort Samlet",questionsAnswered:"Spørsmål Besvart",correctAnswers:"Riktige Svar",accuracy:"Nøyaktighet",noCardsYet:"Ingen kort ennå!",noCardsDescription:"Svar riktig på spørsmål for å begynne å bygge samlingen din.",exportBackup:"Eksporter Backup",importBackup:"Importer Backup",clearThisSet:"Tøm Dette Settet",clearCollectionTitle:"Tøm Samling?",clearCollectionMessage:"Er du sikker på at du vil tømme hele samlingen din? Denne handlingen kan ikke angres.",cancel:"Avbryt",clearCollection:"Tøm Samling",collectionExported:"Samling eksportert!",collectionImported:"Samling importert!",collectionCleared:"Samling tømt!",exportFailed:"Kunne ikke eksportere samling",importFailed:"Kunne ikke importere samling",clearFailed:"Kunne ikke tømme samling",hit:"treff",hits:"treff",loading:"Laster nytt spørsmål...",yourCollection:"Din Samling",language:"Språk"}};function _n(t){return hn[t]}function tl(t,e,l){const n=t.slice();return n[3]=e[l],n}function ll(t,e,l){const n=t.slice();return n[6]=e[l],n}function nl(t){let e,l,n,s,o=t[0].hp+"",r;return{c(){e=g("div"),l=g("span"),l.textContent="HP",n=_(),s=g("span"),r=k(o),u(l,"class","hp-label svelte-2rdllh"),u(s,"class","hp-value svelte-2rdllh"),u(e,"class","card-hp svelte-2rdllh")},m(a,f){M(a,e,f),i(e,l),i(e,n),i(e,s),i(s,r)},p(a,f){f&1&&o!==(o=a[0].hp+"")&&E(r,o)},d(a){a&&T(e)}}}function sl(t){let e,l=le(t[0].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=rl(ll(t,l,s));return{c(){e=g("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","card-types svelte-2rdllh")},m(s,o){M(s,e,o);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null)},p(s,o){if(o&1){l=le(s[0].types);let r;for(r=0;r<l.length;r+=1){const a=ll(s,l,r);n[r]?n[r].p(a,o):(n[r]=rl(a),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=l.length}},d(s){s&&T(e),he(n,s)}}}function rl(t){let e,l=t[6]+"",n;return{c(){e=g("span"),n=k(l),u(e,"class","type-badge svelte-2rdllh")},m(s,o){M(s,e,o),i(e,n)},p(s,o){o&1&&l!==(l=s[6]+"")&&E(n,l)},d(s){s&&T(e)}}}function ol(t){let e,l,n,s=le(t[0].attacks),o=[];for(let r=0;r<s.length;r+=1)o[r]=al(tl(t,s,r));return{c(){e=g("div"),l=g("h4"),l.textContent="Attacks:",n=_();for(let r=0;r<o.length;r+=1)o[r].c();u(l,"class","svelte-2rdllh"),u(e,"class","card-attacks svelte-2rdllh")},m(r,a){M(r,e,a),i(e,l),i(e,n);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null)},p(r,a){if(a&5){s=le(r[0].attacks);let f;for(f=0;f<s.length;f+=1){const c=tl(r,s,f);o[f]?o[f].p(c,a):(o[f]=al(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=s.length}},d(r){r&&T(e),he(o,r)}}}function il(t){let e,l=t[3].damage+"",n;return{c(){e=g("span"),n=k(l),u(e,"class","attack-damage svelte-2rdllh")},m(s,o){M(s,e,o),i(e,n)},p(s,o){o&1&&l!==(l=s[3].damage+"")&&E(n,l)},d(s){s&&T(e)}}}function al(t){let e,l,n=t[3].name+"",s,o,r,a=t[3].damage&&il(t);return{c(){e=g("div"),l=g("span"),s=k(n),o=_(),a&&a.c(),r=_(),u(l,"class","attack-name svelte-2rdllh"),u(e,"class","attack svelte-2rdllh"),J(e,"highlighted",t[2]===t[3].name)},m(f,c){M(f,e,c),i(e,l),i(l,s),i(e,o),a&&a.m(e,null),i(e,r)},p(f,c){c&1&&n!==(n=f[3].name+"")&&E(s,n),f[3].damage?a?a.p(f,c):(a=il(f),a.c(),a.m(e,r)):a&&(a.d(1),a=null),c&5&&J(e,"highlighted",f[2]===f[3].name)},d(f){f&&T(e),a&&a.d()}}}function kn(t){let e,l,n,s,o,r,a,f,c=t[0].name+"",m,d,v,p,h=t[0].hp&&nl(t),b=t[0].types&&t[0].types.length>0&&sl(t),w=t[1]&&t[0].attacks&&t[0].attacks.length>0&&ol(t);return{c(){e=g("div"),l=g("div"),n=g("img"),r=_(),a=g("div"),f=g("h3"),m=k(c),d=_(),h&&h.c(),v=_(),b&&b.c(),p=_(),w&&w.c(),fe(n.src,s=t[0].image)||u(n,"src",s),u(n,"alt",o=t[0].name),u(n,"class","svelte-2rdllh"),u(l,"class","card-image svelte-2rdllh"),u(f,"class","card-name svelte-2rdllh"),u(a,"class","card-info svelte-2rdllh"),u(e,"class","pokemon-card svelte-2rdllh")},m(y,A){M(y,e,A),i(e,l),i(l,n),i(e,r),i(e,a),i(a,f),i(f,m),i(a,d),h&&h.m(a,null),i(a,v),b&&b.m(a,null),i(a,p),w&&w.m(a,null)},p(y,[A]){A&1&&!fe(n.src,s=y[0].image)&&u(n,"src",s),A&1&&o!==(o=y[0].name)&&u(n,"alt",o),A&1&&c!==(c=y[0].name+"")&&E(m,c),y[0].hp?h?h.p(y,A):(h=nl(y),h.c(),h.m(a,v)):h&&(h.d(1),h=null),y[0].types&&y[0].types.length>0?b?b.p(y,A):(b=sl(y),b.c(),b.m(a,p)):b&&(b.d(1),b=null),y[1]&&y[0].attacks&&y[0].attacks.length>0?w?w.p(y,A):(w=ol(y),w.c(),w.m(a,null)):w&&(w.d(1),w=null)},i:G,o:G,d(y){y&&T(e),h&&h.d(),b&&b.d(),w&&w.d()}}}function bn(t,e,l){let{card:n}=e,{showAttacks:s=!1}=e,{highlightedAttack:o=null}=e;return t.$$set=r=>{"card"in r&&l(0,n=r.card),"showAttacks"in r&&l(1,s=r.showAttacks),"highlightedAttack"in r&&l(2,o=r.highlightedAttack)},[n,s,o]}class wn extends we{constructor(e){super(),be(this,e,bn,kn,ge,{card:0,showAttacks:1,highlightedAttack:2})}}function Cn(t){let e,l,n,s,o,r,a=t[0].questionText+"",f,c,m,d,v,p,h,b=t[1].submitAnswer+"",w,y,A,q,L;return n=new wn({props:{card:t[0].card}}),{c(){e=g("div"),l=g("div"),Ne(n.$$.fragment),s=_(),o=g("div"),r=g("h3"),f=k(a),c=_(),m=g("div"),d=g("input"),p=_(),h=g("button"),w=k(b),u(l,"class","card-display svelte-1ohble"),u(r,"class","question-text svelte-1ohble"),u(d,"type","number"),u(d,"placeholder",v=t[1].enterAnswer),u(d,"class","answer-input svelte-1ohble"),u(h,"class","submit-btn btn-primary svelte-1ohble"),h.disabled=y=!t[2],u(m,"class","answer-input-container svelte-1ohble"),u(o,"class","question-container svelte-1ohble"),u(e,"class","quiz-view svelte-1ohble")},m(C,S){M(C,e,S),i(e,l),_e(n,l,null),i(e,s),i(e,o),i(o,r),i(r,f),i(o,c),i(o,m),i(m,d),Qe(d,t[2]),i(m,p),i(m,h),i(h,w),A=!0,q||(L=[H(d,"input",t[6]),H(d,"keypress",t[4]),H(h,"click",t[3])],q=!0)},p(C,[S]){const R={};S&1&&(R.card=C[0].card),n.$set(R),(!A||S&1)&&a!==(a=C[0].questionText+"")&&E(f,a),(!A||S&2&&v!==(v=C[1].enterAnswer))&&u(d,"placeholder",v),S&4&&Nl(d.value)!==C[2]&&Qe(d,C[2]),(!A||S&2)&&b!==(b=C[1].submitAnswer+"")&&E(w,b),(!A||S&4&&y!==(y=!C[2]))&&(h.disabled=y)},i(C){A||(ne(n.$$.fragment,C),A=!0)},o(C){de(n.$$.fragment,C),A=!1},d(C){C&&T(e),ke(n),q=!1,se(L)}}}function Sn(t,e,l){let{question:n}=e,{t:s}=e,{currentSet:o}=e;const r=ct();let a="";function f(){const d=parseInt(a,10);isNaN(d)||r("answer",d)}function c(d){d.key==="Enter"&&f()}function m(){a=Nl(this.value),l(2,a)}return t.$$set=d=>{"question"in d&&l(0,n=d.question),"t"in d&&l(1,s=d.t),"currentSet"in d&&l(5,o=d.currentSet)},[n,s,a,f,c,o,m]}class yn extends we{constructor(e){super(),be(this,e,Sn,Cn,ge,{question:0,t:1,currentSet:5})}}function An(t){let e,l,n,s=t[4].notQuite+"",o,r,a,f=t[4].incorrectMessage+"",c,m,d,v,p,h=t[4].correctMessage.toLowerCase()+"",b,w,y,A,q,L,C,S,R=t[4].encouragement+"",W,O=t[5]&&t[6]>0&&cl(t);return{c(){e=g("div"),e.textContent="✗",l=_(),n=g("h2"),o=k(s),r=_(),a=g("p"),c=k(f),m=_(),d=g("strong"),v=k(t[2]),p=k(", "),b=k(h),w=_(),y=g("strong"),A=k(t[1]),q=k("."),L=_(),O&&O.c(),C=_(),S=g("p"),W=k(R),u(e,"class","result-icon error svelte-1v74pgf"),u(n,"class","result-title svelte-1v74pgf"),u(d,"class","svelte-1v74pgf"),u(y,"class","svelte-1v74pgf"),u(a,"class","result-message svelte-1v74pgf"),u(S,"class","encouragement svelte-1v74pgf")},m(N,B){M(N,e,B),M(N,l,B),M(N,n,B),i(n,o),M(N,r,B),M(N,a,B),i(a,c),i(a,m),i(a,d),i(d,v),i(a,p),i(a,b),i(a,w),i(a,y),i(y,A),i(a,q),M(N,L,B),O&&O.m(N,B),M(N,C,B),M(N,S,B),i(S,W)},p(N,B){B&16&&s!==(s=N[4].notQuite+"")&&E(o,s),B&16&&f!==(f=N[4].incorrectMessage+"")&&E(c,f),B&4&&E(v,N[2]),B&16&&h!==(h=N[4].correctMessage.toLowerCase()+"")&&E(b,h),B&2&&E(A,N[1]),N[5]&&N[6]>0?O?O.p(N,B):(O=cl(N),O.c(),O.m(C.parentNode,C)):O&&(O.d(1),O=null),B&16&&R!==(R=N[4].encouragement+"")&&E(W,R)},d(N){N&&(T(e),T(l),T(n),T(r),T(a),T(L),T(C),T(S)),O&&O.d(N)}}}function En(t){let e,l,n,s=t[4].correct+"",o,r,a,f=t[4].correctMessage+"",c,m,d,v,p,h=(t[1]===1?t[4].hit:t[4].hits)+"",b,w,y,A,q,L=t[5]&&!t[3]&&ul(t),C=t[3]&&fl(t);return{c(){e=g("div"),e.textContent="✓",l=_(),n=g("h2"),o=k(s),r=_(),a=g("p"),c=k(f),m=_(),d=g("strong"),v=k(t[1]),p=_(),b=k(h),w=k("!"),y=_(),L&&L.c(),A=_(),C&&C.c(),q=Nt(),u(e,"class","result-icon success svelte-1v74pgf"),u(n,"class","result-title svelte-1v74pgf"),u(d,"class","svelte-1v74pgf"),u(a,"class","result-message svelte-1v74pgf")},m(S,R){M(S,e,R),M(S,l,R),M(S,n,R),i(n,o),M(S,r,R),M(S,a,R),i(a,c),i(a,m),i(a,d),i(d,v),i(a,p),i(a,b),i(a,w),M(S,y,R),L&&L.m(S,R),M(S,A,R),C&&C.m(S,R),M(S,q,R)},p(S,R){R&16&&s!==(s=S[4].correct+"")&&E(o,s),R&16&&f!==(f=S[4].correctMessage+"")&&E(c,f),R&2&&E(v,S[1]),R&18&&h!==(h=(S[1]===1?S[4].hit:S[4].hits)+"")&&E(b,h),S[5]&&!S[3]?L?L.p(S,R):(L=ul(S),L.c(),L.m(A.parentNode,A)):L&&(L.d(1),L=null),S[3]?C?C.p(S,R):(C=fl(S),C.c(),C.m(q.parentNode,q)):C&&(C.d(1),C=null)},d(S){S&&(T(e),T(l),T(n),T(r),T(a),T(y),T(A),T(q)),L&&L.d(S),C&&C.d(S)}}}function cl(t){let e,l=t[4].language==="Språk"?"Streak reset! Try again.":"Rekke tilbakestilt! Prøv igjen.",n;return{c(){e=g("p"),n=k(l),u(e,"class","streak-lost svelte-1v74pgf")},m(s,o){M(s,e,o),i(e,n)},p(s,o){o&16&&l!==(l=s[4].language==="Språk"?"Streak reset! Try again.":"Rekke tilbakestilt! Prøv igjen.")&&E(n,l)},d(s){s&&T(e)}}}function ul(t){let e,l,n,s,o,r,a;function f(d,v){return d[7]===1?Mn:Tn}let c=f(t),m=c(t);return{c(){e=g("div"),l=g("p"),m.c(),n=_(),s=g("div"),o=g("div"),r=_(),a=g("div"),u(l,"class","streak-text svelte-1v74pgf"),u(o,"class","streak-dot svelte-1v74pgf"),J(o,"filled",t[7]>=1),u(a,"class","streak-dot svelte-1v74pgf"),J(a,"filled",t[7]>=2),u(s,"class","streak-progress svelte-1v74pgf"),u(e,"class","streak-info svelte-1v74pgf")},m(d,v){M(d,e,v),i(e,l),m.m(l,null),i(e,n),i(e,s),i(s,o),i(s,r),i(s,a)},p(d,v){c===(c=f(d))&&m?m.p(d,v):(m.d(1),m=c(d),m&&(m.c(),m.m(l,null))),v&128&&J(o,"filled",d[7]>=1),v&128&&J(a,"filled",d[7]>=2)},d(d){d&&T(e),m.d()}}}function Tn(t){let e=t[4].language==="Språk"?"Get 2 correct answers to win this rare card!":"Få 2 riktige svar for å vinne dette sjeldne kortet!",l;return{c(){l=k(e)},m(n,s){M(n,l,s)},p(n,s){s&16&&e!==(e=n[4].language==="Språk"?"Get 2 correct answers to win this rare card!":"Få 2 riktige svar for å vinne dette sjeldne kortet!")&&E(l,e)},d(n){n&&T(l)}}}function Mn(t){let e=t[4].language==="Språk"?"One more correct to win this card!":"Én til riktig for å vinne dette kortet!",l;return{c(){l=k(e)},m(n,s){M(n,l,s)},p(n,s){s&16&&e!==(e=n[4].language==="Språk"?"One more correct to win this card!":"Én til riktig for å vinne dette kortet!")&&E(l,e)},d(n){n&&T(l)}}}function fl(t){let e,l,n=t[4].youWonThisCard+"",s,o,r,a,f,c,m,d,v,p=t[3].name+"",h;return{c(){e=g("div"),l=g("h3"),s=k(n),o=_(),r=g("div"),a=g("div"),f=g("img"),d=_(),v=g("span"),h=k(p),u(l,"class","svelte-1v74pgf"),fe(f.src,c=t[3].image)||u(f,"src",c),u(f,"alt",m=t[3].name),u(f,"class","svelte-1v74pgf"),u(v,"class","card-name svelte-1v74pgf"),u(a,"class","mini-card svelte-1v74pgf"),u(r,"class","cards-grid svelte-1v74pgf"),u(e,"class","won-cards svelte-1v74pgf")},m(b,w){M(b,e,w),i(e,l),i(l,s),i(e,o),i(e,r),i(r,a),i(a,f),i(a,d),i(a,v),i(v,h)},p(b,w){w&16&&n!==(n=b[4].youWonThisCard+"")&&E(s,n),w&8&&!fe(f.src,c=b[3].image)&&u(f,"src",c),w&8&&m!==(m=b[3].name)&&u(f,"alt",m),w&8&&p!==(p=b[3].name+"")&&E(h,p)},d(b){b&&T(e)}}}function Ln(t){let e,l,n,s,o=t[4].nextQuestion+"",r,a,f;function c(v,p){return v[0]?En:An}let m=c(t),d=m(t);return{c(){e=g("div"),l=g("div"),d.c(),n=_(),s=g("button"),r=k(o),u(l,"class","result-card svelte-1v74pgf"),J(l,"correct",t[0]),J(l,"incorrect",!t[0]),u(s,"class","next-btn btn-primary svelte-1v74pgf"),u(e,"class","result-view svelte-1v74pgf")},m(v,p){M(v,e,p),i(e,l),d.m(l,null),i(e,n),i(e,s),i(s,r),a||(f=H(s,"click",t[8]),a=!0)},p(v,[p]){m===(m=c(v))&&d?d.p(v,p):(d.d(1),d=m(v),d&&(d.c(),d.m(l,null))),p&1&&J(l,"correct",v[0]),p&1&&J(l,"incorrect",!v[0]),p&16&&o!==(o=v[4].nextQuestion+"")&&E(r,o)},i:G,o:G,d(v){v&&T(e),d.d(),a=!1,f()}}}function qn(t,e,l){let{isCorrect:n}=e,{correctAnswer:s}=e,{userAnswer:o}=e,{wonCard:r}=e,{t:a}=e,{needsStreak:f=!1}=e,{streakProgress:c=0}=e,{currentStreak:m=0}=e;const d=ct();function v(){d("next")}return t.$$set=p=>{"isCorrect"in p&&l(0,n=p.isCorrect),"correctAnswer"in p&&l(1,s=p.correctAnswer),"userAnswer"in p&&l(2,o=p.userAnswer),"wonCard"in p&&l(3,r=p.wonCard),"t"in p&&l(4,a=p.t),"needsStreak"in p&&l(5,f=p.needsStreak),"streakProgress"in p&&l(6,c=p.streakProgress),"currentStreak"in p&&l(7,m=p.currentStreak)},[n,s,o,r,a,f,c,m,v]}class In extends we{constructor(e){super(),be(this,e,qn,Ln,ge,{isCorrect:0,correctAnswer:1,userAnswer:2,wonCard:3,t:4,needsStreak:5,streakProgress:6,currentStreak:7})}}function Nn(){try{const t=fn(),e=new Blob([t],{type:"application/json"}),l=URL.createObjectURL(e),n=document.createElement("a");n.href=l,n.download=`pokemon-collection-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(l)}catch(t){throw console.error("Error downloading backup:",t),new Error("Failed to download backup")}}function Pn(t){return new Promise(e=>{const l=new FileReader;l.onload=n=>{var s;try{const o=(s=n.target)==null?void 0:s.result,r=dn(o);e(r)}catch(o){console.error("Error reading file:",o),e({success:!1,error:"Failed to read file"})}},l.onerror=()=>{e({success:!1,error:"Failed to read file"})},l.readAsText(t)})}function dl(t,e,l){const n=t.slice();return n[29]=e[l],n}function gl(t,e,l){const n=t.slice();return n[32]=e[l],n}function pl(t,e,l){const n=t.slice();return n[29]=e[l],n}function vl(t,e,l){const n=t.slice();return n[32]=e[l],n}function Dn(t){let e,l,n=t[1].language==="Språk"?"Defeat 16,000 HP to unlock your first rare cards!":"Beseir 16 000 HP for å låse opp dine første sjeldne kort!",s;return{c(){e=g("div"),l=g("p"),s=k(n),u(l,"class","svelte-148pdxv"),u(e,"class","no-unlocks svelte-148pdxv")},m(o,r){M(o,e,r),i(e,l),i(l,s)},p(o,r){r[0]&2&&n!==(n=o[1].language==="Språk"?"Defeat 16,000 HP to unlock your first rare cards!":"Beseir 16 000 HP for å låse opp dine første sjeldne kort!")&&E(s,n)},d(o){o&&T(e)}}}function Rn(t){let e,l=le(t[0].unlockedRareCards||[]),n=[];for(let s=0;s<l.length;s+=1)n[s]=ml(vl(t,l,s));return{c(){e=g("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","rare-cards-grid svelte-148pdxv")},m(s,o){M(s,e,o);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null)},p(s,o){if(o[0]&131073){l=le(s[0].unlockedRareCards||[]);let r;for(r=0;r<l.length;r+=1){const a=vl(s,l,r);n[r]?n[r].p(a,o):(n[r]=ml(a),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=l.length}},d(s){s&&T(e),he(n,s)}}}function ml(t){let e,l,n,s,o,r,a=t[32].name+"",f,c,m,d;function v(){return t[21](t[32])}return{c(){e=g("button"),l=g("img"),o=_(),r=g("div"),f=k(a),c=_(),fe(l.src,n=t[32].image)||u(l,"src",n),u(l,"alt",s=t[32].name),u(l,"class","svelte-148pdxv"),u(r,"class","rare-card-name svelte-148pdxv"),u(e,"class","rare-card svelte-148pdxv")},m(p,h){M(p,e,h),i(e,l),i(e,o),i(e,r),i(r,f),i(e,c),m||(d=H(e,"click",v),m=!0)},p(p,h){t=p,h[0]&1&&!fe(l.src,n=t[32].image)&&u(l,"src",n),h[0]&1&&s!==(s=t[32].name)&&u(l,"alt",s),h[0]&1&&a!==(a=t[32].name+"")&&E(f,a)},d(p){p&&T(e),m=!1,d()}}}function hl(t){let e,l=t[5].text+"",n;return{c(){e=g("div"),n=k(l),u(e,"class","message svelte-148pdxv"),J(e,"success",t[5].type==="success"),J(e,"error",t[5].type==="error")},m(s,o){M(s,e,o),i(e,n)},p(s,o){o[0]&32&&l!==(l=s[5].text+"")&&E(n,l),o[0]&32&&J(e,"success",s[5].type==="success"),o[0]&32&&J(e,"error",s[5].type==="error")},d(s){s&&T(e)}}}function Fn(t){let e,l=le(t[0].cards),n=[];for(let s=0;s<l.length;s+=1)n[s]=wl(gl(t,l,s));return{c(){e=g("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","cards-grid svelte-148pdxv")},m(s,o){M(s,e,o);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null)},p(s,o){if(o[0]&131073){l=le(s[0].cards);let r;for(r=0;r<l.length;r+=1){const a=gl(s,l,r);n[r]?n[r].p(a,o):(n[r]=wl(a),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=l.length}},d(s){s&&T(e),he(n,s)}}}function On(t){let e,l,n,s,o=t[1].noCardsYet+"",r,a,f,c=t[1].noCardsDescription+"",m;return{c(){e=g("div"),l=g("div"),l.textContent="📦",n=_(),s=g("h3"),r=k(o),a=_(),f=g("p"),m=k(c),u(l,"class","empty-icon svelte-148pdxv"),u(s,"class","svelte-148pdxv"),u(f,"class","svelte-148pdxv"),u(e,"class","empty-state svelte-148pdxv")},m(d,v){M(d,e,v),i(e,l),i(e,n),i(e,s),i(s,r),i(e,a),i(e,f),i(f,m)},p(d,v){v[0]&2&&o!==(o=d[1].noCardsYet+"")&&E(r,o),v[0]&2&&c!==(c=d[1].noCardsDescription+"")&&E(m,c)},d(d){d&&T(e)}}}function _l(t){let e,l,n=t[32].hp+"",s;return{c(){e=g("span"),l=k("HP "),s=k(n),u(e,"class","hp svelte-148pdxv")},m(o,r){M(o,e,r),i(e,l),i(e,s)},p(o,r){r[0]&1&&n!==(n=o[32].hp+"")&&E(s,n)},d(o){o&&T(e)}}}function kl(t){let e,l=le(t[32].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=bl(pl(t,l,s));return{c(){e=g("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","types svelte-148pdxv")},m(s,o){M(s,e,o);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null)},p(s,o){if(o[0]&1){l=le(s[32].types);let r;for(r=0;r<l.length;r+=1){const a=pl(s,l,r);n[r]?n[r].p(a,o):(n[r]=bl(a),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=l.length}},d(s){s&&T(e),he(n,s)}}}function bl(t){let e,l=t[29]+"",n;return{c(){e=g("span"),n=k(l),u(e,"class","type svelte-148pdxv")},m(s,o){M(s,e,o),i(e,n)},p(s,o){o[0]&1&&l!==(l=s[29]+"")&&E(n,l)},d(s){s&&T(e)}}}function wl(t){let e,l,n,s,o,r,a,f=t[32].name+"",c,m,d,v,p,h,b=t[32].hp&&_l(t),w=t[32].types&&t[32].types.length>0&&kl(t);function y(){return t[23](t[32])}return{c(){e=g("button"),l=g("img"),o=_(),r=g("div"),a=g("h4"),c=k(f),m=_(),b&&b.c(),d=_(),w&&w.c(),v=_(),fe(l.src,n=t[32].image)||u(l,"src",n),u(l,"alt",s=t[32].name),u(l,"class","svelte-148pdxv"),u(a,"class","svelte-148pdxv"),u(r,"class","card-details svelte-148pdxv"),u(e,"class","collection-card svelte-148pdxv")},m(A,q){M(A,e,q),i(e,l),i(e,o),i(e,r),i(r,a),i(a,c),i(r,m),b&&b.m(r,null),i(r,d),w&&w.m(r,null),i(e,v),p||(h=H(e,"click",y),p=!0)},p(A,q){t=A,q[0]&1&&!fe(l.src,n=t[32].image)&&u(l,"src",n),q[0]&1&&s!==(s=t[32].name)&&u(l,"alt",s),q[0]&1&&f!==(f=t[32].name+"")&&E(c,f),t[32].hp?b?b.p(t,q):(b=_l(t),b.c(),b.m(r,d)):b&&(b.d(1),b=null),t[32].types&&t[32].types.length>0?w?w.p(t,q):(w=kl(t),w.c(),w.m(r,null)):w&&(w.d(1),w=null)},d(A){A&&T(e),b&&b.d(),w&&w.d(),p=!1,h()}}}function Cl(t){let e,l,n,s,o,r,a,f,c,m,d=t[3].name+"",v,p,h,b,w,y,A=t[3].hp&&Sl(t),q=t[3].types&&t[3].types.length>0&&yl(t),L=t[3].rarity&&El(t);return{c(){e=g("div"),l=g("div"),n=g("button"),n.textContent="×",s=_(),o=g("img"),f=_(),c=g("div"),m=g("h3"),v=k(d),p=_(),A&&A.c(),h=_(),q&&q.c(),b=_(),L&&L.c(),u(n,"class","close-modal svelte-148pdxv"),fe(o.src,r=t[3].image)||u(o,"src",r),u(o,"alt",a=t[3].name),u(o,"class","modal-card-image svelte-148pdxv"),u(m,"class","svelte-148pdxv"),u(c,"class","modal-card-info svelte-148pdxv"),u(l,"class","card-modal svelte-148pdxv"),u(l,"role","dialog"),u(e,"class","dialog-overlay svelte-148pdxv"),u(e,"role","button"),u(e,"tabindex","-1")},m(C,S){M(C,e,S),i(e,l),i(l,n),i(l,s),i(l,o),i(l,f),i(l,c),i(c,m),i(m,v),i(c,p),A&&A.m(c,null),i(c,h),q&&q.m(c,null),i(c,b),L&&L.m(c,null),w||(y=[H(n,"click",t[18]),H(l,"click",Il(t[20])),H(e,"click",t[18]),H(e,"keydown",t[24])],w=!0)},p(C,S){S[0]&8&&!fe(o.src,r=C[3].image)&&u(o,"src",r),S[0]&8&&a!==(a=C[3].name)&&u(o,"alt",a),S[0]&8&&d!==(d=C[3].name+"")&&E(v,d),C[3].hp?A?A.p(C,S):(A=Sl(C),A.c(),A.m(c,h)):A&&(A.d(1),A=null),C[3].types&&C[3].types.length>0?q?q.p(C,S):(q=yl(C),q.c(),q.m(c,b)):q&&(q.d(1),q=null),C[3].rarity?L?L.p(C,S):(L=El(C),L.c(),L.m(c,null)):L&&(L.d(1),L=null)},d(C){C&&T(e),A&&A.d(),q&&q.d(),L&&L.d(),w=!1,se(y)}}}function Sl(t){let e,l,n=t[3].hp+"",s;return{c(){e=g("div"),l=k("HP: "),s=k(n),u(e,"class","modal-hp svelte-148pdxv")},m(o,r){M(o,e,r),i(e,l),i(e,s)},p(o,r){r[0]&8&&n!==(n=o[3].hp+"")&&E(s,n)},d(o){o&&T(e)}}}function yl(t){let e,l=le(t[3].types),n=[];for(let s=0;s<l.length;s+=1)n[s]=Al(dl(t,l,s));return{c(){e=g("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","modal-types svelte-148pdxv")},m(s,o){M(s,e,o);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null)},p(s,o){if(o[0]&8){l=le(s[3].types);let r;for(r=0;r<l.length;r+=1){const a=dl(s,l,r);n[r]?n[r].p(a,o):(n[r]=Al(a),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=l.length}},d(s){s&&T(e),he(n,s)}}}function Al(t){let e,l=t[29]+"",n;return{c(){e=g("span"),n=k(l),u(e,"class","modal-type svelte-148pdxv")},m(s,o){M(s,e,o),i(e,n)},p(s,o){o[0]&8&&l!==(l=s[29]+"")&&E(n,l)},d(s){s&&T(e)}}}function El(t){let e,l,n=t[3].rarity+"",s;return{c(){e=g("div"),l=k("Rarity: "),s=k(n),u(e,"class","modal-rarity svelte-148pdxv")},m(o,r){M(o,e,r),i(e,l),i(e,s)},p(o,r){r[0]&8&&n!==(n=o[3].rarity+"")&&E(s,n)},d(o){o&&T(e)}}}function Tl(t){let e,l,n,s=t[1].clearCollectionTitle+"",o,r,a,f=t[1].clearCollectionMessage+"",c,m,d,v,p=t[1].cancel+"",h,b,w,y=t[1].clearCollection+"",A,q,L;return{c(){e=g("div"),l=g("div"),n=g("h3"),o=k(s),r=_(),a=g("p"),c=k(f),m=_(),d=g("div"),v=g("button"),h=k(p),b=_(),w=g("button"),A=k(y),u(n,"class","svelte-148pdxv"),u(a,"class","svelte-148pdxv"),u(v,"class","btn-secondary"),u(w,"class","btn-error"),u(d,"class","dialog-actions svelte-148pdxv"),u(l,"class","dialog svelte-148pdxv"),u(l,"role","dialog"),u(e,"class","dialog-overlay svelte-148pdxv"),u(e,"role","button"),u(e,"tabindex","-1")},m(C,S){M(C,e,S),i(e,l),i(l,n),i(n,o),i(l,r),i(l,a),i(a,c),i(l,m),i(l,d),i(d,v),i(v,h),i(d,b),i(d,w),i(w,A),q||(L=[H(v,"click",t[14]),H(w,"click",t[15]),H(l,"click",Il(t[19])),H(l,"keydown",jn),H(e,"click",t[14]),H(e,"keydown",t[25])],q=!0)},p(C,S){S[0]&2&&s!==(s=C[1].clearCollectionTitle+"")&&E(o,s),S[0]&2&&f!==(f=C[1].clearCollectionMessage+"")&&E(c,f),S[0]&2&&p!==(p=C[1].cancel+"")&&E(h,p),S[0]&2&&y!==(y=C[1].clearCollection+"")&&E(A,y)},d(C){C&&T(e),q=!1,se(L)}}}function Qn(t){let e,l,n,s=t[1].language==="Språk"?"Unlocked Rare Cards":"Låste opp sjeldne kort",o,r,a,f,c,m,d=t[1].language==="Språk"?"cards unlocked":"kort låst opp",v,p,h,b,w=t[1].language==="Språk"?`${t[8].toLocaleString()} HP to unlock 5 more rare cards`:`${t[8].toLocaleString()} HP for å låse opp 5 flere sjeldne kort`,y,A,q,L,C,S,R,W,O=t[1].yourCollection+"",N,B,U,Z,te,D=(t[1].language||"Language")+"",Y,re,P,j,F,z,X,K,oe,V=t[1].exportBackup+"",pe,ze,Ce,Be=t[1].importBackup+"",ut,Rt,Pe,He=t[1].clearThisSet+"",ft,Ft,ve,Ot,dt,ie,Se,Ue,Ye=t[0].cards.length+"",gt,Qt,Ve,Ke=t[1].cardsCollected+"",pt,jt,ye,We,Je=t[0].stats.totalQuestions+"",vt,zt,Ge,Xe=t[1].questionsAnswered+"",mt,Bt,Ae,Ze,$e=t[0].stats.correctAnswers+"",ht,Ht,xe,et=t[1].correctAnswers+"",_t,Ut,Ee,De,kt,Yt,Vt,tt,lt=t[1].accuracy+"",bt,Kt,wt,Re,Fe,Ct,Wt;function Jt(I,Q){return I[7]>0?Rn:Dn}let nt=Jt(t),ae=nt(t),$=t[5]&&hl(t);function Gt(I,Q){return I[0].cards.length===0?On:Fn}let st=Gt(t),ce=st(t),x=t[3]&&Cl(t),ee=t[6]&&Tl(t);return{c(){e=g("div"),l=g("div"),n=g("h3"),o=k(s),r=_(),a=g("div"),f=g("div"),c=k(t[7]),m=_(),v=k(d),p=_(),h=g("div"),b=g("div"),y=k(w),A=_(),q=g("div"),L=g("div"),C=_(),ae.c(),S=_(),R=g("div"),W=g("h2"),N=k(O),B=_(),U=g("div"),Z=g("div"),te=g("label"),Y=k(D),re=k(":"),P=_(),j=g("select"),F=g("option"),F.textContent="English",z=g("option"),z.textContent="Norsk",X=_(),K=g("div"),oe=g("button"),pe=k(V),ze=_(),Ce=g("button"),ut=k(Be),Rt=_(),Pe=g("button"),ft=k(He),Ft=_(),ve=g("input"),Ot=_(),$&&$.c(),dt=_(),ie=g("div"),Se=g("div"),Ue=g("div"),gt=k(Ye),Qt=_(),Ve=g("div"),pt=k(Ke),jt=_(),ye=g("div"),We=g("div"),vt=k(Je),zt=_(),Ge=g("div"),mt=k(Xe),Bt=_(),Ae=g("div"),Ze=g("div"),ht=k($e),Ht=_(),xe=g("div"),_t=k(et),Ut=_(),Ee=g("div"),De=g("div"),kt=k(t[9]),Yt=k("%"),Vt=_(),tt=g("div"),bt=k(lt),Kt=_(),ce.c(),wt=_(),x&&x.c(),Re=_(),ee&&ee.c(),Fe=Nt(),u(n,"class","rare-cards-title svelte-148pdxv"),u(f,"class","unlock-count svelte-148pdxv"),u(b,"class","hp-progress-text svelte-148pdxv"),u(L,"class","hp-progress-fill svelte-148pdxv"),yt(L,"width",(16e3-t[8])/16e3*100+"%"),u(q,"class","hp-progress-bar svelte-148pdxv"),u(h,"class","hp-progress svelte-148pdxv"),u(a,"class","rare-cards-info svelte-148pdxv"),u(l,"class","rare-cards-section svelte-148pdxv"),u(W,"class","svelte-148pdxv"),u(te,"for","language-select"),u(te,"class","svelte-148pdxv"),F.__value="en",Qe(F,F.__value),u(F,"class","svelte-148pdxv"),z.__value="no",Qe(z,z.__value),u(z,"class","svelte-148pdxv"),u(j,"id","language-select"),u(j,"class","language-selector svelte-148pdxv"),u(Z,"class","language-selector-container svelte-148pdxv"),u(oe,"class","btn-secondary"),u(Ce,"class","btn-secondary"),u(Pe,"class","btn-error"),u(ve,"type","file"),u(ve,"accept",".json"),yt(ve,"display","none"),u(K,"class","header-actions svelte-148pdxv"),u(U,"class","header-controls svelte-148pdxv"),u(R,"class","collection-header svelte-148pdxv"),u(Ue,"class","stat-value svelte-148pdxv"),u(Ve,"class","stat-label svelte-148pdxv"),u(Se,"class","stat-card svelte-148pdxv"),u(We,"class","stat-value svelte-148pdxv"),u(Ge,"class","stat-label svelte-148pdxv"),u(ye,"class","stat-card svelte-148pdxv"),u(Ze,"class","stat-value svelte-148pdxv"),u(xe,"class","stat-label svelte-148pdxv"),u(Ae,"class","stat-card svelte-148pdxv"),u(De,"class","stat-value svelte-148pdxv"),u(tt,"class","stat-label svelte-148pdxv"),u(Ee,"class","stat-card svelte-148pdxv"),u(ie,"class","stats-section svelte-148pdxv"),u(e,"class","collection-view svelte-148pdxv")},m(I,Q){M(I,e,Q),i(e,l),i(l,n),i(n,o),i(l,r),i(l,a),i(a,f),i(f,c),i(f,m),i(f,v),i(a,p),i(a,h),i(h,b),i(b,y),i(h,A),i(h,q),i(q,L),i(l,C),ae.m(l,null),i(e,S),i(e,R),i(R,W),i(W,N),i(R,B),i(R,U),i(U,Z),i(Z,te),i(te,Y),i(te,re),i(Z,P),i(Z,j),i(j,F),i(j,z),at(j,t[2]),i(U,X),i(U,K),i(K,oe),i(oe,pe),i(K,ze),i(K,Ce),i(Ce,ut),i(K,Rt),i(K,Pe),i(Pe,ft),i(K,Ft),i(K,ve),t[22](ve),i(e,Ot),$&&$.m(e,null),i(e,dt),i(e,ie),i(ie,Se),i(Se,Ue),i(Ue,gt),i(Se,Qt),i(Se,Ve),i(Ve,pt),i(ie,jt),i(ie,ye),i(ye,We),i(We,vt),i(ye,zt),i(ye,Ge),i(Ge,mt),i(ie,Bt),i(ie,Ae),i(Ae,Ze),i(Ze,ht),i(Ae,Ht),i(Ae,xe),i(xe,_t),i(ie,Ut),i(ie,Ee),i(Ee,De),i(De,kt),i(De,Yt),i(Ee,Vt),i(Ee,tt),i(tt,bt),i(e,Kt),ce.m(e,null),M(I,wt,Q),x&&x.m(I,Q),M(I,Re,Q),ee&&ee.m(I,Q),M(I,Fe,Q),Ct||(Wt=[H(j,"change",t[16]),H(oe,"click",t[10]),H(Ce,"click",t[11]),H(Pe,"click",t[13]),H(ve,"change",t[12])],Ct=!0)},p(I,Q){Q[0]&2&&s!==(s=I[1].language==="Språk"?"Unlocked Rare Cards":"Låste opp sjeldne kort")&&E(o,s),Q[0]&128&&E(c,I[7]),Q[0]&2&&d!==(d=I[1].language==="Språk"?"cards unlocked":"kort låst opp")&&E(v,d),Q[0]&258&&w!==(w=I[1].language==="Språk"?`${I[8].toLocaleString()} HP to unlock 5 more rare cards`:`${I[8].toLocaleString()} HP for å låse opp 5 flere sjeldne kort`)&&E(y,w),Q[0]&256&&yt(L,"width",(16e3-I[8])/16e3*100+"%"),nt===(nt=Jt(I))&&ae?ae.p(I,Q):(ae.d(1),ae=nt(I),ae&&(ae.c(),ae.m(l,null))),Q[0]&2&&O!==(O=I[1].yourCollection+"")&&E(N,O),Q[0]&2&&D!==(D=(I[1].language||"Language")+"")&&E(Y,D),Q[0]&4&&at(j,I[2]),Q[0]&2&&V!==(V=I[1].exportBackup+"")&&E(pe,V),Q[0]&2&&Be!==(Be=I[1].importBackup+"")&&E(ut,Be),Q[0]&2&&He!==(He=I[1].clearThisSet+"")&&E(ft,He),I[5]?$?$.p(I,Q):($=hl(I),$.c(),$.m(e,dt)):$&&($.d(1),$=null),Q[0]&1&&Ye!==(Ye=I[0].cards.length+"")&&E(gt,Ye),Q[0]&2&&Ke!==(Ke=I[1].cardsCollected+"")&&E(pt,Ke),Q[0]&1&&Je!==(Je=I[0].stats.totalQuestions+"")&&E(vt,Je),Q[0]&2&&Xe!==(Xe=I[1].questionsAnswered+"")&&E(mt,Xe),Q[0]&1&&$e!==($e=I[0].stats.correctAnswers+"")&&E(ht,$e),Q[0]&2&&et!==(et=I[1].correctAnswers+"")&&E(_t,et),Q[0]&512&&E(kt,I[9]),Q[0]&2&&lt!==(lt=I[1].accuracy+"")&&E(bt,lt),st===(st=Gt(I))&&ce?ce.p(I,Q):(ce.d(1),ce=st(I),ce&&(ce.c(),ce.m(e,null))),I[3]?x?x.p(I,Q):(x=Cl(I),x.c(),x.m(Re.parentNode,Re)):x&&(x.d(1),x=null),I[6]?ee?ee.p(I,Q):(ee=Tl(I),ee.c(),ee.m(Fe.parentNode,Fe)):ee&&(ee.d(1),ee=null)},i:G,o:G,d(I){I&&(T(e),T(wt),T(Re),T(Fe)),ae.d(),t[22](null),$&&$.d(),ce.d(),x&&x.d(I),ee&&ee.d(I),Ct=!1,se(Wt)}}}const jn=()=>{};function zn(t,e,l){let n,s,o,{collection:r}=e,{t:a}=e,{language:f}=e,c=null;const m=ct();let d,v=null,p=!1;function h(){try{Nn(),y(a.collectionExported,"success")}catch{y(a.exportFailed,"error")}}function b(){d.click()}async function w(D){var P;const Y=D.target,re=(P=Y.files)==null?void 0:P[0];if(re){try{const j=await Pn(re);j.success?(y(a.collectionImported,"success"),m("refresh")):y(j.error||a.importFailed,"error")}catch{y(a.importFailed,"error")}Y.value=""}}function y(D,Y){l(5,v={text:D,type:Y}),setTimeout(()=>{l(5,v=null)},3e3)}function A(){l(6,p=!0)}function q(){l(6,p=!1)}function L(){try{un(),l(6,p=!1),y(a.collectionCleared,"success"),m("refresh")}catch{y(a.clearFailed,"error")}}function C(D){const Y=D.target;m("languageChange",Y.value)}function S(D){l(3,c=D)}function R(){l(3,c=null)}function W(D){$t.call(this,t,D)}function O(D){$t.call(this,t,D)}const N=D=>S(D);function B(D){Mt[D?"unshift":"push"](()=>{d=D,l(4,d)})}const U=D=>S(D),Z=D=>D.key==="Escape"&&R(),te=D=>D.key==="Escape"&&q();return t.$$set=D=>{"collection"in D&&l(0,r=D.collection),"t"in D&&l(1,a=D.t),"language"in D&&l(2,f=D.language)},t.$$.update=()=>{t.$$.dirty[0]&1&&l(9,n=r.stats.totalQuestions>0?Math.round(r.stats.correctAnswers/r.stats.totalQuestions*100):0),t.$$.dirty[0]&1&&Math.floor((r.stats.totalHpDefeated||0)/16e3),t.$$.dirty[0]&1&&l(8,s=16e3-(r.stats.totalHpDefeated||0)%16e3),t.$$.dirty[0]&1&&l(7,o=(r.unlockedRareCards||[]).length)},[r,a,f,c,d,v,p,o,s,n,h,b,w,A,q,L,C,S,R,W,O,N,B,U,Z,te]}class Bn extends we{constructor(e){super(),be(this,e,zn,Qn,ge,{collection:0,t:1,language:2},null,[-1,-1])}}function Hn(t){let e,l,n,s,o;return{c(){e=g("div"),l=g("div"),n=_(),s=g("p"),o=k(t[0]),u(l,"class","spinner svelte-1lxornd"),u(s,"class","svelte-1lxornd"),u(e,"class","loading-view svelte-1lxornd")},m(r,a){M(r,e,a),i(e,l),i(e,n),i(e,s),i(s,o)},p(r,[a]){a&1&&E(o,r[0])},i:G,o:G,d(r){r&&T(e)}}}function Un(t,e,l){let{message:n="Loading..."}=e;return t.$$set=s=>{"message"in s&&l(0,n=s.message)},[n]}class Yn extends we{constructor(e){super(),be(this,e,Un,Hn,ge,{message:0})}}function Vn(t){let e,l,n,s,o,r,a,f,c,m,d;return{c(){e=g("div"),l=g("div"),l.textContent="⚠️",n=_(),s=g("h2"),s.textContent="Oops!",o=_(),r=g("p"),a=k(t[0]),f=_(),c=g("button"),c.textContent="Try Again",u(l,"class","error-icon svelte-na0xmw"),u(s,"class","svelte-na0xmw"),u(r,"class","svelte-na0xmw"),u(c,"class","btn-primary"),u(e,"class","error-view svelte-na0xmw")},m(v,p){M(v,e,p),i(e,l),i(e,n),i(e,s),i(e,o),i(e,r),i(r,a),i(e,f),i(e,c),m||(d=H(c,"click",t[1]),m=!0)},p(v,[p]){p&1&&E(a,v[0])},i:G,o:G,d(v){v&&T(e),m=!1,d()}}}function Kn(t,e,l){let{message:n="Something went wrong"}=e;const s=ct();function o(){s("retry")}return t.$$set=r=>{"message"in r&&l(0,n=r.message)},[n,o]}class Wn extends we{constructor(e){super(),be(this,e,Kn,Vn,ge,{message:0})}}function Jn(t,e,l){const n=t.slice();return n[31]=e[l],n}function Gn(t){let e,l;return e=new Bn({props:{collection:t[4],t:t[14],language:t[0]}}),e.$on("refresh",t[24]),e.$on("languageChange",t[26]),{c(){Ne(e.$$.fragment)},m(n,s){_e(e,n,s),l=!0},p(n,s){const o={};s[0]&16&&(o.collection=n[4]),s[0]&16384&&(o.t=n[14]),s[0]&1&&(o.language=n[0]),e.$set(o)},i(n){l||(ne(e.$$.fragment,n),l=!0)},o(n){de(e.$$.fragment,n),l=!1},d(n){ke(e,n)}}}function Xn(t){let e,l,n,s;const o=[es,xn,$n,Zn],r=[];function a(f,c){return f[1]==="loading"?0:f[1]==="quiz"&&f[2]?1:f[1]==="result"&&f[2]?2:f[1]==="error"?3:-1}return~(e=a(t))&&(l=r[e]=o[e](t)),{c(){l&&l.c(),n=Nt()},m(f,c){~e&&r[e].m(f,c),M(f,n,c),s=!0},p(f,c){let m=e;e=a(f),e===m?~e&&r[e].p(f,c):(l&&(Rl(),de(r[m],1,1,()=>{r[m]=null}),Fl()),~e?(l=r[e],l?l.p(f,c):(l=r[e]=o[e](f),l.c()),ne(l,1),l.m(n.parentNode,n)):l=null)},i(f){s||(ne(l),s=!0)},o(f){de(l),s=!1},d(f){f&&T(n),~e&&r[e].d(f)}}}function Zn(t){let e,l;return e=new Wn({props:{message:t[8]}}),e.$on("retry",t[21]),{c(){Ne(e.$$.fragment)},m(n,s){_e(e,n,s),l=!0},p(n,s){const o={};s[0]&256&&(o.message=n[8]),e.$set(o)},i(n){l||(ne(e.$$.fragment,n),l=!0)},o(n){de(e.$$.fragment,n),l=!1},d(n){ke(e,n)}}}function $n(t){let e,l;return e=new In({props:{isCorrect:t[5],correctAnswer:t[2].correctAnswer,userAnswer:t[6],wonCard:t[7],t:t[14],needsStreak:t[12],streakProgress:t[13],currentStreak:t[4].currentStreak||0}}),e.$on("next",t[20]),{c(){Ne(e.$$.fragment)},m(n,s){_e(e,n,s),l=!0},p(n,s){const o={};s[0]&32&&(o.isCorrect=n[5]),s[0]&4&&(o.correctAnswer=n[2].correctAnswer),s[0]&64&&(o.userAnswer=n[6]),s[0]&128&&(o.wonCard=n[7]),s[0]&16384&&(o.t=n[14]),s[0]&4096&&(o.needsStreak=n[12]),s[0]&8192&&(o.streakProgress=n[13]),s[0]&16&&(o.currentStreak=n[4].currentStreak||0),e.$set(o)},i(n){l||(ne(e.$$.fragment,n),l=!0)},o(n){de(e.$$.fragment,n),l=!1},d(n){ke(e,n)}}}function xn(t){var m;let e,l,n,s,o,r,a,f=le(Tt),c=[];for(let d=0;d<f.length;d+=1)c[d]=ts(Jn(t,f,d));return s=new yn({props:{question:t[2],t:t[14],currentSet:((m=Tt.find(t[25]))==null?void 0:m.name)||""}}),s.$on("answer",t[19]),{c(){e=g("div"),l=g("select");for(let d=0;d<c.length;d+=1)c[d].c();n=_(),Ne(s.$$.fragment),u(l,"class","set-selector svelte-162mefo"),u(e,"class","set-selector-container svelte-162mefo")},m(d,v){M(d,e,v),i(e,l);for(let p=0;p<c.length;p+=1)c[p]&&c[p].m(l,null);at(l,t[15]),M(d,n,v),_e(s,d,v),o=!0,r||(a=H(l,"change",t[16]),r=!0)},p(d,v){var h;(!o||v[0]&32768)&&at(l,d[15]);const p={};v[0]&4&&(p.question=d[2]),v[0]&16384&&(p.t=d[14]),v[0]&2048&&(p.currentSet=((h=Tt.find(d[25]))==null?void 0:h.name)||""),s.$set(p)},i(d){o||(ne(s.$$.fragment,d),o=!0)},o(d){de(s.$$.fragment,d),o=!1},d(d){d&&(T(e),T(n)),he(c,d),ke(s,d),r=!1,a()}}}function es(t){let e,l;return e=new Yn({props:{message:t[14].loading}}),{c(){Ne(e.$$.fragment)},m(n,s){_e(e,n,s),l=!0},p(n,s){const o={};s[0]&16384&&(o.message=n[14].loading),e.$set(o)},i(n){l||(ne(e.$$.fragment,n),l=!0)},o(n){de(e.$$.fragment,n),l=!1},d(n){ke(e,n)}}}function ts(t){let e;return{c(){e=g("option"),e.textContent=`${t[31].name}`,e.__value=t[31].id,Qe(e,e.__value),u(e,"class","svelte-162mefo")},m(l,n){M(l,e,n)},p:G,d(l){l&&T(e)}}}function Ml(t){let e,l,n,s=t[0]==="en"?"Choose Your Language":"Velg språk",o,r,a,f=t[0]==="en"?"You can change this anytime in My Collection":"Du kan endre dette når som helst i Min samling",c,m,d,v,p,h,b,w;return{c(){e=g("div"),l=g("div"),n=g("h2"),o=k(s),r=_(),a=g("p"),c=k(f),m=_(),d=g("div"),v=g("button"),v.innerHTML='<span class="flag svelte-162mefo">🇬🇧</span> <span>English</span>',p=_(),h=g("button"),h.innerHTML='<span class="flag svelte-162mefo">🇳🇴</span> <span>Norsk</span>',u(n,"class","svelte-162mefo"),u(a,"class","svelte-162mefo"),u(v,"class","language-btn svelte-162mefo"),u(h,"class","language-btn svelte-162mefo"),u(d,"class","language-buttons svelte-162mefo"),u(l,"class","dialog language-dialog svelte-162mefo"),u(e,"class","dialog-overlay svelte-162mefo"),u(e,"role","button"),u(e,"tabindex","-1")},m(y,A){M(y,e,A),i(e,l),i(l,n),i(n,o),i(l,r),i(l,a),i(a,c),i(l,m),i(l,d),i(d,v),i(d,p),i(d,h),b||(w=[H(v,"click",t[27]),H(h,"click",t[28])],b=!0)},p(y,A){A[0]&1&&s!==(s=y[0]==="en"?"Choose Your Language":"Velg språk")&&E(o,s),A[0]&1&&f!==(f=y[0]==="en"?"You can change this anytime in My Collection":"Du kan endre dette når som helst i Min samling")&&E(c,f)},d(y){y&&T(e),b=!1,se(w)}}}function ls(t){var j;let e,l,n,s,o=t[14].appTitle+"",r,a,f,c,m=t[14].playQuiz+"",d,v,p,h=t[14].myCollection+"",b,w,y=(((j=t[4])==null?void 0:j.cards.length)||0)+"",A,q,L=t[3].length+"",C,S,R,W,O,N,B,U,Z,te;const D=[Xn,Gn],Y=[];function re(F,z){return F[9]==="quiz"?0:1}O=re(t),N=Y[O]=D[O](t);let P=t[10]&&Ml(t);return{c(){e=g("div"),l=g("header"),n=g("div"),s=g("h1"),r=k(o),a=_(),f=g("nav"),c=g("button"),d=k(m),v=_(),p=g("button"),b=k(h),w=k(" ("),A=k(y),q=k("/"),C=k(L),S=k(")"),R=_(),W=g("main"),N.c(),B=_(),P&&P.c(),u(s,"class","app-title svelte-162mefo"),u(c,"class","nav-btn svelte-162mefo"),J(c,"active",t[9]==="quiz"),u(p,"class","nav-btn svelte-162mefo"),J(p,"active",t[9]==="collection"),u(f,"class","svelte-162mefo"),u(n,"class","header-content svelte-162mefo"),u(l,"class","app-header svelte-162mefo"),u(W,"class","svelte-162mefo"),u(e,"class","app svelte-162mefo")},m(F,z){M(F,e,z),i(e,l),i(l,n),i(n,s),i(s,r),i(n,a),i(n,f),i(f,c),i(c,d),i(f,v),i(f,p),i(p,b),i(p,w),i(p,A),i(p,q),i(p,C),i(p,S),i(e,R),i(e,W),Y[O].m(W,null),i(e,B),P&&P.m(e,null),U=!0,Z||(te=[H(c,"click",t[23]),H(p,"click",t[22])],Z=!0)},p(F,z){var K;(!U||z[0]&16384)&&o!==(o=F[14].appTitle+"")&&E(r,o),(!U||z[0]&16384)&&m!==(m=F[14].playQuiz+"")&&E(d,m),(!U||z[0]&512)&&J(c,"active",F[9]==="quiz"),(!U||z[0]&16384)&&h!==(h=F[14].myCollection+"")&&E(b,h),(!U||z[0]&16)&&y!==(y=(((K=F[4])==null?void 0:K.cards.length)||0)+"")&&E(A,y),(!U||z[0]&8)&&L!==(L=F[3].length+"")&&E(C,L),(!U||z[0]&512)&&J(p,"active",F[9]==="collection");let X=O;O=re(F),O===X?Y[O].p(F,z):(Rl(),de(Y[X],1,1,()=>{Y[X]=null}),Fl(),N=Y[O],N?N.p(F,z):(N=Y[O]=D[O](F),N.c()),ne(N,1),N.m(W,null)),F[10]?P?P.p(F,z):(P=Ml(F),P.c(),P.m(e,null)):P&&(P.d(1),P=null)},i(F){U||(ne(N),U=!0)},o(F){de(N),U=!1},d(F){F&&T(e),Y[O].d(),P&&P.d(),Z=!1,se(te)}}}function ns(t,e,l){let n,s,o;Zt(t,it,P=>l(0,s=P)),Zt(t,It,P=>l(15,o=P));let r="loading",a=null,f=[],c,m=!1,d=0,v=null,p="",h="quiz",b=!1,w=o,y=!1,A=0;Xl(()=>{l(4,c=ue()),localStorage.getItem("tcg-seen-language-dialog")?S():l(10,b=!0)});function q(P){const j=P.target;It.set(j.value),l(11,w=j.value),l(3,f=[]),S()}function L(P){it.set(P)}function C(P){it.set(P),localStorage.setItem("tcg-seen-language-dialog","true"),l(10,b=!1),S()}async function S(){var P;try{l(1,r="loading"),f.length===0&&l(3,f=await el(w));const j=new Set(c.cards.map(V=>V.id)),F=f.filter(V=>!j.has(V.id));if(F.length===0)throw new Error("Congratulations! You have collected all cards from this set!");const z=rn(F),X=await sn(z.id,w),K=pn(X);if(!K)throw new Error("Could not generate a valid question. Please try again.");const oe=((P=X.rarity)==null?void 0:P.toLowerCase())||"common";l(12,y=oe!=="common"),c.streakCard&&c.streakCard.id===X.id?l(13,A=c.currentStreak||0):l(13,A=0),l(2,a=K),l(1,r="quiz")}catch(j){console.error("Error loading question:",j),l(8,p=j instanceof Error?j.message:"Failed to load question"),l(1,r="error")}}async function R(){const P=Math.floor((c.stats.totalHpDefeated-((a==null?void 0:a.card.hp)||0))/16e3),j=Math.floor(c.stats.totalHpDefeated/16e3);if(j>P){const F=j-P;f.length===0&&l(3,f=await el(w));const z=[...f].sort((V,pe)=>{const ze=parseInt(V.localId||"0");return parseInt(pe.localId||"0")-ze}),X=new Set((c.unlockedRareCards||[]).map(V=>V.id)),oe=z.filter(V=>!X.has(V.id)).slice(0,F*5);c.unlockedRareCards||l(4,c.unlockedRareCards=[],c),oe.forEach(V=>{const pe={id:V.id,name:V.name,image:V.image,hp:V.hp,types:V.types,rarity:V.rarity,collectedAt:new Date().toISOString()};c.unlockedRareCards.push(pe)}),Ie(c)}}function W(P){var F,z;if(!a)return;l(6,d=P.detail),l(5,m=vn(a,d));const j=m&&a.card.hp?a.card.hp:0;if(cn(m,j),l(7,v=null),m){let X=!1;if(y?(l(4,c=ue()),((F=c.streakCard)==null?void 0:F.id)===a.card.id?l(4,c.currentStreak=(c.currentStreak||0)+1,c):(l(4,c.streakCard=a.card,c),l(4,c.currentStreak=1,c)),c.currentStreak>=2&&(X=!0,l(4,c.currentStreak=0,c),l(4,c.streakCard=void 0,c)),Ie(c)):X=!0,X){const K={id:a.card.id,name:a.card.name,image:a.card.image,hp:a.card.hp,types:a.card.types,rarity:a.card.rarity,collectedAt:new Date().toISOString()};an(K)&&l(7,v=a.card)}}else l(4,c=ue()),y&&((z=c.streakCard)==null?void 0:z.id)===a.card.id&&(l(4,c.currentStreak=0,c),l(4,c.streakCard=void 0,c),Ie(c));l(4,c=ue()),m&&(R(),l(4,c=ue())),l(1,r="result")}function O(){S()}function N(){S()}function B(){l(9,h="collection"),l(4,c=ue())}function U(){l(9,h="quiz")}function Z(){l(4,c=ue())}const te=P=>P.id===w,D=P=>L(P.detail),Y=()=>C("en"),re=()=>C("no");return t.$$.update=()=>{t.$$.dirty[0]&1&&l(14,n=_n(s))},[s,r,a,f,c,m,d,v,p,h,b,w,y,A,n,o,q,L,C,W,O,N,B,U,Z,te,D,Y,re]}class ss extends we{constructor(e){super(),be(this,e,ns,ls,ge,{},null,[-1,-1])}}new ss({target:document.getElementById("app")});
